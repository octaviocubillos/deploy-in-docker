#!/usr/bin/env node
"use strict";var zP=Object.create;var Xf=Object.defineProperty;var YP=Object.getOwnPropertyDescriptor;var VP=Object.getOwnPropertyNames;var XP=Object.getPrototypeOf,JP=Object.prototype.hasOwnProperty;var tr=(t,e)=>()=>(t&&(e=t(t=0)),e);var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),eC=(t,e)=>{for(var r in e)Xf(t,r,{get:e[r],enumerable:!0})},tC=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of VP(e))!JP.call(t,i)&&i!==r&&Xf(t,i,{get:()=>e[i],enumerable:!(n=YP(e,i))||n.enumerable});return t};var Vt=(t,e,r)=>(r=t!=null?zP(XP(t)):{},tC(e||!t||!t.__esModule?Xf(r,"default",{value:t,enumerable:!0}):r,t)),ZP=t=>tC(Xf({},"__esModule",{value:!0}),t);var mu=x(Og=>{var Jf=class extends Error{constructor(e,r,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=r,this.exitCode=e,this.nestedError=void 0}},kg=class extends Jf{constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};Og.CommanderError=Jf;Og.InvalidArgumentError=kg});var Zf=x(Bg=>{var{InvalidArgumentError:eF}=mu(),Ng=class{constructor(e,r){switch(this.description=r||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e;break}this._name.length>3&&this._name.slice(-3)==="..."&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(e,r){return r===this.defaultValue||!Array.isArray(r)?[e]:r.concat(e)}default(e,r){return this.defaultValue=e,this.defaultValueDescription=r,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new eF(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(r,n):r},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function tF(t){let e=t.name()+(t.variadic===!0?"...":"");return t.required?"<"+e+">":"["+e+"]"}Bg.Argument=Ng;Bg.humanReadableArgName=tF});var Fg=x(rC=>{var{humanReadableArgName:rF}=Zf(),Pg=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(e){let r=e.commands.filter(i=>!i._hidden),n=e._getHelpCommand();return n&&!n._hidden&&r.push(n),this.sortSubcommands&&r.sort((i,s)=>i.name().localeCompare(s.name())),r}compareOptions(e,r){let n=i=>i.short?i.short.replace(/^-/,""):i.long.replace(/^--/,"");return n(e).localeCompare(n(r))}visibleOptions(e){let r=e.options.filter(i=>!i.hidden),n=e._getHelpOption();if(n&&!n.hidden){let i=n.short&&e._findOption(n.short),s=n.long&&e._findOption(n.long);!i&&!s?r.push(n):n.long&&!s?r.push(e.createOption(n.long,n.description)):n.short&&!i&&r.push(e.createOption(n.short,n.description))}return this.sortOptions&&r.sort(this.compareOptions),r}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];let r=[];for(let n=e.parent;n;n=n.parent){let i=n.options.filter(s=>!s.hidden);r.push(...i)}return this.sortOptions&&r.sort(this.compareOptions),r}visibleArguments(e){return e._argsDescription&&e.registeredArguments.forEach(r=>{r.description=r.description||e._argsDescription[r.name()]||""}),e.registeredArguments.find(r=>r.description)?e.registeredArguments:[]}subcommandTerm(e){let r=e.registeredArguments.map(n=>rF(n)).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(r?" "+r:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,r){return r.visibleCommands(e).reduce((n,i)=>Math.max(n,r.subcommandTerm(i).length),0)}longestOptionTermLength(e,r){return r.visibleOptions(e).reduce((n,i)=>Math.max(n,r.optionTerm(i).length),0)}longestGlobalOptionTermLength(e,r){return r.visibleGlobalOptions(e).reduce((n,i)=>Math.max(n,r.optionTerm(i).length),0)}longestArgumentTermLength(e,r){return r.visibleArguments(e).reduce((n,i)=>Math.max(n,r.argumentTerm(i).length),0)}commandUsage(e){let r=e._name;e._aliases[0]&&(r=r+"|"+e._aliases[0]);let n="";for(let i=e.parent;i;i=i.parent)n=i.name()+" "+n;return n+r+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){let r=[];return e.argChoices&&r.push(`choices: ${e.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),e.defaultValue!==void 0&&(e.required||e.optional||e.isBoolean()&&typeof e.defaultValue=="boolean")&&r.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),e.presetArg!==void 0&&e.optional&&r.push(`preset: ${JSON.stringify(e.presetArg)}`),e.envVar!==void 0&&r.push(`env: ${e.envVar}`),r.length>0?`${e.description} (${r.join(", ")})`:e.description}argumentDescription(e){let r=[];if(e.argChoices&&r.push(`choices: ${e.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),e.defaultValue!==void 0&&r.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),r.length>0){let n=`(${r.join(", ")})`;return e.description?`${e.description} ${n}`:n}return e.description}formatHelp(e,r){let n=r.padWidth(e,r),i=r.helpWidth||80,s=2,o=2;function a(g,m){if(m){let E=`${g.padEnd(n+o)}${m}`;return r.wrap(E,i-s,n+o)}return g}function l(g){return g.join(`
`).replace(/^/gm," ".repeat(s))}let u=[`Usage: ${r.commandUsage(e)}`,""],c=r.commandDescription(e);c.length>0&&(u=u.concat([r.wrap(c,i,0),""]));let f=r.visibleArguments(e).map(g=>a(r.argumentTerm(g),r.argumentDescription(g)));f.length>0&&(u=u.concat(["Arguments:",l(f),""]));let h=r.visibleOptions(e).map(g=>a(r.optionTerm(g),r.optionDescription(g)));if(h.length>0&&(u=u.concat(["Options:",l(h),""])),this.showGlobalOptions){let g=r.visibleGlobalOptions(e).map(m=>a(r.optionTerm(m),r.optionDescription(m)));g.length>0&&(u=u.concat(["Global Options:",l(g),""]))}let p=r.visibleCommands(e).map(g=>a(r.subcommandTerm(g),r.subcommandDescription(g)));return p.length>0&&(u=u.concat(["Commands:",l(p),""])),u.join(`
`)}padWidth(e,r){return Math.max(r.longestOptionTermLength(e,r),r.longestGlobalOptionTermLength(e,r),r.longestSubcommandTermLength(e,r),r.longestArgumentTermLength(e,r))}wrap(e,r,n,i=40){let s=" \\f\\t\\v\xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF",o=new RegExp(`[\\n][${s}]+`);if(e.match(o))return e;let a=r-n;if(a<i)return e;let l=e.slice(0,n),u=e.slice(n).replace(`\r
`,`
`),c=" ".repeat(n),h="\\s\u200B",p=new RegExp(`
|.{1,${a-1}}([${h}]|$)|[^${h}]+?([${h}]|$)`,"g"),g=u.match(p)||[];return l+g.map((m,E)=>m===`
`?"":(E>0?c:"")+m.trimEnd()).join(`
`)}};rC.Help=Pg});var qg=x(Ug=>{var{InvalidArgumentError:nF}=mu(),Lg=class{constructor(e,r){this.flags=e,this.description=r||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;let n=sF(e);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(e,r){return this.defaultValue=e,this.defaultValueDescription=r,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let r=e;return typeof e=="string"&&(r={[e]:!0}),this.implied=Object.assign(this.implied||{},r),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_concatValue(e,r){return r===this.defaultValue||!Array.isArray(r)?[e]:r.concat(e)}choices(e){return this.argChoices=e.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new nF(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(r,n):r},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return iF(this.name().replace(/^no-/,""))}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},Mg=class{constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach(r=>{r.negate?this.negativeOptions.set(r.attributeName(),r):this.positiveOptions.set(r.attributeName(),r)}),this.negativeOptions.forEach((r,n)=>{this.positiveOptions.has(n)&&this.dualOptions.add(n)})}valueFromOption(e,r){let n=r.attributeName();if(!this.dualOptions.has(n))return!0;let i=this.negativeOptions.get(n).presetArg,s=i!==void 0?i:!1;return r.negate===(s===e)}};function iF(t){return t.split("-").reduce((e,r)=>e+r[0].toUpperCase()+r.slice(1))}function sF(t){let e,r,n=t.split(/[ |,]+/);return n.length>1&&!/^[[<]/.test(n[1])&&(e=n.shift()),r=n.shift(),!e&&/^-[^-]$/.test(r)&&(e=r,r=void 0),{shortFlag:e,longFlag:r}}Ug.Option=Lg;Ug.DualOptions=Mg});var iC=x(nC=>{function oF(t,e){if(Math.abs(t.length-e.length)>3)return Math.max(t.length,e.length);let r=[];for(let n=0;n<=t.length;n++)r[n]=[n];for(let n=0;n<=e.length;n++)r[0][n]=n;for(let n=1;n<=e.length;n++)for(let i=1;i<=t.length;i++){let s=1;t[i-1]===e[n-1]?s=0:s=1,r[i][n]=Math.min(r[i-1][n]+1,r[i][n-1]+1,r[i-1][n-1]+s),i>1&&n>1&&t[i-1]===e[n-2]&&t[i-2]===e[n-1]&&(r[i][n]=Math.min(r[i][n],r[i-2][n-2]+1))}return r[t.length][e.length]}function aF(t,e){if(!e||e.length===0)return"";e=Array.from(new Set(e));let r=t.startsWith("--");r&&(t=t.slice(2),e=e.map(o=>o.slice(2)));let n=[],i=3,s=.4;return e.forEach(o=>{if(o.length<=1)return;let a=oF(t,o),l=Math.max(t.length,o.length);(l-a)/l>s&&(a<i?(i=a,n=[o]):a===i&&n.push(o))}),n.sort((o,a)=>o.localeCompare(a)),r&&(n=n.map(o=>`--${o}`)),n.length>1?`
(Did you mean one of ${n.join(", ")}?)`:n.length===1?`
(Did you mean ${n[0]}?)`:""}nC.suggestSimilar=aF});var uC=x(lC=>{var lF=require("node:events").EventEmitter,Hg=require("node:child_process"),Gi=require("node:path"),Wg=require("node:fs"),Xt=require("node:process"),{Argument:uF,humanReadableArgName:cF}=Zf(),{CommanderError:Qg}=mu(),{Help:fF}=Fg(),{Option:sC,DualOptions:hF}=qg(),{suggestSimilar:oC}=iC(),Gg=class t extends lF{constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:r=>Xt.stdout.write(r),writeErr:r=>Xt.stderr.write(r),getOutHelpWidth:()=>Xt.stdout.isTTY?Xt.stdout.columns:void 0,getErrHelpWidth:()=>Xt.stderr.isTTY?Xt.stderr.columns:void 0,outputError:(r,n)=>n(r)},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={}}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._helpOption=e._helpOption,this._helpCommand=e._helpCommand,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}_getCommandAndAncestors(){let e=[];for(let r=this;r;r=r.parent)e.push(r);return e}command(e,r,n){let i=r,s=n;typeof i=="object"&&i!==null&&(s=i,i=null),s=s||{};let[,o,a]=e.match(/([^ ]+) *(.*)/),l=this.createCommand(o);return i&&(l.description(i),l._executableHandler=!0),s.isDefault&&(this._defaultCommandName=l._name),l._hidden=!!(s.noHelp||s.hidden),l._executableFile=s.executableFile||null,a&&l.arguments(a),this._registerCommand(l),l.parent=this,l.copyInheritedSettings(this),i?this:l}createCommand(e){return new t(e)}createHelp(){return Object.assign(new fF,this.configureHelp())}configureHelp(e){return e===void 0?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return e===void 0?this._outputConfiguration:(Object.assign(this._outputConfiguration,e),this)}showHelpAfterError(e=!0){return typeof e!="string"&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,r){if(!e._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return r=r||{},r.isDefault&&(this._defaultCommandName=e._name),(r.noHelp||r.hidden)&&(e._hidden=!0),this._registerCommand(e),e.parent=this,e._checkForBrokenPassThrough(),this}createArgument(e,r){return new uF(e,r)}argument(e,r,n,i){let s=this.createArgument(e,r);return typeof n=="function"?s.default(i).argParser(n):s.default(n),this.addArgument(s),this}arguments(e){return e.trim().split(/ +/).forEach(r=>{this.argument(r)}),this}addArgument(e){let r=this.registeredArguments.slice(-1)[0];if(r&&r.variadic)throw new Error(`only the last argument can be variadic '${r.name()}'`);if(e.required&&e.defaultValue!==void 0&&e.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this.registeredArguments.push(e),this}helpCommand(e,r){if(typeof e=="boolean")return this._addImplicitHelpCommand=e,this;e=e??"help [command]";let[,n,i]=e.match(/([^ ]+) *(.*)/),s=r??"display help for command",o=this.createCommand(n);return o.helpOption(!1),i&&o.arguments(i),s&&o.description(s),this._addImplicitHelpCommand=!0,this._helpCommand=o,this}addHelpCommand(e,r){return typeof e!="object"?(this.helpCommand(e,r),this):(this._addImplicitHelpCommand=!0,this._helpCommand=e,this)}_getHelpCommand(){return this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(this._helpCommand===void 0&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(e,r){let n=["preSubcommand","preAction","postAction"];if(!n.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.
Expecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(r):this._lifeCycleHooks[e]=[r],this}exitOverride(e){return e?this._exitCallback=e:this._exitCallback=r=>{if(r.code!=="commander.executeSubCommandAsync")throw r},this}_exit(e,r,n){this._exitCallback&&this._exitCallback(new Qg(e,r,n)),Xt.exit(e)}action(e){let r=n=>{let i=this.registeredArguments.length,s=n.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),e.apply(this,s)};return this._actionHandler=r,this}createOption(e,r){return new sC(e,r)}_callParseArg(e,r,n,i){try{return e.parseArg(r,n)}catch(s){if(s.code==="commander.invalidArgument"){let o=`${i} ${s.message}`;this.error(o,{exitCode:s.exitCode,code:s.code})}throw s}}_registerOption(e){let r=e.short&&this._findOption(e.short)||e.long&&this._findOption(e.long);if(r){let n=e.long&&this._findOption(e.long)?e.long:e.short;throw new Error(`Cannot add option '${e.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${n}'
-  already used by option '${r.flags}'`)}this.options.push(e)}_registerCommand(e){let r=i=>[i.name()].concat(i.aliases()),n=r(e).find(i=>this._findCommand(i));if(n){let i=r(this._findCommand(n)).join("|"),s=r(e).join("|");throw new Error(`cannot add command '${s}' as already have command '${i}'`)}this.commands.push(e)}addOption(e){this._registerOption(e);let r=e.name(),n=e.attributeName();if(e.negate){let s=e.long.replace(/^--no-/,"--");this._findOption(s)||this.setOptionValueWithSource(n,e.defaultValue===void 0?!0:e.defaultValue,"default")}else e.defaultValue!==void 0&&this.setOptionValueWithSource(n,e.defaultValue,"default");let i=(s,o,a)=>{s==null&&e.presetArg!==void 0&&(s=e.presetArg);let l=this.getOptionValue(n);s!==null&&e.parseArg?s=this._callParseArg(e,s,l,o):s!==null&&e.variadic&&(s=e._concatValue(s,l)),s==null&&(e.negate?s=!1:e.isBoolean()||e.optional?s=!0:s=""),this.setOptionValueWithSource(n,s,a)};return this.on("option:"+r,s=>{let o=`error: option '${e.flags}' argument '${s}' is invalid.`;i(s,o,"cli")}),e.envVar&&this.on("optionEnv:"+r,s=>{let o=`error: option '${e.flags}' value '${s}' from env '${e.envVar}' is invalid.`;i(s,o,"env")}),this}_optionEx(e,r,n,i,s){if(typeof r=="object"&&r instanceof sC)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let o=this.createOption(r,n);if(o.makeOptionMandatory(!!e.mandatory),typeof i=="function")o.default(s).argParser(i);else if(i instanceof RegExp){let a=i;i=(l,u)=>{let c=a.exec(l);return c?c[0]:u},o.default(s).argParser(i)}else o.default(i);return this.addOption(o)}option(e,r,n,i){return this._optionEx({},e,r,n,i)}requiredOption(e,r,n,i){return this._optionEx({mandatory:!0},e,r,n,i)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){return this._passThroughOptions=!!e,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(e=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!e,this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,r){return this.setOptionValueWithSource(e,r,void 0)}setOptionValueWithSource(e,r,n){return this._storeOptionsAsProperties?this[e]=r:this._optionValues[e]=r,this._optionValueSources[e]=n,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let r;return this._getCommandAndAncestors().forEach(n=>{n.getOptionValueSource(e)!==void 0&&(r=n.getOptionValueSource(e))}),r}_prepareUserArgs(e,r){if(e!==void 0&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");if(r=r||{},e===void 0&&r.from===void 0){Xt.versions?.electron&&(r.from="electron");let i=Xt.execArgv??[];(i.includes("-e")||i.includes("--eval")||i.includes("-p")||i.includes("--print"))&&(r.from="eval")}e===void 0&&(e=Xt.argv),this.rawArgs=e.slice();let n;switch(r.from){case void 0:case"node":this._scriptPath=e[1],n=e.slice(2);break;case"electron":Xt.defaultApp?(this._scriptPath=e[1],n=e.slice(2)):n=e.slice(1);break;case"user":n=e.slice(0);break;case"eval":n=e.slice(1);break;default:throw new Error(`unexpected parse option { from: '${r.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(e,r){let n=this._prepareUserArgs(e,r);return this._parseCommand([],n),this}async parseAsync(e,r){let n=this._prepareUserArgs(e,r);return await this._parseCommand([],n),this}_executeSubCommand(e,r){r=r.slice();let n=!1,i=[".js",".ts",".tsx",".mjs",".cjs"];function s(c,f){let h=Gi.resolve(c,f);if(Wg.existsSync(h))return h;if(i.includes(Gi.extname(f)))return;let p=i.find(g=>Wg.existsSync(`${h}${g}`));if(p)return`${h}${p}`}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let o=e._executableFile||`${this._name}-${e._name}`,a=this._executableDir||"";if(this._scriptPath){let c;try{c=Wg.realpathSync(this._scriptPath)}catch{c=this._scriptPath}a=Gi.resolve(Gi.dirname(c),a)}if(a){let c=s(a,o);if(!c&&!e._executableFile&&this._scriptPath){let f=Gi.basename(this._scriptPath,Gi.extname(this._scriptPath));f!==this._name&&(c=s(a,`${f}-${e._name}`))}o=c||o}n=i.includes(Gi.extname(o));let l;Xt.platform!=="win32"?n?(r.unshift(o),r=aC(Xt.execArgv).concat(r),l=Hg.spawn(Xt.argv[0],r,{stdio:"inherit"})):l=Hg.spawn(o,r,{stdio:"inherit"}):(r.unshift(o),r=aC(Xt.execArgv).concat(r),l=Hg.spawn(Xt.execPath,r,{stdio:"inherit"})),l.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(f=>{Xt.on(f,()=>{l.killed===!1&&l.exitCode===null&&l.kill(f)})});let u=this._exitCallback;l.on("close",c=>{c=c??1,u?u(new Qg(c,"commander.executeSubCommandAsync","(close)")):Xt.exit(c)}),l.on("error",c=>{if(c.code==="ENOENT"){let f=a?`searched for local subcommand relative to directory '${a}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",h=`'${o}' does not exist
 - if '${e._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${f}`;throw new Error(h)}else if(c.code==="EACCES")throw new Error(`'${o}' not executable`);if(!u)Xt.exit(1);else{let f=new Qg(1,"commander.executeSubCommandAsync","(error)");f.nestedError=c,u(f)}}),this.runningCommand=l}_dispatchSubcommand(e,r,n){let i=this._findCommand(e);i||this.help({error:!0});let s;return s=this._chainOrCallSubCommandHook(s,i,"preSubcommand"),s=this._chainOrCall(s,()=>{if(i._executableHandler)this._executeSubCommand(i,r.concat(n));else return i._parseCommand(r,n)}),s}_dispatchHelpCommand(e){e||this.help();let r=this._findCommand(e);return r&&!r._executableHandler&&r.help(),this._dispatchSubcommand(e,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach((e,r)=>{e.required&&this.args[r]==null&&this.missingArgument(e.name())}),!(this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)&&this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){let e=(n,i,s)=>{let o=i;if(i!==null&&n.parseArg){let a=`error: command-argument value '${i}' is invalid for argument '${n.name()}'.`;o=this._callParseArg(n,i,s,a)}return o};this._checkNumberOfArguments();let r=[];this.registeredArguments.forEach((n,i)=>{let s=n.defaultValue;n.variadic?i<this.args.length?(s=this.args.slice(i),n.parseArg&&(s=s.reduce((o,a)=>e(n,a,o),n.defaultValue))):s===void 0&&(s=[]):i<this.args.length&&(s=this.args[i],n.parseArg&&(s=e(n,s,n.defaultValue))),r[i]=s}),this.processedArgs=r}_chainOrCall(e,r){return e&&e.then&&typeof e.then=="function"?e.then(()=>r()):r()}_chainOrCallHooks(e,r){let n=e,i=[];return this._getCommandAndAncestors().reverse().filter(s=>s._lifeCycleHooks[r]!==void 0).forEach(s=>{s._lifeCycleHooks[r].forEach(o=>{i.push({hookedCommand:s,callback:o})})}),r==="postAction"&&i.reverse(),i.forEach(s=>{n=this._chainOrCall(n,()=>s.callback(s.hookedCommand,this))}),n}_chainOrCallSubCommandHook(e,r,n){let i=e;return this._lifeCycleHooks[n]!==void 0&&this._lifeCycleHooks[n].forEach(s=>{i=this._chainOrCall(i,()=>s(this,r))}),i}_parseCommand(e,r){let n=this.parseOptions(r);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(n.operands),r=n.unknown,this.args=e.concat(r),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),r);if(this._getHelpCommand()&&e[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(e[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(r),this._dispatchSubcommand(this._defaultCommandName,e,r);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),this._outputHelpIfRequested(n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},s=`command:${this.name()}`;if(this._actionHandler){i(),this._processArguments();let o;return o=this._chainOrCallHooks(o,"preAction"),o=this._chainOrCall(o,()=>this._actionHandler(this.processedArgs)),this.parent&&(o=this._chainOrCall(o,()=>{this.parent.emit(s,e,r)})),o=this._chainOrCallHooks(o,"postAction"),o}if(this.parent&&this.parent.listenerCount(s))i(),this._processArguments(),this.parent.emit(s,e,r);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,r);this.listenerCount("command:*")?this.emit("command:*",e,r):this.commands.length?this.unknownCommand():(i(),this._processArguments())}else this.commands.length?(i(),this.help({error:!0})):(i(),this._processArguments())}_findCommand(e){if(e)return this.commands.find(r=>r._name===e||r._aliases.includes(e))}_findOption(e){return this.options.find(r=>r.is(e))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(e=>{e.options.forEach(r=>{r.mandatory&&e.getOptionValue(r.attributeName())===void 0&&e.missingMandatoryOptionValue(r)})})}_checkForConflictingLocalOptions(){let e=this.options.filter(n=>{let i=n.attributeName();return this.getOptionValue(i)===void 0?!1:this.getOptionValueSource(i)!=="default"});e.filter(n=>n.conflictsWith.length>0).forEach(n=>{let i=e.find(s=>n.conflictsWith.includes(s.attributeName()));i&&this._conflictingOption(n,i)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(e=>{e._checkForConflictingLocalOptions()})}parseOptions(e){let r=[],n=[],i=r,s=e.slice();function o(l){return l.length>1&&l[0]==="-"}let a=null;for(;s.length;){let l=s.shift();if(l==="--"){i===n&&i.push(l),i.push(...s);break}if(a&&!o(l)){this.emit(`option:${a.name()}`,l);continue}if(a=null,o(l)){let u=this._findOption(l);if(u){if(u.required){let c=s.shift();c===void 0&&this.optionMissingArgument(u),this.emit(`option:${u.name()}`,c)}else if(u.optional){let c=null;s.length>0&&!o(s[0])&&(c=s.shift()),this.emit(`option:${u.name()}`,c)}else this.emit(`option:${u.name()}`);a=u.variadic?u:null;continue}}if(l.length>2&&l[0]==="-"&&l[1]!=="-"){let u=this._findOption(`-${l[1]}`);if(u){u.required||u.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${u.name()}`,l.slice(2)):(this.emit(`option:${u.name()}`),s.unshift(`-${l.slice(2)}`));continue}}if(/^--[^=]+=/.test(l)){let u=l.indexOf("="),c=this._findOption(l.slice(0,u));if(c&&(c.required||c.optional)){this.emit(`option:${c.name()}`,l.slice(u+1));continue}}if(o(l)&&(i=n),(this._enablePositionalOptions||this._passThroughOptions)&&r.length===0&&n.length===0){if(this._findCommand(l)){r.push(l),s.length>0&&n.push(...s);break}else if(this._getHelpCommand()&&l===this._getHelpCommand().name()){r.push(l),s.length>0&&r.push(...s);break}else if(this._defaultCommandName){n.push(l),s.length>0&&n.push(...s);break}}if(this._passThroughOptions){i.push(l),s.length>0&&i.push(...s);break}i.push(l)}return{operands:r,unknown:n}}opts(){if(this._storeOptionsAsProperties){let e={},r=this.options.length;for(let n=0;n<r;n++){let i=this.options[n].attributeName();e[i]=i===this._versionOptionName?this._version:this[i]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((e,r)=>Object.assign(e,r.opts()),{})}error(e,r){this._outputConfiguration.outputError(`${e}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let n=r||{},i=n.exitCode||1,s=n.code||"commander.error";this._exit(i,s,e)}_parseOptionsEnv(){this.options.forEach(e=>{if(e.envVar&&e.envVar in Xt.env){let r=e.attributeName();(this.getOptionValue(r)===void 0||["default","config","env"].includes(this.getOptionValueSource(r)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,Xt.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}})}_parseOptionsImplied(){let e=new hF(this.options),r=n=>this.getOptionValue(n)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(n));this.options.filter(n=>n.implied!==void 0&&r(n.attributeName())&&e.valueFromOption(this.getOptionValue(n.attributeName()),n)).forEach(n=>{Object.keys(n.implied).filter(i=>!r(i)).forEach(i=>{this.setOptionValueWithSource(i,n.implied[i],"implied")})})}missingArgument(e){let r=`error: missing required argument '${e}'`;this.error(r,{code:"commander.missingArgument"})}optionMissingArgument(e){let r=`error: option '${e.flags}' argument missing`;this.error(r,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){let r=`error: required option '${e.flags}' not specified`;this.error(r,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,r){let n=o=>{let a=o.attributeName(),l=this.getOptionValue(a),u=this.options.find(f=>f.negate&&a===f.attributeName()),c=this.options.find(f=>!f.negate&&a===f.attributeName());return u&&(u.presetArg===void 0&&l===!1||u.presetArg!==void 0&&l===u.presetArg)?u:c||o},i=o=>{let a=n(o),l=a.attributeName();return this.getOptionValueSource(l)==="env"?`environment variable '${a.envVar}'`:`option '${a.flags}'`},s=`error: ${i(e)} cannot be used with ${i(r)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let r="";if(e.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{let o=s.createHelp().visibleOptions(s).filter(a=>a.long).map(a=>a.long);i=i.concat(o),s=s.parent}while(s&&!s._enablePositionalOptions);r=oC(e,i)}let n=`error: unknown option '${e}'${r}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;let r=this.registeredArguments.length,n=r===1?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${r} argument${n} but got ${e.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){let e=this.args[0],r="";if(this._showSuggestionAfterError){let i=[];this.createHelp().visibleCommands(this).forEach(s=>{i.push(s.name()),s.alias()&&i.push(s.alias())}),r=oC(e,i)}let n=`error: unknown command '${e}'${r}`;this.error(n,{code:"commander.unknownCommand"})}version(e,r,n){if(e===void 0)return this._version;this._version=e,r=r||"-V, --version",n=n||"output the version number";let i=this.createOption(r,n);return this._versionOptionName=i.attributeName(),this._registerOption(i),this.on("option:"+i.name(),()=>{this._outputConfiguration.writeOut(`${e}
`),this._exit(0,"commander.version",e)}),this}description(e,r){return e===void 0&&r===void 0?this._description:(this._description=e,r&&(this._argsDescription=r),this)}summary(e){return e===void 0?this._summary:(this._summary=e,this)}alias(e){if(e===void 0)return this._aliases[0];let r=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(r=this.commands[this.commands.length-1]),e===r._name)throw new Error("Command alias can't be the same as its name");let n=this.parent?._findCommand(e);if(n){let i=[n.name()].concat(n.aliases()).join("|");throw new Error(`cannot add alias '${e}' to command '${this.name()}' as already have command '${i}'`)}return r._aliases.push(e),this}aliases(e){return e===void 0?this._aliases:(e.forEach(r=>this.alias(r)),this)}usage(e){if(e===void 0){if(this._usage)return this._usage;let r=this.registeredArguments.map(n=>cF(n));return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?r:[]).join(" ")}return this._usage=e,this}name(e){return e===void 0?this._name:(this._name=e,this)}nameFromFilename(e){return this._name=Gi.basename(e,Gi.extname(e)),this}executableDir(e){return e===void 0?this._executableDir:(this._executableDir=e,this)}helpInformation(e){let r=this.createHelp();return r.helpWidth===void 0&&(r.helpWidth=e&&e.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),r.formatHelp(this,r)}_getHelpContext(e){e=e||{};let r={error:!!e.error},n;return r.error?n=i=>this._outputConfiguration.writeErr(i):n=i=>this._outputConfiguration.writeOut(i),r.write=e.write||n,r.command=this,r}outputHelp(e){let r;typeof e=="function"&&(r=e,e=void 0);let n=this._getHelpContext(e);this._getCommandAndAncestors().reverse().forEach(s=>s.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let i=this.helpInformation(n);if(r&&(i=r(i),typeof i!="string"&&!Buffer.isBuffer(i)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(i),this._getHelpOption()?.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",n),this._getCommandAndAncestors().forEach(s=>s.emit("afterAllHelp",n))}helpOption(e,r){return typeof e=="boolean"?(e?this._helpOption=this._helpOption??void 0:this._helpOption=null,this):(e=e??"-h, --help",r=r??"display help for command",this._helpOption=this.createOption(e,r),this)}_getHelpOption(){return this._helpOption===void 0&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(e){return this._helpOption=e,this}help(e){this.outputHelp(e);let r=Xt.exitCode||0;r===0&&e&&typeof e!="function"&&e.error&&(r=1),this._exit(r,"commander.help","(outputHelp)")}addHelpText(e,r){let n=["beforeAll","before","after","afterAll"];if(!n.includes(e))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${n.join("', '")}'`);let i=`${e}Help`;return this.on(i,s=>{let o;typeof r=="function"?o=r({error:s.error,command:s.command}):o=r,o&&s.write(`${o}
`)}),this}_outputHelpIfRequested(e){let r=this._getHelpOption();r&&e.find(i=>r.is(i))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}};function aC(t){return t.map(e=>{if(!e.startsWith("--inspect"))return e;let r,n="127.0.0.1",i="9229",s;return(s=e.match(/^(--inspect(-brk)?)$/))!==null?r=s[1]:(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(r=s[1],/^\d+$/.test(s[3])?i=s[3]:n=s[3]):(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(r=s[1],n=s[3],i=s[4]),r&&i!=="0"?`${r}=${n}:${parseInt(i)+1}`:e})}lC.Command=Gg});var dC=x(Dn=>{var{Argument:cC}=Zf(),{Command:jg}=uC(),{CommanderError:dF,InvalidArgumentError:fC}=mu(),{Help:pF}=Fg(),{Option:hC}=qg();Dn.program=new jg;Dn.createCommand=t=>new jg(t);Dn.createOption=(t,e)=>new hC(t,e);Dn.createArgument=(t,e)=>new cC(t,e);Dn.Command=jg;Dn.Option=hC;Dn.Argument=cC;Dn.Help=pF;Dn.CommanderError=dF;Dn.InvalidArgumentError=fC;Dn.InvalidOptionArgumentError=fC});var sw=x((_ne,iw)=>{"use strict";iw.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var sm=x((Ene,aw)=>{var bu=sw(),ow={};for(let t of Object.keys(bu))ow[bu[t]]=t;var Ie={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};aw.exports=Ie;for(let t of Object.keys(Ie)){if(!("channels"in Ie[t]))throw new Error("missing channels property: "+t);if(!("labels"in Ie[t]))throw new Error("missing channel labels property: "+t);if(Ie[t].labels.length!==Ie[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=Ie[t];delete Ie[t].channels,delete Ie[t].labels,Object.defineProperty(Ie[t],"channels",{value:e}),Object.defineProperty(Ie[t],"labels",{value:r})}Ie.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,a,l;s===i?a=0:e===s?a=(r-n)/o:r===s?a=2+(n-e)/o:n===s&&(a=4+(e-r)/o),a=Math.min(a*60,360),a<0&&(a+=360);let u=(i+s)/2;return s===i?l=0:u<=.5?l=o/(s+i):l=o/(2-s-i),[a,l*100,u*100]};Ie.rgb.hsv=function(t){let e,r,n,i,s,o=t[0]/255,a=t[1]/255,l=t[2]/255,u=Math.max(o,a,l),c=u-Math.min(o,a,l),f=function(h){return(u-h)/6/c+1/2};return c===0?(i=0,s=0):(s=c/u,e=f(o),r=f(a),n=f(l),o===u?i=n-r:a===u?i=1/3+e-n:l===u&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,u*100]};Ie.rgb.hwb=function(t){let e=t[0],r=t[1],n=t[2],i=Ie.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};Ie.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-r,1-n),s=(1-e-i)/(1-i)||0,o=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function M5(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}Ie.rgb.keyword=function(t){let e=ow[t];if(e)return e;let r=1/0,n;for(let i of Object.keys(bu)){let s=bu[i],o=M5(t,s);o<r&&(r=o,n=i)}return n};Ie.keyword.rgb=function(t){return bu[t]};Ie.rgb.xyz=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=e*.4124+r*.3576+n*.1805,s=e*.2126+r*.7152+n*.0722,o=e*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};Ie.rgb.lab=function(t){let e=Ie.rgb.xyz(t),r=e[0],n=e[1],i=e[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let s=116*n-16,o=500*(r-n),a=200*(n-i);return[s,o,a]};Ie.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s,o;if(r===0)return o=n*255,[o,o,o];n<.5?i=n*(1+r):i=n+r-n*r;let a=2*n-i,l=[0,0,0];for(let u=0;u<3;u++)s=e+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(i-a)*6*s:2*s<1?o=i:3*s<2?o=a+(i-a)*(2/3-s)*6:o=a,l[u]=o*255;return l};Ie.hsl.hsv=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;let o=(n+r)/2,a=n===0?2*i/(s+i):2*r/(n+r);return[e,a*100,o*100]};Ie.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-r),a=255*n*(1-r*s),l=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}};Ie.hsv.hsl=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,o;o=(2-r)*n;let a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};Ie.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s;i>1&&(r/=i,n/=i);let o=Math.floor(6*e),a=1-n;s=6*e-o,(o&1)!==0&&(s=1-s);let l=r+s*(a-r),u,c,f;switch(o){default:case 6:case 0:u=a,c=l,f=r;break;case 1:u=l,c=a,f=r;break;case 2:u=r,c=a,f=l;break;case 3:u=r,c=l,f=a;break;case 4:u=l,c=r,f=a;break;case 5:u=a,c=r,f=l;break}return[u*255,c*255,f*255]};Ie.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[s*255,o*255,a*255]};Ie.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,o;return i=e*3.2406+r*-1.5372+n*-.4986,s=e*-.9689+r*1.8758+n*.0415,o=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};Ie.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];e/=95.047,r/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*r-16,s=500*(e-r),o=200*(r-n);return[i,s,o]};Ie.lab.xyz=function(t){let e=t[0],r=t[1],n=t[2],i,s,o;s=(e+16)/116,i=r/500+s,o=s-n/200;let a=s**3,l=i**3,u=o**3;return s=a>.008856?a:(s-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};Ie.lab.lch=function(t){let e=t[0],r=t[1],n=t[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(r*r+n*n);return[e,o,i]};Ie.lch.lab=function(t){let e=t[0],r=t[1],i=t[2]/360*2*Math.PI,s=r*Math.cos(i),o=r*Math.sin(i);return[e,s,o]};Ie.rgb.ansi16=function(t,e=null){let[r,n,i]=t,s=e===null?Ie.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return s===2&&(o+=60),o};Ie.hsv.ansi16=function(t){return Ie.rgb.ansi16(Ie.hsv.rgb(t),t[2])};Ie.rgb.ansi256=function(t){let e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};Ie.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};Ie.ansi256.rgb=function(t){if(t>=232){let s=(t-232)*10+8;return[s,s,s]}t-=16;let e,r=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[r,n,i]};Ie.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};Ie.hex.rgb=function(t){let e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};Ie.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),o=i-s,a,l;return o<1?a=s/(1-o):a=0,o<=0?l=0:i===e?l=(r-n)/o%6:i===r?l=2+(n-e)/o:l=4+(e-r)/o,l/=6,l%=1,[l*360,o*100,a*100]};Ie.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};Ie.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};Ie.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],s=e%1*6,o=s%1,a=1-o,l=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};Ie.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};Ie.hcg.hsl=function(t){let e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};Ie.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};Ie.hwb.hcg=function(t){let e=t[1]/100,n=1-t[2]/100,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};Ie.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Ie.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Ie.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Ie.gray.hsl=function(t){return[0,0,t[0]]};Ie.gray.hsv=Ie.gray.hsl;Ie.gray.hwb=function(t){return[0,100,t[0]]};Ie.gray.cmyk=function(t){return[0,0,0,t[0]]};Ie.gray.lab=function(t){return[t[0],0,0]};Ie.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};Ie.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});var uw=x((yne,lw)=>{var ah=sm();function U5(){let t={},e=Object.keys(ah);for(let r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function q5(t){let e=U5(),r=[t];for(e[t].distance=0;r.length;){let n=r.pop(),i=Object.keys(ah[n]);for(let s=i.length,o=0;o<s;o++){let a=i[o],l=e[a];l.distance===-1&&(l.distance=e[n].distance+1,l.parent=n,r.unshift(a))}}return e}function H5(t,e){return function(r){return e(t(r))}}function W5(t,e){let r=[e[t].parent,t],n=ah[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)r.unshift(e[i].parent),n=H5(ah[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}lw.exports=function(t){let e=q5(t),r={},n=Object.keys(e);for(let i=n.length,s=0;s<i;s++){let o=n[s];e[o].parent!==null&&(r[o]=W5(o,e))}return r}});var fw=x((Ane,cw)=>{var om=sm(),Q5=uw(),Da={},G5=Object.keys(om);function j5(t){let e=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function $5(t){let e=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=t(r);if(typeof i=="object")for(let s=i.length,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}G5.forEach(t=>{Da[t]={},Object.defineProperty(Da[t],"channels",{value:om[t].channels}),Object.defineProperty(Da[t],"labels",{value:om[t].labels});let e=Q5(t);Object.keys(e).forEach(n=>{let i=e[n];Da[t][n]=$5(i),Da[t][n].raw=j5(i)})});cw.exports=Da});var _w=x((vne,mw)=>{"use strict";var hw=(t,e)=>(...r)=>`\x1B[${t(...r)+e}m`,dw=(t,e)=>(...r)=>{let n=t(...r);return`\x1B[${38+e};5;${n}m`},pw=(t,e)=>(...r)=>{let n=t(...r);return`\x1B[${38+e};2;${n[0]};${n[1]};${n[2]}m`},lh=t=>t,gw=(t,e,r)=>[t,e,r],Ia=(t,e,r)=>{Object.defineProperty(t,e,{get:()=>{let n=r();return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})},am,Ta=(t,e,r,n)=>{am===void 0&&(am=fw());let i=n?10:0,s={};for(let[o,a]of Object.entries(am)){let l=o==="ansi16"?"ansi":o;o===e?s[l]=t(r,i):typeof a=="object"&&(s[l]=t(a[e],i))}return s};function K5(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,n]of Object.entries(e)){for(let[i,s]of Object.entries(n))e[i]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},n[i]=e[i],t.set(s[0],s[1]);Object.defineProperty(e,r,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",Ia(e.color,"ansi",()=>Ta(hw,"ansi16",lh,!1)),Ia(e.color,"ansi256",()=>Ta(dw,"ansi256",lh,!1)),Ia(e.color,"ansi16m",()=>Ta(pw,"rgb",gw,!1)),Ia(e.bgColor,"ansi",()=>Ta(hw,"ansi16",lh,!0)),Ia(e.bgColor,"ansi256",()=>Ta(dw,"ansi256",lh,!0)),Ia(e.bgColor,"ansi16m",()=>Ta(pw,"rgb",gw,!0)),e}Object.defineProperty(mw,"exports",{enumerable:!0,get:K5})});var yw=x((bne,Ew)=>{"use strict";Ew.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var cm=x((Sne,vw)=>{"use strict";var z5=require("os"),Aw=require("tty"),In=yw(),{env:Er}=process,Ss;In("no-color")||In("no-colors")||In("color=false")||In("color=never")?Ss=0:(In("color")||In("colors")||In("color=true")||In("color=always"))&&(Ss=1);"FORCE_COLOR"in Er&&(Er.FORCE_COLOR==="true"?Ss=1:Er.FORCE_COLOR==="false"?Ss=0:Ss=Er.FORCE_COLOR.length===0?1:Math.min(parseInt(Er.FORCE_COLOR,10),3));function lm(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function um(t,e){if(Ss===0)return 0;if(In("color=16m")||In("color=full")||In("color=truecolor"))return 3;if(In("color=256"))return 2;if(t&&!e&&Ss===void 0)return 0;let r=Ss||0;if(Er.TERM==="dumb")return r;if(process.platform==="win32"){let n=z5.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Er)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Er)||Er.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Er)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Er.TEAMCITY_VERSION)?1:0;if(Er.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Er){let n=parseInt((Er.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Er.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Er.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Er.TERM)||"COLORTERM"in Er?1:r}function Y5(t){let e=um(t,t&&t.isTTY);return lm(e)}vw.exports={supportsColor:Y5,stdout:lm(um(!0,Aw.isatty(1))),stderr:lm(um(!0,Aw.isatty(2)))}});var Sw=x((Cne,bw)=>{"use strict";var V5=(t,e,r)=>{let n=t.indexOf(e);if(n===-1)return t;let i=e.length,s=0,o="";do o+=t.substr(s,n-s)+e+r,s=n+i,n=t.indexOf(e,s);while(n!==-1);return o+=t.substr(s),o},X5=(t,e,r,n)=>{let i=0,s="";do{let o=t[n-1]==="\r";s+=t.substr(i,(o?n-1:n)-i)+e+(o?`\r
`:`
`)+r,i=n+1,n=t.indexOf(`
`,i)}while(n!==-1);return s+=t.substr(i),s};bw.exports={stringReplaceAll:V5,stringEncaseCRLFWithFirstIndex:X5}});var Iw=x((wne,Dw)=>{"use strict";var J5=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,Cw=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,Z5=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,e8=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,t8=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function xw(t){let e=t[0]==="u",r=t[1]==="{";return e&&!r&&t.length===5||t[0]==="x"&&t.length===3?String.fromCharCode(parseInt(t.slice(1),16)):e&&r?String.fromCodePoint(parseInt(t.slice(2,-1),16)):t8.get(t)||t}function r8(t,e){let r=[],n=e.trim().split(/\s*,\s*/g),i;for(let s of n){let o=Number(s);if(!Number.isNaN(o))r.push(o);else if(i=s.match(Z5))r.push(i[2].replace(e8,(a,l,u)=>l?xw(l):u));else throw new Error(`Invalid Chalk template style argument: ${s} (in style '${t}')`)}return r}function n8(t){Cw.lastIndex=0;let e=[],r;for(;(r=Cw.exec(t))!==null;){let n=r[1];if(r[2]){let i=r8(n,r[2]);e.push([n].concat(i))}else e.push([n])}return e}function ww(t,e){let r={};for(let i of e)for(let s of i.styles)r[s[0]]=i.inverse?null:s.slice(1);let n=t;for(let[i,s]of Object.entries(r))if(Array.isArray(s)){if(!(i in n))throw new Error(`Unknown Chalk style: ${i}`);n=s.length>0?n[i](...s):n[i]}return n}Dw.exports=(t,e)=>{let r=[],n=[],i=[];if(e.replace(J5,(s,o,a,l,u,c)=>{if(o)i.push(xw(o));else if(l){let f=i.join("");i=[],n.push(r.length===0?f:ww(t,r)(f)),r.push({inverse:a,styles:n8(l)})}else if(u){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");n.push(ww(t,r)(i.join(""))),i=[],r.pop()}else i.push(c)}),n.push(i.join("")),r.length>0){let s=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(s)}return n.join("")}});var mm=x((xne,Bw)=>{"use strict";var Su=_w(),{stdout:hm,stderr:dm}=cm(),{stringReplaceAll:i8,stringEncaseCRLFWithFirstIndex:s8}=Sw(),{isArray:uh}=Array,Rw=["ansi","ansi","ansi256","ansi16m"],Ra=Object.create(null),o8=(t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=hm?hm.level:0;t.level=e.level===void 0?r:e.level},pm=class{constructor(e){return kw(e)}},kw=t=>{let e={};return o8(e,t),e.template=(...r)=>Nw(e.template,...r),Object.setPrototypeOf(e,ch.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},e.template.Instance=pm,e.template};function ch(t){return kw(t)}for(let[t,e]of Object.entries(Su))Ra[t]={get(){let r=fh(this,gm(e.open,e.close,this._styler),this._isEmpty);return Object.defineProperty(this,t,{value:r}),r}};Ra.visible={get(){let t=fh(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:t}),t}};var Ow=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let t of Ow)Ra[t]={get(){let{level:e}=this;return function(...r){let n=gm(Su.color[Rw[e]][t](...r),Su.color.close,this._styler);return fh(this,n,this._isEmpty)}}};for(let t of Ow){let e="bg"+t[0].toUpperCase()+t.slice(1);Ra[e]={get(){let{level:r}=this;return function(...n){let i=gm(Su.bgColor[Rw[r]][t](...n),Su.bgColor.close,this._styler);return fh(this,i,this._isEmpty)}}}}var a8=Object.defineProperties(()=>{},{...Ra,level:{enumerable:!0,get(){return this._generator.level},set(t){this._generator.level=t}}}),gm=(t,e,r)=>{let n,i;return r===void 0?(n=t,i=e):(n=r.openAll+t,i=e+r.closeAll),{open:t,close:e,openAll:n,closeAll:i,parent:r}},fh=(t,e,r)=>{let n=(...i)=>uh(i[0])&&uh(i[0].raw)?Tw(n,Nw(n,...i)):Tw(n,i.length===1?""+i[0]:i.join(" "));return Object.setPrototypeOf(n,a8),n._generator=t,n._styler=e,n._isEmpty=r,n},Tw=(t,e)=>{if(t.level<=0||!e)return t._isEmpty?"":e;let r=t._styler;if(r===void 0)return e;let{openAll:n,closeAll:i}=r;if(e.indexOf("\x1B")!==-1)for(;r!==void 0;)e=i8(e,r.close,r.open),r=r.parent;let s=e.indexOf(`
`);return s!==-1&&(e=s8(e,i,n,s)),n+e+i},fm,Nw=(t,...e)=>{let[r]=e;if(!uh(r)||!uh(r.raw))return e.join(" ");let n=e.slice(1),i=[r.raw[0]];for(let s=1;s<r.length;s++)i.push(String(n[s-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[s]));return fm===void 0&&(fm=Iw()),fm(t,i.join(""))};Object.defineProperties(ch.prototype,Ra);var hh=ch();hh.supportsColor=hm;hh.stderr=ch({level:dm?dm.level:0});hh.stderr.supportsColor=dm;Bw.exports=hh});var Em=x((Dne,_m)=>{var Pw=[],l8=Pw.forEach,u8=Pw.slice;_m.exports.extend=function(t){return l8.call(u8.call(arguments,1),function(e){if(e)for(var r in e)t[r]=e[r]}),t};_m.exports.parseJSON=function(t){try{return JSON.parse(t)}catch{return null}}});var Uw=x((Mw,ph)=>{var c8=require("https"),f8=require("http"),ym=require("url"),Fw=Em(),Ine=ph.exports.maxRedirects=5,Lw={https:c8,http:f8};for(dh in Lw)$i=function(){},$i.prototype=Lw[dh],$i=new $i,$i.request=(function(t){return function(e,r,n){n=n||{};var i=typeof e=="object"&&"maxRedirects"in e?e.maxRedirects:Mw.maxRedirects,s=Fw.extend({count:0,max:i,clientRequest:null,userCallback:r},n);if(s.count>s.max){var o=new Error("Max redirects exceeded. To allow more redirects, pass options.maxRedirects property.");return s.clientRequest.emit("error",o),s.clientRequest}s.count++;var a;typeof e=="string"?a=e:a=ym.format(Fw.extend({protocol:dh},e));var l=Object.getPrototypeOf(t).request(e,u(a,s));s.clientRequest||(s.clientRequest=l);function u(c,f){return function(h){if(h.statusCode<300||h.statusCode>399||!("location"in h.headers))return f.userCallback(h);var p=ym.resolve(c,h.headers.location),g=ym.parse(p).protocol;return g=g.substr(0,g.length-1),ph.exports[g].get(p,u(c,f),f)}}return l}})($i),$i.get=(function(t){return function(e,r,n){var i=t.request(e,r,n);return i.end(),i}})($i),ph.exports[dh]=$i;var $i,dh});var gh=x((Tne,qw)=>{qw.exports={newInvalidAsn1Error:function(t){var e=new Error;return e.name="InvalidAsn1Error",e.message=t||"",e}}});var mh=x((Rne,Hw)=>{Hw.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}});var Am=x((kne,Ww)=>{"use strict";var _h=require("buffer"),ka=_h.Buffer,Tn={},Rn;for(Rn in _h)_h.hasOwnProperty(Rn)&&(Rn==="SlowBuffer"||Rn==="Buffer"||(Tn[Rn]=_h[Rn]));var Oa=Tn.Buffer={};for(Rn in ka)ka.hasOwnProperty(Rn)&&(Rn==="allocUnsafe"||Rn==="allocUnsafeSlow"||(Oa[Rn]=ka[Rn]));Tn.Buffer.prototype=ka.prototype;(!Oa.from||Oa.from===Uint8Array.from)&&(Oa.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return ka(t,e,r)});Oa.alloc||(Oa.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=ka(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!Tn.kStringMaxLength)try{Tn.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}Tn.constants||(Tn.constants={MAX_LENGTH:Tn.kMaxLength},Tn.kStringMaxLength&&(Tn.constants.MAX_STRING_LENGTH=Tn.kStringMaxLength));Ww.exports=Tn});var jw=x((One,Gw)=>{var h8=require("assert"),Qw=Am().Buffer,Cu=mh(),d8=gh(),Na=d8.newInvalidAsn1Error;function jr(t){if(!t||!Qw.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0}Object.defineProperty(jr.prototype,"length",{enumerable:!0,get:function(){return this._len}});Object.defineProperty(jr.prototype,"offset",{enumerable:!0,get:function(){return this._offset}});Object.defineProperty(jr.prototype,"remain",{get:function(){return this._size-this._offset}});Object.defineProperty(jr.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}});jr.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=this._buf[this._offset]&255;return t||(this._offset+=1),e};jr.prototype.peek=function(){return this.readByte(!0)};jr.prototype.readLength=function(t){if(t===void 0&&(t=this._offset),t>=this._size)return null;var e=this._buf[t++]&255;if(e===null)return null;if((e&128)===128){if(e&=127,e===0)throw Na("Indefinite length not supported");if(e>4)throw Na("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;r<e;r++)this._len=(this._len<<8)+(this._buf[t++]&255)}else this._len=e;return t};jr.prototype.readSequence=function(t){var e=this.peek();if(e===null)return null;if(t!==void 0&&t!==e)throw Na("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return r===null?null:(this._offset=r,e)};jr.prototype.readInt=function(){return this._readTag(Cu.Integer)};jr.prototype.readBoolean=function(){return this._readTag(Cu.Boolean)!==0};jr.prototype.readEnumeration=function(){return this._readTag(Cu.Enumeration)};jr.prototype.readString=function(t,e){t||(t=Cu.OctetString);var r=this.peek();if(r===null)return null;if(r!==t)throw Na("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(n===null||this.length>this._size-n)return null;if(this._offset=n,this.length===0)return e?Qw.alloc(0):"";var i=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?i:i.toString("utf8")};jr.prototype.readOID=function(t){t||(t=Cu.OID);var e=this.readString(t,!0);if(e===null)return null;for(var r=[],n=0,i=0;i<e.length;i++){var s=e[i]&255;n<<=7,n+=s&127,(s&128)===0&&(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(".")};jr.prototype._readTag=function(t){h8.ok(t!==void 0);var e=this.peek();if(e===null)return null;if(e!==t)throw Na("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(r===null)return null;if(this.length>4)throw Na("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var n=this._buf[this._offset],i=0,s=0;s<this.length;s++)i<<=8,i|=this._buf[this._offset++]&255;return(n&128)===128&&s!==4&&(i-=1<<s*8),i>>0};Gw.exports=jr});var Kw=x((Nne,$w)=>{var Cs=require("assert"),Eh=Am().Buffer,ws=mh(),p8=gh(),yh=p8.newInvalidAsn1Error,g8={size:1024,growthFactor:8};function m8(t,e){Cs.ok(t),Cs.equal(typeof t,"object"),Cs.ok(e),Cs.equal(typeof e,"object");var r=Object.getOwnPropertyNames(t);return r.forEach(function(n){if(!e[n]){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i)}}),e}function Ur(t){t=m8(g8,t||{}),this._buf=Eh.alloc(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[]}Object.defineProperty(Ur.prototype,"buffer",{get:function(){if(this._seq.length)throw yh(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}});Ur.prototype.writeByte=function(t){if(typeof t!="number")throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t};Ur.prototype.writeInt=function(t,e){if(typeof t!="number")throw new TypeError("argument must be a Number");typeof e!="number"&&(e=ws.Integer);for(var r=4;((t&4286578688)===0||(t&4286578688)===-8388608)&&r>1;)r--,t<<=8;if(r>4)throw yh("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(t&4278190080)>>>24,t<<=8};Ur.prototype.writeNull=function(){this.writeByte(ws.Null),this.writeByte(0)};Ur.prototype.writeEnumeration=function(t,e){if(typeof t!="number")throw new TypeError("argument must be a Number");return typeof e!="number"&&(e=ws.Enumeration),this.writeInt(t,e)};Ur.prototype.writeBoolean=function(t,e){if(typeof t!="boolean")throw new TypeError("argument must be a Boolean");typeof e!="number"&&(e=ws.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0};Ur.prototype.writeString=function(t,e){if(typeof t!="string")throw new TypeError("argument must be a string (was: "+typeof t+")");typeof e!="number"&&(e=ws.OctetString);var r=Eh.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)};Ur.prototype.writeBuffer=function(t,e){if(typeof e!="number")throw new TypeError("tag must be a number");if(!Eh.isBuffer(t))throw new TypeError("argument must be a buffer");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length};Ur.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach(function(r){e.writeString(r)})};Ur.prototype.writeOID=function(t,e){if(typeof t!="string")throw new TypeError("argument must be a string");if(typeof e!="number"&&(e=ws.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");function r(o,a){a<128?o.push(a):a<16384?(o.push(a>>>7|128),o.push(a&127)):a<2097152?(o.push(a>>>14|128),o.push((a>>>7|128)&255),o.push(a&127)):a<268435456?(o.push(a>>>21|128),o.push((a>>>14|128)&255),o.push((a>>>7|128)&255),o.push(a&127)):(o.push((a>>>28|128)&255),o.push((a>>>21|128)&255),o.push((a>>>14|128)&255),o.push((a>>>7|128)&255),o.push(a&127))}var n=t.split("."),i=[];i.push(parseInt(n[0],10)*40+parseInt(n[1],10)),n.slice(2).forEach(function(o){r(i,parseInt(o,10))});var s=this;this._ensure(2+i.length),this.writeByte(e),this.writeLength(i.length),i.forEach(function(o){s.writeByte(o)})};Ur.prototype.writeLength=function(t){if(typeof t!="number")throw new TypeError("argument must be a Number");if(this._ensure(4),t<=127)this._buf[this._offset++]=t;else if(t<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(t<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else if(t<=16777215)this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else throw yh("Length too long (> 4 bytes)")};Ur.prototype.startSequence=function(t){typeof t!="number"&&(t=ws.Sequence|ws.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3};Ur.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(r<=127)this._shift(e,r,-2),this._buf[t]=r;else if(r<=255)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(r<=65535)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else if(r<=16777215)this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r;else throw yh("Sequence too long")};Ur.prototype._shift=function(t,e,r){Cs.ok(t!==void 0),Cs.ok(e!==void 0),Cs.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r};Ur.prototype._ensure=function(t){if(Cs.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=Eh.alloc(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}};$w.exports=Ur});var zw=x((Bne,bh)=>{var vm=gh(),bm=mh(),_8=jw(),E8=Kw();bh.exports={Reader:_8,Writer:E8};for(Ah in bm)bm.hasOwnProperty(Ah)&&(bh.exports[Ah]=bm[Ah]);var Ah;for(vh in vm)vm.hasOwnProperty(vh)&&(bh.exports[vh]=vm[vh]);var vh});var wu=x((Pne,Yw)=>{var Sm=zw();Yw.exports={Ber:Sm,BerReader:Sm.Reader,BerWriter:Sm.Writer}});var Vw=x((Fne,Sh)=>{(function(t){"use strict";var e=function(_){var b,v=new Float64Array(16);if(_)for(b=0;b<_.length;b++)v[b]=_[b];return v},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var s=e(),o=e([1]),a=e([56129,1]),l=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(_,b,v,d){_[b]=v>>24&255,_[b+1]=v>>16&255,_[b+2]=v>>8&255,_[b+3]=v&255,_[b+4]=d>>24&255,_[b+5]=d>>16&255,_[b+6]=d>>8&255,_[b+7]=d&255}function g(_,b,v,d,C){var q,G=0;for(q=0;q<C;q++)G|=_[b+q]^v[d+q];return(1&G-1>>>8)-1}function m(_,b,v,d){return g(_,b,v,d,16)}function E(_,b,v,d){return g(_,b,v,d,32)}function A(_,b,v,d){for(var C=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,q=v[0]&255|(v[1]&255)<<8|(v[2]&255)<<16|(v[3]&255)<<24,G=v[4]&255|(v[5]&255)<<8|(v[6]&255)<<16|(v[7]&255)<<24,ne=v[8]&255|(v[9]&255)<<8|(v[10]&255)<<16|(v[11]&255)<<24,ce=v[12]&255|(v[13]&255)<<8|(v[14]&255)<<16|(v[15]&255)<<24,Se=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,me=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,mt=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,be=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24,He=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24,We=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,Ke=v[16]&255|(v[17]&255)<<8|(v[18]&255)<<16|(v[19]&255)<<24,$e=v[20]&255|(v[21]&255)<<8|(v[22]&255)<<16|(v[23]&255)<<24,Qe=v[24]&255|(v[25]&255)<<8|(v[26]&255)<<16|(v[27]&255)<<24,je=v[28]&255|(v[29]&255)<<8|(v[30]&255)<<16|(v[31]&255)<<24,Ge=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Ce=C,Te=q,ye=G,xe=ne,De=ce,ge=Se,Y=me,V=mt,oe=be,re=He,ie=We,le=Ke,Pe=$e,ze=Qe,Xe=je,Ye=Ge,R,tt=0;tt<20;tt+=2)R=Ce+Pe|0,De^=R<<7|R>>>25,R=De+Ce|0,oe^=R<<9|R>>>23,R=oe+De|0,Pe^=R<<13|R>>>19,R=Pe+oe|0,Ce^=R<<18|R>>>14,R=ge+Te|0,re^=R<<7|R>>>25,R=re+ge|0,ze^=R<<9|R>>>23,R=ze+re|0,Te^=R<<13|R>>>19,R=Te+ze|0,ge^=R<<18|R>>>14,R=ie+Y|0,Xe^=R<<7|R>>>25,R=Xe+ie|0,ye^=R<<9|R>>>23,R=ye+Xe|0,Y^=R<<13|R>>>19,R=Y+ye|0,ie^=R<<18|R>>>14,R=Ye+le|0,xe^=R<<7|R>>>25,R=xe+Ye|0,V^=R<<9|R>>>23,R=V+xe|0,le^=R<<13|R>>>19,R=le+V|0,Ye^=R<<18|R>>>14,R=Ce+xe|0,Te^=R<<7|R>>>25,R=Te+Ce|0,ye^=R<<9|R>>>23,R=ye+Te|0,xe^=R<<13|R>>>19,R=xe+ye|0,Ce^=R<<18|R>>>14,R=ge+De|0,Y^=R<<7|R>>>25,R=Y+ge|0,V^=R<<9|R>>>23,R=V+Y|0,De^=R<<13|R>>>19,R=De+V|0,ge^=R<<18|R>>>14,R=ie+re|0,le^=R<<7|R>>>25,R=le+ie|0,oe^=R<<9|R>>>23,R=oe+le|0,re^=R<<13|R>>>19,R=re+oe|0,ie^=R<<18|R>>>14,R=Ye+Xe|0,Pe^=R<<7|R>>>25,R=Pe+Ye|0,ze^=R<<9|R>>>23,R=ze+Pe|0,Xe^=R<<13|R>>>19,R=Xe+ze|0,Ye^=R<<18|R>>>14;Ce=Ce+C|0,Te=Te+q|0,ye=ye+G|0,xe=xe+ne|0,De=De+ce|0,ge=ge+Se|0,Y=Y+me|0,V=V+mt|0,oe=oe+be|0,re=re+He|0,ie=ie+We|0,le=le+Ke|0,Pe=Pe+$e|0,ze=ze+Qe|0,Xe=Xe+je|0,Ye=Ye+Ge|0,_[0]=Ce>>>0&255,_[1]=Ce>>>8&255,_[2]=Ce>>>16&255,_[3]=Ce>>>24&255,_[4]=Te>>>0&255,_[5]=Te>>>8&255,_[6]=Te>>>16&255,_[7]=Te>>>24&255,_[8]=ye>>>0&255,_[9]=ye>>>8&255,_[10]=ye>>>16&255,_[11]=ye>>>24&255,_[12]=xe>>>0&255,_[13]=xe>>>8&255,_[14]=xe>>>16&255,_[15]=xe>>>24&255,_[16]=De>>>0&255,_[17]=De>>>8&255,_[18]=De>>>16&255,_[19]=De>>>24&255,_[20]=ge>>>0&255,_[21]=ge>>>8&255,_[22]=ge>>>16&255,_[23]=ge>>>24&255,_[24]=Y>>>0&255,_[25]=Y>>>8&255,_[26]=Y>>>16&255,_[27]=Y>>>24&255,_[28]=V>>>0&255,_[29]=V>>>8&255,_[30]=V>>>16&255,_[31]=V>>>24&255,_[32]=oe>>>0&255,_[33]=oe>>>8&255,_[34]=oe>>>16&255,_[35]=oe>>>24&255,_[36]=re>>>0&255,_[37]=re>>>8&255,_[38]=re>>>16&255,_[39]=re>>>24&255,_[40]=ie>>>0&255,_[41]=ie>>>8&255,_[42]=ie>>>16&255,_[43]=ie>>>24&255,_[44]=le>>>0&255,_[45]=le>>>8&255,_[46]=le>>>16&255,_[47]=le>>>24&255,_[48]=Pe>>>0&255,_[49]=Pe>>>8&255,_[50]=Pe>>>16&255,_[51]=Pe>>>24&255,_[52]=ze>>>0&255,_[53]=ze>>>8&255,_[54]=ze>>>16&255,_[55]=ze>>>24&255,_[56]=Xe>>>0&255,_[57]=Xe>>>8&255,_[58]=Xe>>>16&255,_[59]=Xe>>>24&255,_[60]=Ye>>>0&255,_[61]=Ye>>>8&255,_[62]=Ye>>>16&255,_[63]=Ye>>>24&255}function w(_,b,v,d){for(var C=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,q=v[0]&255|(v[1]&255)<<8|(v[2]&255)<<16|(v[3]&255)<<24,G=v[4]&255|(v[5]&255)<<8|(v[6]&255)<<16|(v[7]&255)<<24,ne=v[8]&255|(v[9]&255)<<8|(v[10]&255)<<16|(v[11]&255)<<24,ce=v[12]&255|(v[13]&255)<<8|(v[14]&255)<<16|(v[15]&255)<<24,Se=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,me=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,mt=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,be=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24,He=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24,We=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,Ke=v[16]&255|(v[17]&255)<<8|(v[18]&255)<<16|(v[19]&255)<<24,$e=v[20]&255|(v[21]&255)<<8|(v[22]&255)<<16|(v[23]&255)<<24,Qe=v[24]&255|(v[25]&255)<<8|(v[26]&255)<<16|(v[27]&255)<<24,je=v[28]&255|(v[29]&255)<<8|(v[30]&255)<<16|(v[31]&255)<<24,Ge=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Ce=C,Te=q,ye=G,xe=ne,De=ce,ge=Se,Y=me,V=mt,oe=be,re=He,ie=We,le=Ke,Pe=$e,ze=Qe,Xe=je,Ye=Ge,R,tt=0;tt<20;tt+=2)R=Ce+Pe|0,De^=R<<7|R>>>25,R=De+Ce|0,oe^=R<<9|R>>>23,R=oe+De|0,Pe^=R<<13|R>>>19,R=Pe+oe|0,Ce^=R<<18|R>>>14,R=ge+Te|0,re^=R<<7|R>>>25,R=re+ge|0,ze^=R<<9|R>>>23,R=ze+re|0,Te^=R<<13|R>>>19,R=Te+ze|0,ge^=R<<18|R>>>14,R=ie+Y|0,Xe^=R<<7|R>>>25,R=Xe+ie|0,ye^=R<<9|R>>>23,R=ye+Xe|0,Y^=R<<13|R>>>19,R=Y+ye|0,ie^=R<<18|R>>>14,R=Ye+le|0,xe^=R<<7|R>>>25,R=xe+Ye|0,V^=R<<9|R>>>23,R=V+xe|0,le^=R<<13|R>>>19,R=le+V|0,Ye^=R<<18|R>>>14,R=Ce+xe|0,Te^=R<<7|R>>>25,R=Te+Ce|0,ye^=R<<9|R>>>23,R=ye+Te|0,xe^=R<<13|R>>>19,R=xe+ye|0,Ce^=R<<18|R>>>14,R=ge+De|0,Y^=R<<7|R>>>25,R=Y+ge|0,V^=R<<9|R>>>23,R=V+Y|0,De^=R<<13|R>>>19,R=De+V|0,ge^=R<<18|R>>>14,R=ie+re|0,le^=R<<7|R>>>25,R=le+ie|0,oe^=R<<9|R>>>23,R=oe+le|0,re^=R<<13|R>>>19,R=re+oe|0,ie^=R<<18|R>>>14,R=Ye+Xe|0,Pe^=R<<7|R>>>25,R=Pe+Ye|0,ze^=R<<9|R>>>23,R=ze+Pe|0,Xe^=R<<13|R>>>19,R=Xe+ze|0,Ye^=R<<18|R>>>14;_[0]=Ce>>>0&255,_[1]=Ce>>>8&255,_[2]=Ce>>>16&255,_[3]=Ce>>>24&255,_[4]=ge>>>0&255,_[5]=ge>>>8&255,_[6]=ge>>>16&255,_[7]=ge>>>24&255,_[8]=ie>>>0&255,_[9]=ie>>>8&255,_[10]=ie>>>16&255,_[11]=ie>>>24&255,_[12]=Ye>>>0&255,_[13]=Ye>>>8&255,_[14]=Ye>>>16&255,_[15]=Ye>>>24&255,_[16]=Y>>>0&255,_[17]=Y>>>8&255,_[18]=Y>>>16&255,_[19]=Y>>>24&255,_[20]=V>>>0&255,_[21]=V>>>8&255,_[22]=V>>>16&255,_[23]=V>>>24&255,_[24]=oe>>>0&255,_[25]=oe>>>8&255,_[26]=oe>>>16&255,_[27]=oe>>>24&255,_[28]=re>>>0&255,_[29]=re>>>8&255,_[30]=re>>>16&255,_[31]=re>>>24&255}function k(_,b,v,d){A(_,b,v,d)}function S(_,b,v,d){w(_,b,v,d)}var B=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function F(_,b,v,d,C,q,G){var ne=new Uint8Array(16),ce=new Uint8Array(64),Se,me;for(me=0;me<16;me++)ne[me]=0;for(me=0;me<8;me++)ne[me]=q[me];for(;C>=64;){for(k(ce,ne,G,B),me=0;me<64;me++)_[b+me]=v[d+me]^ce[me];for(Se=1,me=8;me<16;me++)Se=Se+(ne[me]&255)|0,ne[me]=Se&255,Se>>>=8;C-=64,b+=64,d+=64}if(C>0)for(k(ce,ne,G,B),me=0;me<C;me++)_[b+me]=v[d+me]^ce[me];return 0}function M(_,b,v,d,C){var q=new Uint8Array(16),G=new Uint8Array(64),ne,ce;for(ce=0;ce<16;ce++)q[ce]=0;for(ce=0;ce<8;ce++)q[ce]=d[ce];for(;v>=64;){for(k(G,q,C,B),ce=0;ce<64;ce++)_[b+ce]=G[ce];for(ne=1,ce=8;ce<16;ce++)ne=ne+(q[ce]&255)|0,q[ce]=ne&255,ne>>>=8;v-=64,b+=64}if(v>0)for(k(G,q,C,B),ce=0;ce<v;ce++)_[b+ce]=G[ce];return 0}function D(_,b,v,d,C){var q=new Uint8Array(32);S(q,d,C,B);for(var G=new Uint8Array(8),ne=0;ne<8;ne++)G[ne]=d[ne+16];return M(_,b,v,G,q)}function I(_,b,v,d,C,q,G){var ne=new Uint8Array(32);S(ne,q,G,B);for(var ce=new Uint8Array(8),Se=0;Se<8;Se++)ce[Se]=q[Se+16];return F(_,b,v,d,C,ce,ne)}var N=function(_){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var b,v,d,C,q,G,ne,ce;b=_[0]&255|(_[1]&255)<<8,this.r[0]=b&8191,v=_[2]&255|(_[3]&255)<<8,this.r[1]=(b>>>13|v<<3)&8191,d=_[4]&255|(_[5]&255)<<8,this.r[2]=(v>>>10|d<<6)&7939,C=_[6]&255|(_[7]&255)<<8,this.r[3]=(d>>>7|C<<9)&8191,q=_[8]&255|(_[9]&255)<<8,this.r[4]=(C>>>4|q<<12)&255,this.r[5]=q>>>1&8190,G=_[10]&255|(_[11]&255)<<8,this.r[6]=(q>>>14|G<<2)&8191,ne=_[12]&255|(_[13]&255)<<8,this.r[7]=(G>>>11|ne<<5)&8065,ce=_[14]&255|(_[15]&255)<<8,this.r[8]=(ne>>>8|ce<<8)&8191,this.r[9]=ce>>>5&127,this.pad[0]=_[16]&255|(_[17]&255)<<8,this.pad[1]=_[18]&255|(_[19]&255)<<8,this.pad[2]=_[20]&255|(_[21]&255)<<8,this.pad[3]=_[22]&255|(_[23]&255)<<8,this.pad[4]=_[24]&255|(_[25]&255)<<8,this.pad[5]=_[26]&255|(_[27]&255)<<8,this.pad[6]=_[28]&255|(_[29]&255)<<8,this.pad[7]=_[30]&255|(_[31]&255)<<8};N.prototype.blocks=function(_,b,v){for(var d=this.fin?0:2048,C,q,G,ne,ce,Se,me,mt,be,He,We,Ke,$e,Qe,je,Ge,Ce,Te,ye,xe=this.h[0],De=this.h[1],ge=this.h[2],Y=this.h[3],V=this.h[4],oe=this.h[5],re=this.h[6],ie=this.h[7],le=this.h[8],Pe=this.h[9],ze=this.r[0],Xe=this.r[1],Ye=this.r[2],R=this.r[3],tt=this.r[4],_t=this.r[5],Et=this.r[6],Ze=this.r[7],ct=this.r[8],ft=this.r[9];v>=16;)C=_[b+0]&255|(_[b+1]&255)<<8,xe+=C&8191,q=_[b+2]&255|(_[b+3]&255)<<8,De+=(C>>>13|q<<3)&8191,G=_[b+4]&255|(_[b+5]&255)<<8,ge+=(q>>>10|G<<6)&8191,ne=_[b+6]&255|(_[b+7]&255)<<8,Y+=(G>>>7|ne<<9)&8191,ce=_[b+8]&255|(_[b+9]&255)<<8,V+=(ne>>>4|ce<<12)&8191,oe+=ce>>>1&8191,Se=_[b+10]&255|(_[b+11]&255)<<8,re+=(ce>>>14|Se<<2)&8191,me=_[b+12]&255|(_[b+13]&255)<<8,ie+=(Se>>>11|me<<5)&8191,mt=_[b+14]&255|(_[b+15]&255)<<8,le+=(me>>>8|mt<<8)&8191,Pe+=mt>>>5|d,be=0,He=be,He+=xe*ze,He+=De*(5*ft),He+=ge*(5*ct),He+=Y*(5*Ze),He+=V*(5*Et),be=He>>>13,He&=8191,He+=oe*(5*_t),He+=re*(5*tt),He+=ie*(5*R),He+=le*(5*Ye),He+=Pe*(5*Xe),be+=He>>>13,He&=8191,We=be,We+=xe*Xe,We+=De*ze,We+=ge*(5*ft),We+=Y*(5*ct),We+=V*(5*Ze),be=We>>>13,We&=8191,We+=oe*(5*Et),We+=re*(5*_t),We+=ie*(5*tt),We+=le*(5*R),We+=Pe*(5*Ye),be+=We>>>13,We&=8191,Ke=be,Ke+=xe*Ye,Ke+=De*Xe,Ke+=ge*ze,Ke+=Y*(5*ft),Ke+=V*(5*ct),be=Ke>>>13,Ke&=8191,Ke+=oe*(5*Ze),Ke+=re*(5*Et),Ke+=ie*(5*_t),Ke+=le*(5*tt),Ke+=Pe*(5*R),be+=Ke>>>13,Ke&=8191,$e=be,$e+=xe*R,$e+=De*Ye,$e+=ge*Xe,$e+=Y*ze,$e+=V*(5*ft),be=$e>>>13,$e&=8191,$e+=oe*(5*ct),$e+=re*(5*Ze),$e+=ie*(5*Et),$e+=le*(5*_t),$e+=Pe*(5*tt),be+=$e>>>13,$e&=8191,Qe=be,Qe+=xe*tt,Qe+=De*R,Qe+=ge*Ye,Qe+=Y*Xe,Qe+=V*ze,be=Qe>>>13,Qe&=8191,Qe+=oe*(5*ft),Qe+=re*(5*ct),Qe+=ie*(5*Ze),Qe+=le*(5*Et),Qe+=Pe*(5*_t),be+=Qe>>>13,Qe&=8191,je=be,je+=xe*_t,je+=De*tt,je+=ge*R,je+=Y*Ye,je+=V*Xe,be=je>>>13,je&=8191,je+=oe*ze,je+=re*(5*ft),je+=ie*(5*ct),je+=le*(5*Ze),je+=Pe*(5*Et),be+=je>>>13,je&=8191,Ge=be,Ge+=xe*Et,Ge+=De*_t,Ge+=ge*tt,Ge+=Y*R,Ge+=V*Ye,be=Ge>>>13,Ge&=8191,Ge+=oe*Xe,Ge+=re*ze,Ge+=ie*(5*ft),Ge+=le*(5*ct),Ge+=Pe*(5*Ze),be+=Ge>>>13,Ge&=8191,Ce=be,Ce+=xe*Ze,Ce+=De*Et,Ce+=ge*_t,Ce+=Y*tt,Ce+=V*R,be=Ce>>>13,Ce&=8191,Ce+=oe*Ye,Ce+=re*Xe,Ce+=ie*ze,Ce+=le*(5*ft),Ce+=Pe*(5*ct),be+=Ce>>>13,Ce&=8191,Te=be,Te+=xe*ct,Te+=De*Ze,Te+=ge*Et,Te+=Y*_t,Te+=V*tt,be=Te>>>13,Te&=8191,Te+=oe*R,Te+=re*Ye,Te+=ie*Xe,Te+=le*ze,Te+=Pe*(5*ft),be+=Te>>>13,Te&=8191,ye=be,ye+=xe*ft,ye+=De*ct,ye+=ge*Ze,ye+=Y*Et,ye+=V*_t,be=ye>>>13,ye&=8191,ye+=oe*tt,ye+=re*R,ye+=ie*Ye,ye+=le*Xe,ye+=Pe*ze,be+=ye>>>13,ye&=8191,be=(be<<2)+be|0,be=be+He|0,He=be&8191,be=be>>>13,We+=be,xe=He,De=We,ge=Ke,Y=$e,V=Qe,oe=je,re=Ge,ie=Ce,le=Te,Pe=ye,b+=16,v-=16;this.h[0]=xe,this.h[1]=De,this.h[2]=ge,this.h[3]=Y,this.h[4]=V,this.h[5]=oe,this.h[6]=re,this.h[7]=ie,this.h[8]=le,this.h[9]=Pe},N.prototype.finish=function(_,b){var v=new Uint16Array(10),d,C,q,G;if(this.leftover){for(G=this.leftover,this.buffer[G++]=1;G<16;G++)this.buffer[G]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(d=this.h[1]>>>13,this.h[1]&=8191,G=2;G<10;G++)this.h[G]+=d,d=this.h[G]>>>13,this.h[G]&=8191;for(this.h[0]+=d*5,d=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=d,d=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=d,v[0]=this.h[0]+5,d=v[0]>>>13,v[0]&=8191,G=1;G<10;G++)v[G]=this.h[G]+d,d=v[G]>>>13,v[G]&=8191;for(v[9]-=8192,C=(d^1)-1,G=0;G<10;G++)v[G]&=C;for(C=~C,G=0;G<10;G++)this.h[G]=this.h[G]&C|v[G];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,q=this.h[0]+this.pad[0],this.h[0]=q&65535,G=1;G<8;G++)q=(this.h[G]+this.pad[G]|0)+(q>>>16)|0,this.h[G]=q&65535;_[b+0]=this.h[0]>>>0&255,_[b+1]=this.h[0]>>>8&255,_[b+2]=this.h[1]>>>0&255,_[b+3]=this.h[1]>>>8&255,_[b+4]=this.h[2]>>>0&255,_[b+5]=this.h[2]>>>8&255,_[b+6]=this.h[3]>>>0&255,_[b+7]=this.h[3]>>>8&255,_[b+8]=this.h[4]>>>0&255,_[b+9]=this.h[4]>>>8&255,_[b+10]=this.h[5]>>>0&255,_[b+11]=this.h[5]>>>8&255,_[b+12]=this.h[6]>>>0&255,_[b+13]=this.h[6]>>>8&255,_[b+14]=this.h[7]>>>0&255,_[b+15]=this.h[7]>>>8&255},N.prototype.update=function(_,b,v){var d,C;if(this.leftover){for(C=16-this.leftover,C>v&&(C=v),d=0;d<C;d++)this.buffer[this.leftover+d]=_[b+d];if(v-=C,b+=C,this.leftover+=C,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(v>=16&&(C=v-v%16,this.blocks(_,b,C),b+=C,v-=C),v){for(d=0;d<v;d++)this.buffer[this.leftover+d]=_[b+d];this.leftover+=v}};function T(_,b,v,d,C,q){var G=new N(q);return G.update(v,d,C),G.finish(_,b),0}function Q(_,b,v,d,C,q){var G=new Uint8Array(16);return T(G,0,v,d,C,q),m(_,b,G,0)}function P(_,b,v,d,C){var q;if(v<32)return-1;for(I(_,0,b,0,v,d,C),T(_,16,_,32,v-32,_),q=0;q<16;q++)_[q]=0;return 0}function y(_,b,v,d,C){var q,G=new Uint8Array(32);if(v<32||(D(G,0,32,d,C),Q(b,16,b,32,v-32,G)!==0))return-1;for(I(_,0,b,0,v,d,C),q=0;q<32;q++)_[q]=0;return 0}function O(_,b){var v;for(v=0;v<16;v++)_[v]=b[v]|0}function z(_){var b,v,d=1;for(b=0;b<16;b++)v=_[b]+d+65535,d=Math.floor(v/65536),_[b]=v-d*65536;_[0]+=d-1+37*(d-1)}function J(_,b,v){for(var d,C=~(v-1),q=0;q<16;q++)d=C&(_[q]^b[q]),_[q]^=d,b[q]^=d}function L(_,b){var v,d,C,q=e(),G=e();for(v=0;v<16;v++)G[v]=b[v];for(z(G),z(G),z(G),d=0;d<2;d++){for(q[0]=G[0]-65517,v=1;v<15;v++)q[v]=G[v]-65535-(q[v-1]>>16&1),q[v-1]&=65535;q[15]=G[15]-32767-(q[14]>>16&1),C=q[15]>>16&1,q[14]&=65535,J(G,q,1-C)}for(v=0;v<16;v++)_[2*v]=G[v]&255,_[2*v+1]=G[v]>>8}function $(_,b){var v=new Uint8Array(32),d=new Uint8Array(32);return L(v,_),L(d,b),E(v,0,d,0)}function K(_){var b=new Uint8Array(32);return L(b,_),b[0]&1}function Z(_,b){var v;for(v=0;v<16;v++)_[v]=b[2*v]+(b[2*v+1]<<8);_[15]&=32767}function fe(_,b,v){for(var d=0;d<16;d++)_[d]=b[d]+v[d]}function ue(_,b,v){for(var d=0;d<16;d++)_[d]=b[d]-v[d]}function he(_,b,v){var d,C,q=0,G=0,ne=0,ce=0,Se=0,me=0,mt=0,be=0,He=0,We=0,Ke=0,$e=0,Qe=0,je=0,Ge=0,Ce=0,Te=0,ye=0,xe=0,De=0,ge=0,Y=0,V=0,oe=0,re=0,ie=0,le=0,Pe=0,ze=0,Xe=0,Ye=0,R=v[0],tt=v[1],_t=v[2],Et=v[3],Ze=v[4],ct=v[5],ft=v[6],er=v[7],Ct=v[8],Kt=v[9],zt=v[10],Yt=v[11],fr=v[12],Br=v[13],Pr=v[14],Fr=v[15];d=b[0],q+=d*R,G+=d*tt,ne+=d*_t,ce+=d*Et,Se+=d*Ze,me+=d*ct,mt+=d*ft,be+=d*er,He+=d*Ct,We+=d*Kt,Ke+=d*zt,$e+=d*Yt,Qe+=d*fr,je+=d*Br,Ge+=d*Pr,Ce+=d*Fr,d=b[1],G+=d*R,ne+=d*tt,ce+=d*_t,Se+=d*Et,me+=d*Ze,mt+=d*ct,be+=d*ft,He+=d*er,We+=d*Ct,Ke+=d*Kt,$e+=d*zt,Qe+=d*Yt,je+=d*fr,Ge+=d*Br,Ce+=d*Pr,Te+=d*Fr,d=b[2],ne+=d*R,ce+=d*tt,Se+=d*_t,me+=d*Et,mt+=d*Ze,be+=d*ct,He+=d*ft,We+=d*er,Ke+=d*Ct,$e+=d*Kt,Qe+=d*zt,je+=d*Yt,Ge+=d*fr,Ce+=d*Br,Te+=d*Pr,ye+=d*Fr,d=b[3],ce+=d*R,Se+=d*tt,me+=d*_t,mt+=d*Et,be+=d*Ze,He+=d*ct,We+=d*ft,Ke+=d*er,$e+=d*Ct,Qe+=d*Kt,je+=d*zt,Ge+=d*Yt,Ce+=d*fr,Te+=d*Br,ye+=d*Pr,xe+=d*Fr,d=b[4],Se+=d*R,me+=d*tt,mt+=d*_t,be+=d*Et,He+=d*Ze,We+=d*ct,Ke+=d*ft,$e+=d*er,Qe+=d*Ct,je+=d*Kt,Ge+=d*zt,Ce+=d*Yt,Te+=d*fr,ye+=d*Br,xe+=d*Pr,De+=d*Fr,d=b[5],me+=d*R,mt+=d*tt,be+=d*_t,He+=d*Et,We+=d*Ze,Ke+=d*ct,$e+=d*ft,Qe+=d*er,je+=d*Ct,Ge+=d*Kt,Ce+=d*zt,Te+=d*Yt,ye+=d*fr,xe+=d*Br,De+=d*Pr,ge+=d*Fr,d=b[6],mt+=d*R,be+=d*tt,He+=d*_t,We+=d*Et,Ke+=d*Ze,$e+=d*ct,Qe+=d*ft,je+=d*er,Ge+=d*Ct,Ce+=d*Kt,Te+=d*zt,ye+=d*Yt,xe+=d*fr,De+=d*Br,ge+=d*Pr,Y+=d*Fr,d=b[7],be+=d*R,He+=d*tt,We+=d*_t,Ke+=d*Et,$e+=d*Ze,Qe+=d*ct,je+=d*ft,Ge+=d*er,Ce+=d*Ct,Te+=d*Kt,ye+=d*zt,xe+=d*Yt,De+=d*fr,ge+=d*Br,Y+=d*Pr,V+=d*Fr,d=b[8],He+=d*R,We+=d*tt,Ke+=d*_t,$e+=d*Et,Qe+=d*Ze,je+=d*ct,Ge+=d*ft,Ce+=d*er,Te+=d*Ct,ye+=d*Kt,xe+=d*zt,De+=d*Yt,ge+=d*fr,Y+=d*Br,V+=d*Pr,oe+=d*Fr,d=b[9],We+=d*R,Ke+=d*tt,$e+=d*_t,Qe+=d*Et,je+=d*Ze,Ge+=d*ct,Ce+=d*ft,Te+=d*er,ye+=d*Ct,xe+=d*Kt,De+=d*zt,ge+=d*Yt,Y+=d*fr,V+=d*Br,oe+=d*Pr,re+=d*Fr,d=b[10],Ke+=d*R,$e+=d*tt,Qe+=d*_t,je+=d*Et,Ge+=d*Ze,Ce+=d*ct,Te+=d*ft,ye+=d*er,xe+=d*Ct,De+=d*Kt,ge+=d*zt,Y+=d*Yt,V+=d*fr,oe+=d*Br,re+=d*Pr,ie+=d*Fr,d=b[11],$e+=d*R,Qe+=d*tt,je+=d*_t,Ge+=d*Et,Ce+=d*Ze,Te+=d*ct,ye+=d*ft,xe+=d*er,De+=d*Ct,ge+=d*Kt,Y+=d*zt,V+=d*Yt,oe+=d*fr,re+=d*Br,ie+=d*Pr,le+=d*Fr,d=b[12],Qe+=d*R,je+=d*tt,Ge+=d*_t,Ce+=d*Et,Te+=d*Ze,ye+=d*ct,xe+=d*ft,De+=d*er,ge+=d*Ct,Y+=d*Kt,V+=d*zt,oe+=d*Yt,re+=d*fr,ie+=d*Br,le+=d*Pr,Pe+=d*Fr,d=b[13],je+=d*R,Ge+=d*tt,Ce+=d*_t,Te+=d*Et,ye+=d*Ze,xe+=d*ct,De+=d*ft,ge+=d*er,Y+=d*Ct,V+=d*Kt,oe+=d*zt,re+=d*Yt,ie+=d*fr,le+=d*Br,Pe+=d*Pr,ze+=d*Fr,d=b[14],Ge+=d*R,Ce+=d*tt,Te+=d*_t,ye+=d*Et,xe+=d*Ze,De+=d*ct,ge+=d*ft,Y+=d*er,V+=d*Ct,oe+=d*Kt,re+=d*zt,ie+=d*Yt,le+=d*fr,Pe+=d*Br,ze+=d*Pr,Xe+=d*Fr,d=b[15],Ce+=d*R,Te+=d*tt,ye+=d*_t,xe+=d*Et,De+=d*Ze,ge+=d*ct,Y+=d*ft,V+=d*er,oe+=d*Ct,re+=d*Kt,ie+=d*zt,le+=d*Yt,Pe+=d*fr,ze+=d*Br,Xe+=d*Pr,Ye+=d*Fr,q+=38*Te,G+=38*ye,ne+=38*xe,ce+=38*De,Se+=38*ge,me+=38*Y,mt+=38*V,be+=38*oe,He+=38*re,We+=38*ie,Ke+=38*le,$e+=38*Pe,Qe+=38*ze,je+=38*Xe,Ge+=38*Ye,C=1,d=q+C+65535,C=Math.floor(d/65536),q=d-C*65536,d=G+C+65535,C=Math.floor(d/65536),G=d-C*65536,d=ne+C+65535,C=Math.floor(d/65536),ne=d-C*65536,d=ce+C+65535,C=Math.floor(d/65536),ce=d-C*65536,d=Se+C+65535,C=Math.floor(d/65536),Se=d-C*65536,d=me+C+65535,C=Math.floor(d/65536),me=d-C*65536,d=mt+C+65535,C=Math.floor(d/65536),mt=d-C*65536,d=be+C+65535,C=Math.floor(d/65536),be=d-C*65536,d=He+C+65535,C=Math.floor(d/65536),He=d-C*65536,d=We+C+65535,C=Math.floor(d/65536),We=d-C*65536,d=Ke+C+65535,C=Math.floor(d/65536),Ke=d-C*65536,d=$e+C+65535,C=Math.floor(d/65536),$e=d-C*65536,d=Qe+C+65535,C=Math.floor(d/65536),Qe=d-C*65536,d=je+C+65535,C=Math.floor(d/65536),je=d-C*65536,d=Ge+C+65535,C=Math.floor(d/65536),Ge=d-C*65536,d=Ce+C+65535,C=Math.floor(d/65536),Ce=d-C*65536,q+=C-1+37*(C-1),C=1,d=q+C+65535,C=Math.floor(d/65536),q=d-C*65536,d=G+C+65535,C=Math.floor(d/65536),G=d-C*65536,d=ne+C+65535,C=Math.floor(d/65536),ne=d-C*65536,d=ce+C+65535,C=Math.floor(d/65536),ce=d-C*65536,d=Se+C+65535,C=Math.floor(d/65536),Se=d-C*65536,d=me+C+65535,C=Math.floor(d/65536),me=d-C*65536,d=mt+C+65535,C=Math.floor(d/65536),mt=d-C*65536,d=be+C+65535,C=Math.floor(d/65536),be=d-C*65536,d=He+C+65535,C=Math.floor(d/65536),He=d-C*65536,d=We+C+65535,C=Math.floor(d/65536),We=d-C*65536,d=Ke+C+65535,C=Math.floor(d/65536),Ke=d-C*65536,d=$e+C+65535,C=Math.floor(d/65536),$e=d-C*65536,d=Qe+C+65535,C=Math.floor(d/65536),Qe=d-C*65536,d=je+C+65535,C=Math.floor(d/65536),je=d-C*65536,d=Ge+C+65535,C=Math.floor(d/65536),Ge=d-C*65536,d=Ce+C+65535,C=Math.floor(d/65536),Ce=d-C*65536,q+=C-1+37*(C-1),_[0]=q,_[1]=G,_[2]=ne,_[3]=ce,_[4]=Se,_[5]=me,_[6]=mt,_[7]=be,_[8]=He,_[9]=We,_[10]=Ke,_[11]=$e,_[12]=Qe,_[13]=je,_[14]=Ge,_[15]=Ce}function qe(_,b){he(_,b,b)}function bt(_,b){var v=e(),d;for(d=0;d<16;d++)v[d]=b[d];for(d=253;d>=0;d--)qe(v,v),d!==2&&d!==4&&he(v,v,b);for(d=0;d<16;d++)_[d]=v[d]}function Gr(_,b){var v=e(),d;for(d=0;d<16;d++)v[d]=b[d];for(d=250;d>=0;d--)qe(v,v),d!==1&&he(v,v,b);for(d=0;d<16;d++)_[d]=v[d]}function ys(_,b,v){var d=new Uint8Array(32),C=new Float64Array(80),q,G,ne=e(),ce=e(),Se=e(),me=e(),mt=e(),be=e();for(G=0;G<31;G++)d[G]=b[G];for(d[31]=b[31]&127|64,d[0]&=248,Z(C,v),G=0;G<16;G++)ce[G]=C[G],me[G]=ne[G]=Se[G]=0;for(ne[0]=me[0]=1,G=254;G>=0;--G)q=d[G>>>3]>>>(G&7)&1,J(ne,ce,q),J(Se,me,q),fe(mt,ne,Se),ue(ne,ne,Se),fe(Se,ce,me),ue(ce,ce,me),qe(me,mt),qe(be,ne),he(ne,Se,ne),he(Se,ce,mt),fe(mt,ne,Se),ue(ne,ne,Se),qe(ce,ne),ue(Se,me,be),he(ne,Se,a),fe(ne,ne,me),he(Se,Se,ne),he(ne,me,be),he(me,ce,C),qe(ce,mt),J(ne,ce,q),J(Se,me,q);for(G=0;G<16;G++)C[G+16]=ne[G],C[G+32]=Se[G],C[G+48]=ce[G],C[G+64]=me[G];var He=C.subarray(32),We=C.subarray(16);return bt(He,He),he(We,We,He),L(_,We),0}function As(_,b){return ys(_,b,i)}function Qn(_,b){return r(b,32),As(_,b)}function Ut(_,b,v){var d=new Uint8Array(32);return ys(d,v,b),S(_,n,d,B)}var te=P,ee=y;function se(_,b,v,d,C,q){var G=new Uint8Array(32);return Ut(G,C,q),te(_,b,v,d,G)}function Ae(_,b,v,d,C,q){var G=new Uint8Array(32);return Ut(G,C,q),ee(_,b,v,d,G)}var Ee=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function j(_,b,v,d){for(var C=new Int32Array(16),q=new Int32Array(16),G,ne,ce,Se,me,mt,be,He,We,Ke,$e,Qe,je,Ge,Ce,Te,ye,xe,De,ge,Y,V,oe,re,ie,le,Pe=_[0],ze=_[1],Xe=_[2],Ye=_[3],R=_[4],tt=_[5],_t=_[6],Et=_[7],Ze=b[0],ct=b[1],ft=b[2],er=b[3],Ct=b[4],Kt=b[5],zt=b[6],Yt=b[7],fr=0;d>=128;){for(De=0;De<16;De++)ge=8*De+fr,C[De]=v[ge+0]<<24|v[ge+1]<<16|v[ge+2]<<8|v[ge+3],q[De]=v[ge+4]<<24|v[ge+5]<<16|v[ge+6]<<8|v[ge+7];for(De=0;De<80;De++)if(G=Pe,ne=ze,ce=Xe,Se=Ye,me=R,mt=tt,be=_t,He=Et,We=Ze,Ke=ct,$e=ft,Qe=er,je=Ct,Ge=Kt,Ce=zt,Te=Yt,Y=Et,V=Yt,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=(R>>>14|Ct<<18)^(R>>>18|Ct<<14)^(Ct>>>9|R<<23),V=(Ct>>>14|R<<18)^(Ct>>>18|R<<14)^(R>>>9|Ct<<23),oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,Y=R&tt^~R&_t,V=Ct&Kt^~Ct&zt,oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,Y=Ee[De*2],V=Ee[De*2+1],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,Y=C[De%16],V=q[De%16],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,ye=ie&65535|le<<16,xe=oe&65535|re<<16,Y=ye,V=xe,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=(Pe>>>28|Ze<<4)^(Ze>>>2|Pe<<30)^(Ze>>>7|Pe<<25),V=(Ze>>>28|Pe<<4)^(Pe>>>2|Ze<<30)^(Pe>>>7|Ze<<25),oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,Y=Pe&ze^Pe&Xe^ze&Xe,V=Ze&ct^Ze&ft^ct&ft,oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,He=ie&65535|le<<16,Te=oe&65535|re<<16,Y=Se,V=Qe,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=ye,V=xe,oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,Se=ie&65535|le<<16,Qe=oe&65535|re<<16,ze=G,Xe=ne,Ye=ce,R=Se,tt=me,_t=mt,Et=be,Pe=He,ct=We,ft=Ke,er=$e,Ct=Qe,Kt=je,zt=Ge,Yt=Ce,Ze=Te,De%16===15)for(ge=0;ge<16;ge++)Y=C[ge],V=q[ge],oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=C[(ge+9)%16],V=q[(ge+9)%16],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,ye=C[(ge+1)%16],xe=q[(ge+1)%16],Y=(ye>>>1|xe<<31)^(ye>>>8|xe<<24)^ye>>>7,V=(xe>>>1|ye<<31)^(xe>>>8|ye<<24)^(xe>>>7|ye<<25),oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,ye=C[(ge+14)%16],xe=q[(ge+14)%16],Y=(ye>>>19|xe<<13)^(xe>>>29|ye<<3)^ye>>>6,V=(xe>>>19|ye<<13)^(ye>>>29|xe<<3)^(xe>>>6|ye<<26),oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,C[ge]=ie&65535|le<<16,q[ge]=oe&65535|re<<16;Y=Pe,V=Ze,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=_[0],V=b[0],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,_[0]=Pe=ie&65535|le<<16,b[0]=Ze=oe&65535|re<<16,Y=ze,V=ct,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=_[1],V=b[1],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,_[1]=ze=ie&65535|le<<16,b[1]=ct=oe&65535|re<<16,Y=Xe,V=ft,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=_[2],V=b[2],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,_[2]=Xe=ie&65535|le<<16,b[2]=ft=oe&65535|re<<16,Y=Ye,V=er,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=_[3],V=b[3],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,_[3]=Ye=ie&65535|le<<16,b[3]=er=oe&65535|re<<16,Y=R,V=Ct,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=_[4],V=b[4],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,_[4]=R=ie&65535|le<<16,b[4]=Ct=oe&65535|re<<16,Y=tt,V=Kt,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=_[5],V=b[5],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,_[5]=tt=ie&65535|le<<16,b[5]=Kt=oe&65535|re<<16,Y=_t,V=zt,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=_[6],V=b[6],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,_[6]=_t=ie&65535|le<<16,b[6]=zt=oe&65535|re<<16,Y=Et,V=Yt,oe=V&65535,re=V>>>16,ie=Y&65535,le=Y>>>16,Y=_[7],V=b[7],oe+=V&65535,re+=V>>>16,ie+=Y&65535,le+=Y>>>16,re+=oe>>>16,ie+=re>>>16,le+=ie>>>16,_[7]=Et=ie&65535|le<<16,b[7]=Yt=oe&65535|re<<16,fr+=128,d-=128}return d}function ae(_,b,v){var d=new Int32Array(8),C=new Int32Array(8),q=new Uint8Array(256),G,ne=v;for(d[0]=1779033703,d[1]=3144134277,d[2]=1013904242,d[3]=2773480762,d[4]=1359893119,d[5]=2600822924,d[6]=528734635,d[7]=1541459225,C[0]=4089235720,C[1]=2227873595,C[2]=4271175723,C[3]=1595750129,C[4]=2917565137,C[5]=725511199,C[6]=4215389547,C[7]=327033209,j(d,C,b,v),v%=128,G=0;G<v;G++)q[G]=b[ne-v+G];for(q[v]=128,v=256-128*(v<112?1:0),q[v-9]=0,p(q,v-8,ne/536870912|0,ne<<3),j(d,C,q,v),G=0;G<8;G++)p(_,8*G,d[G],C[G]);return 0}function pe(_,b){var v=e(),d=e(),C=e(),q=e(),G=e(),ne=e(),ce=e(),Se=e(),me=e();ue(v,_[1],_[0]),ue(me,b[1],b[0]),he(v,v,me),fe(d,_[0],_[1]),fe(me,b[0],b[1]),he(d,d,me),he(C,_[3],b[3]),he(C,C,u),he(q,_[2],b[2]),fe(q,q,q),ue(G,d,v),ue(ne,q,C),fe(ce,q,C),fe(Se,d,v),he(_[0],G,ne),he(_[1],Se,ce),he(_[2],ce,ne),he(_[3],G,Se)}function we(_,b,v){var d;for(d=0;d<4;d++)J(_[d],b[d],v)}function Ve(_,b){var v=e(),d=e(),C=e();bt(C,b[2]),he(v,b[0],C),he(d,b[1],C),L(_,d),_[31]^=K(v)<<7}function Zt(_,b,v){var d,C;for(O(_[0],s),O(_[1],o),O(_[2],o),O(_[3],s),C=255;C>=0;--C)d=v[C/8|0]>>(C&7)&1,we(_,b,d),pe(b,_),pe(_,_),we(_,b,d)}function Xr(_,b){var v=[e(),e(),e(),e()];O(v[0],c),O(v[1],f),O(v[2],o),he(v[3],c,f),Zt(_,v,b)}function dn(_,b,v){var d=new Uint8Array(64),C=[e(),e(),e(),e()],q;for(v||r(b,32),ae(d,b,32),d[0]&=248,d[31]&=127,d[31]|=64,Xr(C,d),Ve(_,C),q=0;q<32;q++)b[q+32]=_[q];return 0}var Aa=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function St(_,b){var v,d,C,q;for(d=63;d>=32;--d){for(v=0,C=d-32,q=d-12;C<q;++C)b[C]+=v-16*b[d]*Aa[C-(d-32)],v=b[C]+128>>8,b[C]-=v*256;b[C]+=v,b[d]=0}for(v=0,C=0;C<32;C++)b[C]+=v-(b[31]>>4)*Aa[C],v=b[C]>>8,b[C]&=255;for(C=0;C<32;C++)b[C]-=v*Aa[C];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,_[d]=b[d]&255}function _r(_){var b=new Float64Array(64),v;for(v=0;v<64;v++)b[v]=_[v];for(v=0;v<64;v++)_[v]=0;St(_,b)}function cr(_,b,v,d){var C=new Uint8Array(64),q=new Uint8Array(64),G=new Uint8Array(64),ne,ce,Se=new Float64Array(64),me=[e(),e(),e(),e()];ae(C,d,32),C[0]&=248,C[31]&=127,C[31]|=64;var mt=v+64;for(ne=0;ne<v;ne++)_[64+ne]=b[ne];for(ne=0;ne<32;ne++)_[32+ne]=C[32+ne];for(ae(G,_.subarray(32),v+32),_r(G),Xr(me,G),Ve(_,me),ne=32;ne<64;ne++)_[ne]=d[ne];for(ae(q,_,v+64),_r(q),ne=0;ne<64;ne++)Se[ne]=0;for(ne=0;ne<32;ne++)Se[ne]=G[ne];for(ne=0;ne<32;ne++)for(ce=0;ce<32;ce++)Se[ne+ce]+=q[ne]*C[ce];return St(_.subarray(32),Se),mt}function jt(_,b){var v=e(),d=e(),C=e(),q=e(),G=e(),ne=e(),ce=e();return O(_[2],o),Z(_[1],b),qe(C,_[1]),he(q,C,l),ue(C,C,_[2]),fe(q,_[2],q),qe(G,q),qe(ne,G),he(ce,ne,G),he(v,ce,C),he(v,v,q),Gr(v,v),he(v,v,C),he(v,v,q),he(v,v,q),he(_[0],v,q),qe(d,_[0]),he(d,d,q),$(d,C)&&he(_[0],_[0],h),qe(d,_[0]),he(d,d,q),$(d,C)?-1:(K(_[0])===b[31]>>7&&ue(_[0],s,_[0]),he(_[3],_[0],_[1]),0)}function Bt(_,b,v,d){var C,q,G=new Uint8Array(32),ne=new Uint8Array(64),ce=[e(),e(),e(),e()],Se=[e(),e(),e(),e()];if(q=-1,v<64||jt(Se,d))return-1;for(C=0;C<v;C++)_[C]=b[C];for(C=0;C<32;C++)_[C+32]=d[C];if(ae(ne,_,v),_r(ne),Zt(ce,Se,ne),Xr(Se,b.subarray(32)),pe(ce,Se),Ve(G,ce),v-=64,E(b,0,G,0)){for(C=0;C<v;C++)_[C]=0;return-1}for(C=0;C<v;C++)_[C]=b[C+64];return q=v,q}var xn=32,$t=24,vo=32,va=16,du=32,Vf=32,pu=32,gu=32,Ig=32,XS=$t,jP=vo,$P=va,Qi=64,bo=32,ba=64,Tg=32,Rg=64;t.lowlevel={crypto_core_hsalsa20:S,crypto_stream_xor:I,crypto_stream:D,crypto_stream_salsa20_xor:F,crypto_stream_salsa20:M,crypto_onetimeauth:T,crypto_onetimeauth_verify:Q,crypto_verify_16:m,crypto_verify_32:E,crypto_secretbox:P,crypto_secretbox_open:y,crypto_scalarmult:ys,crypto_scalarmult_base:As,crypto_box_beforenm:Ut,crypto_box_afternm:te,crypto_box:se,crypto_box_open:Ae,crypto_box_keypair:Qn,crypto_hash:ae,crypto_sign:cr,crypto_sign_keypair:dn,crypto_sign_open:Bt,crypto_secretbox_KEYBYTES:xn,crypto_secretbox_NONCEBYTES:$t,crypto_secretbox_ZEROBYTES:vo,crypto_secretbox_BOXZEROBYTES:va,crypto_scalarmult_BYTES:du,crypto_scalarmult_SCALARBYTES:Vf,crypto_box_PUBLICKEYBYTES:pu,crypto_box_SECRETKEYBYTES:gu,crypto_box_BEFORENMBYTES:Ig,crypto_box_NONCEBYTES:XS,crypto_box_ZEROBYTES:jP,crypto_box_BOXZEROBYTES:$P,crypto_sign_BYTES:Qi,crypto_sign_PUBLICKEYBYTES:bo,crypto_sign_SECRETKEYBYTES:ba,crypto_sign_SEEDBYTES:Tg,crypto_hash_BYTES:Rg};function JS(_,b){if(_.length!==xn)throw new Error("bad key size");if(b.length!==$t)throw new Error("bad nonce size")}function KP(_,b){if(_.length!==pu)throw new Error("bad public key size");if(b.length!==gu)throw new Error("bad secret key size")}function pn(){var _,b;for(b=0;b<arguments.length;b++)if((_=Object.prototype.toString.call(arguments[b]))!=="[object Uint8Array]")throw new TypeError("unexpected type "+_+", use Uint8Array")}function ZS(_){for(var b=0;b<_.length;b++)_[b]=0}t.util||(t.util={},t.util.decodeUTF8=t.util.encodeUTF8=t.util.encodeBase64=t.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),t.randomBytes=function(_){var b=new Uint8Array(_);return r(b,_),b},t.secretbox=function(_,b,v){pn(_,b,v),JS(v,b);for(var d=new Uint8Array(vo+_.length),C=new Uint8Array(d.length),q=0;q<_.length;q++)d[q+vo]=_[q];return P(C,d,d.length,b,v),C.subarray(va)},t.secretbox.open=function(_,b,v){pn(_,b,v),JS(v,b);for(var d=new Uint8Array(va+_.length),C=new Uint8Array(d.length),q=0;q<_.length;q++)d[q+va]=_[q];return d.length<32||y(C,d,d.length,b,v)!==0?!1:C.subarray(vo)},t.secretbox.keyLength=xn,t.secretbox.nonceLength=$t,t.secretbox.overheadLength=va,t.scalarMult=function(_,b){if(pn(_,b),_.length!==Vf)throw new Error("bad n size");if(b.length!==du)throw new Error("bad p size");var v=new Uint8Array(du);return ys(v,_,b),v},t.scalarMult.base=function(_){if(pn(_),_.length!==Vf)throw new Error("bad n size");var b=new Uint8Array(du);return As(b,_),b},t.scalarMult.scalarLength=Vf,t.scalarMult.groupElementLength=du,t.box=function(_,b,v,d){var C=t.box.before(v,d);return t.secretbox(_,b,C)},t.box.before=function(_,b){pn(_,b),KP(_,b);var v=new Uint8Array(Ig);return Ut(v,_,b),v},t.box.after=t.secretbox,t.box.open=function(_,b,v,d){var C=t.box.before(v,d);return t.secretbox.open(_,b,C)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var _=new Uint8Array(pu),b=new Uint8Array(gu);return Qn(_,b),{publicKey:_,secretKey:b}},t.box.keyPair.fromSecretKey=function(_){if(pn(_),_.length!==gu)throw new Error("bad secret key size");var b=new Uint8Array(pu);return As(b,_),{publicKey:b,secretKey:new Uint8Array(_)}},t.box.publicKeyLength=pu,t.box.secretKeyLength=gu,t.box.sharedKeyLength=Ig,t.box.nonceLength=XS,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(_,b){if(pn(_,b),b.length!==ba)throw new Error("bad secret key size");var v=new Uint8Array(Qi+_.length);return cr(v,_,_.length,b),v},t.sign.open=function(_,b){if(arguments.length!==2)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(pn(_,b),b.length!==bo)throw new Error("bad public key size");var v=new Uint8Array(_.length),d=Bt(v,_,_.length,b);if(d<0)return null;for(var C=new Uint8Array(d),q=0;q<C.length;q++)C[q]=v[q];return C},t.sign.detached=function(_,b){for(var v=t.sign(_,b),d=new Uint8Array(Qi),C=0;C<d.length;C++)d[C]=v[C];return d},t.sign.detached.verify=function(_,b,v){if(pn(_,b,v),b.length!==Qi)throw new Error("bad signature size");if(v.length!==bo)throw new Error("bad public key size");var d=new Uint8Array(Qi+_.length),C=new Uint8Array(Qi+_.length),q;for(q=0;q<Qi;q++)d[q]=b[q];for(q=0;q<_.length;q++)d[q+Qi]=_[q];return Bt(C,d,d.length,v)>=0},t.sign.keyPair=function(){var _=new Uint8Array(bo),b=new Uint8Array(ba);return dn(_,b),{publicKey:_,secretKey:b}},t.sign.keyPair.fromSecretKey=function(_){if(pn(_),_.length!==ba)throw new Error("bad secret key size");for(var b=new Uint8Array(bo),v=0;v<b.length;v++)b[v]=_[32+v];return{publicKey:b,secretKey:new Uint8Array(_)}},t.sign.keyPair.fromSeed=function(_){if(pn(_),_.length!==Tg)throw new Error("bad seed size");for(var b=new Uint8Array(bo),v=new Uint8Array(ba),d=0;d<32;d++)v[d]=_[d];return dn(b,v,!0),{publicKey:b,secretKey:v}},t.sign.publicKeyLength=bo,t.sign.secretKeyLength=ba,t.sign.seedLength=Tg,t.sign.signatureLength=Qi,t.hash=function(_){pn(_);var b=new Uint8Array(Rg);return ae(b,_,_.length),b},t.hash.hashLength=Rg,t.verify=function(_,b){return pn(_,b),_.length===0||b.length===0||_.length!==b.length?!1:g(_,0,b,0,_.length)===0},t.setPRNG=function(_){r=_},(function(){var _=typeof self<"u"?self.crypto||self.msCrypto:null;if(_&&_.getRandomValues){var b=65536;t.setPRNG(function(v,d){var C,q=new Uint8Array(d);for(C=0;C<d;C+=b)_.getRandomValues(q.subarray(C,C+Math.min(d-C,b)));for(C=0;C<d;C++)v[C]=q[C];ZS(q)})}else typeof require<"u"&&(_=require("crypto"),_&&_.randomBytes&&t.setPRNG(function(v,d){var C,q=_.randomBytes(d);for(C=0;C<d;C++)v[C]=q[C];ZS(q)}))})()})(typeof Sh<"u"&&Sh.exports?Sh.exports:self.nacl=self.nacl||{})});var Dm=x((Lne,Xw)=>{"use strict";var Cm=Vw().lowlevel.crypto_hash,Ki=0,xo=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function wh(t,e,r){return(t[0][e[r+3]]+t[1][e[r+2]]^t[2][e[r+1]])+t[3][e[r]]}xo.prototype.encipher=function(t,e){e===void 0&&(e=new Uint8Array(t.buffer),t.byteOffset!==0&&(e=e.subarray(t.byteOffset))),t[0]^=this.P[0];for(var r=1;r<16;r+=2)t[1]^=wh(this.S,e,0)^this.P[r],t[0]^=wh(this.S,e,4)^this.P[r+1];var n=t[0];t[0]=t[1]^this.P[17],t[1]=n};xo.prototype.decipher=function(t){var e=new Uint8Array(t.buffer);t.byteOffset!==0&&(e=e.subarray(t.byteOffset)),t[0]^=this.P[17];for(var r=16;r>0;r-=2)t[1]^=wh(this.S,e,0)^this.P[r],t[0]^=wh(this.S,e,4)^this.P[r-1];var n=t[0];t[0]=t[1]^this.P[0],t[1]=n};function wo(t,e){var r,n=0;for(r=0;r<4;r++,Ki++)Ki>=e&&(Ki=0),n=n<<8|t[Ki];return n}xo.prototype.expand0state=function(t,e){var r=new Uint32Array(2),n,i,s=new Uint8Array(r.buffer);for(n=0,Ki=0;n<18;n++)this.P[n]^=wo(t,e);for(Ki=0,n=0;n<18;n+=2)this.encipher(r,s),this.P[n]=r[0],this.P[n+1]=r[1];for(n=0;n<4;n++)for(i=0;i<256;i+=2)this.encipher(r,s),this.S[n][i]=r[0],this.S[n][i+1]=r[1]};xo.prototype.expandstate=function(t,e,r,n){var i=new Uint32Array(2),s,o;for(s=0,Ki=0;s<18;s++)this.P[s]^=wo(r,n);for(s=0,Ki=0;s<18;s+=2)i[0]^=wo(t,e),i[1]^=wo(t,e),this.encipher(i),this.P[s]=i[0],this.P[s+1]=i[1];for(s=0;s<4;s++)for(o=0;o<256;o+=2)i[0]^=wo(t,e),i[1]^=wo(t,e),this.encipher(i),this.S[s][o]=i[0],this.S[s][o+1]=i[1];Ki=0};xo.prototype.enc=function(t,e){for(var r=0;r<e;r++)this.encipher(t.subarray(r*2))};xo.prototype.dec=function(t,e){for(var r=0;r<e;r++)this.decipher(t.subarray(r*2))};var Ch=8,wm=32;function xm(t,e,r){var n=new xo,i=new Uint32Array(Ch),s,o=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(n.expandstate(e,64,t,64),s=0;s<64;s++)n.expand0state(e,64),n.expand0state(t,64);for(s=0;s<Ch;s++)i[s]=wo(o,o.byteLength);for(s=0;s<64;s++)n.enc(i,i.byteLength/8);for(s=0;s<Ch;s++)r[4*s+3]=i[s]>>>24,r[4*s+2]=i[s]>>>16,r[4*s+1]=i[s]>>>8,r[4*s+0]=i[s]}function y8(t,e,r,n,i,s,o){var a=new Uint8Array(64),l=new Uint8Array(64),u=new Uint8Array(wm),c=new Uint8Array(wm),f=new Uint8Array(n+4),h,p,g,m,E,A,w=s;if(o<1||e===0||n===0||s===0||s>u.byteLength*u.byteLength||n>1<<20)return-1;for(m=Math.floor((s+u.byteLength-1)/u.byteLength),g=Math.floor((s+m-1)/m),h=0;h<n;h++)f[h]=r[h];for(Cm(a,t,e),A=1;s>0;A++){for(f[n+0]=A>>>24,f[n+1]=A>>>16,f[n+2]=A>>>8,f[n+3]=A,Cm(l,f,n+4),xm(a,l,c),h=u.byteLength;h--;)u[h]=c[h];for(h=1;h<o;h++)for(Cm(l,c,c.byteLength),xm(a,l,c),p=0;p<u.byteLength;p++)u[p]^=c[p];for(g=Math.min(g,s),h=0;h<g&&(E=h*m+(A-1),!(E>=w));h++)i[E]=u[h];s-=h}return 0}Xw.exports={BLOCKS:Ch,HASHSIZE:wm,hash:xm,pbkdf:y8}});var Yi=x((Mne,Dh)=>{"use strict";var zi=require("crypto"),Pa;try{Pa=require("cpu-features")()}catch{}var{bindingAvailable:Jw,CIPHER_INFO:A8,MAC_INFO:v8}=Ds(),Zw=(()=>{if(typeof zi.sign=="function"&&typeof zi.verify=="function"){let t=`-----BEGIN PRIVATE KEY-----\r
MC4CAQAwBQYDK2VwBCIEIHKj+sVa9WcD/q2DJUJaf43Kptc8xYuUQA4bOFj9vC8T\r
-----END PRIVATE KEY-----`,e=Buffer.from("a"),r,n;try{r=zi.sign(null,e,t),n=zi.verify(null,e,t,r)}catch{}return Buffer.isBuffer(r)&&r.length===64&&n===!0}return!1})(),ex=typeof zi.diffieHellman=="function"&&typeof zi.generateKeyPairSync=="function"&&typeof zi.createPublicKey=="function",xh=["ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha256","diffie-hellman-group15-sha512","diffie-hellman-group16-sha512","diffie-hellman-group17-sha512","diffie-hellman-group18-sha512"];ex&&(xh.unshift("curve25519-sha256"),xh.unshift("curve25519-sha256@libssh.org"));var b8=xh.concat(["diffie-hellman-group-exchange-sha1","diffie-hellman-group14-sha1","diffie-hellman-group1-sha1"]),Im=["ecdsa-sha2-nistp256","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","rsa-sha2-512","rsa-sha2-256","ssh-rsa"];Zw&&Im.unshift("ssh-ed25519");var S8=Im.concat(["ssh-dss"]),tx=(()=>{let t=zi.getCiphers();return e=>t.includes(A8[e].sslName)})(),xs=["aes128-gcm@openssh.com","aes256-gcm@openssh.com","aes128-ctr","aes192-ctr","aes256-ctr"];Pa&&Pa.flags&&!Pa.flags.aes?Jw?xs.unshift("chacha20-poly1305@openssh.com"):xs.push("chacha20-poly1305@openssh.com"):Jw&&Pa&&Pa.arch==="x86"?xs.splice(4,0,"chacha20-poly1305@openssh.com"):xs.push("chacha20-poly1305@openssh.com");xs=xs.filter(tx);var C8=xs.concat(["aes256-cbc","aes192-cbc","aes128-cbc","blowfish-cbc","3des-cbc","aes128-gcm","aes256-gcm","arcfour256","arcfour128","cast128-cbc","arcfour"].filter(tx)),rx=(()=>{let t=zi.getHashes();return e=>t.includes(v8[e].sslName)})(),nx=["hmac-sha2-256-etm@openssh.com","hmac-sha2-512-etm@openssh.com","hmac-sha1-etm@openssh.com","hmac-sha2-256","hmac-sha2-512","hmac-sha1"].filter(rx),w8=nx.concat(["hmac-md5","hmac-sha2-256-96","hmac-sha2-512-96","hmac-ripemd160","hmac-sha1-96","hmac-md5-96"].filter(rx)),ix=["none","zlib@openssh.com","zlib"],x8=ix.concat([]),Ba={BAD_DHGEX:1,OLD_EXIT:2,DYN_RPORT_BUG:4,BUG_DHGEX_LARGE:8,IMPLY_RSA_SHA2_SIGALGS:16};Dh.exports={MESSAGE:{DISCONNECT:1,IGNORE:2,UNIMPLEMENTED:3,DEBUG:4,SERVICE_REQUEST:5,SERVICE_ACCEPT:6,EXT_INFO:7,KEXINIT:20,NEWKEYS:21,KEXDH_INIT:30,KEXDH_REPLY:31,KEXDH_GEX_GROUP:31,KEXDH_GEX_INIT:32,KEXDH_GEX_REPLY:33,KEXDH_GEX_REQUEST:34,KEXECDH_INIT:30,KEXECDH_REPLY:31,USERAUTH_REQUEST:50,USERAUTH_FAILURE:51,USERAUTH_SUCCESS:52,USERAUTH_BANNER:53,USERAUTH_PASSWD_CHANGEREQ:60,USERAUTH_PK_OK:60,USERAUTH_INFO_REQUEST:60,USERAUTH_INFO_RESPONSE:61,GLOBAL_REQUEST:80,REQUEST_SUCCESS:81,REQUEST_FAILURE:82,CHANNEL_OPEN:90,CHANNEL_OPEN_CONFIRMATION:91,CHANNEL_OPEN_FAILURE:92,CHANNEL_WINDOW_ADJUST:93,CHANNEL_DATA:94,CHANNEL_EXTENDED_DATA:95,CHANNEL_EOF:96,CHANNEL_CLOSE:97,CHANNEL_REQUEST:98,CHANNEL_SUCCESS:99,CHANNEL_FAILURE:100},DISCONNECT_REASON:{HOST_NOT_ALLOWED_TO_CONNECT:1,PROTOCOL_ERROR:2,KEY_EXCHANGE_FAILED:3,RESERVED:4,MAC_ERROR:5,COMPRESSION_ERROR:6,SERVICE_NOT_AVAILABLE:7,PROTOCOL_VERSION_NOT_SUPPORTED:8,HOST_KEY_NOT_VERIFIABLE:9,CONNECTION_LOST:10,BY_APPLICATION:11,TOO_MANY_CONNECTIONS:12,AUTH_CANCELED_BY_USER:13,NO_MORE_AUTH_METHODS_AVAILABLE:14,ILLEGAL_USER_NAME:15},DISCONNECT_REASON_STR:void 0,CHANNEL_OPEN_FAILURE:{ADMINISTRATIVELY_PROHIBITED:1,CONNECT_FAILED:2,UNKNOWN_CHANNEL_TYPE:3,RESOURCE_SHORTAGE:4},TERMINAL_MODE:{TTY_OP_END:0,VINTR:1,VQUIT:2,VERASE:3,VKILL:4,VEOF:5,VEOL:6,VEOL2:7,VSTART:8,VSTOP:9,VSUSP:10,VDSUSP:11,VREPRINT:12,VWERASE:13,VLNEXT:14,VFLUSH:15,VSWTCH:16,VSTATUS:17,VDISCARD:18,IGNPAR:30,PARMRK:31,INPCK:32,ISTRIP:33,INLCR:34,IGNCR:35,ICRNL:36,IUCLC:37,IXON:38,IXANY:39,IXOFF:40,IMAXBEL:41,ISIG:50,ICANON:51,XCASE:52,ECHO:53,ECHOE:54,ECHOK:55,ECHONL:56,NOFLSH:57,TOSTOP:58,IEXTEN:59,ECHOCTL:60,ECHOKE:61,PENDIN:62,OPOST:70,OLCUC:71,ONLCR:72,OCRNL:73,ONOCR:74,ONLRET:75,CS7:90,CS8:91,PARENB:92,PARODD:93,TTY_OP_ISPEED:128,TTY_OP_OSPEED:129},CHANNEL_EXTENDED_DATATYPE:{STDERR:1},SIGNALS:["ABRT","ALRM","FPE","HUP","ILL","INT","QUIT","SEGV","TERM","USR1","USR2","KILL","PIPE"].reduce((t,e)=>({...t,[e]:1}),{}),COMPAT:Ba,COMPAT_CHECKS:[["Cisco-1.25",Ba.BAD_DHGEX],[/^Cisco-1[.]/,Ba.BUG_DHGEX_LARGE],[/^[0-9.]+$/,Ba.OLD_EXIT],[/^OpenSSH_5[.][0-9]+/,Ba.DYN_RPORT_BUG],[/^OpenSSH_7[.]4/,Ba.IMPLY_RSA_SHA2_SIGALGS]],DEFAULT_KEX:xh,SUPPORTED_KEX:b8,DEFAULT_SERVER_HOST_KEY:Im,SUPPORTED_SERVER_HOST_KEY:S8,DEFAULT_CIPHER:xs,SUPPORTED_CIPHER:C8,DEFAULT_MAC:nx,SUPPORTED_MAC:w8,DEFAULT_COMPRESSION:ix,SUPPORTED_COMPRESSION:x8,curve25519Supported:ex,eddsaSupported:Zw};Dh.exports.DISCONNECT_REASON_BY_VALUE=Array.from(Object.entries(Dh.exports.DISCONNECT_REASON)).reduce((t,[e,r])=>({...t,[r]:e}),{})});var Gn=x((Une,lx)=>{"use strict";var kn=wu().Ber,Ih,ax=Buffer[Symbol.species],D8=Object.getPrototypeOf(Uint8Array.prototype).fill;function sx(t,e){return t[e++]*16777216+t[e++]*65536+t[e++]*256+t[e]}function xu(t,e,r,n,i){i||(i=0),n>t.length&&(n=t.length);let s=n-r,o=e.length-i;return s>o&&(s=o),e.set(new Uint8Array(t.buffer,t.byteOffset+r,s),i),s}function Du(t,e,r){return r===void 0&&(r=t.length),new ax(t.buffer,t.byteOffset+e,r-e)}function Rm(){let t=0,e,r={init:(n,i)=>{e=n,t=typeof i=="number"?i:0},pos:()=>t,length:()=>e?e.length:0,avail:()=>e&&t<e.length?e.length-t:0,clear:()=>{e=void 0},readUInt32BE:()=>{if(!(!e||t+3>=e.length))return e[t++]*16777216+e[t++]*65536+e[t++]*256+e[t++]},readUInt64BE:n=>{if(!(!e||t+7>=e.length))switch(n){case"always":return BigInt(`0x${e.hexSlice(t,t+=8)}`);case"maybe":if(e[t]>31)return BigInt(`0x${e.hexSlice(t,t+=8)}`);default:return e[t++]*72057594037927940+e[t++]*281474976710656+e[t++]*1099511627776+e[t++]*4294967296+e[t++]*16777216+e[t++]*65536+e[t++]*256+e[t++]}},skip:n=>{e&&n>0&&(t+=n)},skipString:()=>{let n=r.readUInt32BE();if(n!==void 0)return t+=n,t<=e.length?n:void 0},readByte:()=>{if(e&&t<e.length)return e[t++]},readBool:()=>{if(e&&t<e.length)return!!e[t++]},readList:()=>{let n=r.readString(!0);if(n!==void 0)return n?n.split(","):[]},readString:(n,i)=>{typeof n=="number"&&(i=n,n=void 0);let s=r.readUInt32BE();if(s!==void 0&&!(e.length-t<s||typeof i=="number"&&s>i))return n?Buffer.isBuffer(n)?xu(e,n,t,t+=s):e.utf8Slice(t,t+=s):Du(e,t,t+=s)},readRaw:n=>{if(e){if(typeof n!="number")return Du(e,t,t+=e.length-t);if(e.length-t>=n)return Du(e,t,t+=n)}}};return r}function ox(t,e,r){let n=new Error(t);return typeof e=="boolean"?(r=e,n.level="protocol"):n.level=e||"protocol",n.fatal=!!r,n}function Tm(t,e,r){return t[r++]=e>>>24,t[r++]=e>>>16,t[r++]=e>>>8,t[r++]=e,r}var Th=Rm();lx.exports={bufferCopy:xu,bufferSlice:Du,FastBuffer:ax,bufferFill:(t,e,r,n)=>D8.call(t,e,r,n),makeError:ox,doFatalError:(t,e,r,n)=>{let i;return Ih===void 0&&({DISCONNECT_REASON:Ih}=Yi()),e instanceof Error?(i=e,typeof r!="number"?n=Ih.PROTOCOL_ERROR:n=r):i=ox(e,r,!0),typeof n!="number"&&(n=Ih.PROTOCOL_ERROR),t.disconnect(n),t._destruct(),t._onError(i),1/0},readUInt32BE:sx,writeUInt32BE:Tm,writeUInt32LE:(t,e,r)=>(t[r++]=e,t[r++]=e>>>8,t[r++]=e>>>16,t[r++]=e>>>24,r),makeBufferParser:Rm,bufferParser:Rm(),readString:(t,e,r,n)=>{typeof r=="number"&&(n=r,r=void 0),e===void 0&&(e=0);let i=t.length-e;if(e<0||e>=t.length||i<4)return;let s=sx(t,e);if(i<4+s||typeof n=="number"&&s>n)return;e+=4;let o=e+s;return t._pos=o,r?Buffer.isBuffer(r)?xu(t,r,e,o):t.utf8Slice(e,o):Du(t,e,o)},sigSSHToASN1:(t,e)=>{switch(e){case"ssh-dss":{if(t.length>40)return t;let r=new kn.Writer;r.startSequence();let n=t.slice(0,20),i=t.slice(20);if(n[0]&128){let s=Buffer.allocUnsafe(21);s[0]=0,n.copy(s,1),n=s}else n[0]===0&&!(n[1]&128)&&(n=n.slice(1));if(i[0]&128){let s=Buffer.allocUnsafe(21);s[0]=0,i.copy(s,1),i=s}else i[0]===0&&!(i[1]&128)&&(i=i.slice(1));return r.writeBuffer(n,kn.Integer),r.writeBuffer(i,kn.Integer),r.endSequence(),r.buffer}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{Th.init(t,0);let r=Th.readString(),n=Th.readString();if(Th.clear(),r===void 0||n===void 0)return;let i=new kn.Writer;return i.startSequence(),i.writeBuffer(r,kn.Integer),i.writeBuffer(n,kn.Integer),i.endSequence(),i.buffer}default:return t}},convertSignature:(t,e)=>{switch(e){case"ssh-dss":{if(t.length<=40)return t;let r=new kn.Reader(t);r.readSequence();let n=r.readString(kn.Integer,!0),i=r.readString(kn.Integer,!0),s=0,o=0;if(n.length<20){let l=Buffer.allocUnsafe(20);l.set(n,1),n=l,n[0]=0}if(i.length<20){let l=Buffer.allocUnsafe(20);l.set(i,1),i=l,i[0]=0}n.length>20&&n[0]===0&&(s=1),i.length>20&&i[0]===0&&(o=1);let a=Buffer.allocUnsafe(n.length-s+(i.length-o));return xu(n,a,s,n.length,0),xu(i,a,o,i.length,n.length-s),a}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{if(t[0]===0)return t;let r=new kn.Reader(t);r.readSequence();let n=r.readString(kn.Integer,!0),i=r.readString(kn.Integer,!0);if(n===null||i===null)return;let s=Buffer.allocUnsafe(4+n.length+4+i.length);return Tm(s,n.length,0),s.set(n,4),Tm(s,i.length,4+n.length),s.set(i,8+n.length),s}}return t},sendPacket:(t,e,r)=>!r&&t._kexinit!==void 0?(t._queue===void 0&&(t._queue=[]),t._queue.push(e),t._debug&&t._debug("Outbound: ... packet queued"),!1):(t._cipher.encrypt(e),!0)}});var ux=x((Rh,Om)=>{var km=(function(){var t=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(t=t||__filename),(function(e){e=e||{};var r;r||(r=typeof e<"u"?e:{});var n,i;r.ready=new Promise(function(j,ae){n=j,i=ae});var s={},o;for(o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);var a=typeof window=="object",l=typeof importScripts=="function",u=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",c="",f,h,p,g,m;u?(c=l?require("path").dirname(c)+"/":__dirname+"/",f=function(j,ae){var pe=Qn(j);return pe?ae?pe:pe.toString():(g||(g=require("fs")),m||(m=require("path")),j=m.normalize(j),g.readFileSync(j,ae?null:"utf8"))},p=function(j){return j=f(j,!0),j.buffer||(j=new Uint8Array(j)),B(j.buffer),j},h=function(j,ae,pe){var we=Qn(j);we&&ae(we),g||(g=require("fs")),m||(m=require("path")),j=m.normalize(j),g.readFile(j,function(Ve,Zt){Ve?pe(Ve):ae(Zt.buffer)})},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),r.inspect=function(){return"[Emscripten Module object]"}):(a||l)&&(l?c=self.location.href:typeof document<"u"&&document.currentScript&&(c=document.currentScript.src),t&&(c=t),c.indexOf("blob:")!==0?c=c.substr(0,c.lastIndexOf("/")+1):c="",f=function(j){try{var ae=new XMLHttpRequest;return ae.open("GET",j,!1),ae.send(null),ae.responseText}catch(Ve){if(j=Qn(j)){ae=[];for(var pe=0;pe<j.length;pe++){var we=j[pe];255<we&&(ys&&B(!1,"Character code "+we+" ("+String.fromCharCode(we)+")  at offset "+pe+" not in 0x00-0xFF."),we&=255),ae.push(String.fromCharCode(we))}return ae.join("")}throw Ve}},l&&(p=function(j){try{var ae=new XMLHttpRequest;return ae.open("GET",j,!1),ae.responseType="arraybuffer",ae.send(null),new Uint8Array(ae.response)}catch(pe){if(j=Qn(j))return j;throw pe}}),h=function(j,ae,pe){var we=new XMLHttpRequest;we.open("GET",j,!0),we.responseType="arraybuffer",we.onload=function(){if(we.status==200||we.status==0&&we.response)ae(we.response);else{var Ve=Qn(j);Ve?ae(Ve.buffer):pe()}},we.onerror=pe,we.send(null)}),r.print||console.log.bind(console);var E=r.printErr||console.warn.bind(console);for(o in s)s.hasOwnProperty(o)&&(r[o]=s[o]);s=null;var A;r.wasmBinary&&(A=r.wasmBinary);var w=r.noExitRuntime||!0;typeof WebAssembly!="object"&&Z("no native wasm support detected");var k,S=!1;function B(j,ae){j||Z("Assertion failed: "+ae)}function F(j){var ae=r["_"+j];return B(ae,"Cannot call unknown function "+j+", make sure it is exported"),ae}function M(j,ae,pe,we){var Ve={string:function(St){var _r=0;if(St!=null&&St!==0){var cr=(St.length<<2)+1;_r=se(cr);var jt=_r,Bt=T;if(0<cr){cr=jt+cr-1;for(var xn=0;xn<St.length;++xn){var $t=St.charCodeAt(xn);if(55296<=$t&&57343>=$t){var vo=St.charCodeAt(++xn);$t=65536+(($t&1023)<<10)|vo&1023}if(127>=$t){if(jt>=cr)break;Bt[jt++]=$t}else{if(2047>=$t){if(jt+1>=cr)break;Bt[jt++]=192|$t>>6}else{if(65535>=$t){if(jt+2>=cr)break;Bt[jt++]=224|$t>>12}else{if(jt+3>=cr)break;Bt[jt++]=240|$t>>18,Bt[jt++]=128|$t>>12&63}Bt[jt++]=128|$t>>6&63}Bt[jt++]=128|$t&63}}Bt[jt]=0}}return _r},array:function(St){var _r=se(St.length);return N.set(St,_r),_r}},Zt=F(j),Xr=[];if(j=0,we)for(var dn=0;dn<we.length;dn++){var Aa=Ve[pe[dn]];Aa?(j===0&&(j=te()),Xr[dn]=Aa(we[dn])):Xr[dn]=we[dn]}return pe=Zt.apply(null,Xr),pe=(function(St){if(ae==="string")if(St){for(var _r=T,cr=St+NaN,jt=St;_r[jt]&&!(jt>=cr);)++jt;if(16<jt-St&&_r.subarray&&D)St=D.decode(_r.subarray(St,jt));else{for(cr="";St<jt;){var Bt=_r[St++];if(Bt&128){var xn=_r[St++]&63;if((Bt&224)==192)cr+=String.fromCharCode((Bt&31)<<6|xn);else{var $t=_r[St++]&63;Bt=(Bt&240)==224?(Bt&15)<<12|xn<<6|$t:(Bt&7)<<18|xn<<12|$t<<6|_r[St++]&63,65536>Bt?cr+=String.fromCharCode(Bt):(Bt-=65536,cr+=String.fromCharCode(55296|Bt>>10,56320|Bt&1023))}}else cr+=String.fromCharCode(Bt)}St=cr}}else St="";else St=ae==="boolean"?!!St:St;return St})(pe),j!==0&&ee(j),pe}var D=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,I,N,T;function Q(){var j=k.buffer;I=j,r.HEAP8=N=new Int8Array(j),r.HEAP16=new Int16Array(j),r.HEAP32=new Int32Array(j),r.HEAPU8=T=new Uint8Array(j),r.HEAPU16=new Uint16Array(j),r.HEAPU32=new Uint32Array(j),r.HEAPF32=new Float32Array(j),r.HEAPF64=new Float64Array(j)}var P,y=[],O=[],z=[];function J(){var j=r.preRun.shift();y.unshift(j)}var L=0,$=null,K=null;r.preloadedImages={},r.preloadedAudios={};function Z(j){throw r.onAbort&&r.onAbort(j),E(j),S=!0,j=new WebAssembly.RuntimeError("abort("+j+"). Build with -s ASSERTIONS=1 for more info."),i(j),j}var fe="data:application/octet-stream;base64,",ue;if(ue="data:application/octet-stream;base64,AGFzbQEAAAABIAZgAX8Bf2ADf39/AGABfwBgAABgAAF/YAZ/f39/f38AAgcBAWEBYQAAAwsKAAEDAQAAAgQFAgQFAXABAQEFBwEBgAKAgAIGCQF/AUGAjMACCwclCQFiAgABYwADAWQACQFlAAgBZgAHAWcABgFoAAUBaQAKAWoBAAqGTQpPAQJ/QYAIKAIAIgEgAEEDakF8cSICaiEAAkAgAkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAEUNAQtBgAggADYCACABDwtBhAhBMDYCAEF/C4wFAg5+Cn8gACgCJCEUIAAoAiAhFSAAKAIcIREgACgCGCESIAAoAhQhEyACQRBPBEAgAC0ATEVBGHQhFyAAKAIEIhZBBWytIQ8gACgCCCIYQQVsrSENIAAoAgwiGUEFbK0hCyAAKAIQIhpBBWytIQkgADUCACEIIBqtIRAgGa0hDiAYrSEMIBatIQoDQCASIAEtAAMiEiABLQAEQQh0ciABLQAFQRB0ciABLQAGIhZBGHRyQQJ2Qf///x9xaq0iAyAOfiABLwAAIAEtAAJBEHRyIBNqIBJBGHRBgICAGHFqrSIEIBB+fCARIAEtAAdBCHQgFnIgAS0ACEEQdHIgAS0ACSIRQRh0ckEEdkH///8fcWqtIgUgDH58IAEtAApBCHQgEXIgAS0AC0EQdHIgAS0ADEEYdHJBBnYgFWqtIgYgCn58IBQgF2ogAS8ADSABLQAPQRB0cmqtIgcgCH58IAMgDH4gBCAOfnwgBSAKfnwgBiAIfnwgByAJfnwgAyAKfiAEIAx+fCAFIAh+fCAGIAl+fCAHIAt+fCADIAh+IAQgCn58IAUgCX58IAYgC358IAcgDX58IAMgCX4gBCAIfnwgBSALfnwgBiANfnwgByAPfnwiA0IaiEL/////D4N8IgRCGohC/////w+DfCIFQhqIQv////8Pg3wiBkIaiEL/////D4N8IgdCGoinQQVsIAOnQf///x9xaiITQRp2IASnQf///x9xaiESIAWnQf///x9xIREgBqdB////H3EhFSAHp0H///8fcSEUIBNB////H3EhEyABQRBqIQEgAkEQayICQQ9LDQALCyAAIBQ2AiQgACAVNgIgIAAgETYCHCAAIBI2AhggACATNgIUCwMAAQu2BAEGfwJAIAAoAjgiBARAIABBPGohBQJAIAJBECAEayIDIAIgA0kbIgZFDQAgBkEDcSEHAkAgBkEBa0EDSQRAQQAhAwwBCyAGQXxxIQhBACEDA0AgBSADIARqaiABIANqLQAAOgAAIAUgA0EBciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0ECciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0EDciIEIAAoAjhqaiABIARqLQAAOgAAIANBBGohAyAAKAI4IQQgCEEEayIIDQALCyAHRQ0AA0AgBSADIARqaiABIANqLQAAOgAAIANBAWohAyAAKAI4IQQgB0EBayIHDQALCyAAIAQgBmoiAzYCOCADQRBJDQEgACAFQRAQAiAAQQA2AjggAiAGayECIAEgBmohAQsgAkEQTwRAIAAgASACQXBxIgMQAiACQQ9xIQIgASADaiEBCyACRQ0AIAJBA3EhBCAAQTxqIQVBACEDIAJBAWtBA08EQCACQXxxIQcDQCAFIAAoAjggA2pqIAEgA2otAAA6AAAgBSADQQFyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQJyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQNyIgYgACgCOGpqIAEgBmotAAA6AAAgA0EEaiEDIAdBBGsiBw0ACwsgBARAA0AgBSAAKAI4IANqaiABIANqLQAAOgAAIANBAWohAyAEQQFrIgQNAAsLIAAgACgCOCACajYCOAsLoS0BDH8jAEEQayIMJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEGICCgCACIFQRAgAEELakF4cSAAQQtJGyIIQQN2IgJ2IgFBA3EEQCABQX9zQQFxIAJqIgNBA3QiAUG4CGooAgAiBEEIaiEAAkAgBCgCCCICIAFBsAhqIgFGBEBBiAggBUF+IAN3cTYCAAwBCyACIAE2AgwgASACNgIICyAEIANBA3QiAUEDcjYCBCABIARqIgEgASgCBEEBcjYCBAwNCyAIQZAIKAIAIgpNDQEgAQRAAkBBAiACdCIAQQAgAGtyIAEgAnRxIgBBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2aiIDQQN0IgBBuAhqKAIAIgQoAggiASAAQbAIaiIARgRAQYgIIAVBfiADd3EiBTYCAAwBCyABIAA2AgwgACABNgIICyAEQQhqIQAgBCAIQQNyNgIEIAQgCGoiAiADQQN0IgEgCGsiA0EBcjYCBCABIARqIAM2AgAgCgRAIApBA3YiAUEDdEGwCGohB0GcCCgCACEEAn8gBUEBIAF0IgFxRQRAQYgIIAEgBXI2AgAgBwwBCyAHKAIICyEBIAcgBDYCCCABIAQ2AgwgBCAHNgIMIAQgATYCCAtBnAggAjYCAEGQCCADNgIADA0LQYwIKAIAIgZFDQEgBkEAIAZrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QbgKaigCACIBKAIEQXhxIAhrIQMgASECA0ACQCACKAIQIgBFBEAgAigCFCIARQ0BCyAAKAIEQXhxIAhrIgIgAyACIANJIgIbIQMgACABIAIbIQEgACECDAELCyABIAhqIgkgAU0NAiABKAIYIQsgASABKAIMIgRHBEAgASgCCCIAQZgIKAIASRogACAENgIMIAQgADYCCAwMCyABQRRqIgIoAgAiAEUEQCABKAIQIgBFDQQgAUEQaiECCwNAIAIhByAAIgRBFGoiAigCACIADQAgBEEQaiECIAQoAhAiAA0ACyAHQQA2AgAMCwtBfyEIIABBv39LDQAgAEELaiIAQXhxIQhBjAgoAgAiCUUNAEEAIAhrIQMCQAJAAkACf0EAIAhBgAJJDQAaQR8gCEH///8HSw0AGiAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGoLIgVBAnRBuApqKAIAIgJFBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBACEEQQIgBXQiAEEAIABrciAJcSIARQ0DIABBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEG4CmooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAhrIgEgA0khAiABIAMgAhshAyAAIAQgAhshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIANBkAgoAgAgCGtPDQAgBCAIaiIGIARNDQEgBCgCGCEFIAQgBCgCDCIBRwRAIAQoAggiAEGYCCgCAEkaIAAgATYCDCABIAA2AggMCgsgBEEUaiICKAIAIgBFBEAgBCgCECIARQ0EIARBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAhBkAgoAgAiAk0EQEGcCCgCACEDAkAgAiAIayIBQRBPBEBBkAggATYCAEGcCCADIAhqIgA2AgAgACABQQFyNgIEIAIgA2ogATYCACADIAhBA3I2AgQMAQtBnAhBADYCAEGQCEEANgIAIAMgAkEDcjYCBCACIANqIgAgACgCBEEBcjYCBAsgA0EIaiEADAsLIAhBlAgoAgAiBkkEQEGUCCAGIAhrIgE2AgBBoAhBoAgoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAsLQQAhACAIQS9qIgkCf0HgCygCAARAQegLKAIADAELQewLQn83AgBB5AtCgKCAgICABDcCAEHgCyAMQQxqQXBxQdiq1aoFczYCAEH0C0EANgIAQcQLQQA2AgBBgCALIgFqIgVBACABayIHcSICIAhNDQpBwAsoAgAiBARAQbgLKAIAIgMgAmoiASADTQ0LIAEgBEsNCwtBxAstAABBBHENBQJAAkBBoAgoAgAiAwRAQcgLIQADQCADIAAoAgAiAU8EQCABIAAoAgRqIANLDQMLIAAoAggiAA0ACwtBABABIgFBf0YNBiACIQVB5AsoAgAiA0EBayIAIAFxBEAgAiABayAAIAFqQQAgA2txaiEFCyAFIAhNDQYgBUH+////B0sNBkHACygCACIEBEBBuAsoAgAiAyAFaiIAIANNDQcgACAESw0HCyAFEAEiACABRw0BDAgLIAUgBmsgB3EiBUH+////B0sNBSAFEAEiASAAKAIAIAAoAgRqRg0EIAEhAAsCQCAAQX9GDQAgCEEwaiAFTQ0AQegLKAIAIgEgCSAFa2pBACABa3EiAUH+////B0sEQCAAIQEMCAsgARABQX9HBEAgASAFaiEFIAAhAQwIC0EAIAVrEAEaDAULIAAiAUF/Rw0GDAQLAAtBACEEDAcLQQAhAQwFCyABQX9HDQILQcQLQcQLKAIAQQRyNgIACyACQf7///8HSw0BIAIQASEBQQAQASEAIAFBf0YNASAAQX9GDQEgACABTQ0BIAAgAWsiBSAIQShqTQ0BC0G4C0G4CygCACAFaiIANgIAQbwLKAIAIABJBEBBvAsgADYCAAsCQAJAAkBBoAgoAgAiBwRAQcgLIQADQCABIAAoAgAiAyAAKAIEIgJqRg0CIAAoAggiAA0ACwwCC0GYCCgCACIAQQAgACABTRtFBEBBmAggATYCAAtBACEAQcwLIAU2AgBByAsgATYCAEGoCEF/NgIAQawIQeALKAIANgIAQdQLQQA2AgADQCAAQQN0IgNBuAhqIANBsAhqIgI2AgAgA0G8CGogAjYCACAAQQFqIgBBIEcNAAtBlAggBUEoayIDQXggAWtBB3FBACABQQhqQQdxGyIAayICNgIAQaAIIAAgAWoiADYCACAAIAJBAXI2AgQgASADakEoNgIEQaQIQfALKAIANgIADAILIAAtAAxBCHENACADIAdLDQAgASAHTQ0AIAAgAiAFajYCBEGgCCAHQXggB2tBB3FBACAHQQhqQQdxGyIAaiICNgIAQZQIQZQIKAIAIAVqIgEgAGsiADYCACACIABBAXI2AgQgASAHakEoNgIEQaQIQfALKAIANgIADAELQZgIKAIAIAFLBEBBmAggATYCAAsgASAFaiECQcgLIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQcgLIQADQCAHIAAoAgAiAk8EQCACIAAoAgRqIgQgB0sNAwsgACgCCCEADAALAAsgACABNgIAIAAgACgCBCAFajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAIQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIFIAggCWoiBmshAiAFIAdGBEBBoAggBjYCAEGUCEGUCCgCACACaiIANgIAIAYgAEEBcjYCBAwDCyAFQZwIKAIARgRAQZwIIAY2AgBBkAhBkAgoAgAgAmoiADYCACAGIABBAXI2AgQgACAGaiAANgIADAMLIAUoAgQiAEEDcUEBRgRAIABBeHEhBwJAIABB/wFNBEAgBSgCCCIDIABBA3YiAEEDdEGwCGpGGiADIAUoAgwiAUYEQEGICEGICCgCAEF+IAB3cTYCAAwCCyADIAE2AgwgASADNgIIDAELIAUoAhghCAJAIAUgBSgCDCIBRwRAIAUoAggiACABNgIMIAEgADYCCAwBCwJAIAVBFGoiACgCACIDDQAgBUEQaiIAKAIAIgMNAEEAIQEMAQsDQCAAIQQgAyIBQRRqIgAoAgAiAw0AIAFBEGohACABKAIQIgMNAAsgBEEANgIACyAIRQ0AAkAgBSAFKAIcIgNBAnRBuApqIgAoAgBGBEAgACABNgIAIAENAUGMCEGMCCgCAEF+IAN3cTYCAAwCCyAIQRBBFCAIKAIQIAVGG2ogATYCACABRQ0BCyABIAg2AhggBSgCECIABEAgASAANgIQIAAgATYCGAsgBSgCFCIARQ0AIAEgADYCFCAAIAE2AhgLIAUgB2ohBSACIAdqIQILIAUgBSgCBEF+cTYCBCAGIAJBAXI2AgQgAiAGaiACNgIAIAJB/wFNBEAgAkEDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwDC0EfIQAgAkH///8HTQRAIAJBCHYiACAAQYD+P2pBEHZBCHEiA3QiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASADciAAcmsiAEEBdCACIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQQCQEGMCCgCACIDQQEgAHQiAXFFBEBBjAggASADcjYCACAEIAY2AgAgBiAENgIYDAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAQoAgAhAQNAIAEiAygCBEF4cSACRg0DIABBHXYhASAAQQF0IQAgAyABQQRxaiIEKAIQIgENAAsgBCAGNgIQIAYgAzYCGAsgBiAGNgIMIAYgBjYCCAwCC0GUCCAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBBoAggACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRBpAhB8AsoAgA2AgAgByAEQScgBGtBB3FBACAEQSdrQQdxG2pBL2siACAAIAdBEGpJGyICQRs2AgQgAkHQCykCADcCECACQcgLKQIANwIIQdALIAJBCGo2AgBBzAsgBTYCAEHICyABNgIAQdQLQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASAESQ0ACyACIAdGDQMgAiACKAIEQX5xNgIEIAcgAiAHayIEQQFyNgIEIAIgBDYCACAEQf8BTQRAIARBA3YiAEEDdEGwCGohAgJ/QYgIKAIAIgFBASAAdCIAcUUEQEGICCAAIAFyNgIAIAIMAQsgAigCCAshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AggMBAtBHyEAIAdCADcCECAEQf///wdNBEAgBEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAQgAEEVanZBAXFyQRxqIQALIAcgADYCHCAAQQJ0QbgKaiEDAkBBjAgoAgAiAkEBIAB0IgFxRQRAQYwIIAEgAnI2AgAgAyAHNgIAIAcgAzYCGAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACADKAIAIQEDQCABIgIoAgRBeHEgBEYNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiAygCECIBDQALIAMgBzYCECAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAwsgAygCCCIAIAY2AgwgAyAGNgIIIAZBADYCGCAGIAM2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIIC0GUCCgCACIAIAhNDQBBlAggACAIayIBNgIAQaAIQaAIKAIAIgIgCGoiADYCACAAIAFBAXI2AgQgAiAIQQNyNgIEIAJBCGohAAwDC0GECEEwNgIAQQAhAAwCCwJAIAVFDQACQCAEKAIcIgJBAnRBuApqIgAoAgAgBEYEQCAAIAE2AgAgAQ0BQYwIIAlBfiACd3EiCTYCAAwCCyAFQRBBFCAFKAIQIARGG2ogATYCACABRQ0BCyABIAU2AhggBCgCECIABEAgASAANgIQIAAgATYCGAsgBCgCFCIARQ0AIAEgADYCFCAAIAE2AhgLAkAgA0EPTQRAIAQgAyAIaiIAQQNyNgIEIAAgBGoiACAAKAIEQQFyNgIEDAELIAQgCEEDcjYCBCAGIANBAXI2AgQgAyAGaiADNgIAIANB/wFNBEAgA0EDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwBC0EfIQAgA0H///8HTQRAIANBCHYiACAAQYD+P2pBEHZBCHEiAnQiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASACciAAcmsiAEEBdCADIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQICQAJAIAlBASAAdCIBcUUEQEGMCCABIAlyNgIAIAIgBjYCACAGIAI2AhgMAQsgA0EAQRkgAEEBdmsgAEEfRht0IQAgAigCACEIA0AgCCIBKAIEQXhxIANGDQIgAEEddiECIABBAXQhACABIAJBBHFqIgIoAhAiCA0ACyACIAY2AhAgBiABNgIYCyAGIAY2AgwgBiAGNgIIDAELIAEoAggiACAGNgIMIAEgBjYCCCAGQQA2AhggBiABNgIMIAYgADYCCAsgBEEIaiEADAELAkAgC0UNAAJAIAEoAhwiAkECdEG4CmoiACgCACABRgRAIAAgBDYCACAEDQFBjAggBkF+IAJ3cTYCAAwCCyALQRBBFCALKAIQIAFGG2ogBDYCACAERQ0BCyAEIAs2AhggASgCECIABEAgBCAANgIQIAAgBDYCGAsgASgCFCIARQ0AIAQgADYCFCAAIAQ2AhgLAkAgA0EPTQRAIAEgAyAIaiIAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIEDAELIAEgCEEDcjYCBCAJIANBAXI2AgQgAyAJaiADNgIAIAoEQCAKQQN2IgBBA3RBsAhqIQRBnAgoAgAhAgJ/QQEgAHQiACAFcUUEQEGICCAAIAVyNgIAIAQMAQsgBCgCCAshACAEIAI2AgggACACNgIMIAIgBDYCDCACIAA2AggLQZwIIAk2AgBBkAggAzYCAAsgAUEIaiEACyAMQRBqJAAgAAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMAC4AJAgh/BH4jAEGQAWsiBiQAIAYgBS0AA0EYdEGAgIAYcSAFLwAAIAUtAAJBEHRycjYCACAGIAUoAANBAnZBg/7/H3E2AgQgBiAFKAAGQQR2Qf+B/x9xNgIIIAYgBSgACUEGdkH//8AfcTYCDCAFLwANIQggBS0ADyEJIAZCADcCFCAGQgA3AhwgBkEANgIkIAYgCCAJQRB0QYCAPHFyNgIQIAYgBSgAEDYCKCAGIAUoABQ2AiwgBiAFKAAYNgIwIAUoABwhBSAGQQA6AEwgBkEANgI4IAYgBTYCNCAGIAEgAhAEIAQEQCAGIAMgBBAECyAGKAI4IgEEQCAGQTxqIgIgAWpBAToAACABQQFqQQ9NBEAgASAGakE9aiEEAkBBDyABayIDRQ0AIAMgBGoiAUEBa0EAOgAAIARBADoAACADQQNJDQAgAUECa0EAOgAAIARBADoAASABQQNrQQA6AAAgBEEAOgACIANBB0kNACABQQRrQQA6AAAgBEEAOgADIANBCUkNACAEQQAgBGtBA3EiAWoiBEEANgIAIAQgAyABa0F8cSIBaiIDQQRrQQA2AgAgAUEJSQ0AIARBADYCCCAEQQA2AgQgA0EIa0EANgIAIANBDGtBADYCACABQRlJDQAgBEEANgIYIARBADYCFCAEQQA2AhAgBEEANgIMIANBEGtBADYCACADQRRrQQA2AgAgA0EYa0EANgIAIANBHGtBADYCACABIARBBHFBGHIiAWsiA0EgSQ0AIAEgBGohAQNAIAFCADcDGCABQgA3AxAgAUIANwMIIAFCADcDACABQSBqIQEgA0EgayIDQR9LDQALCwsgBkEBOgBMIAYgAkEQEAILIAY1AjQhECAGNQIwIREgBjUCLCEOIAAgBjUCKCAGKAIkIAYoAiAgBigCHCAGKAIYIgNBGnZqIgJBGnZqIgFBGnZqIgtBgICAYHIgAUH///8fcSINIAJB////H3EiCCAGKAIUIAtBGnZBBWxqIgFB////H3EiCUEFaiIFQRp2IANB////H3EgAUEadmoiA2oiAUEadmoiAkEadmoiBEEadmoiDEEfdSIHIANxIAEgDEEfdkEBayIDQf///x9xIgpxciIBQRp0IAUgCnEgByAJcXJyrXwiDzwAACAAIA9CGIg8AAMgACAPQhCIPAACIAAgD0IIiDwAASAAIA4gByAIcSACIApxciICQRR0IAFBBnZyrXwgD0IgiHwiDjwABCAAIA5CGIg8AAcgACAOQhCIPAAGIAAgDkIIiDwABSAAIBEgByANcSAEIApxciIBQQ50IAJBDHZyrXwgDkIgiHwiDjwACCAAIA5CGIg8AAsgACAOQhCIPAAKIAAgDkIIiDwACSAAIBAgAyAMcSAHIAtxckEIdCABQRJ2cq18IA5CIIh8Ig48AAwgACAOQhiIPAAPIAAgDkIQiDwADiAAIA5CCIg8AA0gBkIANwIwIAZCADcCKCAGQgA3AiAgBkIANwIYIAZCADcCECAGQgA3AgggBkIANwIAIAZBkAFqJAALpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQZgIKAIASQ0BIAAgAWohACADQZwIKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEGwCGpGGiACIAMoAgwiAUYEQEGICEGICCgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRBuApqIgQoAgBGBEAgBCABNgIAIAENAUGMCEGMCCgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBBkAggADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVBoAgoAgBGBEBBoAggAzYCAEGUCEGUCCgCACAAaiIANgIAIAMgAEEBcjYCBCADQZwIKAIARw0DQZAIQQA2AgBBnAhBADYCAA8LIAVBnAgoAgBGBEBBnAggAzYCAEGQCEGQCCgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RBsAhqRhogAiAFKAIMIgFGBEBBiAhBiAgoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJBmAgoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEG4CmoiBCgCAEYEQCAEIAE2AgAgAQ0BQYwIQYwIKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQZwIKAIARw0BQZAIIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RBsAhqIQACf0GICCgCACICQQEgAXQiAXFFBEBBiAggASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QbgKaiEBAkACQAJAQYwIKAIAIgRBASACdCIHcUUEQEGMCCAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtBqAhBqAgoAgBBAWsiAEF/IAAbNgIACwsLCQEAQYEICwIGUA==",!ue.startsWith(fe)){var he=ue;ue=r.locateFile?r.locateFile(he,c):c+he}function qe(){var j=ue;try{if(j==ue&&A)return new Uint8Array(A);var ae=Qn(j);if(ae)return ae;if(p)return p(j);throw"both async and sync fetching of the wasm failed"}catch(pe){Z(pe)}}function bt(){if(!A&&(a||l)){if(typeof fetch=="function"&&!ue.startsWith("file://"))return fetch(ue,{credentials:"same-origin"}).then(function(j){if(!j.ok)throw"failed to load wasm binary file at '"+ue+"'";return j.arrayBuffer()}).catch(function(){return qe()});if(h)return new Promise(function(j,ae){h(ue,function(pe){j(new Uint8Array(pe))},ae)})}return Promise.resolve().then(function(){return qe()})}function Gr(j){for(;0<j.length;){var ae=j.shift();if(typeof ae=="function")ae(r);else{var pe=ae.m;typeof pe=="number"?ae.l===void 0?P.get(pe)():P.get(pe)(ae.l):pe(ae.l===void 0?null:ae.l)}}}var ys=!1,As=typeof atob=="function"?atob:function(j){var ae="",pe=0;j=j.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(pe++)),Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(pe++)),Zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(pe++)),Xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(pe++));we=we<<2|Ve>>4,Ve=(Ve&15)<<4|Zt>>2;var dn=(Zt&3)<<6|Xr;ae+=String.fromCharCode(we),Zt!==64&&(ae+=String.fromCharCode(Ve)),Xr!==64&&(ae+=String.fromCharCode(dn))}while(pe<j.length);return ae};function Qn(j){if(j.startsWith(fe)){if(j=j.slice(fe.length),typeof u=="boolean"&&u){var ae=Buffer.from(j,"base64");ae=new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength)}else try{var pe=As(j),we=new Uint8Array(pe.length);for(j=0;j<pe.length;++j)we[j]=pe.charCodeAt(j);ae=we}catch{throw Error("Converting base64 string to bytes failed.")}return ae}}var Ut={a:function(j){var ae=T.length;if(j>>>=0,2147483648<j)return!1;for(var pe=1;4>=pe;pe*=2){var we=ae*(1+.2/pe);we=Math.min(we,j+100663296),we=Math.max(j,we),0<we%65536&&(we+=65536-we%65536);e:{try{k.grow(Math.min(2147483648,we)-I.byteLength+65535>>>16),Q();var Ve=1;break e}catch{}Ve=void 0}if(Ve)return!0}return!1}};(function(){function j(Ve){r.asm=Ve.exports,k=r.asm.b,Q(),P=r.asm.j,O.unshift(r.asm.c),L--,r.monitorRunDependencies&&r.monitorRunDependencies(L),L==0&&($!==null&&(clearInterval($),$=null),K&&(Ve=K,K=null,Ve()))}function ae(Ve){j(Ve.instance)}function pe(Ve){return bt().then(function(Zt){return WebAssembly.instantiate(Zt,we)}).then(Ve,function(Zt){E("failed to asynchronously prepare wasm: "+Zt),Z(Zt)})}var we={a:Ut};if(L++,r.monitorRunDependencies&&r.monitorRunDependencies(L),r.instantiateWasm)try{return r.instantiateWasm(we,j)}catch(Ve){return E("Module.instantiateWasm callback failed with error: "+Ve),!1}return(function(){return A||typeof WebAssembly.instantiateStreaming!="function"||ue.startsWith(fe)||ue.startsWith("file://")||typeof fetch!="function"?pe(ae):fetch(ue,{credentials:"same-origin"}).then(function(Ve){return WebAssembly.instantiateStreaming(Ve,we).then(ae,function(Zt){return E("wasm streaming compile failed: "+Zt),E("falling back to ArrayBuffer instantiation"),pe(ae)})})})().catch(i),{}})(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.c).apply(null,arguments)},r._poly1305_auth=function(){return(r._poly1305_auth=r.asm.d).apply(null,arguments)};var te=r.stackSave=function(){return(te=r.stackSave=r.asm.e).apply(null,arguments)},ee=r.stackRestore=function(){return(ee=r.stackRestore=r.asm.f).apply(null,arguments)},se=r.stackAlloc=function(){return(se=r.stackAlloc=r.asm.g).apply(null,arguments)};r._malloc=function(){return(r._malloc=r.asm.h).apply(null,arguments)},r._free=function(){return(r._free=r.asm.i).apply(null,arguments)},r.cwrap=function(j,ae,pe,we){pe=pe||[];var Ve=pe.every(function(Zt){return Zt==="number"});return ae!=="string"&&Ve&&!we?F(j):function(){return M(j,ae,pe,arguments)}};var Ae;K=function j(){Ae||Ee(),Ae||(K=j)};function Ee(){function j(){if(!Ae&&(Ae=!0,r.calledRun=!0,!S)){if(Gr(O),n(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var ae=r.postRun.shift();z.unshift(ae)}Gr(z)}}if(!(0<L)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)J();Gr(y),0<L||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),j()},1)):j())}}if(r.run=Ee,r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return Ee(),e.ready})})();typeof Rh=="object"&&typeof Om=="object"?Om.exports=km:typeof define=="function"&&define.amd?define([],function(){return km}):typeof Rh=="object"&&(Rh.createPoly1305=km)});var Ds=x((qne,px)=>{"use strict";var{createCipheriv:La,createDecipheriv:kh,createHmac:Nm,randomFillSync:Do,timingSafeEqual:Bm}=require("crypto"),{readUInt32BE:Tu,writeUInt32BE:gn}=Gn(),Is=Buffer[Symbol.species],cx=2**32-1,fx=Buffer.alloc(0),Fa=Buffer.alloc(4),Oh=new Map,Io=35e3,Pm,Vm,Xm,Jm,Zm,e_,t_;try{Pm=require("./crypto/build/Release/sshcrypto.node"),{AESGCMCipher:Vm,ChaChaPolyCipher:Xm,GenericCipher:Jm,AESGCMDecipher:Zm,ChaChaPolyDecipher:e_,GenericDecipher:t_}=Pm}catch{}var Ir=1,I8=(()=>{function t(e,r,n,i,s,o,a){return{sslName:e,blockLen:r,keyLen:n,ivLen:i!==0||a&Ir?i:r,authLen:s,discardLen:o,stream:!!(a&Ir)}}return{"chacha20-poly1305@openssh.com":t("chacha20",8,64,0,16,0,Ir),"aes128-gcm":t("aes-128-gcm",16,16,12,16,0,Ir),"aes256-gcm":t("aes-256-gcm",16,32,12,16,0,Ir),"aes128-gcm@openssh.com":t("aes-128-gcm",16,16,12,16,0,Ir),"aes256-gcm@openssh.com":t("aes-256-gcm",16,32,12,16,0,Ir),"aes128-cbc":t("aes-128-cbc",16,16,0,0,0,0),"aes192-cbc":t("aes-192-cbc",16,24,0,0,0,0),"aes256-cbc":t("aes-256-cbc",16,32,0,0,0,0),"rijndael-cbc@lysator.liu.se":t("aes-256-cbc",16,32,0,0,0,0),"3des-cbc":t("des-ede3-cbc",8,24,0,0,0,0),"blowfish-cbc":t("bf-cbc",8,16,0,0,0,0),"idea-cbc":t("idea-cbc",8,16,0,0,0,0),"cast128-cbc":t("cast-cbc",8,16,0,0,0,0),"aes128-ctr":t("aes-128-ctr",16,16,16,0,0,Ir),"aes192-ctr":t("aes-192-ctr",16,24,16,0,0,Ir),"aes256-ctr":t("aes-256-ctr",16,32,16,0,0,Ir),"3des-ctr":t("des-ede3",8,24,8,0,0,Ir),"blowfish-ctr":t("bf-ecb",8,16,8,0,0,Ir),"cast128-ctr":t("cast5-ecb",8,16,8,0,0,Ir),arcfour:t("rc4",8,16,0,0,1536,Ir),arcfour128:t("rc4",8,16,0,0,1536,Ir),arcfour256:t("rc4",8,32,0,0,1536,Ir),arcfour512:t("rc4",8,64,0,0,1536,Ir)}})(),T8=(()=>{function t(e,r,n,i){return{sslName:e,len:r,actualLen:n,isETM:i}}return{"hmac-md5":t("md5",16,16,!1),"hmac-md5-96":t("md5",16,12,!1),"hmac-ripemd160":t("ripemd160",20,20,!1),"hmac-sha1":t("sha1",20,20,!1),"hmac-sha1-etm@openssh.com":t("sha1",20,20,!0),"hmac-sha1-96":t("sha1",20,12,!1),"hmac-sha2-256":t("sha256",32,32,!1),"hmac-sha2-256-etm@openssh.com":t("sha256",32,32,!0),"hmac-sha2-256-96":t("sha256",32,12,!1),"hmac-sha2-512":t("sha512",64,64,!1),"hmac-sha2-512-etm@openssh.com":t("sha512",64,64,!0),"hmac-sha2-512-96":t("sha512",64,12,!1)}})(),Fm=class{constructor(e,r){this.outSeqno=e,this._onWrite=r,this._dead=!1}free(){this._dead=!0}allocPacket(e){let r=5+e,n=8-(r&7);n<4&&(n+=8),r+=n;let i=Buffer.allocUnsafe(r);return gn(i,r-4,0),i[4]=n,Do(i,5+e,n),i}encrypt(e){this._dead||(this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}},hx=Buffer.alloc(32),en=Buffer.alloc(16),Iu,Ru,r_,Lm=class{constructor(e){let r=e.outbound;this.outSeqno=r.seqno,this._onWrite=r.onWrite,this._encKeyMain=r.cipherKey.slice(0,32),this._encKeyPktLen=r.cipherKey.slice(32),this._dead=!1}free(){this._dead=!0}allocPacket(e){let r=5+e,n=8-(r-4&7);n<4&&(n+=8),r+=n;let i=Buffer.allocUnsafe(r);return gn(i,r-4,0),i[4]=n,Do(i,5+e,n),i}encrypt(e){if(this._dead)return;en[0]=0,gn(en,this.outSeqno,12);let r=La("chacha20",this._encKeyMain,en).update(hx),n=La("chacha20",this._encKeyPktLen,en).update(e.slice(0,4));this._onWrite(n),en[0]=1;let i=La("chacha20",this._encKeyMain,en).update(e.slice(4));this._onWrite(i),r_(Ru,n,n.length,i,i.length,r);let s=Buffer.allocUnsafe(16);s.set(new Uint8Array(Iu.HEAPU8.buffer,Ru,16),0),this._onWrite(s),this.outSeqno=this.outSeqno+1>>>0}},Mm=class{constructor(e){let r=e.outbound;this.outSeqno=r.seqno,this._onWrite=r.onWrite,this._instance=new Xm(r.cipherKey),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let r=5+e,n=8-(r-4&7);n<4&&(n+=8),r+=n;let i=Buffer.allocUnsafe(r+16);return gn(i,r-4,0),i[4]=n,Do(i,5+e,n),i}encrypt(e){this._dead||(this._instance.encrypt(e,this.outSeqno),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}},Um=class{constructor(e){let r=e.outbound;this.outSeqno=r.seqno,this._onWrite=r.onWrite,this._encSSLName=r.cipherInfo.sslName,this._encKey=r.cipherKey,this._encIV=r.cipherIV,this._dead=!1}free(){this._dead=!0}allocPacket(e){let r=5+e,n=16-(r-4&15);n<4&&(n+=16),r+=n;let i=Buffer.allocUnsafe(r);return gn(i,r-4,0),i[4]=n,Do(i,5+e,n),i}encrypt(e){if(this._dead)return;let r=La(this._encSSLName,this._encKey,this._encIV);r.setAutoPadding(!1);let n=e.slice(0,4);r.setAAD(n),this._onWrite(n);let i=r.update(e.slice(4));this._onWrite(i);let s=r.final();s.length&&this._onWrite(s);let o=r.getAuthTag();this._onWrite(o),dx(this._encIV),this.outSeqno=this.outSeqno+1>>>0}},qm=class{constructor(e){let r=e.outbound;this.outSeqno=r.seqno,this._onWrite=r.onWrite,this._instance=new Vm(r.cipherInfo.sslName,r.cipherKey,r.cipherIV),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let r=5+e,n=16-(r-4&15);n<4&&(n+=16),r+=n;let i=Buffer.allocUnsafe(r+16);return gn(i,r-4,0),i[4]=n,Do(i,5+e,n),i}encrypt(e){this._dead||(this._instance.encrypt(e),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}},Hm=class{constructor(e){let r=e.outbound;this.outSeqno=r.seqno,this._onWrite=r.onWrite,this._encBlockLen=r.cipherInfo.blockLen,this._cipherInstance=La(r.cipherInfo.sslName,r.cipherKey,r.cipherIV),this._macSSLName=r.macInfo.sslName,this._macKey=r.macKey,this._macActualLen=r.macInfo.actualLen,this._macETM=r.macInfo.isETM,this._aadLen=this._macETM?4:0,this._dead=!1;let n=r.cipherInfo.discardLen;if(n){let i=Oh.get(n);i===void 0&&(i=Buffer.alloc(n),Oh.set(n,i)),this._cipherInstance.update(i)}}free(){this._dead=!0}allocPacket(e){let r=this._encBlockLen,n=5+e,i=r-(n-this._aadLen&r-1);i<4&&(i+=r),n+=i;let s=Buffer.allocUnsafe(n);return gn(s,n-4,0),s[4]=i,Do(s,5+e,i),s}encrypt(e){if(this._dead)return;let r;if(this._macETM){let i=new Uint8Array(e.buffer,e.byteOffset,4),s=this._cipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+4,e.length-4));this._onWrite(i),this._onWrite(s),r=Nm(this._macSSLName,this._macKey),gn(Fa,this.outSeqno,0),r.update(Fa),r.update(i),r.update(s)}else{let i=this._cipherInstance.update(e);this._onWrite(i),r=Nm(this._macSSLName,this._macKey),gn(Fa,this.outSeqno,0),r.update(Fa),r.update(e)}let n=r.digest();n.length>this._macActualLen&&(n=n.slice(0,this._macActualLen)),this._onWrite(n),this.outSeqno=this.outSeqno+1>>>0}},Wm=class{constructor(e){let r=e.outbound;this.outSeqno=r.seqno,this._onWrite=r.onWrite,this._encBlockLen=r.cipherInfo.blockLen,this._macLen=r.macInfo.len,this._macActualLen=r.macInfo.actualLen,this._aadLen=r.macInfo.isETM?4:0,this._instance=new Jm(r.cipherInfo.sslName,r.cipherKey,r.cipherIV,r.macInfo.sslName,r.macKey,r.macInfo.isETM),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let r=this._encBlockLen,n=5+e,i=r-(n-this._aadLen&r-1);i<4&&(i+=r),n+=i;let s=Buffer.allocUnsafe(n+this._macLen);return gn(s,n-4,0),s[4]=i,Do(s,5+e,i),s}encrypt(e){this._dead||(this._instance.encrypt(e,this.outSeqno),this._macActualLen<this._macLen&&(e=new Is(e.buffer,e.byteOffset,e.length-(this._macLen-this._macActualLen))),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}},Qm=class{constructor(e,r){this.inSeqno=e,this._onPayload=r,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0}free(){}decrypt(e,r,n){for(;r<n;){if(this._lenBytes<4){let s=Math.min(4-this._lenBytes,n-r);for(this._lenBytes+=s;s--;)this._len=(this._len<<8)+e[r++];if(this._lenBytes<4)return;if(this._len>Io||this._len<8||(4+this._len&7)!==0)throw new Error("Bad packet length");if(r>=n)return}if(this._packetPos<this._len){let s=Math.min(this._len-this._packetPos,n-r),o;if(r!==0||s!==n?o=new Uint8Array(e.buffer,e.byteOffset+r,s):o=e,s===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._packetPos)),r+=s,this._packetPos+=s,this._packetPos<this._len)return}let i=this._packet?new Is(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):fx;this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0;{let s=this._onPayload(i);if(s!==void 0)return s===!1?r:s}}}},Gm=class{constructor(e){let r=e.inbound;this.inSeqno=r.seqno,this._onPayload=r.onPayload,this._decKeyMain=r.decipherKey.slice(0,32),this._decKeyPktLen=r.decipherKey.slice(32),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._calcMac=Buffer.allocUnsafe(16),this._macPos=0}free(){}decrypt(e,r,n){for(;r<n;){if(this._lenPos<4){let a=Math.min(4-this._lenPos,n-r);for(;a--;)this._lenBuf[this._lenPos++]=e[r++];if(this._lenPos<4)return;en[0]=0,gn(en,this.inSeqno,12);let l=kh("chacha20",this._decKeyPktLen,en).update(this._lenBuf);if(this._len=Tu(l,0),this._len>Io||this._len<8||(this._len&7)!==0)throw new Error("Bad packet length")}if(this._pktLen<this._len){if(r>=n)return;let a=Math.min(this._len-this._pktLen,n-r),l;if(r!==0||a!==n?l=new Uint8Array(e.buffer,e.byteOffset+r,a):l=e,a===this._len?this._packet=l:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(l,this._pktLen)),r+=a,this._pktLen+=a,this._pktLen<this._len||r>=n)return}{let a=Math.min(16-this._macPos,n-r);if(r!==0||a!==n?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+r,a),this._macPos):this._mac.set(e,this._macPos),r+=a,this._macPos+=a,this._macPos<16)return}en[0]=0,gn(en,this.inSeqno,12);let i=La("chacha20",this._decKeyMain,en).update(hx);if(r_(Ru,this._lenBuf,4,this._packet,this._packet.length,i),this._calcMac.set(new Uint8Array(Iu.HEAPU8.buffer,Ru,16),0),!Bm(this._calcMac,this._mac))throw new Error("Invalid MAC");en[0]=1;let s=kh("chacha20",this._decKeyMain,en).update(this._packet),o=new Is(s.buffer,s.byteOffset+1,s.length-s[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{let a=this._onPayload(o);if(a!==void 0)return a===!1?r:a}}}},jm=class{constructor(e){let r=e.inbound;this.inSeqno=r.seqno,this._onPayload=r.onPayload,this._instance=new e_(r.decipherKey),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._macPos=0}free(){this._instance.free()}decrypt(e,r,n){for(;r<n;){if(this._lenPos<4){let s=Math.min(4-this._lenPos,n-r);for(;s--;)this._lenBuf[this._lenPos++]=e[r++];if(this._lenPos<4)return;if(this._len=this._instance.decryptLen(this._lenBuf,this.inSeqno),this._len>Io||this._len<8||(this._len&7)!==0)throw new Error("Bad packet length");if(r>=n)return}if(this._pktLen<this._len){let s=Math.min(this._len-this._pktLen,n-r),o;if(r!==0||s!==n?o=new Uint8Array(e.buffer,e.byteOffset+r,s):o=e,s===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._pktLen)),r+=s,this._pktLen+=s,this._pktLen<this._len||r>=n)return}{let s=Math.min(16-this._macPos,n-r);if(r!==0||s!==n?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+r,s),this._macPos):this._mac.set(e,this._macPos),r+=s,this._macPos+=s,this._macPos<16)return}this._instance.decrypt(this._packet,this._mac,this.inSeqno);let i=new Is(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{let s=this._onPayload(i);if(s!==void 0)return s===!1?r:s}}}},$m=class{constructor(e){let r=e.inbound;this.inSeqno=r.seqno,this._onPayload=r.onPayload,this._decipherInstance=null,this._decipherSSLName=r.decipherInfo.sslName,this._decipherKey=r.decipherKey,this._decipherIV=r.decipherIV,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(e,r,n){for(;r<n;){if(this._lenBytes<4){let s=Math.min(4-this._lenBytes,n-r);for(this._lenBytes+=s;s--;)this._len=(this._len<<8)+e[r++];if(this._lenBytes<4)return;if(this._len+20>Io||this._len<16||(this._len&15)!==0)throw new Error("Bad packet length");this._decipherInstance=kh(this._decipherSSLName,this._decipherKey,this._decipherIV),this._decipherInstance.setAutoPadding(!1),this._decipherInstance.setAAD(R8(this._len))}if(this._pktLen<this._len){if(r>=n)return;let s=Math.min(this._len-this._pktLen,n-r),o;if(r!==0||s!==n?o=this._decipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+r,s)):o=this._decipherInstance.update(e),o.length&&(s===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._packetPos)),this._packetPos+=o.length),r+=s,this._pktLen+=s,this._pktLen<this._len||r>=n)return}{let s=Math.min(16-this._tagPos,n-r);if(r!==0||s!==n?this._tag.set(new Uint8Array(e.buffer,e.byteOffset+r,s),this._tagPos):this._tag.set(e,this._tagPos),r+=s,this._tagPos+=s,this._tagPos<16)return}{this._decipherInstance.setAuthTag(this._tag);let s=this._decipherInstance.final();s.length&&(this._packet?this._packet.set(s,this._packetPos):this._packet=s)}let i=this._packet?new Is(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):fx;this.inSeqno=this.inSeqno+1>>>0,dx(this._decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tagPos=0;{let s=this._onPayload(i);if(s!==void 0)return s===!1?r:s}}}},Km=class{constructor(e){let r=e.inbound;this.inSeqno=r.seqno,this._onPayload=r.onPayload,this._instance=new Zm(r.decipherInfo.sslName,r.decipherKey,r.decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(e,r,n){for(;r<n;){if(this._lenBytes<4){let s=Math.min(4-this._lenBytes,n-r);for(this._lenBytes+=s;s--;)this._len=(this._len<<8)+e[r++];if(this._lenBytes<4)return;if(this._len+20>Io||this._len<16||(this._len&15)!==0)throw new Error(`Bad packet length: ${this._len}`)}if(this._pktLen<this._len){if(r>=n)return;let s=Math.min(this._len-this._pktLen,n-r),o;if(r!==0||s!==n?o=new Uint8Array(e.buffer,e.byteOffset+r,s):o=e,s===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._pktLen)),r+=s,this._pktLen+=s,this._pktLen<this._len||r>=n)return}{let s=Math.min(16-this._tagPos,n-r);if(r!==0||s!==n?this._tag.set(new Uint8Array(e.buffer,e.byteOffset+r,s),this._tagPos):this._tag.set(e,this._tagPos),r+=s,this._tagPos+=s,this._tagPos<16)return}this._instance.decrypt(this._packet,this._len,this._tag);let i=new Is(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tagPos=0;{let s=this._onPayload(i);if(s!==void 0)return s===!1?r:s}}}},zm=class{constructor(e){let r=e.inbound;this.inSeqno=r.seqno,this._onPayload=r.onPayload,this._decipherInstance=kh(r.decipherInfo.sslName,r.decipherKey,r.decipherIV),this._decipherInstance.setAutoPadding(!1),this._block=Buffer.allocUnsafe(r.macInfo.isETM?4:r.decipherInfo.blockLen),this._blockSize=r.decipherInfo.blockLen,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._mac=Buffer.allocUnsafe(r.macInfo.actualLen),this._macPos=0,this._macSSLName=r.macInfo.sslName,this._macKey=r.macKey,this._macActualLen=r.macInfo.actualLen,this._macETM=r.macInfo.isETM,this._macInstance=null;let n=r.decipherInfo.discardLen;if(n){let i=Oh.get(n);i===void 0&&(i=Buffer.alloc(n),Oh.set(n,i)),this._decipherInstance.update(i)}}free(){}decrypt(e,r,n){for(;r<n;){if(this._blockPos<this._block.length){let o=Math.min(this._block.length-this._blockPos,n-r);if(r!==0||o!==n||o<e.length?this._block.set(new Uint8Array(e.buffer,e.byteOffset+r,o),this._blockPos):this._block.set(e,this._blockPos),r+=o,this._blockPos+=o,this._blockPos<this._block.length)return;let a,l;if(this._macETM?this._len=l=Tu(this._block,0):(a=this._decipherInstance.update(this._block),this._len=Tu(a,0),l=4+this._len-this._blockSize),this._len>Io||this._len<5||(l&this._blockSize-1)!==0)throw new Error("Bad packet length");if(this._macInstance=Nm(this._macSSLName,this._macKey),gn(Fa,this.inSeqno,0),this._macInstance.update(Fa),this._macETM?this._macInstance.update(this._block):(this._macInstance.update(new Uint8Array(a.buffer,a.byteOffset,4)),this._pktLen=a.length-4,this._packetPos=this._pktLen,this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(a.buffer,a.byteOffset+4,this._packetPos),0)),r>=n)return}if(this._pktLen<this._len){let o=Math.min(this._len-this._pktLen,n-r),a;r!==0||o!==n?a=new Uint8Array(e.buffer,e.byteOffset+r,o):a=e,this._macETM&&this._macInstance.update(a);let l=this._decipherInstance.update(a);if(l.length&&(o===this._len?this._packet=l:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(l,this._packetPos)),this._packetPos+=l.length),r+=o,this._pktLen+=o,this._pktLen<this._len||r>=n)return}{let o=Math.min(this._macActualLen-this._macPos,n-r);if(r!==0||o!==n?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+r,o),this._macPos):this._mac.set(e,this._macPos),r+=o,this._macPos+=o,this._macPos<this._macActualLen)return}this._macETM||this._macInstance.update(this._packet);let i=this._macInstance.digest();if(this._macActualLen<i.length&&(i=new Uint8Array(i.buffer,i.byteOffset,this._macActualLen)),!k8(i,this._mac))throw new Error("Invalid MAC");let s=new Is(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._macPos=0,this._macInstance=null;{let o=this._onPayload(s);if(o!==void 0)return o===!1?r:o}}}},Ym=class{constructor(e){let r=e.inbound;this.inSeqno=r.seqno,this._onPayload=r.onPayload,this._instance=new t_(r.decipherInfo.sslName,r.decipherKey,r.decipherIV,r.macInfo.sslName,r.macKey,r.macInfo.isETM,r.macInfo.actualLen),this._block=Buffer.allocUnsafe(r.macInfo.isETM||r.decipherInfo.stream?4:r.decipherInfo.blockLen),this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(r.macInfo.actualLen),this._macPos=0,this._macActualLen=r.macInfo.actualLen,this._macETM=r.macInfo.isETM}free(){this._instance.free()}decrypt(e,r,n){for(;r<n;){if(this._blockPos<this._block.length){let s=Math.min(this._block.length-this._blockPos,n-r);if(r!==0||s!==n||s<e.length?this._block.set(new Uint8Array(e.buffer,e.byteOffset+r,s),this._blockPos):this._block.set(e,this._blockPos),r+=s,this._blockPos+=s,this._blockPos<this._block.length)return;let o;if(this._macETM?this._len=o=Tu(this._block,0):(this._instance.decryptBlock(this._block),this._len=Tu(this._block,0),o=4+this._len-this._block.length),this._len>Io||this._len<5||(o&this._block.length-1)!==0)throw new Error("Bad packet length");if(this._macETM||(this._pktLen=this._block.length-4,this._pktLen&&(this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(this._block.buffer,this._block.byteOffset+4,this._pktLen),0))),r>=n)return}if(this._pktLen<this._len){let s=Math.min(this._len-this._pktLen,n-r),o;if(r!==0||s!==n?o=new Uint8Array(e.buffer,e.byteOffset+r,s):o=e,s===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._pktLen)),r+=s,this._pktLen+=s,this._pktLen<this._len||r>=n)return}{let s=Math.min(this._macActualLen-this._macPos,n-r);if(r!==0||s!==n?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+r,s),this._macPos):this._mac.set(e,this._macPos),r+=s,this._macPos+=s,this._macPos<this._macActualLen)return}this._instance.decrypt(this._packet,this.inSeqno,this._block,this._mac);let i=new Is(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._macPos=0,this._macInstance=null;{let s=this._onPayload(i);if(s!==void 0)return s===!1?r:s}}}};function dx(t){++t[11]>>>8&&++t[10]>>>8&&++t[9]>>>8&&++t[8]>>>8&&++t[7]>>>8&&++t[6]>>>8&&++t[5]>>>8&&++t[4]>>>8}var R8=(()=>{let t=Buffer.alloc(4);return e=>(t[0]=e>>>24,t[1]=e>>>16,t[2]=e>>>8,t[3]=e,t)})();function k8(t,e){return t.length!==e.length?(Bm(t,t),!1):Bm(t,e)}function O8(t){if(typeof t!="object"||t===null)throw new Error("Invalid config");if(typeof t.outbound!="object"||t.outbound===null)throw new Error("Invalid outbound");let e=t.outbound;if(typeof e.onWrite!="function")throw new Error("Invalid outbound.onWrite");if(typeof e.cipherInfo!="object"||e.cipherInfo===null)throw new Error("Invalid outbound.cipherInfo");if(!Buffer.isBuffer(e.cipherKey)||e.cipherKey.length!==e.cipherInfo.keyLen)throw new Error("Invalid outbound.cipherKey");if(e.cipherInfo.ivLen&&(!Buffer.isBuffer(e.cipherIV)||e.cipherIV.length!==e.cipherInfo.ivLen))throw new Error("Invalid outbound.cipherIV");if(typeof e.seqno!="number"||e.seqno<0||e.seqno>cx)throw new Error("Invalid outbound.seqno");let r=!!e.forceNative;switch(e.cipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return Vm&&!r?new qm(t):new Um(t);case"chacha20":return Xm&&!r?new Mm(t):new Lm(t);default:{if(typeof e.macInfo!="object"||e.macInfo===null)throw new Error("Invalid outbound.macInfo");if(!Buffer.isBuffer(e.macKey)||e.macKey.length!==e.macInfo.len)throw new Error("Invalid outbound.macKey");return Jm&&!r?new Wm(t):new Hm(t)}}}function N8(t){if(typeof t!="object"||t===null)throw new Error("Invalid config");if(typeof t.inbound!="object"||t.inbound===null)throw new Error("Invalid inbound");let e=t.inbound;if(typeof e.onPayload!="function")throw new Error("Invalid inbound.onPayload");if(typeof e.decipherInfo!="object"||e.decipherInfo===null)throw new Error("Invalid inbound.decipherInfo");if(!Buffer.isBuffer(e.decipherKey)||e.decipherKey.length!==e.decipherInfo.keyLen)throw new Error("Invalid inbound.decipherKey");if(e.decipherInfo.ivLen&&(!Buffer.isBuffer(e.decipherIV)||e.decipherIV.length!==e.decipherInfo.ivLen))throw new Error("Invalid inbound.decipherIV");if(typeof e.seqno!="number"||e.seqno<0||e.seqno>cx)throw new Error("Invalid inbound.seqno");let r=!!e.forceNative;switch(e.decipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return Zm&&!r?new Km(t):new $m(t);case"chacha20":return e_&&!r?new jm(t):new Gm(t);default:{if(typeof e.macInfo!="object"||e.macInfo===null)throw new Error("Invalid inbound.macInfo");if(!Buffer.isBuffer(e.macKey)||e.macKey.length!==e.macInfo.len)throw new Error("Invalid inbound.macKey");return t_&&!r?new Ym(t):new zm(t)}}}px.exports={CIPHER_INFO:I8,MAC_INFO:T8,bindingAvailable:!!Pm,init:new Promise(async(t,e)=>{try{Iu=await ux()(),Ru=Iu._malloc(16),r_=Iu.cwrap("poly1305_auth",null,["number","array","number","array","number","array"])}catch(r){return e(r)}t()}),NullCipher:Fm,createCipher:O8,NullDecipher:Qm,createDecipher:N8}});var Rs=x((Hne,Cx)=>{"use strict";var{createDecipheriv:i_,createECDH:B8,createHash:Ou,createHmac:P8,createSign:F8,createVerify:L8,getCiphers:M8,sign:gx,verify:mx}=require("crypto"),U8=M8(),{Ber:Me}=wu(),q8=Dm().pbkdf,{CIPHER_INFO:Nu}=Ds(),{eddsaSupported:s_,SUPPORTED_CIPHER:H8}=Yi(),{bufferSlice:To,makeBufferParser:W8,readString:Fe,readUInt32BE:ku,writeUInt32BE:yr}=Gn(),Vi=Symbol("Hash Algorithm"),jn=Symbol("Private key PEM"),mi=Symbol("Public key PEM"),Ts=Symbol("Public key SSH"),Ma=Symbol("Decrypted Key"),n_=Object.create(null);{let t=Object.keys(Nu);for(let e=0;e<t.length;++e){let r=Nu[t[e]].sslName;!r||n_[r]||(n_[r]=Nu[t[e]])}}var Nh=W8();function $n(t,e){e=e.base64Slice(0,e.length);let r=e.replace(/.{64}/g,`$&
`);return e.length&63&&(r+=`
`),`-----BEGIN ${t} KEY-----
${r}-----END ${t} KEY-----`}function Bu(t,e){let r=Buffer.allocUnsafe(t.length+e.length);return r.set(t,0),r.set(e,t.length),r}function o_(t,e){let r=t.length,n=t._pos||0;for(let i=0;i<e;++i){let s=r-n;if(n>=r||s<4)return!1;let o=ku(t,n);if(s<4+o)return!1;n+=4+o}return t._pos=n,!0}function Pu(t,e){let r=new Me.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(Me.BitString),r.writeByte(0),r.startSequence(),r.writeBuffer(t,Me.Integer),r.writeBuffer(e,Me.Integer),r.endSequence(),r.endSequence(),r.endSequence(),$n("PUBLIC",r.buffer)}function Fu(t,e){let r=Buffer.allocUnsafe(15+e.length+4+t.length);yr(r,7,0),r.utf8Write("ssh-rsa",4,7);let n=11;return yr(r,e.length,n),r.set(e,n+=4),yr(r,t.length,n+=e.length),r.set(t,n+4),r}var _x=(()=>{function t(n,i,s,o,a,l,u,c){let f=new Me.Writer;return f.startSequence(),f.writeInt(0,Me.Integer),f.writeBuffer(n,Me.Integer),f.writeBuffer(i,Me.Integer),f.writeBuffer(s,Me.Integer),f.writeBuffer(o,Me.Integer),f.writeBuffer(a,Me.Integer),f.writeBuffer(l,Me.Integer),f.writeBuffer(u,Me.Integer),f.writeBuffer(c,Me.Integer),f.endSequence(),f.buffer}function e(n){return BigInt(`0x${n.hexSlice(0,n.length)}`)}function r(n){let i=n.toString(16);if((i.length&1)!==0)i=`0${i}`;else{let s=i.charCodeAt(0);(s===56||s===57||s>=97&&s<=102)&&(i=`00${i}`)}return Buffer.from(i,"hex")}return function(i,s,o,a,l,u){let c=e(o),f=r(c%(e(l)-1n)),h=r(c%(e(u)-1n));return $n("RSA PRIVATE",t(i,s,o,l,u,f,h,a))}})();function Lu(t,e,r,n){let i=new Me.Writer;return i.startSequence(),i.startSequence(),i.writeOID("1.2.840.10040.4.1"),i.startSequence(),i.writeBuffer(t,Me.Integer),i.writeBuffer(e,Me.Integer),i.writeBuffer(r,Me.Integer),i.endSequence(),i.endSequence(),i.startSequence(Me.BitString),i.writeByte(0),i.writeBuffer(n,Me.Integer),i.endSequence(),i.endSequence(),$n("PUBLIC",i.buffer)}function Mu(t,e,r,n){let i=Buffer.allocUnsafe(15+t.length+4+e.length+4+r.length+4+n.length);yr(i,7,0),i.utf8Write("ssh-dss",4,7);let s=11;return yr(i,t.length,s),i.set(t,s+=4),yr(i,e.length,s+=t.length),i.set(e,s+=4),yr(i,r.length,s+=e.length),i.set(r,s+=4),yr(i,n.length,s+=r.length),i.set(n,s+4),i}function Ex(t,e,r,n,i){let s=new Me.Writer;return s.startSequence(),s.writeInt(0,Me.Integer),s.writeBuffer(t,Me.Integer),s.writeBuffer(e,Me.Integer),s.writeBuffer(r,Me.Integer),s.writeBuffer(n,Me.Integer),s.writeBuffer(i,Me.Integer),s.endSequence(),$n("DSA PRIVATE",s.buffer)}function yx(t){let e=new Me.Writer;return e.startSequence(),e.startSequence(),e.writeOID("1.3.101.112"),e.endSequence(),e.startSequence(Me.BitString),e.writeByte(0),e._ensure(t.length),e._buf.set(t,e._offset),e._offset+=t.length,e.endSequence(),e.endSequence(),$n("PUBLIC",e.buffer)}function Ax(t){let e=Buffer.allocUnsafe(19+t.length);return yr(e,11,0),e.utf8Write("ssh-ed25519",4,11),yr(e,t.length,15),e.set(t,19),e}function Q8(t){let e=new Me.Writer;return e.startSequence(),e.writeInt(0,Me.Integer),e.startSequence(),e.writeOID("1.3.101.112"),e.endSequence(),e.startSequence(Me.OctetString),e.writeBuffer(t,Me.OctetString),e.endSequence(),e.endSequence(),$n("PRIVATE",e.buffer)}function a_(t,e){let r=new Me.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.10045.2.1"),r.writeOID(t),r.endSequence(),r.startSequence(Me.BitString),r.writeByte(0),r._ensure(e.length),r._buf.set(e,r._offset),r._offset+=e.length,r.endSequence(),r.endSequence(),$n("PUBLIC",r.buffer)}function l_(t,e){let r;switch(t){case"1.2.840.10045.3.1.7":r="nistp256";break;case"1.3.132.0.34":r="nistp384";break;case"1.3.132.0.35":r="nistp521";break;default:return}let n=Buffer.allocUnsafe(39+e.length);return yr(n,19,0),n.utf8Write(`ecdsa-sha2-${r}`,4,19),yr(n,8,23),n.utf8Write(r,27,8),yr(n,e.length,35),n.set(e,39),n}function G8(t,e,r){let n=new Me.Writer;return n.startSequence(),n.writeInt(1,Me.Integer),n.writeBuffer(r,Me.OctetString),n.startSequence(160),n.writeOID(t),n.endSequence(),n.startSequence(161),n.startSequence(Me.BitString),n.writeByte(0),n._ensure(e.length),n._buf.set(e,n._offset),n._offset+=e.length,n.endSequence(),n.endSequence(),n.endSequence(),$n("EC PRIVATE",n.buffer)}function j8(t,e){let r=B8(t);return r.setPrivateKey(e),r.getPublicKey()}var Uu={sign:typeof gx=="function"?function(e,r){let n=this[jn];if(n===null)return new Error("No private key available");(!r||typeof r!="string")&&(r=this[Vi]);try{return gx(r,e,n)}catch(i){return i}}:function(e,r){let n=this[jn];if(n===null)return new Error("No private key available");(!r||typeof r!="string")&&(r=this[Vi]);let i=F8(r);i.update(e);try{return i.sign(n)}catch(s){return s}},verify:typeof mx=="function"?function(e,r,n){let i=this[mi];if(i===null)return new Error("No public key available");(!n||typeof n!="string")&&(n=this[Vi]);try{return mx(n,e,i,r)}catch(s){return s}}:function(e,r,n){let i=this[mi];if(i===null)return new Error("No public key available");(!n||typeof n!="string")&&(n=this[Vi]);let s=L8(n);s.update(e);try{return s.verify(i,r)}catch(o){return o}},isPrivateKey:function(){return this[jn]!==null},getPrivatePEM:function(){return this[jn]},getPublicPEM:function(){return this[mi]},getPublicSSH:function(){return this[Ts]},equals:function(e){let r=Sx(e);return r instanceof Error?!1:this.type===r.type&&this[jn]===r[jn]&&this[mi]===r[mi]&&this[Ts].equals(r[Ts])}};function Bh(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[jn]=r,this[mi]=n,this[Ts]=i,this[Vi]=s,this[Ma]=o}Bh.prototype=Uu;{let e=function(r,n,i){let s=[];if(r.length<8)return new Error("Malformed OpenSSH private key");let o=ku(r,0),a=ku(r,4);if(o!==a)return i?new Error("OpenSSH key integrity check failed -- bad passphrase?"):new Error("OpenSSH key integrity check failed");r._pos=8;let l,u;for(l=0;l<n;++l){let f,h,p,g,m=Fe(r,r._pos,!0);if(m===void 0)return new Error("Malformed OpenSSH private key");switch(m){case"ssh-rsa":{let A=Fe(r,r._pos);if(A===void 0)return new Error("Malformed OpenSSH private key");let w=Fe(r,r._pos);if(w===void 0)return new Error("Malformed OpenSSH private key");let k=Fe(r,r._pos);if(k===void 0)return new Error("Malformed OpenSSH private key");let S=Fe(r,r._pos);if(S===void 0)return new Error("Malformed OpenSSH private key");let B=Fe(r,r._pos);if(B===void 0)return new Error("Malformed OpenSSH private key");let F=Fe(r,r._pos);if(F===void 0)return new Error("Malformed OpenSSH private key");p=Pu(A,w),g=Fu(A,w),h=_x(A,w,k,S,B,F),f="sha1";break}case"ssh-dss":{let A=Fe(r,r._pos);if(A===void 0)return new Error("Malformed OpenSSH private key");let w=Fe(r,r._pos);if(w===void 0)return new Error("Malformed OpenSSH private key");let k=Fe(r,r._pos);if(k===void 0)return new Error("Malformed OpenSSH private key");let S=Fe(r,r._pos);if(S===void 0)return new Error("Malformed OpenSSH private key");let B=Fe(r,r._pos);if(B===void 0)return new Error("Malformed OpenSSH private key");p=Lu(A,w,k,S),g=Mu(A,w,k,S),h=Ex(A,w,k,S,B),f="sha1";break}case"ssh-ed25519":{if(!s_)return new Error(`Unsupported OpenSSH private key type: ${m}`);let A=Fe(r,r._pos);if(A===void 0||A.length!==32)return new Error("Malformed OpenSSH private key");let w=Fe(r,r._pos);if(w===void 0||w.length!==64)return new Error("Malformed OpenSSH private key");p=yx(A),g=Ax(A),h=Q8(To(w,0,32)),f=null;break}case"ecdsa-sha2-nistp256":f="sha256",u="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":f===void 0&&(f="sha384",u="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(f===void 0&&(f="sha512",u="1.3.132.0.35"),!o_(r,1))return new Error("Malformed OpenSSH private key");let A=Fe(r,r._pos);if(A===void 0)return new Error("Malformed OpenSSH private key");let w=Fe(r,r._pos);if(w===void 0)return new Error("Malformed OpenSSH private key");p=a_(u,A),g=l_(u,A),h=G8(u,A,w);break}default:return new Error(`Unsupported OpenSSH private key type: ${m}`)}let E=Fe(r,r._pos,!0);if(E===void 0)return new Error("Malformed OpenSSH private key");s.push(new Bh(m,E,h,p,g,f,i))}let c=0;for(l=r._pos;l<r.length;++l)if(r[l]!==++c%255)return new Error("Malformed OpenSSH private key");return s},t=/^-----BEGIN OPENSSH PRIVATE KEY-----(?:\r\n|\n)([\s\S]+)(?:\r\n|\n)-----END OPENSSH PRIVATE KEY-----$/;Bh.parse=(r,n)=>{let i=t.exec(r);if(i===null)return null;let s,o=Buffer.from(i[1],"base64");if(o.length<31)return new Error("Malformed OpenSSH private key");let a=o.utf8Slice(0,15);if(a!=="openssh-key-v1\0")return new Error(`Unsupported OpenSSH key magic: ${a}`);let l=Fe(o,15,!0);if(l===void 0)return new Error("Malformed OpenSSH private key");if(l!=="none"&&H8.indexOf(l)===-1)return new Error(`Unsupported cipher for OpenSSH key: ${l}`);let u=Fe(o,o._pos,!0);if(u===void 0)return new Error("Malformed OpenSSH private key");if(u!=="none"){if(l==="none")return new Error("Malformed OpenSSH private key");if(u!=="bcrypt")return new Error(`Unsupported kdf name for OpenSSH key: ${u}`);if(!n)return new Error("Encrypted private OpenSSH key detected, but no passphrase given")}else if(l!=="none")return new Error("Malformed OpenSSH private key");let c,f,h;l!=="none"&&(c=Nu[l]);let p=Fe(o,o._pos);if(p===void 0)return new Error("Malformed OpenSSH private key");if(p.length)switch(u){case"none":return new Error("Malformed OpenSSH private key");case"bcrypt":{let m=Fe(p,0);if(m===void 0||p._pos+4>p.length)return new Error("Malformed OpenSSH private key");let E=ku(p,p._pos),A=Buffer.allocUnsafe(c.keyLen+c.ivLen);if(q8(n,n.length,m,m.length,A,A.length,E)!==0)return new Error("Failed to generate information to decrypt key");f=To(A,0,c.keyLen),h=To(A,c.keyLen,A.length);break}}else if(u!=="none")return new Error("Malformed OpenSSH private key");if(o._pos+3>=o.length)return new Error("Malformed OpenSSH private key");let g=ku(o,o._pos);if(o._pos+=4,g>0){for(let E=0;E<g;++E){let A=Fe(o,o._pos);if(A===void 0)return new Error("Malformed OpenSSH private key");if(Fe(A,0,!0)===void 0)return new Error("Malformed OpenSSH private key")}let m=Fe(o,o._pos);if(m===void 0)return new Error("Malformed OpenSSH private key");if(f!==void 0){if(m.length<c.blockLen||m.length%c.blockLen!==0)return new Error("Malformed OpenSSH private key");try{let E={authTagLength:c.authLen},A=i_(c.sslName,f,h,E);if(A.setAutoPadding(!1),c.authLen>0){if(o.length-o._pos<c.authLen)return new Error("Malformed OpenSSH private key");A.setAuthTag(To(o,o._pos,o._pos+=c.authLen))}m=Bu(A.update(m),A.final())}catch(E){return E}}if(o._pos!==o.length)return new Error("Malformed OpenSSH private key");s=e(m,g,f!==void 0)}else s=[];return s instanceof Error?s:s[0]}}function Ph(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[jn]=r,this[mi]=n,this[Ts]=i,this[Vi]=s,this[Ma]=o}Ph.prototype=Uu;{let t=/^-----BEGIN (RSA|DSA|EC) PRIVATE KEY-----(?:\r\n|\n)((?:[^:]+:\s*[\S].*(?:\r\n|\n))*)([\s\S]+)(?:\r\n|\n)-----END (RSA|DSA|EC) PRIVATE KEY-----$/;Ph.parse=(e,r)=>{let n=t.exec(e);if(n===null)return null;let i=Buffer.from(n[3],"base64"),s=n[2],o=!1;if(s!==void 0){s=s.split(/\r\n|\n/g);for(let g=0;g<s.length;++g){let m=s[g],E=m.indexOf(":");if(m.slice(0,E)==="DEK-Info"){let A=m.slice(E+2);if(E=A.indexOf(","),E===-1)continue;let w=A.slice(0,E).toLowerCase();if(U8.indexOf(w)===-1)return new Error(`Cipher (${w}) not supported for encrypted OpenSSH private key`);let k=n_[w];if(!k)return new Error(`Cipher (${w}) not supported for encrypted OpenSSH private key`);let S=Buffer.from(A.slice(E+1),"hex");if(S.length!==k.ivLen)return new Error("Malformed encrypted OpenSSH private key");if(!r)return new Error("Encrypted OpenSSH private key detected, but no passphrase given");let B=To(S,0,8),F=Ou("md5").update(r).update(B).digest();for(;F.length<k.keyLen;)F=Bu(F,Ou("md5").update(F).update(r).update(B).digest());F.length>k.keyLen&&(F=To(F,0,k.keyLen));try{let M=i_(w,F,S);M.setAutoPadding(!1),i=Bu(M.update(i),M.final()),o=!0}catch(M){return M}}}}let a,l,u,c,f,h,p="Malformed OpenSSH private key";switch(o&&(p+=". Bad passphrase?"),n[1]){case"RSA":a="ssh-rsa",l=$n("RSA PRIVATE",i);try{h=new Me.Reader(i),h.readSequence(),h.readInt();let g=h.readString(Me.Integer,!0);if(g===null)return new Error(p);let m=h.readString(Me.Integer,!0);if(m===null)return new Error(p);u=Pu(g,m),c=Fu(g,m)}catch{return new Error(p)}f="sha1";break;case"DSA":a="ssh-dss",l=$n("DSA PRIVATE",i);try{h=new Me.Reader(i),h.readSequence(),h.readInt();let g=h.readString(Me.Integer,!0);if(g===null)return new Error(p);let m=h.readString(Me.Integer,!0);if(m===null)return new Error(p);let E=h.readString(Me.Integer,!0);if(E===null)return new Error(p);let A=h.readString(Me.Integer,!0);if(A===null)return new Error(p);u=Lu(g,m,E,A),c=Mu(g,m,E,A)}catch{return new Error(p)}f="sha1";break;case"EC":{let g,m,E;try{h=new Me.Reader(i),h.readSequence(),h.readInt(),m=h.readString(Me.OctetString,!0),h.readByte();let w=h.readLength();if(w!==null){if(h._offset=w,E=h.readOID(),E===null)return new Error(p);switch(E){case"1.2.840.10045.3.1.7":g="prime256v1",a="ecdsa-sha2-nistp256",f="sha256";break;case"1.3.132.0.34":g="secp384r1",a="ecdsa-sha2-nistp384",f="sha384";break;case"1.3.132.0.35":g="secp521r1",a="ecdsa-sha2-nistp521",f="sha512";break;default:return new Error(`Unsupported private key EC OID: ${E}`)}}else return new Error(p)}catch{return new Error(p)}l=$n("EC PRIVATE",i);let A=j8(g,m);u=a_(E,A),c=l_(E,A);break}}return new Ph(a,"",l,u,c,f,o)}}function Fh(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[jn]=r,this[mi]=n,this[Ts]=i,this[Vi]=s,this[Ma]=o}Fh.prototype=Uu;{let t=Buffer.alloc(0),e=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r=Buffer.from([0,0,0,0]),n=Buffer.from([0,0,0,1]),i=/^PuTTY-User-Key-File-2: (ssh-(?:rsa|dss))\r?\nEncryption: (aes256-cbc|none)\r?\nComment: ([^\r\n]*)\r?\nPublic-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-MAC: ([^\r\n]+)/;Fh.parse=(s,o)=>{let a=i.exec(s);if(a===null)return null;let l=a[2],u=l!=="none";if(u&&!o)return new Error("Encrypted PPK private key detected, but no passphrase given");let c=Buffer.from(a[5],"base64");if(u){let N=Nu[l],T=Bu(Ou("sha1").update(r).update(o).digest(),Ou("sha1").update(n).update(o).digest());T.length>N.keyLen&&(T=To(T,0,N.keyLen));try{let Q=i_(N.sslName,T,e);Q.setAutoPadding(!1),c=Bu(Q.update(c),Q.final())}catch(Q){return Q}}let f=a[1],h=a[3],p=Buffer.from(a[4],"base64"),g=a[6],m=f.length,E=l.length,A=Buffer.byteLength(h),w=p.length,k=c.length,S=Buffer.allocUnsafe(4+m+4+E+4+A+4+w+4+k),B=0;if(yr(S,m,B),S.utf8Write(f,B+=4,m),yr(S,E,B+=m),S.utf8Write(l,B+=4,E),yr(S,A,B+=E),S.utf8Write(h,B+=4,A),yr(S,w,B+=A),S.set(p,B+=4),yr(S,k,B+=w),S.set(c,B+4),o||(o=t),P8("sha1",Ou("sha1").update("putty-private-key-file-mac-key").update(o).digest()).update(S).digest("hex")!==g)return u?new Error("PPK private key integrity check failed -- bad passphrase?"):new Error("PPK private key integrity check failed");let M,D,I;switch(p._pos=0,o_(p,1),f){case"ssh-rsa":{let N=Fe(p,p._pos);if(N===void 0)return new Error("Malformed PPK public key");let T=Fe(p,p._pos);if(T===void 0)return new Error("Malformed PPK public key");let Q=Fe(c,0);if(Q===void 0)return new Error("Malformed PPK private key");let P=Fe(c,c._pos);if(P===void 0)return new Error("Malformed PPK private key");let y=Fe(c,c._pos);if(y===void 0)return new Error("Malformed PPK private key");let O=Fe(c,c._pos);if(O===void 0)return new Error("Malformed PPK private key");M=Pu(T,N),D=Fu(T,N),I=_x(T,N,Q,O,P,y);break}case"ssh-dss":{let N=Fe(p,p._pos);if(N===void 0)return new Error("Malformed PPK public key");let T=Fe(p,p._pos);if(T===void 0)return new Error("Malformed PPK public key");let Q=Fe(p,p._pos);if(Q===void 0)return new Error("Malformed PPK public key");let P=Fe(p,p._pos);if(P===void 0)return new Error("Malformed PPK public key");let y=Fe(c,0);if(y===void 0)return new Error("Malformed PPK private key");M=Lu(N,T,Q,P),D=Mu(N,T,Q,P),I=Ex(N,T,Q,P,y);break}}return new Fh(f,h,I,M,D,"sha1",u)}}function Mh(t,e,r,n,i){this.type=t,this.comment=e,this[jn]=null,this[mi]=r,this[Ts]=n,this[Vi]=i,this[Ma]=!1}Mh.prototype=Uu;{let t;s_?t=/^(((?:ssh-(?:rsa|dss|ed25519))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/:t=/^(((?:ssh-(?:rsa|dss))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/,Mh.parse=e=>{let r=t.exec(e);if(r===null)return null;let n=r[1],i=r[2],s=Buffer.from(r[3],"base64"),o=r[4]||"",a=Fe(s,s._pos,!0);return a===void 0||a.indexOf(i)!==0?new Error("Malformed OpenSSH public key"):u_(s,i,o,n)}}function Lh(t,e,r,n,i){this.type=t,this.comment=e,this[jn]=null,this[mi]=r,this[Ts]=n,this[Vi]=i,this[Ma]=!1}Lh.prototype=Uu;{let t=/^---- BEGIN SSH2 PUBLIC KEY ----(?:\r?\n)((?:.{0,72}\r?\n)+)---- END SSH2 PUBLIC KEY ----$/,e=/^[A-Z0-9a-z/+=\r\n]+$/,r=/^([\x21-\x39\x3B-\x7E]{1,64}): ((?:[^\\]*\\\r?\n)*[^\r\n]+)\r?\n/gm,n=/\\\r?\n/g;Lh.parse=i=>{let s=t.exec(i);if(s===null)return null;let o=s[1],a=0,l="";for(;s=r.exec(o);){let p=s[1],g=s[2].replace(n,"");if(g.length>1024)return r.lastIndex=0,new Error("Malformed RFC4716 public key");a=r.lastIndex,p.toLowerCase()==="comment"&&(l=g,l.length>1&&l.charCodeAt(0)===34&&l.charCodeAt(l.length-1)===34&&(l=l.slice(1,-1)))}let u=o.slice(a);if(!e.test(u))return new Error("Malformed RFC4716 public key");u=Buffer.from(u,"base64");let c=Fe(u,0,!0);if(c===void 0)return new Error("Malformed RFC4716 public key");let f=null,h=null;switch(c){case"ssh-rsa":{let p=Fe(u,u._pos);if(p===void 0)return new Error("Malformed RFC4716 public key");let g=Fe(u,u._pos);if(g===void 0)return new Error("Malformed RFC4716 public key");f=Pu(g,p),h=Fu(g,p);break}case"ssh-dss":{let p=Fe(u,u._pos);if(p===void 0)return new Error("Malformed RFC4716 public key");let g=Fe(u,u._pos);if(g===void 0)return new Error("Malformed RFC4716 public key");let m=Fe(u,u._pos);if(m===void 0)return new Error("Malformed RFC4716 public key");let E=Fe(u,u._pos);if(E===void 0)return new Error("Malformed RFC4716 public key");f=Lu(p,g,m,E),h=Mu(p,g,m,E);break}default:return new Error("Malformed RFC4716 public key")}return new Lh(c,l,f,h,"sha1")}}function u_(t,e,r,n){if(!vx(e))return new Error(`Unsupported OpenSSH public key type: ${e}`);let i,s,o=null,a=null;switch(e){case"ssh-rsa":{let l=Fe(t,t._pos||0);if(l===void 0)return new Error("Malformed OpenSSH public key");let u=Fe(t,t._pos);if(u===void 0)return new Error("Malformed OpenSSH public key");o=Pu(u,l),a=Fu(u,l),i="sha1";break}case"ssh-dss":{let l=Fe(t,t._pos||0);if(l===void 0)return new Error("Malformed OpenSSH public key");let u=Fe(t,t._pos);if(u===void 0)return new Error("Malformed OpenSSH public key");let c=Fe(t,t._pos);if(c===void 0)return new Error("Malformed OpenSSH public key");let f=Fe(t,t._pos);if(f===void 0)return new Error("Malformed OpenSSH public key");o=Lu(l,u,c,f),a=Mu(l,u,c,f),i="sha1";break}case"ssh-ed25519":{let l=Fe(t,t._pos||0);if(l===void 0||l.length!==32)return new Error("Malformed OpenSSH public key");o=yx(l),a=Ax(l),i=null;break}case"ecdsa-sha2-nistp256":i="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":i===void 0&&(i="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(i===void 0&&(i="sha512",s="1.3.132.0.35"),!o_(t,1))return new Error("Malformed OpenSSH public key");let l=Fe(t,t._pos||0);if(l===void 0)return new Error("Malformed OpenSSH public key");o=a_(s,l),a=l_(s,l);break}default:return new Error(`Unsupported OpenSSH public key type: ${e}`)}return new Mh(n,r,o,a,i)}function vx(t){switch(t){case"ssh-rsa":case"ssh-dss":case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return!0;case"ssh-ed25519":if(s_)return!0;default:return!1}}function bx(t){return t?typeof t[Ma]=="boolean":!1}function Sx(t,e){if(bx(t))return t;let r;if(Buffer.isBuffer(t))r=t,t=t.utf8Slice(0,t.length).trim();else if(typeof t=="string")t=t.trim();else return new Error("Key data must be a Buffer or string");if(e!=null){if(typeof e=="string")e=Buffer.from(e);else if(!Buffer.isBuffer(e))return new Error("Passphrase must be a string or Buffer when supplied")}let n;if((n=Bh.parse(t,e))!==null||(n=Ph.parse(t,e))!==null||(n=Fh.parse(t,e))!==null||(n=Mh.parse(t))!==null||(n=Lh.parse(t))!==null)return n;if(r){Nh.init(r,0);let i=Nh.readString(!0);i!==void 0&&(t=Nh.readRaw(),t!==void 0&&(n=u_(t,i,"",i),n instanceof Error&&(n=null))),Nh.clear()}return n||new Error("Unsupported key format")}Cx.exports={isParsedKey:bx,isSupportedKeyType:vx,parseDERKey:(t,e)=>u_(t,e,"",e),parseKey:Sx}});var g_=x((jne,Bx)=>{"use strict";var{Socket:Ix}=require("net"),{Duplex:Tx}=require("stream"),{resolve:$8}=require("path"),{readFile:wx}=require("fs"),{execFile:K8,spawn:z8}=require("child_process"),{isParsedKey:xx,parseKey:qu}=Rs(),{makeBufferParser:Y8,readUInt32BE:p_,writeUInt32BE:tn,writeUInt32LE:Dx}=Gn();function Hu(t){let e=!1;return(...r)=>{e||(e=!0,t(...r))}}function V8(t,e){let r=Buffer.allocUnsafe(t.length+e.length);return t.copy(r,0),e.copy(r,t.length),r}function f_(){}var X8=Buffer.alloc(0),Qt=Y8(),Wu=class{getIdentities(e){e(new Error("Missing getIdentities() implementation"))}sign(e,r,n,i){typeof n=="function"&&(i=n),i(new Error("Missing sign() implementation"))}},qa=class extends Wu{constructor(e){super(),this.socketPath=e}getStream(e){e=Hu(e);let r=new Ix;r.on("connect",()=>{e(null,r)}),r.on("close",n).on("end",n).on("error",n),r.connect(this.socketPath);function n(){try{r.destroy()}catch{}e(new Error("Failed to connect to agent"))}}getIdentities(e){e=Hu(e),this.getStream((r,n)=>{function i(o){if(n)try{n.destroy()}catch{}o||(o=new Error("Failed to retrieve identities from agent")),e(o)}if(r)return i(r);let s=new h_(!0);s.on("error",i),s.pipe(n).pipe(s),n.on("close",i).on("end",i).on("error",i),s.getIdentities((o,a)=>{if(o)return i(o);try{n.destroy()}catch{}e(null,a)})})}sign(e,r,n,i){typeof n=="function"?(i=n,n=void 0):(typeof n!="object"||n===null)&&(n=void 0),i=Hu(i),this.getStream((s,o)=>{function a(u){if(o)try{o.destroy()}catch{}u||(u=new Error("Failed to sign data with agent")),i(u)}if(s)return a(s);let l=new h_(!0);l.on("error",a),l.pipe(o).pipe(l),o.on("close",a).on("end",a).on("error",a),l.sign(e,r,n,(u,c)=>{if(u)return a(u);try{o.destroy()}catch{}i(null,c)})})}},Rx=(()=>{let o=$8(__dirname,"..","util/pagent.exe"),a={10:new Error("Invalid pagent.exe arguments"),11:new Error("Pageant is not running"),12:new Error("pagent.exe could not create an mmap"),13:new Error("pagent.exe could not set mode for stdin"),14:new Error("pagent.exe could not set mode for stdout"),15:new Error("pagent.exe did not get expected input payload")};function l(c){c.buffer=null,c.proc&&(c.proc.kill(),c.proc=void 0)}class u extends Tx{constructor(){super(),this.proc=void 0,this.buffer=null}_read(f){}_write(f,h,p){if(this.buffer===null)this.buffer=f;else{let A=Buffer.allocUnsafe(this.buffer.length+f.length);this.buffer.copy(A,0),f.copy(A,this.buffer.length),this.buffer=A}if(this.buffer.length<4)return p();let g=p_(this.buffer,0);if(this.buffer.length-4<g)return p();if(f=this.buffer.slice(0,4+g),this.buffer.length>4+g)return p(new Error("Unexpected multiple agent requests"));this.buffer=null;let m,E=this.proc=z8(o,[f.length]);E.stdout.on("data",A=>{this.push(A)}),E.on("error",A=>{m=A,p(m)}),E.on("close",A=>{if(this.proc=void 0,!m){if(m=a[A])return p(m);p()}}),E.stdin.end(f)}_final(f){l(this),f()}_destroy(f,h){l(this),h()}}return class extends qa{getStream(f){f(null,new u)}}})(),kx=(()=>{let t=/^!<socket >(\d+) s ([A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8})/;return class extends qa{getStream(r){r=Hu(r);let n=this.socketPath,i=!1;wx(n,function s(o,a){if(o){if(i)return r(new Error("Invalid cygwin unix socket path"));K8("cygpath",["-w",n],(F,M,D)=>{if(F||M.length===0)return r(new Error("Invalid cygwin unix socket path"));i=!0,n=M.toString().replace(/[\r\n]/g,""),wx(n,s)});return}let l=t.exec(a.toString("ascii"));if(!l)return r(new Error("Malformed cygwin unix socket file"));let u,c=0,f=!1,h=[],p,g=Buffer.alloc(12),m=parseInt(l[1],10),E=l[2].replace(/-/g,""),A=Buffer.allocUnsafe(16);for(let F=0,M=0;M<32;++F,M+=2)A[F]=parseInt(E.substring(M,M+2),16);for(let F=0;F<16;F+=4)Dx(A,p_(A,F),F);B();function w(){c=0,u="secret",p.write(A)}function k(F){if(c+=F.length,u==="secret"){c===16&&(c=0,u="creds",p.write(g));return}if(u==="creds"&&(f||h.push(F),c===12)){if(p.removeListener("connect",w),p.removeListener("data",k),p.removeListener("error",S),p.removeListener("end",S),p.removeListener("close",S),f)return r(null,p);f=!0,g=Buffer.concat(h),Dx(g,process.pid,0),p.on("error",()=>{}),p.destroy(),B()}}function S(){r(new Error("Problem negotiating cygwin unix socket security"))}function B(){p=new Ix,p.on("connect",w),p.on("data",k),p.on("error",S),p.on("end",S),p.on("close",S),p.connect(m)}})}}})(),J8=/^[/\\][/\\]\.[/\\]pipe[/\\].+/;function Ox(t){return process.platform==="win32"&&!J8.test(t)?t==="pageant"?new Rx:new kx(t):new qa(t)}var h_=(()=>{function u(D){let I;for(;D[w].length;){let N=D[w][0][f];if(N===void 0)break;D[w].shift(),I=D.push(N)}return I}let c=Symbol("Inbound Request Type"),f=Symbol("Inbound Request Response"),h=Symbol("Inbound Request Context");class p{constructor(I,N){this[c]=I,this[f]=void 0,this[h]=N}hasResponded(){return this[f]!==void 0}getType(){return this[c]}getContext(){return this[h]}}function g(D,I,N){return I[f]=N,u(D)}function m(D){if(D[S]=null,D[k]===0){let I=D[w];if(I&&I.length){D[w]=[];for(let N of I)N.cb(new Error("No reply from server"))}}try{D.end()}catch{}setImmediate(()=>{D[M]||D.emit("end"),D[F]||D.emit("close")})}function E(){this[F]=!0}function A(){this[M]=!0}let w=Symbol("Requests"),k=Symbol("Agent Protocol Role"),S=Symbol("Agent Protocol Buffer"),B=Symbol("Agent Protocol Current Message Length"),F=Symbol("Agent Protocol Closed"),M=Symbol("Agent Protocol Ended");return class extends Tx{constructor(I){super({autoDestroy:!0,emitClose:!1}),this[k]=I?0:1,this[w]=[],this[S]=null,this[B]=-1,this.once("end",A),this.once("close",E)}_read(I){}_write(I,N,T){this[S]===null?this[S]=I:this[S]=V8(this[S],I);let Q=this[S],P=Q.length,y=0;for(;y<P&&!(P<5||(this[B]===-1&&(this[B]=p_(Q,y)),P<4+this[B]));){let O=Q[y+=4];if(++y,this[k]===0){if(this[w].length===0)return T(new Error("Received unexpected message from server"));let z=this[w].shift();switch(O){case 5:z.cb(new Error("Agent responded with failure"));break;case 12:{if(z.type!==11)return T(new Error("Agent responded with wrong message type"));Qt.init(Q,y);let J=Qt.readUInt32BE();if(J===void 0)return Qt.clear(),T(new Error("Malformed agent response"));let L=[];for(let $=0;$<J;++$){let K=Qt.readString();if(K===void 0)return Qt.clear(),T(new Error("Malformed agent response"));let Z=Qt.readString(!0);if(Z===void 0)return Qt.clear(),T(new Error("Malformed agent response"));K=qu(K),!(K instanceof Error)&&(K.comment=K.comment||Z,L.push(K))}y=Qt.pos(),Qt.clear(),z.cb(null,L);break}case 14:{if(z.type!==13)return T(new Error("Agent responded with wrong message type"));Qt.init(Q,y);let J=Qt.readString();if(y=Qt.pos(),Qt.clear(),J===void 0)return T(new Error("Malformed agent response"));if(Qt.init(J,0),Qt.readString(!0),J=Qt.readString(),Qt.clear(),J===void 0)return T(new Error("Malformed OpenSSH signature format"));z.cb(null,J);break}default:return T(new Error("Agent responded with unsupported message type"))}}else switch(O){case 11:{let z=new p(O);this[w].push(z),this.emit("identities",z);break}case 13:{Qt.init(Q,y);let z=Qt.readString(),J=Qt.readString(),L=Qt.readUInt32BE();if(y=Qt.pos(),Qt.clear(),L===void 0){let fe=new p(O);return this[w].push(fe),this.failureReply(fe)}if(z=qu(z),z instanceof Error){let fe=new p(O);return this[w].push(fe),this.failureReply(fe)}let $={hash:void 0},K;z.type==="ssh-rsa"&&(L&2?(K="rsa-sha2-256",$.hash="sha256"):L&4&&(K="rsa-sha2-512",$.hash="sha512")),K===void 0&&(K=z.type);let Z=new p(O,K);this[w].push(Z),this.emit("sign",Z,z,J,$);break}default:{let z=new p(O);this[w].push(z),this.failureReply(z)}}if(this[B]=-1,y===P){this[S]=null;break}else this[S]=Q=Q.slice(y),P=Q.length,y=0}T()}_destroy(I,N){m(this),N()}_final(I){m(this),I()}sign(I,N,T,Q){if(this[k]!==0)throw new Error("Client-only method called with server role");typeof T=="function"?(Q=T,T=void 0):(typeof T!="object"||T===null)&&(T=void 0);let P=0;if(I=qu(I),I instanceof Error)throw new Error("Invalid public key argument");if(I.type==="ssh-rsa"&&T)switch(T.hash){case"sha256":P=2;break;case"sha512":P=4;break}I=I.getPublicSSH();let y=13,O=I.length,z=N.length,J=0,L=Buffer.allocUnsafe(9+O+4+z+4);return tn(L,L.length-4,J),L[J+=4]=y,tn(L,O,++J),I.copy(L,J+=4),tn(L,z,J+=O),N.copy(L,J+=4),tn(L,P,J+=z),typeof Q!="function"&&(Q=f_),this[w].push({type:y,cb:Q}),this.push(L)}getIdentities(I){if(this[k]!==0)throw new Error("Client-only method called with server role");let N=11,T=0,Q=Buffer.allocUnsafe(5);return tn(Q,Q.length-4,T),Q[T+=4]=N,typeof I!="function"&&(I=f_),this[w].push({type:N,cb:I}),this.push(Q)}failureReply(I){if(this[k]!==1)throw new Error("Server-only method called with client role");if(!(I instanceof p))throw new Error("Wrong request argument");if(I.hasResponded())return!0;let N=0,T=Buffer.allocUnsafe(5);return tn(T,T.length-4,N),T[N+=4]=5,g(this,I,T)}getIdentitiesReply(I,N){if(this[k]!==1)throw new Error("Server-only method called with client role");if(!(I instanceof p))throw new Error("Wrong request argument");if(I.hasResponded())return!0;if(I.getType()!==11)throw new Error("Invalid response to request");if(!Array.isArray(N))throw new Error("Keys argument must be an array");let T=4,Q=[];for(let O=0;O<N.length;++O){let z=N[O];if(typeof z!="object"||z===null)throw new Error(`Invalid key entry: ${z}`);let J,L;if(xx(z))J=z;else if(xx(z.pubKey))J=z.pubKey;else if(typeof z.pubKey!="object"||z.pubKey===null||({pubKey:J,comment:L}=z.pubKey,J=qu(J),J instanceof Error))continue;L=J.comment||L,J=J.getPublicSSH(),T+=4+J.length,L&&typeof L=="string"?L=Buffer.from(L):Buffer.isBuffer(L)||(L=X8),T+=4+L.length,Q.push({pubKey:J,comment:L})}let P=0,y=Buffer.allocUnsafe(5+T);tn(y,y.length-4,P),y[P+=4]=12,tn(y,Q.length,++P),P+=4;for(let O=0;O<Q.length;++O){let{pubKey:z,comment:J}=Q[O];tn(y,z.length,P),z.copy(y,P+=4),tn(y,J.length,P+=z.length),P+=4,J.length&&(J.copy(y,P),P+=J.length)}return g(this,I,y)}signReply(I,N){if(this[k]!==1)throw new Error("Server-only method called with client role");if(!(I instanceof p))throw new Error("Wrong request argument");if(I.hasResponded())return!0;if(I.getType()!==13)throw new Error("Invalid response to request");if(!Buffer.isBuffer(N))throw new Error("Signature argument must be a Buffer");if(N.length===0)throw new Error("Signature argument must be non-empty");let T=0,Q=I.getContext(),P=Buffer.byteLength(Q),y=Buffer.allocUnsafe(13+P+4+N.length);return tn(y,y.length-4,T),y[T+=4]=14,tn(y,4+P+4+N.length,++T),tn(y,P,T+=4),y.utf8Write(Q,T+=4,P),tn(y,N.length,T+=P),N.copy(y,T+=4),g(this,I,y)}}})(),c_=Symbol("Agent"),Kn=Symbol("Agent Keys"),Xi=Symbol("Agent Keys Index"),Ua=Symbol("Agent Init Callbacks"),d_=class{constructor(e){if(typeof e=="string")e=Ox(e);else if(!Nx(e))throw new Error("Invalid agent argument");this[c_]=e,this[Kn]=null,this[Xi]=-1,this[Ua]=null}init(e){if(typeof e!="function"&&(e=f_),this[Kn]===null)if(this[Ua]===null){this[Ua]=[e];let r=(...n)=>{process.nextTick(()=>{let i=this[Ua];this[Ua]=null;for(let s of i)s(...n)})};this[c_].getIdentities(Hu((n,i)=>{if(n)return r(n);if(!Array.isArray(i))return r(new Error("Agent implementation failed to provide keys"));let s=[];for(let o of i)o=qu(o),!(o instanceof Error)&&s.push(o);this[Kn]=s,this[Xi]=-1,r()}))}else this[Ua].push(e);else process.nextTick(e)}nextKey(){return this[Kn]===null||++this[Xi]>=this[Kn].length?!1:this[Kn][this[Xi]]}currentKey(){return this[Kn]===null||this[Xi]>=this[Kn].length?null:this[Kn][this[Xi]]}pos(){return this[Kn]===null||this[Xi]>=this[Kn].length?-1:this[Xi]}reset(){this[Xi]=-1}sign(...e){this[c_].sign(...e)}};function Nx(t){return t instanceof Wu}Bx.exports={AgentContext:d_,AgentProtocol:h_,BaseAgent:Wu,createAgent:Ox,CygwinAgent:kx,isAgent:Nx,OpenSSHAgent:qa,PageantAgent:Rx}});var v_=x(($ne,Px)=>{"use strict";var{kMaxLength:Z8}=require("buffer"),{createInflate:eM,constants:{DEFLATE:tM,INFLATE:rM,Z_DEFAULT_CHUNK:nM,Z_DEFAULT_COMPRESSION:iM,Z_DEFAULT_MEMLEVEL:sM,Z_DEFAULT_STRATEGY:oM,Z_DEFAULT_WINDOWBITS:aM,Z_PARTIAL_FLUSH:lM}}=require("zlib"),uM=eM()._handle.constructor;function cM(){throw new Error("Should not get here")}function fM(t,e,r){let n=this._owner,i=new Error(t);i.errno=e,i.code=r,n._err=i}function A_(t){t._handle&&(t._handle.close(),t._handle=null)}var Uh=class{constructor(e){let r=aM,n=iM,i=sM,s=oM,o=void 0;this._err=void 0,this._writeState=new Uint32Array(2),this._chunkSize=nM,this._maxOutputLength=Z8,this._outBuffer=Buffer.allocUnsafe(this._chunkSize),this._outOffset=0,this._handle=new uM(e),this._handle._owner=this,this._handle.onerror=fM,this._handle.init(r,n,i,s,this._writeState,cM,o)}writeSync(e,r){let n=this._handle;if(!n)throw new Error("Invalid Zlib instance");let i=e.length,s=this._chunkSize-this._outOffset,o=0,a,l,u,c=0,f=this._writeState,h=this._outBuffer,p=this._outOffset,g=this._chunkSize;for(;;){if(n.writeSync(lM,e,o,i,h,p,s),this._err)throw this._err;a=f[0],l=f[1];let E=i-l,A=s-a;if(A>0){let w=p===0&&A===h.length?h:h.slice(p,p+A);if(p+=A,u?u.push===void 0?u=[u,w]:u.push(w):u=w,c+=w.byteLength,c>this._maxOutputLength)throw A_(this),new Error(`Output length exceeded maximum of ${this._maxOutputLength}`)}else if(A!==0)throw new Error("have should not go down");if((a===0||p>=g)&&(s=g,p=0,h=Buffer.allocUnsafe(g)),a===0)o+=E,i=l;else break}if(this._outBuffer=h,this._outOffset=p,c===0&&(u=Buffer.alloc(0)),r)return u.totalLen=c,u;if(u.push===void 0)return u;let m=Buffer.allocUnsafe(c);for(let E=0,A=0;E<u.length;++E){let w=u[E];m.set(w,A),A+=w.length}return m}},m_=class{constructor(e){this.allocStart=0,this.allocStartKEX=0,this._protocol=e,this._zlib=new Uh(tM)}cleanup(){this._zlib&&A_(this._zlib)}alloc(e,r){return Buffer.allocUnsafe(e)}finalize(e,r){if(this._protocol._kexinit===void 0||r){let n=this._zlib.writeSync(e,!0),i=this._protocol._cipher.allocPacket(n.totalLen);if(n.push===void 0)i.set(n,5);else for(let s=0,o=5;s<n.length;++s){let a=n[s];i.set(a,o),o+=a.length}return i}return e}},__=class{constructor(e){this.allocStart=5,this.allocStartKEX=5,this._protocol=e}cleanup(){}alloc(e,r){return this._protocol._kexinit===void 0||r?this._protocol._cipher.allocPacket(e):Buffer.allocUnsafe(e)}finalize(e,r){return e}},E_=class{constructor(){this._zlib=new Uh(rM)}cleanup(){this._zlib&&A_(this._zlib)}read(e){return this._zlib.writeSync(e,!1)}},y_=class{cleanup(){}read(e){return e}};Px.exports={PacketReader:y_,PacketWriter:__,ZlibPacketReader:E_,ZlibPacketWriter:m_}});var qx=x((Kne,Ux)=>{"use strict";var{bufferSlice:b_,bufferParser:H,doFatalError:Pt,sigSSHToASN1:Fx,writeUInt32BE:Lx}=Gn(),{CHANNEL_OPEN_FAILURE:hM,COMPAT:dM,MESSAGE:Mt,TERMINAL_MODE:Mx}=Yi(),{parseKey:pM}=Rs(),gM=Array.from(Object.entries(Mx)).reduce((t,[e,r])=>({...t,[e]:r}),{});Ux.exports={[Mt.DISCONNECT]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE(),n=H.readString(!0),i=H.readString();if(H.clear(),i===void 0)return Pt(t,"Inbound: Malformed DISCONNECT packet");t._debug&&t._debug(`Inbound: Received DISCONNECT (${r}, "${n}")`);let s=t._handlers.DISCONNECT;s&&s(t,r,n)},[Mt.IGNORE]:(t,e)=>{t._debug&&t._debug("Inbound: Received IGNORE")},[Mt.UNIMPLEMENTED]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE();if(H.clear(),r===void 0)return Pt(t,"Inbound: Malformed UNIMPLEMENTED packet");t._debug&&t._debug(`Inbound: Received UNIMPLEMENTED (seqno ${r})`)},[Mt.DEBUG]:(t,e)=>{H.init(e,1);let r=H.readBool(),n=H.readString(!0),i=H.readString();if(H.clear(),i===void 0)return Pt(t,"Inbound: Malformed DEBUG packet");t._debug&&t._debug("Inbound: Received DEBUG");let s=t._handlers.DEBUG;s&&s(t,r,n)},[Mt.SERVICE_REQUEST]:(t,e)=>{H.init(e,1);let r=H.readString(!0);if(H.clear(),r===void 0)return Pt(t,"Inbound: Malformed SERVICE_REQUEST packet");t._debug&&t._debug(`Inbound: Received SERVICE_REQUEST (${r})`);let n=t._handlers.SERVICE_REQUEST;n&&n(t,r)},[Mt.SERVICE_ACCEPT]:(t,e)=>{H.init(e,1);let r=H.readString(!0);if(H.clear(),r===void 0)return Pt(t,"Inbound: Malformed SERVICE_ACCEPT packet");t._debug&&t._debug(`Inbound: Received SERVICE_ACCEPT (${r})`);let n=t._handlers.SERVICE_ACCEPT;n&&n(t,r)},[Mt.EXT_INFO]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE(),n;if(r!==void 0){n=[];for(let s=0;s<r;++s){let o=H.readString(!0),a=H.readString();if(a!==void 0)switch(o){case"server-sig-algs":{let l=a.latin1Slice(0,a.length).split(",");n.push({name:o,algs:l});continue}default:continue}n=void 0;break}}if(H.clear(),n===void 0)return Pt(t,"Inbound: Malformed EXT_INFO packet");t._debug&&t._debug("Inbound: Received EXT_INFO");let i=t._handlers.EXT_INFO;i&&i(t,n)},[Mt.USERAUTH_REQUEST]:(t,e)=>{H.init(e,1);let r=H.readString(!0),n=H.readString(!0),i=H.readString(!0),s,o;switch(i){case"none":s=null;break;case"password":{let l=H.readBool();if(l!==void 0&&(s=H.readString(!0),s!==void 0&&l)){let u=H.readString(!0);u!==void 0?s={oldPassword:s,newPassword:u}:s=void 0}break}case"publickey":{let l=H.readBool();if(l!==void 0){let u=H.readString(!0),c=u,f=H.readString(),h;switch(u){case"rsa-sha2-256":c="ssh-rsa",h="sha256";break;case"rsa-sha2-512":c="ssh-rsa",h="sha512";break}if(l){let p=H.pos(),g=H.readString();if(g!==void 0&&(g.length>4+u.length+4&&g.utf8Slice(4,4+u.length)===u&&(g=b_(g,4+u.length+4)),g=Fx(g,c),g)){let m=t._kex.sessionID,E=Buffer.allocUnsafe(4+m.length+p);Lx(E,m.length,0),E.set(m,4),E.set(new Uint8Array(e.buffer,e.byteOffset,p),4+m.length),s={keyAlgo:c,key:f,signature:g,blob:E,hashAlgo:h}}}else s={keyAlgo:c,key:f,hashAlgo:h},o="publickey -- check"}break}case"hostbased":{let l=H.readString(!0),u=l,c=H.readString(),f=H.readString(!0),h=H.readString(!0),p;switch(l){case"rsa-sha2-256":u="ssh-rsa",p="sha256";break;case"rsa-sha2-512":u="ssh-rsa",p="sha512";break}let g=H.pos(),m=H.readString();if(m!==void 0&&(m.length>4+l.length+4&&m.utf8Slice(4,4+l.length)===l&&(m=b_(m,4+l.length+4)),m=Fx(m,u),m!==void 0)){let E=t._kex.sessionID,A=Buffer.allocUnsafe(4+E.length+g);Lx(A,E.length,0),A.set(E,4),A.set(new Uint8Array(e.buffer,e.byteOffset,g),4+E.length),s={keyAlgo:u,key:c,signature:m,blob:A,localHostname:f,localUsername:h,hashAlgo:p}}break}case"keyboard-interactive":H.skipString(),s=H.readList();break;default:i!==void 0&&(s=H.readRaw())}if(H.clear(),s===void 0)return Pt(t,"Inbound: Malformed USERAUTH_REQUEST packet");o===void 0&&(o=i),t._authsQueue.push(i),t._debug&&t._debug(`Inbound: Received USERAUTH_REQUEST (${o})`);let a=t._handlers.USERAUTH_REQUEST;a&&a(t,r,n,i,s)},[Mt.USERAUTH_FAILURE]:(t,e)=>{H.init(e,1);let r=H.readList(),n=H.readBool();if(H.clear(),n===void 0)return Pt(t,"Inbound: Malformed USERAUTH_FAILURE packet");t._debug&&t._debug(`Inbound: Received USERAUTH_FAILURE (${r})`),t._authsQueue.shift();let i=t._handlers.USERAUTH_FAILURE;i&&i(t,r,n)},[Mt.USERAUTH_SUCCESS]:(t,e)=>{t._debug&&t._debug("Inbound: Received USERAUTH_SUCCESS"),t._authsQueue.shift();let r=t._handlers.USERAUTH_SUCCESS;r&&r(t)},[Mt.USERAUTH_BANNER]:(t,e)=>{H.init(e,1);let r=H.readString(!0),n=H.readString();if(H.clear(),n===void 0)return Pt(t,"Inbound: Malformed USERAUTH_BANNER packet");t._debug&&t._debug("Inbound: Received USERAUTH_BANNER");let i=t._handlers.USERAUTH_BANNER;i&&i(t,r)},60:(t,e)=>{if(!t._authsQueue.length){t._debug&&t._debug("Inbound: Received payload type 60 without auth");return}switch(t._authsQueue[0]){case"password":{H.init(e,1);let r=H.readString(!0),n=H.readString();if(H.clear(),n===void 0)return Pt(t,"Inbound: Malformed USERAUTH_PASSWD_CHANGEREQ packet");t._debug&&t._debug("Inbound: Received USERAUTH_PASSWD_CHANGEREQ");let i=t._handlers.USERAUTH_PASSWD_CHANGEREQ;i&&i(t,r);break}case"publickey":{H.init(e,1);let r=H.readString(!0),n=H.readString();if(H.clear(),n===void 0)return Pt(t,"Inbound: Malformed USERAUTH_PK_OK packet");t._debug&&t._debug("Inbound: Received USERAUTH_PK_OK"),t._authsQueue.shift();let i=t._handlers.USERAUTH_PK_OK;i&&i(t,r,n);break}case"keyboard-interactive":{H.init(e,1);let r=H.readString(!0),n=H.readString(!0);H.readString();let i=H.readUInt32BE(),s;if(i!==void 0){s=new Array(i);let a;for(a=0;a<i;++a){let l=H.readString(!0),u=H.readBool();if(u===void 0)break;s[a]={prompt:l,echo:u}}a!==i&&(s=void 0)}if(H.clear(),s===void 0)return Pt(t,"Inbound: Malformed USERAUTH_INFO_REQUEST packet");t._debug&&t._debug("Inbound: Received USERAUTH_INFO_REQUEST");let o=t._handlers.USERAUTH_INFO_REQUEST;o&&o(t,r,n,s);break}default:t._debug&&t._debug("Inbound: Received unexpected payload type 60")}},61:(t,e)=>{if(!t._authsQueue.length){t._debug&&t._debug("Inbound: Received payload type 61 without auth");return}if(t._authsQueue[0]!=="keyboard-interactive")return Pt(t,"Inbound: Received unexpected payload type 61");H.init(e,1);let r=H.readUInt32BE(),n;if(r!==void 0){n=new Array(r);let s;for(s=0;s<r;++s){let o=H.readString(!0);if(o===void 0)break;n[s]=o}s!==r&&(n=void 0)}if(H.clear(),n===void 0)return Pt(t,"Inbound: Malformed USERAUTH_INFO_RESPONSE packet");t._debug&&t._debug("Inbound: Received USERAUTH_INFO_RESPONSE");let i=t._handlers.USERAUTH_INFO_RESPONSE;i&&i(t,n)},[Mt.GLOBAL_REQUEST]:(t,e)=>{H.init(e,1);let r=H.readString(!0),n=H.readBool(),i;if(n!==void 0)switch(r){case"tcpip-forward":case"cancel-tcpip-forward":{let o=H.readString(!0),a=H.readUInt32BE();a!==void 0&&(i={bindAddr:o,bindPort:a});break}case"streamlocal-forward@openssh.com":case"cancel-streamlocal-forward@openssh.com":{let o=H.readString(!0);o!==void 0&&(i={socketPath:o});break}case"no-more-sessions@openssh.com":i=null;break;case"hostkeys-00@openssh.com":{for(i=[];H.avail()>0;){let o=H.readString();if(o===void 0){i=void 0;break}let a=pM(o);a instanceof Error||i.push(a)}break}default:i=H.readRaw()}if(H.clear(),i===void 0)return Pt(t,"Inbound: Malformed GLOBAL_REQUEST packet");t._debug&&t._debug(`Inbound: GLOBAL_REQUEST (${r})`);let s=t._handlers.GLOBAL_REQUEST;s?s(t,r,n,i):t.requestFailure()},[Mt.REQUEST_SUCCESS]:(t,e)=>{let r=e.length>1?b_(e,1):null;t._debug&&t._debug("Inbound: REQUEST_SUCCESS");let n=t._handlers.REQUEST_SUCCESS;n&&n(t,r)},[Mt.REQUEST_FAILURE]:(t,e)=>{t._debug&&t._debug("Inbound: Received REQUEST_FAILURE");let r=t._handlers.REQUEST_FAILURE;r&&r(t)},[Mt.CHANNEL_OPEN]:(t,e)=>{H.init(e,1);let r=H.readString(!0),n=H.readUInt32BE(),i=H.readUInt32BE(),s=H.readUInt32BE(),o;switch(r){case"forwarded-tcpip":case"direct-tcpip":{let l=H.readString(!0),u=H.readUInt32BE(),c=H.readString(!0),f=H.readUInt32BE();f!==void 0&&(o={type:r,sender:n,window:i,packetSize:s,data:{destIP:l,destPort:u,srcIP:c,srcPort:f}});break}case"forwarded-streamlocal@openssh.com":case"direct-streamlocal@openssh.com":{let l=H.readString(!0);l!==void 0&&(o={type:r,sender:n,window:i,packetSize:s,data:{socketPath:l}});break}case"x11":{let l=H.readString(!0),u=H.readUInt32BE();u!==void 0&&(o={type:r,sender:n,window:i,packetSize:s,data:{srcIP:l,srcPort:u}});break}default:o={type:r,sender:n,window:i,packetSize:s,data:{}}}if(H.clear(),o===void 0)return Pt(t,"Inbound: Malformed CHANNEL_OPEN packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN (s:${n}, ${r})`);let a=t._handlers.CHANNEL_OPEN;a?a(t,o):t.channelOpenFail(o.sender,hM.ADMINISTRATIVELY_PROHIBITED,"","")},[Mt.CHANNEL_OPEN_CONFIRMATION]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE(),n=H.readUInt32BE(),i=H.readUInt32BE(),s=H.readUInt32BE(),o=H.avail()?H.readRaw():void 0;if(H.clear(),s===void 0)return Pt(t,"Inbound: Malformed CHANNEL_OPEN_CONFIRMATION packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN_CONFIRMATION (r:${r}, s:${n})`);let a=t._handlers.CHANNEL_OPEN_CONFIRMATION;a&&a(t,{recipient:r,sender:n,window:i,packetSize:s,data:o})},[Mt.CHANNEL_OPEN_FAILURE]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE(),n=H.readUInt32BE(),i=H.readString(!0),s=H.readString();if(H.clear(),s===void 0)return Pt(t,"Inbound: Malformed CHANNEL_OPEN_FAILURE packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN_FAILURE (r:${r})`);let o=t._handlers.CHANNEL_OPEN_FAILURE;o&&o(t,r,n,i)},[Mt.CHANNEL_WINDOW_ADJUST]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE(),n=H.readUInt32BE();if(H.clear(),n===void 0)return Pt(t,"Inbound: Malformed CHANNEL_WINDOW_ADJUST packet");t._debug&&t._debug(`Inbound: CHANNEL_WINDOW_ADJUST (r:${r}, ${n})`);let i=t._handlers.CHANNEL_WINDOW_ADJUST;i&&i(t,r,n)},[Mt.CHANNEL_DATA]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE(),n=H.readString();if(H.clear(),n===void 0)return Pt(t,"Inbound: Malformed CHANNEL_DATA packet");t._debug&&t._debug(`Inbound: CHANNEL_DATA (r:${r}, ${n.length})`);let i=t._handlers.CHANNEL_DATA;i&&i(t,r,n)},[Mt.CHANNEL_EXTENDED_DATA]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE(),n=H.readUInt32BE(),i=H.readString();if(H.clear(),i===void 0)return Pt(t,"Inbound: Malformed CHANNEL_EXTENDED_DATA packet");t._debug&&t._debug(`Inbound: CHANNEL_EXTENDED_DATA (r:${r}, ${i.length})`);let s=t._handlers.CHANNEL_EXTENDED_DATA;s&&s(t,r,i,n)},[Mt.CHANNEL_EOF]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE();if(H.clear(),r===void 0)return Pt(t,"Inbound: Malformed CHANNEL_EOF packet");t._debug&&t._debug(`Inbound: CHANNEL_EOF (r:${r})`);let n=t._handlers.CHANNEL_EOF;n&&n(t,r)},[Mt.CHANNEL_CLOSE]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE();if(H.clear(),r===void 0)return Pt(t,"Inbound: Malformed CHANNEL_CLOSE packet");t._debug&&t._debug(`Inbound: CHANNEL_CLOSE (r:${r})`);let n=t._handlers.CHANNEL_CLOSE;n&&n(t,r)},[Mt.CHANNEL_REQUEST]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE(),n=H.readString(!0),i=H.readBool(),s;if(i!==void 0)switch(n){case"exit-status":s=H.readUInt32BE(),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"exit-signal":{let a,l;if(t._compatFlags&dM.OLD_EXIT){let c=H.readUInt32BE();switch(c){case 1:a="HUP";break;case 2:a="INT";break;case 3:a="QUIT";break;case 6:a="ABRT";break;case 9:a="KILL";break;case 14:a="ALRM";break;case 15:a="TERM";break;default:c!==void 0&&(a=`UNKNOWN (${c})`)}l=!1}else a=H.readString(!0),l=H.readBool(),l===void 0&&(a=void 0);let u=H.readString(!0);H.skipString()!==void 0&&(s={signal:a,coreDumped:l,errorMessage:u}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break}case"pty-req":{let a=H.readString(!0),l=H.readUInt32BE(),u=H.readUInt32BE(),c=H.readUInt32BE(),f=H.readUInt32BE(),h=H.readString();if(h!==void 0){H.init(h,1);let p={};for(;H.avail();){let g=H.readByte();if(g===Mx.TTY_OP_END)break;let m=gM[g],E=H.readUInt32BE();if(g===void 0||m===void 0||E===void 0){p=void 0;break}p[m]=E}p!==void 0&&(s={term:a,cols:l,rows:u,width:c,height:f,modes:p})}t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"window-change":{let a=H.readUInt32BE(),l=H.readUInt32BE(),u=H.readUInt32BE(),c=H.readUInt32BE();c!==void 0&&(s={cols:a,rows:l,width:u,height:c}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"x11-req":{let a=H.readBool(),l=H.readString(!0),u=H.readString(),c=H.readUInt32BE();c!==void 0&&(s={single:a,protocol:l,cookie:u,screen:c}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"env":{let a=H.readString(!0),l=H.readString(!0);l!==void 0&&(s={name:a,value:l}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a}=${l})`);break}case"shell":s=null,t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;case"exec":s=H.readString(!0),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"subsystem":s=H.readString(!0),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"signal":s=H.readString(!0),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"xon-xoff":s=H.readBool(),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"auth-agent-req@openssh.com":s=null,t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;default:s=H.avail()?H.readRaw():null,t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`)}if(H.clear(),s===void 0)return Pt(t,"Inbound: Malformed CHANNEL_REQUEST packet");let o=t._handlers.CHANNEL_REQUEST;o&&o(t,r,n,i,s)},[Mt.CHANNEL_SUCCESS]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE();if(H.clear(),r===void 0)return Pt(t,"Inbound: Malformed CHANNEL_SUCCESS packet");t._debug&&t._debug(`Inbound: CHANNEL_SUCCESS (r:${r})`);let n=t._handlers.CHANNEL_SUCCESS;n&&n(t,r)},[Mt.CHANNEL_FAILURE]:(t,e)=>{H.init(e,1);let r=H.readUInt32BE();if(H.clear(),r===void 0)return Pt(t,"Inbound: Malformed CHANNEL_FAILURE packet");t._debug&&t._debug(`Inbound: CHANNEL_FAILURE (r:${r})`);let n=t._handlers.CHANNEL_FAILURE;n&&n(t,r)}}});var qh=x((zne,Hx)=>{"use strict";var S_=new Array(256);[Hh().HANDLERS,qx()].forEach(t=>{for(let[e,r]of Object.entries(t))e=+e,isFinite(e)&&e>=0&&e<S_.length&&(S_[e]=r)});Hx.exports=S_});var Hh=x((Vne,Xx)=>{"use strict";var{createDiffieHellman:mM,createDiffieHellmanGroup:_M,createECDH:EM,createHash:w_,createPublicKey:yM,diffieHellman:AM,generateKeyPairSync:vM,randomFillSync:bM}=require("crypto"),{Ber:Wx}=wu(),{COMPAT:x_,curve25519Supported:SM,DEFAULT_KEX:Qx,DEFAULT_SERVER_HOST_KEY:Gx,DEFAULT_CIPHER:Wh,DEFAULT_MAC:Qh,DEFAULT_COMPRESSION:Gh,DISCONNECT_REASON:it,MESSAGE:Dt}=Yi(),{CIPHER_INFO:Qa,createCipher:CM,createDecipher:wM,MAC_INFO:jx}=Ds(),{parseDERKey:xM}=Rs(),{bufferFill:DM,bufferParser:rt,convertSignature:IM,doFatalError:st,FastBuffer:TM,sigSSHToASN1:RM,writeUInt32BE:Ar}=Gn(),{PacketReader:$x,PacketWriter:Kx,ZlibPacketReader:jh,ZlibPacketWriter:$h}=v_(),Ha,kM=2048,OM=8192,NM=Buffer.alloc(0);function zx(t){let e;if(t._compatFlags&x_.BAD_DHGEX){let r=t._offer.lists.kex,n=r.array,i=!1;for(let s=0;s<n.length;++s)n[s].includes("group-exchange")&&(i||(i=!0,n=n.slice()),n.splice(s--,1));if(i){let s=17+t._offer.totalSize+1+4,o=Buffer.from(n.join(","));s-=r.buffer.length-o.length;let a=t._offer.lists.all,l=new Uint8Array(a.buffer,a.byteOffset+4+r.buffer.length,a.length-(4+r.buffer.length));e=Buffer.allocUnsafe(s),Ar(e,o.length,17),e.set(o,21),e.set(l,21+o.length)}}e===void 0&&(e=Buffer.allocUnsafe(17+t._offer.totalSize+1+4),t._offer.copyAllTo(e,17)),t._debug&&t._debug("Outbound: Sending KEXINIT"),e[0]=Dt.KEXINIT,bM(e,1,16),DM(e,0,e.length-5),t._kexinit=e,t._packetRW.write.allocStart=0;{let r=t._packetRW.write.allocStartKEX,n=t._packetRW.write.alloc(e.length,!0);n.set(e,r),t._cipher.encrypt(t._packetRW.write.finalize(n,!0))}}function Yx(t,e){let r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0}};if(rt.init(e,17),(r.kex=rt.readList())===void 0||(r.serverHostKey=rt.readList())===void 0||(r.cs.cipher=rt.readList())===void 0||(r.sc.cipher=rt.readList())===void 0||(r.cs.mac=rt.readList())===void 0||(r.sc.mac=rt.readList())===void 0||(r.cs.compress=rt.readList())===void 0||(r.sc.compress=rt.readList())===void 0||(r.cs.lang=rt.readList())===void 0||(r.sc.lang=rt.readList())===void 0)return rt.clear(),st(t,"Received malformed KEXINIT","handshake",it.KEY_EXCHANGE_FAILED);let n=rt.pos(),i=n<e.length&&e[n]===1;rt.clear();let s=t._offer,o=r,a=s.lists.kex.array;if(t._compatFlags&x_.BAD_DHGEX){let S=!1;for(let B=0;B<a.length;++B)a[B].indexOf("group-exchange")!==-1&&(S||(S=!0,a=a.slice()),a.splice(B--,1))}let l,u,c,f=t._debug;f&&f("Inbound: Handshake in progress"),f&&f(`Handshake: (local) KEX method: ${a}`),f&&f(`Handshake: (remote) KEX method: ${o.kex}`);let h;if(t._server?(u=a,l=o.kex,h=l.indexOf("ext-info-c")!==-1):(u=o.kex,l=a,h=u.indexOf("ext-info-s")!==-1),t._strictMode===void 0&&(t._server?t._strictMode=l.indexOf("kex-strict-c-v00@openssh.com")!==-1:t._strictMode=u.indexOf("kex-strict-s-v00@openssh.com")!==-1,t._strictMode&&(f&&f("Handshake: strict KEX mode enabled"),t._decipher.inSeqno!==1)))return f&&f("Handshake: KEXINIT not first packet in strict KEX mode"),st(t,"Handshake failed: KEXINIT not first packet in strict KEX mode","handshake",it.KEY_EXCHANGE_FAILED);for(c=0;c<l.length&&u.indexOf(l[c])===-1;++c);if(c===l.length)return f&&f("Handshake: no matching key exchange algorithm"),st(t,"Handshake failed: no matching key exchange algorithm","handshake",it.KEY_EXCHANGE_FAILED);r.kex=l[c],f&&f(`Handshake: KEX algorithm: ${l[c]}`),i&&(!o.kex.length||l[c]!==o.kex[0])&&(t._skipNextInboundPacket=!0);let p=s.lists.serverHostKey.array;for(f&&f(`Handshake: (local) Host key format: ${p}`),f&&f(`Handshake: (remote) Host key format: ${o.serverHostKey}`),t._server?(u=p,l=o.serverHostKey):(u=o.serverHostKey,l=p),c=0;c<l.length&&u.indexOf(l[c])===-1;++c);if(c===l.length)return f&&f("Handshake: No matching host key format"),st(t,"Handshake failed: no matching host key format","handshake",it.KEY_EXCHANGE_FAILED);r.serverHostKey=l[c],f&&f(`Handshake: Host key format: ${l[c]}`);let g=s.lists.cs.cipher.array;for(f&&f(`Handshake: (local) C->S cipher: ${g}`),f&&f(`Handshake: (remote) C->S cipher: ${o.cs.cipher}`),t._server?(u=g,l=o.cs.cipher):(u=o.cs.cipher,l=g),c=0;c<l.length&&u.indexOf(l[c])===-1;++c);if(c===l.length)return f&&f("Handshake: No matching C->S cipher"),st(t,"Handshake failed: no matching C->S cipher","handshake",it.KEY_EXCHANGE_FAILED);r.cs.cipher=l[c],f&&f(`Handshake: C->S Cipher: ${l[c]}`);let m=s.lists.sc.cipher.array;for(f&&f(`Handshake: (local) S->C cipher: ${m}`),f&&f(`Handshake: (remote) S->C cipher: ${o.sc.cipher}`),t._server?(u=m,l=o.sc.cipher):(u=o.sc.cipher,l=m),c=0;c<l.length&&u.indexOf(l[c])===-1;++c);if(c===l.length)return f&&f("Handshake: No matching S->C cipher"),st(t,"Handshake failed: no matching S->C cipher","handshake",it.KEY_EXCHANGE_FAILED);r.sc.cipher=l[c],f&&f(`Handshake: S->C cipher: ${l[c]}`);let E=s.lists.cs.mac.array;if(f&&f(`Handshake: (local) C->S MAC: ${E}`),f&&f(`Handshake: (remote) C->S MAC: ${o.cs.mac}`),Qa[r.cs.cipher].authLen>0)r.cs.mac="",f&&f("Handshake: C->S MAC: <implicit>");else{for(t._server?(u=E,l=o.cs.mac):(u=o.cs.mac,l=E),c=0;c<l.length&&u.indexOf(l[c])===-1;++c);if(c===l.length)return f&&f("Handshake: No matching C->S MAC"),st(t,"Handshake failed: no matching C->S MAC","handshake",it.KEY_EXCHANGE_FAILED);r.cs.mac=l[c],f&&f(`Handshake: C->S MAC: ${l[c]}`)}let A=s.lists.sc.mac.array;if(f&&f(`Handshake: (local) S->C MAC: ${A}`),f&&f(`Handshake: (remote) S->C MAC: ${o.sc.mac}`),Qa[r.sc.cipher].authLen>0)r.sc.mac="",f&&f("Handshake: S->C MAC: <implicit>");else{for(t._server?(u=A,l=o.sc.mac):(u=o.sc.mac,l=A),c=0;c<l.length&&u.indexOf(l[c])===-1;++c);if(c===l.length)return f&&f("Handshake: No matching S->C MAC"),st(t,"Handshake failed: no matching S->C MAC","handshake",it.KEY_EXCHANGE_FAILED);r.sc.mac=l[c],f&&f(`Handshake: S->C MAC: ${l[c]}`)}let w=s.lists.cs.compress.array;for(f&&f(`Handshake: (local) C->S compression: ${w}`),f&&f(`Handshake: (remote) C->S compression: ${o.cs.compress}`),t._server?(u=w,l=o.cs.compress):(u=o.cs.compress,l=w),c=0;c<l.length&&u.indexOf(l[c])===-1;++c);if(c===l.length)return f&&f("Handshake: No matching C->S compression"),st(t,"Handshake failed: no matching C->S compression","handshake",it.KEY_EXCHANGE_FAILED);r.cs.compress=l[c],f&&f(`Handshake: C->S compression: ${l[c]}`);let k=s.lists.sc.compress.array;for(f&&f(`Handshake: (local) S->C compression: ${k}`),f&&f(`Handshake: (remote) S->C compression: ${o.sc.compress}`),t._server?(u=k,l=o.sc.compress):(u=o.sc.compress,l=k),c=0;c<l.length&&u.indexOf(l[c])===-1;++c);if(c===l.length)return f&&f("Handshake: No matching S->C compression"),st(t,"Handshake failed: no matching S->C compression","handshake",it.KEY_EXCHANGE_FAILED);r.sc.compress=l[c],f&&f(`Handshake: S->C compression: ${l[c]}`),r.cs.lang="",r.sc.lang="",t._kex&&(t._kexinit||zx(t),t._decipher._onPayload=Vx.bind(t,{firstPacket:!1})),t._kex=BM(r,t,e),t._kex.remoteExtInfoEnabled=h,t._kex.start()}var BM=(()=>{function t(o){let a=0,l=o.length;for(;o[a]===0;)++a,--l;let u;return o[a]&128?(u=Buffer.allocUnsafe(1+l),u[0]=0,o.copy(u,1,a),o=u):l!==o.length&&(u=Buffer.allocUnsafe(l),o.copy(u,0,a),o=u),o}class e{constructor(a,l,u){this._protocol=l,this.sessionID=l._kex?l._kex.sessionID:void 0,this.negotiated=a,this.remoteExtInfoEnabled=!1,this._step=1,this._public=null,this._dh=null,this._sentNEWKEYS=!1,this._receivedNEWKEYS=!1,this._finished=!1,this._hostVerified=!1,this._kexinit=l._kexinit,this._remoteKexinit=u,this._identRaw=l._identRaw,this._remoteIdentRaw=l._remoteIdentRaw,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0}finish(a){if(this._finished)return!1;this._finished=!0;let l=this._protocol._server,u=this.negotiated,c=this.convertPublicKey(this._dhData),f=this.computeSecret(this._dhData);if(f instanceof Error)return f.message=`Error while computing DH secret (${this.type}): ${f.message}`,f.level="handshake",st(this._protocol,f,it.KEY_EXCHANGE_FAILED);let h=w_(this.hashName);_i(h,l?this._remoteIdentRaw:this._identRaw),_i(h,l?this._identRaw:this._remoteIdentRaw),_i(h,l?this._remoteKexinit:this._kexinit),_i(h,l?this._kexinit:this._remoteKexinit);let p=l?this._hostKey.getPublicSSH():this._hostKey;if(_i(h,p),this.type==="groupex"){let k=this.getDHParams(),S=Buffer.allocUnsafe(4);Ar(S,this._minBits,0),h.update(S),Ar(S,this._prefBits,0),h.update(S),Ar(S,this._maxBits,0),h.update(S),_i(h,k.prime),_i(h,k.generator)}_i(h,l?c:this.getPublicKey());let g=l?this.getPublicKey():c;_i(h,g),_i(h,f);let m=h.digest();if(l){let k;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":k="sha256";break;case"rsa-sha2-512":k="sha512";break}this._protocol._debug&&this._protocol._debug("Generating signature ...");let S=this._hostKey.sign(m,k);if(S instanceof Error)return st(this._protocol,`Handshake failed: signature generation failed for ${this._hostKey.type} host key: ${S.message}`,"handshake",it.KEY_EXCHANGE_FAILED);if(S=IM(S,this._hostKey.type),S===!1)return st(this._protocol,`Handshake failed: signature conversion failed for ${this._hostKey.type} host key`,"handshake",it.KEY_EXCHANGE_FAILED);let B=this.negotiated.serverHostKey,F=Buffer.byteLength(B),M=4+F+4+S.length,D=this._protocol._packetRW.write.allocStartKEX,I=this._protocol._packetRW.write.alloc(5+p.length+4+g.length+4+M,!0);if(I[D]=Dt.KEXDH_REPLY,Ar(I,p.length,++D),I.set(p,D+=4),Ar(I,g.length,D+=p.length),I.set(g,D+=4),Ar(I,M,D+=g.length),Ar(I,F,D+=4),I.utf8Write(B,D+=4,F),Ar(I,S.length,D+=F),I.set(S,D+=4),this._protocol._debug){let N;switch(this.type){case"group":N="KEXDH_REPLY";break;case"groupex":N="KEXDH_GEX_REPLY";break;default:N="KEXECDH_REPLY"}this._protocol._debug(`Outbound: Sending ${N}`)}this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(I,!0))}else{rt.init(this._sig,0);let k=rt.readString(!0);if(!k)return st(this._protocol,"Malformed packet while reading signature","handshake",it.KEY_EXCHANGE_FAILED);if(k!==u.serverHostKey)return st(this._protocol,`Wrong signature type: ${k}, expected: ${u.serverHostKey}`,"handshake",it.KEY_EXCHANGE_FAILED);let S=rt.readString();if(rt.clear(),S===void 0)return st(this._protocol,"Malformed packet while reading signature","handshake",it.KEY_EXCHANGE_FAILED);if(!(S=RM(S,k)))return st(this._protocol,"Malformed signature","handshake",it.KEY_EXCHANGE_FAILED);let B;{rt.init(this._hostKey,0);let D=rt.readString(!0),I=this._hostKey.slice(rt.pos());if(rt.clear(),B=xM(I,D),B instanceof Error)return B.level="handshake",st(this._protocol,B,it.KEY_EXCHANGE_FAILED)}let F;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":F="sha256";break;case"rsa-sha2-512":F="sha512";break}this._protocol._debug&&this._protocol._debug("Verifying signature ...");let M=B.verify(m,S,F);if(M!==!0)return M instanceof Error?this._protocol._debug&&this._protocol._debug(`Signature verification failed: ${M.stack}`):this._protocol._debug&&this._protocol._debug("Signature verification failed"),st(this._protocol,"Handshake failed: signature verification failed","handshake",it.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Verified signature")}(l||!a)&&Kh(this);let E,A,w=k=>{if(E)return Kh(this),E.outbound.seqno=this._protocol._cipher.outSeqno,this._protocol._cipher.free(),this._protocol._cipher=CM(E),this._protocol._packetRW.write=A,E=void 0,A=void 0,this._protocol._onHandshakeComplete(u),!1;this.sessionID||(this.sessionID=m);{let z=Buffer.allocUnsafe(4+f.length);Ar(z,f.length,0),z.set(f,4),f=z}let S=Qa[u.cs.cipher],B=Qa[u.sc.cipher],F=Wa(S.ivLen,this.hashName,f,m,this.sessionID,"A"),M=Wa(B.ivLen,this.hashName,f,m,this.sessionID,"B"),D=Wa(S.keyLen,this.hashName,f,m,this.sessionID,"C"),I=Wa(B.keyLen,this.hashName,f,m,this.sessionID,"D"),N,T;S.authLen||(N=jx[u.cs.mac],T=Wa(N.len,this.hashName,f,m,this.sessionID,"E"));let Q,P;B.authLen||(Q=jx[u.sc.mac],P=Wa(Q.len,this.hashName,f,m,this.sessionID,"F"));let y={inbound:{onPayload:this._protocol._onPayload,seqno:this._protocol._decipher.inSeqno,decipherInfo:l?S:B,decipherIV:l?F:M,decipherKey:l?D:I,macInfo:l?N:Q,macKey:l?T:P},outbound:{onWrite:this._protocol._onWrite,seqno:this._protocol._cipher.outSeqno,cipherInfo:l?B:S,cipherIV:l?M:F,cipherKey:l?I:D,macInfo:l?Q:N,macKey:l?P:T}};this._protocol._decipher.free(),E=y,this._protocol._decipher=wM(y);let O={read:void 0,write:void 0};switch(u.cs.compress){case"zlib":l?O.read=new jh:O.write=new $h(this._protocol);break;case"zlib@openssh.com":if(this._protocol._authenticated){l?O.read=new jh:O.write=new $h(this._protocol);break}default:l?O.read=new $x:O.write=new Kx(this._protocol)}switch(u.sc.compress){case"zlib":l?O.write=new $h(this._protocol):O.read=new jh;break;case"zlib@openssh.com":if(this._protocol._authenticated){l?O.write=new $h(this._protocol):O.read=new jh;break}default:l?O.write=new Kx(this._protocol):O.read=new $x}return this._protocol._packetRW.read.cleanup(),this._protocol._packetRW.write.cleanup(),this._protocol._packetRW.read=O.read,A=O.write,this._public=null,this._dh=null,this._kexinit=this._protocol._kexinit=void 0,this._remoteKexinit=void 0,this._identRaw=void 0,this._remoteIdentRaw=void 0,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0,k?!1:w()};if((l||a)&&(this.finish=w),!l)return w(a)}start(){if(!this._protocol._server){if(this._protocol._debug){let c;switch(this.type){case"group":c="KEXDH_INIT";break;default:c="KEXECDH_INIT"}this._protocol._debug(`Outbound: Sending ${c}`)}let a=this.getPublicKey(),l=this._protocol._packetRW.write.allocStartKEX,u=this._protocol._packetRW.write.alloc(5+a.length,!0);u[l]=Dt.KEXDH_INIT,Ar(u,a.length,++l),u.set(a,l+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(u,!0))}}getPublicKey(){this.generateKeys();let a=this._public;if(a)return this.convertPublicKey(a)}convertPublicKey(a){let l,u=0,c=a.length;for(;a[u]===0;)++u,--c;return a[u]&128?(l=Buffer.allocUnsafe(1+c),l[0]=0,a.copy(l,1,u),l):(c!==a.length&&(l=Buffer.allocUnsafe(c),a.copy(l,0,u),a=l),a)}computeSecret(a){this.generateKeys();try{return t(this._dh.computeSecret(a))}catch(l){return l}}parse(a){let l=a[0];switch(this._step){case 1:if(this._protocol._server){if(l!==Dt.KEXDH_INIT)return st(this._protocol,`Received packet ${l} instead of ${Dt.KEXDH_INIT}`,"handshake",it.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH Init"),rt.init(a,1);let u=rt.readString();if(rt.clear(),u===void 0)return st(this._protocol,"Received malformed KEX*_INIT","handshake",it.KEY_EXCHANGE_FAILED);this._dhData=u;let c=this._protocol._hostKeys[this.negotiated.serverHostKey];Array.isArray(c)&&(c=c[0]),this._hostKey=c,this.finish()}else{if(l!==Dt.KEXDH_REPLY)return st(this._protocol,`Received packet ${l} instead of ${Dt.KEXDH_REPLY}`,"handshake",it.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH Reply"),rt.init(a,1);let u,c,f;if((u=rt.readString())===void 0||(c=rt.readString())===void 0||(f=rt.readString())===void 0)return rt.clear(),st(this._protocol,"Received malformed KEX*_REPLY","handshake",it.KEY_EXCHANGE_FAILED);rt.clear(),rt.init(u,0);let h=rt.readString(!0);if(rt.clear(),h===void 0)return st(this._protocol,"Received malformed host public key","handshake",it.KEY_EXCHANGE_FAILED);if(h!==this.negotiated.serverHostKey)switch(this.negotiated.serverHostKey){case"rsa-sha2-256":case"rsa-sha2-512":if(h==="ssh-rsa")break;default:return st(this._protocol,"Host key does not match negotiated type","handshake",it.KEY_EXCHANGE_FAILED)}this._hostKey=u,this._dhData=c,this._sig=f;let p=!1,g;if(this._protocol._hostVerifier===void 0?(g=!0,this._protocol._debug&&this._protocol._debug("Host accepted by default (no verification)")):g=this._protocol._hostVerifier(u,m=>{if(!p){if(p=!0,m===!1)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),st(this._protocol,"Host denied (verification failed)","handshake",it.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,this._receivedNEWKEYS?this.finish():Kh(this)}}),g===void 0){++this._step;return}if(p=!0,g===!1)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),st(this._protocol,"Host denied (verification failed)","handshake",it.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,Kh(this)}++this._step;break;case 2:return l!==Dt.NEWKEYS?st(this._protocol,`Received packet ${l} instead of ${Dt.NEWKEYS}`,"handshake",it.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Inbound: NEWKEYS"),this._receivedNEWKEYS=!0,this._protocol._strictMode&&(this._protocol._decipher.inSeqno=0),++this._step,this.finish(!this._protocol._server&&!this._hostVerified));default:return st(this._protocol,`Received unexpected packet ${l} after NEWKEYS`,"handshake",it.KEY_EXCHANGE_FAILED)}}}class r extends e{constructor(a,...l){super(...l),this.type="25519",this.hashName=a,this._keys=null}generateKeys(){this._keys||(this._keys=vM("x25519"))}getPublicKey(){return this.generateKeys(),this._keys.publicKey.export({type:"spki",format:"der"}).slice(-32)}convertPublicKey(a){let l,u=0,c=a.length;for(;a[u]===0;)++u,--c;return a.length===32||c!==a.length&&(l=Buffer.allocUnsafe(c),a.copy(l,0,u),a=l),a}computeSecret(a){this.generateKeys();try{let l=new Wx.Writer;return l.startSequence(),l.startSequence(),l.writeOID("1.3.101.110"),l.endSequence(),l.startSequence(Wx.BitString),l.writeByte(0),l._ensure(a.length),a.copy(l._buf,l._offset,0,a.length),l._offset+=a.length,l.endSequence(),l.endSequence(),t(AM({privateKey:this._keys.privateKey,publicKey:yM({key:l.buffer,type:"spki",format:"der"})}))}catch(l){return l}}}class n extends e{constructor(a,l,...u){super(...u),this.type="ecdh",this.curveName=a,this.hashName=l}generateKeys(){this._dh||(this._dh=EM(this.curveName),this._public=this._dh.generateKeys())}}class i extends e{constructor(a,...l){super(...l),this.type="groupex",this.hashName=a,this._prime=null,this._generator=null,this._minBits=kM,this._prefBits=PM(this.negotiated),this._protocol._compatFlags&x_.BUG_DHGEX_LARGE&&(this._prefBits=Math.min(this._prefBits,4096)),this._maxBits=OM}start(){if(this._protocol._server)return;this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_REQUEST");let a=this._protocol._packetRW.write.allocStartKEX,l=this._protocol._packetRW.write.alloc(13,!0);l[a]=Dt.KEXDH_GEX_REQUEST,Ar(l,this._minBits,++a),Ar(l,this._prefBits,a+=4),Ar(l,this._maxBits,a+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(l,!0))}generateKeys(){!this._dh&&this._prime&&this._generator&&(this._dh=mM(this._prime,this._generator),this._public=this._dh.generateKeys())}setDHParams(a,l){if(!Buffer.isBuffer(a))throw new Error("Invalid prime value");if(!Buffer.isBuffer(l))throw new Error("Invalid generator value");this._prime=a,this._generator=l}getDHParams(){if(this._dh)return{prime:t(this._dh.getPrime()),generator:t(this._dh.getGenerator())}}parse(a){let l=a[0];switch(this._step){case 1:{if(this._protocol._server)return l!==Dt.KEXDH_GEX_REQUEST?st(this._protocol,`Received packet ${l} instead of `+Dt.KEXDH_GEX_REQUEST,"handshake",it.KEY_EXCHANGE_FAILED):st(this._protocol,"Group exchange not implemented for server","handshake",it.KEY_EXCHANGE_FAILED);if(l!==Dt.KEXDH_GEX_GROUP)return st(this._protocol,`Received packet ${l} instead of ${Dt.KEXDH_GEX_GROUP}`,"handshake",it.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH GEX Group"),rt.init(a,1);let u,c;if((u=rt.readString())===void 0||(c=rt.readString())===void 0)return rt.clear(),st(this._protocol,"Received malformed KEXDH_GEX_GROUP","handshake",it.KEY_EXCHANGE_FAILED);rt.clear(),this.setDHParams(u,c),this.generateKeys();let f=this.getPublicKey();this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_INIT");let h=this._protocol._packetRW.write.allocStartKEX,p=this._protocol._packetRW.write.alloc(5+f.length,!0);p[h]=Dt.KEXDH_GEX_INIT,Ar(p,f.length,++h),p.set(f,h+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(p,!0)),++this._step;break}case 2:if(this._protocol._server)return l!==Dt.KEXDH_GEX_INIT?st(this._protocol,`Received packet ${l} instead of ${Dt.KEXDH_GEX_INIT}`,"handshake",it.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Received DH GEX Init"),st(this._protocol,"Group exchange not implemented for server","handshake",it.KEY_EXCHANGE_FAILED));if(l!==Dt.KEXDH_GEX_REPLY)return st(this._protocol,`Received packet ${l} instead of ${Dt.KEXDH_GEX_REPLY}`,"handshake",it.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH GEX Reply"),this._step=1,a[0]=Dt.KEXDH_REPLY,this.parse=e.prototype.parse,this.parse(a)}}}class s extends e{constructor(a,l,...u){super(...u),this.type="group",this.groupName=a,this.hashName=l}start(){if(!this._protocol._server){this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_INIT");let a=this.getPublicKey(),l=this._protocol._packetRW.write.allocStartKEX,u=this._protocol._packetRW.write.alloc(5+a.length,!0);u[l]=Dt.KEXDH_INIT,Ar(u,a.length,++l),u.set(a,l+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(u,!0))}}generateKeys(){this._dh||(this._dh=_M(this.groupName),this._public=this._dh.generateKeys())}getDHParams(){if(this._dh)return{prime:t(this._dh.getPrime()),generator:t(this._dh.getGenerator())}}}return(o,...a)=>{if(typeof o!="object"||o===null)throw new Error("Invalid negotiated argument");let l=o.kex;if(typeof l=="string"){switch(a=[o,...a],l){case"curve25519-sha256":case"curve25519-sha256@libssh.org":if(!SM)break;return new r("sha256",...a);case"ecdh-sha2-nistp256":return new n("prime256v1","sha256",...a);case"ecdh-sha2-nistp384":return new n("secp384r1","sha384",...a);case"ecdh-sha2-nistp521":return new n("secp521r1","sha512",...a);case"diffie-hellman-group1-sha1":return new s("modp2","sha1",...a);case"diffie-hellman-group14-sha1":return new s("modp14","sha1",...a);case"diffie-hellman-group14-sha256":return new s("modp14","sha256",...a);case"diffie-hellman-group15-sha512":return new s("modp15","sha512",...a);case"diffie-hellman-group16-sha512":return new s("modp16","sha512",...a);case"diffie-hellman-group17-sha512":return new s("modp17","sha512",...a);case"diffie-hellman-group18-sha512":return new s("modp18","sha512",...a);case"diffie-hellman-group-exchange-sha1":return new i("sha1",...a);case"diffie-hellman-group-exchange-sha256":return new i("sha256",...a)}throw new Error(`Unsupported key exchange algorithm: ${l}`)}throw new Error(`Invalid key exchange type: ${l}`)}})(),C_=(()=>{let t=["kex","serverHostKey",["cs","cipher"],["sc","cipher"],["cs","mac"],["sc","mac"],["cs","compress"],["sc","compress"],["cs","lang"],["sc","lang"]];return class{constructor(r){if(typeof r!="object"||r===null)throw new TypeError("Argument must be an object");let n={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},all:void 0},i=0;for(let a of t){let l,u,c,f;if(typeof a=="string")l=n,u=r[a],c=f=a;else{let p=a[0];l=n[p],f=a[1],u=r[p][f],c=`${p}.${f}`}let h={array:void 0,buffer:void 0};if(Buffer.isBuffer(u))h.array=(""+u).split(","),h.buffer=u,i+=4+u.length;else{if(typeof u=="string"&&(u=u.split(",")),Array.isArray(u))h.array=u,h.buffer=Buffer.from(u.join(","));else throw new TypeError(`Invalid \`${c}\` type: ${typeof u}`);i+=4+h.buffer.length}l[f]=h}let s=Buffer.allocUnsafe(i);n.all=s;let o=0;for(let a of t){let l;typeof a=="string"?l=n[a].buffer:l=n[a[0]][a[1]].buffer,o=Ar(s,l.length,o),s.set(l,o),o+=l.length}this.totalSize=i,this.lists=n}copyAllTo(r,n){let i=this.lists.all;if(typeof n!="number")throw new TypeError(`Invalid offset value: ${typeof n}`);if(r.length-n<i.length)throw new Error("Insufficient space to copy list");return r.set(i,n),i.length}}})(),_i=(()=>{let t=Buffer.allocUnsafe(4);return(e,r)=>{Ar(t,r.length,0),e.update(t),e.update(r)}})();function Wa(t,e,r,n,i,s){let o;if(t){let a=w_(e).update(r).update(n).update(s).update(i).digest();for(;a.length<t;){let l=w_(e).update(r).update(n).update(a).digest(),u=Buffer.allocUnsafe(a.length+l.length);u.set(a,0),u.set(l,a.length),a=u}a.length===t?o=a:o=new TM(a.buffer,a.byteOffset,t)}else o=NM;return o}function Vx(t,e){if(e.length===0){this._debug&&this._debug("Inbound: Skipping empty packet payload");return}if(this._skipNextInboundPacket){this._skipNextInboundPacket=!1;return}e=this._packetRW.read.read(e);let r=e[0];if(!this._strictMode)switch(r){case Dt.IGNORE:case Dt.UNIMPLEMENTED:case Dt.DEBUG:return Ha||(Ha=qh()),Ha[r](this,e)}switch(r){case Dt.DISCONNECT:return Ha||(Ha=qh()),Ha[r](this,e);case Dt.KEXINIT:return t.firstPacket?(t.firstPacket=!1,Yx(this,e)):st(this,"Received extra KEXINIT during handshake","handshake",it.KEY_EXCHANGE_FAILED);default:if(r<20||r>49)return st(this,`Received unexpected packet type ${r}`,"handshake",it.KEY_EXCHANGE_FAILED)}return this._kex.parse(e)}function PM(t){let e=Qa[t.cs.cipher],r=Qa[t.sc.cipher],n=Math.max(0,e.sslName==="des-ede3-cbc"?14:e.keyLen,e.blockLen,e.ivLen,r.sslName==="des-ede3-cbc"?14:r.keyLen,r.blockLen,r.ivLen)*8;return n<=112?2048:n<=128?3072:n<=192?7680:8192}function Kh(t){if(!t._sentNEWKEYS){t._protocol._debug&&t._protocol._debug("Outbound: Sending NEWKEYS");let e=t._protocol._packetRW.write.allocStartKEX,r=t._protocol._packetRW.write.alloc(1,!0);r[e]=Dt.NEWKEYS,t._protocol._cipher.encrypt(t._protocol._packetRW.write.finalize(r,!0)),t._sentNEWKEYS=!0,t._protocol._strictMode&&(t._protocol._cipher.outSeqno=0)}}Xx.exports={KexInit:C_,kexinit:zx,onKEXPayload:Vx,DEFAULT_KEXINIT_CLIENT:new C_({kex:Qx.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),serverHostKey:Gx,cs:{cipher:Wh,mac:Qh,compress:Gh,lang:[]},sc:{cipher:Wh,mac:Qh,compress:Gh,lang:[]}}),DEFAULT_KEXINIT_SERVER:new C_({kex:Qx.concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:Gx,cs:{cipher:Wh,mac:Qh,compress:Gh,lang:[]},sc:{cipher:Wh,mac:Qh,compress:Gh,lang:[]}}),HANDLERS:{[Dt.KEXINIT]:Yx}}});var Jx=x((Xne,FM)=>{FM.exports={name:"ssh2",version:"1.17.0",author:"Brian White <mscdex@mscdex.net>",description:"SSH2 client and server modules written in pure JavaScript for node.js",main:"./lib/index.js",engines:{node:">=10.16.0"},dependencies:{asn1:"^0.2.6","bcrypt-pbkdf":"^1.0.2"},devDependencies:{"@mscdex/eslint-config":"^1.1.0",eslint:"^7.32.0"},optionalDependencies:{"cpu-features":"~0.0.10",nan:"^2.23.0"},scripts:{install:"node install.js",rebuild:"node install.js",test:"node test/test.js",lint:"eslint --cache --report-unused-disable-directives --ext=.js .eslintrc.js examples lib test","lint:fix":"npm run lint -- --fix"},keywords:["ssh","ssh2","sftp","secure","shell","exec","remote","client"],licenses:[{type:"MIT",url:"http://github.com/mscdex/ssh2/raw/master/LICENSE"}],repository:{type:"git",url:"http://github.com/mscdex/ssh2.git"}}});var R_=x((Jne,f2)=>{"use strict";var{inspect:i2}=require("util"),{bindingAvailable:LM,NullCipher:MM,NullDecipher:UM}=Ds(),{COMPAT_CHECKS:qM,DISCONNECT_REASON:s2,eddsaSupported:HM,MESSAGE:Oe,SIGNALS:Zx,TERMINAL_MODE:I_}=Yi(),{DEFAULT_KEXINIT_CLIENT:WM,DEFAULT_KEXINIT_SERVER:QM,KexInit:e2,kexinit:o2,onKEXPayload:GM}=Hh(),{parseKey:t2}=Rs(),jM=qh(),{bufferCopy:zh,bufferFill:$M,bufferSlice:a2,convertSignature:r2,sendPacket:Ne,writeUInt32BE:U}=Gn(),{PacketReader:KM,PacketWriter:zM,ZlibPacketReader:l2,ZlibPacketWriter:u2}=v_(),YM=Jx().version,VM=new Map(Object.values(s2).map(t=>[t,1])),c2=Buffer.from(`SSH-2.0-ssh2js${YM}`),XM=Buffer.from(`${c2}\r
`),JM=8192,ZM=1024,n2=Buffer.from([Oe.GLOBAL_REQUEST,0,0,0,21,107,101,101,112,97,108,105,118,101,64,111,112,101,110,115,115,104,46,99,111,109,1]),eU=Buffer.from([I_.TTY_OP_END]);function D_(){}var T_=class{constructor(e){let r=e.onWrite;if(typeof r!="function")throw new Error("Missing onWrite function");this._onWrite=p=>{r(p)};let n=e.onError;if(typeof n!="function")throw new Error("Missing onError function");this._onError=p=>{n(p)};let i=e.debug;this._debug=typeof i=="function"?p=>{i(p)}:void 0;let s=e.onHeader;this._onHeader=typeof s=="function"?(...p)=>{s(...p)}:D_;let o=e.onPacket;this._onPacket=typeof o=="function"?()=>{o()}:D_;let a=e.onHandshakeComplete;typeof a!="function"&&(a=D_);let l;this._onHandshakeComplete=(...p)=>{this._debug&&this._debug("Handshake completed"),l===void 0?l=!0:l=!1;let g=this._queue;if(g){this._queue=void 0,this._debug&&this._debug(`Draining outbound queue (${g.length}) ...`);for(let m=0;m<g.length;++m){let E=g[m],A=this._packetRW.write.finalize(E);if(A===E){let w=this._cipher.allocPacket(E.length);w.set(E,5),A=w}Ne(this,A)}this._debug&&this._debug("... finished draining outbound queue")}l&&this._server&&this._kex.remoteExtInfoEnabled&&aU(this),a(...p)},this._queue=void 0;let u=e.messageHandlers;typeof u=="object"&&u!==null?this._handlers=u:this._handlers={},this._onPayload=iU.bind(this),this._server=!!e.server,this._banner=void 0;let c;if(this._server){if(typeof e.hostKeys!="object"||e.hostKeys===null)throw new Error("Missing server host key(s)");this._hostKeys=e.hostKeys,typeof e.greeting=="string"&&e.greeting.length&&(c=e.greeting.slice(-2)===`\r
`?e.greeting:`${e.greeting}\r
`),typeof e.banner=="string"&&e.banner.length&&(this._banner=e.banner.slice(-2)===`\r
`?e.banner:`${e.banner}\r
`)}else this._hostKeys=void 0;let f=e.offer;typeof f!="object"||f===null?f=this._server?QM:WM:f.constructor!==e2&&(this._server?f.kex=f.kex.concat(["kex-strict-s-v00@openssh.com"]):f.kex=f.kex.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),f=new e2(f)),this._kex=void 0,this._strictMode=void 0,this._kexinit=void 0,this._offer=f,this._cipher=new MM(0,this._onWrite),this._decipher=void 0,this._skipNextInboundPacket=!1,this._packetRW={read:new KM,write:new zM(this)},this._hostVerifier=!this._server&&typeof e.hostVerifier=="function"?e.hostVerifier:void 0,this._parse=rU,this._buffer=void 0,this._authsQueue=[],this._authenticated=!1,this._remoteIdentRaw=void 0;let h;if(typeof e.ident=="string")this._identRaw=Buffer.from(`SSH-2.0-${e.ident}`),h=Buffer.allocUnsafe(this._identRaw.length+2),h.set(this._identRaw,0),h[h.length-2]=13,h[h.length-1]=10;else if(Buffer.isBuffer(e.ident)){let p=Buffer.allocUnsafe(8+e.ident.length);p.latin1Write("SSH-2.0-",0,8),p.set(e.ident,8),this._identRaw=p,h=Buffer.allocUnsafe(p.length+2),h.set(p,0),h[h.length-2]=13,h[h.length-1]=10}else this._identRaw=c2,h=XM;this._compatFlags=0,this._debug&&(LM?this._debug("Custom crypto binding available"):this._debug("Custom crypto binding not available")),this._debug&&this._debug(`Local ident: ${i2(this._identRaw.toString())}`),this.start=()=>{this.start=void 0,c&&this._onWrite(c),this._onWrite(h)}}_destruct(e){this._packetRW.read.cleanup(),this._packetRW.write.cleanup(),this._cipher&&this._cipher.free(),this._decipher&&this._decipher.free(),(typeof e!="string"||e.length===0)&&(e="fatal error"),this.parse=()=>{throw new Error(`Instance unusable after ${e}`)},this._onWrite=()=>{throw new Error(`Instance unusable after ${e}`)},this._destruct=void 0}cleanup(){this._destruct&&this._destruct()}parse(e,r,n){for(;r<n;)r=this._parse(e,r,n)}disconnect(e){let n=this._packetRW.write.allocStartKEX,i=this._packetRW.write.alloc(13,!0),s=n+13;VM.has(e)||(e=s2.PROTOCOL_ERROR),i[n]=Oe.DISCONNECT,U(i,e,++n),i.fill(0,n+=4,s),this._debug&&this._debug(`Outbound: Sending DISCONNECT (${e})`),Ne(this,this._packetRW.write.finalize(i,!0),!0)}ping(){let e=this._packetRW.write.allocStart,r=this._packetRW.write.alloc(n2.length);r.set(n2,e),this._debug&&this._debug("Outbound: Sending ping (GLOBAL_REQUEST: keepalive@openssh.com)"),Ne(this,this._packetRW.write.finalize(r))}rekey(){this._kexinit===void 0?(this._debug&&this._debug("Outbound: Initiated explicit rekey"),this._queue=[],o2(this)):this._debug&&this._debug("Outbound: Ignoring rekey during handshake")}requestSuccess(e){let r=this._packetRW.write.allocStart,n;Buffer.isBuffer(e)?(n=this._packetRW.write.alloc(1+e.length),n[r]=Oe.REQUEST_SUCCESS,n.set(e,++r)):(n=this._packetRW.write.alloc(1),n[r]=Oe.REQUEST_SUCCESS),this._debug&&this._debug("Outbound: Sending REQUEST_SUCCESS"),Ne(this,this._packetRW.write.finalize(n))}requestFailure(){let e=this._packetRW.write.allocStart,r=this._packetRW.write.alloc(1);r[e]=Oe.REQUEST_FAILURE,this._debug&&this._debug("Outbound: Sending REQUEST_FAILURE"),Ne(this,this._packetRW.write.finalize(r))}channelSuccess(e){let r=this._packetRW.write.allocStart,n=this._packetRW.write.alloc(5);n[r]=Oe.CHANNEL_SUCCESS,U(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_SUCCESS (r:${e})`),Ne(this,this._packetRW.write.finalize(n))}channelFailure(e){let r=this._packetRW.write.allocStart,n=this._packetRW.write.alloc(5);n[r]=Oe.CHANNEL_FAILURE,U(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_FAILURE (r:${e})`),Ne(this,this._packetRW.write.finalize(n))}channelEOF(e){let r=this._packetRW.write.allocStart,n=this._packetRW.write.alloc(5);n[r]=Oe.CHANNEL_EOF,U(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_EOF (r:${e})`),Ne(this,this._packetRW.write.finalize(n))}channelClose(e){let r=this._packetRW.write.allocStart,n=this._packetRW.write.alloc(5);n[r]=Oe.CHANNEL_CLOSE,U(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_CLOSE (r:${e})`),Ne(this,this._packetRW.write.finalize(n))}channelWindowAdjust(e,r){let n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(9);i[n]=Oe.CHANNEL_WINDOW_ADJUST,U(i,e,++n),U(i,r,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_WINDOW_ADJUST (r:${e}, ${r})`),Ne(this,this._packetRW.write.finalize(i))}channelData(e,r){let n=Buffer.isBuffer(r),i=n?r.length:Buffer.byteLength(r),s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(9+i);o[s]=Oe.CHANNEL_DATA,U(o,e,++s),U(o,i,s+=4),n?o.set(r,s+=4):o.utf8Write(r,s+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_DATA (r:${e}, ${i})`),Ne(this,this._packetRW.write.finalize(o))}channelExtData(e,r,n){let i=Buffer.isBuffer(r),s=i?r.length:Buffer.byteLength(r),o=this._packetRW.write.allocStart,a=this._packetRW.write.alloc(13+s);a[o]=Oe.CHANNEL_EXTENDED_DATA,U(a,e,++o),U(a,n,o+=4),U(a,s,o+=4),i?a.set(r,o+=4):a.utf8Write(r,o+=4,s),this._debug&&this._debug(`Outbound: Sending CHANNEL_EXTENDED_DATA (r:${e})`),Ne(this,this._packetRW.write.finalize(a))}channelOpenConfirm(e,r,n,i){let s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(17);o[s]=Oe.CHANNEL_OPEN_CONFIRMATION,U(o,e,++s),U(o,r,s+=4),U(o,n,s+=4),U(o,i,s+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_CONFIRMATION (r:${e}, l:${r})`),Ne(this,this._packetRW.write.finalize(o))}channelOpenFail(e,r,n){typeof n!="string"&&(n="");let i=Buffer.byteLength(n),s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(13+i+4);o[s]=Oe.CHANNEL_OPEN_FAILURE,U(o,e,++s),U(o,r,s+=4),U(o,i,s+=4),s+=4,i&&(o.utf8Write(n,s,i),s+=i),U(o,0,s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_FAILURE (r:${e})`),Ne(this,this._packetRW.write.finalize(o))}service(e){if(this._server)throw new Error("Client-only method called in server mode");let r=Buffer.byteLength(e),n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(5+r);i[n]=Oe.SERVICE_REQUEST,U(i,r,++n),i.utf8Write(e,n+=4,r),this._debug&&this._debug(`Outbound: Sending SERVICE_REQUEST (${e})`),Ne(this,this._packetRW.write.finalize(i))}authPassword(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");let i=Buffer.byteLength(e),s=Buffer.byteLength(r),o=n?Buffer.byteLength(n):0,a=this._packetRW.write.allocStart,l=this._packetRW.write.alloc(5+i+4+14+4+8+1+4+s+(n?4+o:0));l[a]=Oe.USERAUTH_REQUEST,U(l,i,++a),l.utf8Write(e,a+=4,i),U(l,14,a+=i),l.utf8Write("ssh-connection",a+=4,14),U(l,8,a+=14),l.utf8Write("password",a+=4,8),l[a+=8]=n?1:0,U(l,s,++a),Buffer.isBuffer(r)?zh(r,l,0,s,a+=4):l.utf8Write(r,a+=4,s),n?(U(l,o,a+=s),Buffer.isBuffer(n)?zh(n,l,0,o,a+=4):l.utf8Write(n,a+=4,o),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (changed password)")):this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (password)"),this._authsQueue.push("password"),Ne(this,this._packetRW.write.finalize(l))}authPK(e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");if(r=t2(r),r instanceof Error)throw new Error("Invalid key");let s=r.type;r=r.getPublicSSH(),typeof n=="function"&&(i=n,n=void 0),n||(n=s);let o=Buffer.byteLength(e),a=Buffer.byteLength(n),l=r.length,u=this._kex.sessionID,c=u.length,f=(i?4+c:0)+1+4+o+4+14+4+9+1+4+a+4+l,h,p;if(i?(h=Buffer.allocUnsafe(f),p=0,U(h,c,p),h.set(u,p+=4),p+=c):(h=this._packetRW.write.alloc(f),p=this._packetRW.write.allocStart),h[p]=Oe.USERAUTH_REQUEST,U(h,o,++p),h.utf8Write(e,p+=4,o),U(h,14,p+=o),h.utf8Write("ssh-connection",p+=4,14),U(h,9,p+=14),h.utf8Write("publickey",p+=4,9),h[p+=9]=i?1:0,U(h,a,++p),h.utf8Write(n,p+=4,a),U(h,l,p+=a),h.set(r,p+=4),!i){this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey -- check)"),Ne(this,this._packetRW.write.finalize(h));return}i(h,g=>{if(g=r2(g,s),g===!1)throw new Error("Error while converting handshake signature");let m=g.length;p=this._packetRW.write.allocStart,h=this._packetRW.write.alloc(5+o+4+14+4+9+1+4+a+4+l+4+4+a+4+m),h[p]=Oe.USERAUTH_REQUEST,U(h,o,++p),h.utf8Write(e,p+=4,o),U(h,14,p+=o),h.utf8Write("ssh-connection",p+=4,14),U(h,9,p+=14),h.utf8Write("publickey",p+=4,9),h[p+=9]=1,U(h,a,++p),h.utf8Write(n,p+=4,a),U(h,l,p+=a),h.set(r,p+=4),U(h,4+a+4+m,p+=l),U(h,a,p+=4),h.utf8Write(n,p+=4,a),U(h,m,p+=a),h.set(g,p+=4),this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey)"),Ne(this,this._packetRW.write.finalize(h))})}authHostbased(e,r,n,i,s,o){if(this._server)throw new Error("Client-only method called in server mode");if(r=t2(r),r instanceof Error)throw new Error("Invalid key");let a=r.type;r=r.getPublicSSH(),typeof s=="function"&&(o=s,s=void 0),s||(s=a);let l=Buffer.byteLength(e),u=Buffer.byteLength(s),c=r.length,f=this._kex.sessionID,h=f.length,p=Buffer.byteLength(n),g=Buffer.byteLength(i),m=Buffer.allocUnsafe(4+h+1+4+l+4+14+4+9+4+u+4+c+4+p+4+g),E=0;U(m,h,E),m.set(f,E+=4),m[E+=h]=Oe.USERAUTH_REQUEST,U(m,l,++E),m.utf8Write(e,E+=4,l),U(m,14,E+=l),m.utf8Write("ssh-connection",E+=4,14),U(m,9,E+=14),m.utf8Write("hostbased",E+=4,9),U(m,u,E+=9),m.utf8Write(s,E+=4,u),U(m,c,E+=u),m.set(r,E+=4),U(m,p,E+=c),m.utf8Write(n,E+=4,p),U(m,g,E+=p),m.utf8Write(i,E+=4,g),o(m,A=>{if(A=r2(A,a),!A)throw new Error("Error while converting handshake signature");let w=A.length,k=m.length-h-4;E=this._packetRW.write.allocStart;let S=this._packetRW.write.alloc(k+4+4+u+4+w);zh(m,S,4+h,m.length,E),U(S,4+u+4+w,E+=k),U(S,u,E+=4),S.utf8Write(s,E+=4,u),U(S,w,E+=u),S.set(A,E+=4),this._authsQueue.push("hostbased"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (hostbased)"),Ne(this,this._packetRW.write.finalize(S))})}authKeyboard(e){if(this._server)throw new Error("Client-only method called in server mode");let r=Buffer.byteLength(e),n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(5+r+4+14+4+20+4+4);i[n]=Oe.USERAUTH_REQUEST,U(i,r,++n),i.utf8Write(e,n+=4,r),U(i,14,n+=r),i.utf8Write("ssh-connection",n+=4,14),U(i,20,n+=14),i.utf8Write("keyboard-interactive",n+=4,20),U(i,0,n+=20),U(i,0,n+=4),this._authsQueue.push("keyboard-interactive"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (keyboard-interactive)"),Ne(this,this._packetRW.write.finalize(i))}authNone(e){if(this._server)throw new Error("Client-only method called in server mode");let r=Buffer.byteLength(e),n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(5+r+4+14+4+4);i[n]=Oe.USERAUTH_REQUEST,U(i,r,++n),i.utf8Write(e,n+=4,r),U(i,14,n+=r),i.utf8Write("ssh-connection",n+=4,14),U(i,4,n+=14),i.utf8Write("none",n+=4,4),this._authsQueue.push("none"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (none)"),Ne(this,this._packetRW.write.finalize(i))}authInfoRes(e){if(this._server)throw new Error("Client-only method called in server mode");let r=0,n;if(e){n=new Array(e.length);for(let o=0;o<e.length;++o){let a=Buffer.byteLength(e[o]);n[o]=a,r+=4+a}}let i=this._packetRW.write.allocStart,s=this._packetRW.write.alloc(5+r);if(s[i]=Oe.USERAUTH_INFO_RESPONSE,e){U(s,e.length,++i),i+=4;for(let o=0;o<e.length;++o){let a=n[o];U(s,a,i),i+=4,a&&(s.utf8Write(e[o],i,a),i+=a)}}else U(s,0,++i);this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_RESPONSE"),Ne(this,this._packetRW.write.finalize(s))}tcpipForward(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");let i=Buffer.byteLength(e),s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(23+i+4);o[s]=Oe.GLOBAL_REQUEST,U(o,13,++s),o.utf8Write("tcpip-forward",s+=4,13),o[s+=13]=n===void 0||n===!0?1:0,U(o,i,++s),o.utf8Write(e,s+=4,i),U(o,r,s+=i),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (tcpip-forward)"),Ne(this,this._packetRW.write.finalize(o))}cancelTcpipForward(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");let i=Buffer.byteLength(e),s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(30+i+4);o[s]=Oe.GLOBAL_REQUEST,U(o,20,++s),o.utf8Write("cancel-tcpip-forward",s+=4,20),o[s+=20]=n===void 0||n===!0?1:0,U(o,i,++s),o.utf8Write(e,s+=4,i),U(o,r,s+=i),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-tcpip-forward)"),Ne(this,this._packetRW.write.finalize(o))}openssh_streamLocalForward(e,r){if(this._server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=this._packetRW.write.allocStart,s=this._packetRW.write.alloc(41+n);s[i]=Oe.GLOBAL_REQUEST,U(s,31,++i),s.utf8Write("streamlocal-forward@openssh.com",i+=4,31),s[i+=31]=r===void 0||r===!0?1:0,U(s,n,++i),s.utf8Write(e,i+=4,n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (streamlocal-forward@openssh.com)"),Ne(this,this._packetRW.write.finalize(s))}openssh_cancelStreamLocalForward(e,r){if(this._server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=this._packetRW.write.allocStart,s=this._packetRW.write.alloc(48+n);s[i]=Oe.GLOBAL_REQUEST,U(s,38,++i),s.utf8Write("cancel-streamlocal-forward@openssh.com",i+=4,38),s[i+=38]=r===void 0||r===!0?1:0,U(s,n,++i),s.utf8Write(e,i+=4,n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-streamlocal-forward@openssh.com)"),Ne(this,this._packetRW.write.finalize(s))}directTcpip(e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");let s=Buffer.byteLength(i.srcIP),o=Buffer.byteLength(i.dstIP),a=this._packetRW.write.allocStart,l=this._packetRW.write.alloc(33+s+4+4+o+4);l[a]=Oe.CHANNEL_OPEN,U(l,12,++a),l.utf8Write("direct-tcpip",a+=4,12),U(l,e,a+=12),U(l,r,a+=4),U(l,n,a+=4),U(l,o,a+=4),l.utf8Write(i.dstIP,a+=4,o),U(l,i.dstPort,a+=o),U(l,s,a+=4),l.utf8Write(i.srcIP,a+=4,s),U(l,i.srcPort,a+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-tcpip)`),Ne(this,this._packetRW.write.finalize(l))}openssh_directStreamLocal(e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");let s=Buffer.byteLength(i.socketPath),o=this._packetRW.write.allocStart,a=this._packetRW.write.alloc(51+s+4+4);a[o]=Oe.CHANNEL_OPEN,U(a,30,++o),a.utf8Write("direct-streamlocal@openssh.com",o+=4,30),U(a,e,o+=30),U(a,r,o+=4),U(a,n,o+=4),U(a,s,o+=4),a.utf8Write(i.socketPath,o+=4,s),$M(a,0,o+=s,o+8),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-streamlocal@openssh.com)`),Ne(this,this._packetRW.write.finalize(a))}openssh_noMoreSessions(e){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart,n=this._packetRW.write.alloc(34);n[r]=Oe.GLOBAL_REQUEST,U(n,28,++r),n.utf8Write("no-more-sessions@openssh.com",r+=4,28),n[r+=28]=e===void 0||e===!0?1:0,this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (no-more-sessions@openssh.com)"),Ne(this,this._packetRW.write.finalize(n))}session(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");let i=this._packetRW.write.allocStart,s=this._packetRW.write.alloc(24);s[i]=Oe.CHANNEL_OPEN,U(s,7,++i),s.utf8Write("session",i+=4,7),U(s,e,i+=7),U(s,r,i+=4),U(s,n,i+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, session)`),Ne(this,this._packetRW.write.finalize(s))}windowChange(e,r,n,i,s){if(this._server)throw new Error("Client-only method called in server mode");let o=this._packetRW.write.allocStart,a=this._packetRW.write.alloc(39);a[o]=Oe.CHANNEL_REQUEST,U(a,e,++o),U(a,13,o+=4),a.utf8Write("window-change",o+=4,13),a[o+=13]=0,U(a,n,++o),U(a,r,o+=4),U(a,s,o+=4),U(a,i,o+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, window-change)`),Ne(this,this._packetRW.write.finalize(a))}pty(e,r,n,i,s,o,a,l){if(this._server)throw new Error("Client-only method called in server mode");(!o||!o.length)&&(o="vt100"),a&&!Buffer.isBuffer(a)&&!Array.isArray(a)&&typeof a=="object"&&a!==null&&(a=oU(a)),(!a||!a.length)&&(a=eU);let u=o.length,c=a.length,f=this._packetRW.write.allocStart,h=this._packetRW.write.alloc(21+u+4+4+4+4+4+c);if(h[f]=Oe.CHANNEL_REQUEST,U(h,e,++f),U(h,7,f+=4),h.utf8Write("pty-req",f+=4,7),h[f+=7]=l===void 0||l===!0?1:0,U(h,u,++f),h.utf8Write(o,f+=4,u),U(h,n,f+=u),U(h,r,f+=4),U(h,s,f+=4),U(h,i,f+=4),U(h,c,f+=4),f+=4,Array.isArray(a))for(let p=0;p<c;++p)h[f++]=a[p];else Buffer.isBuffer(a)&&h.set(a,f);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, pty-req)`),Ne(this,this._packetRW.write.finalize(h))}shell(e,r){if(this._server)throw new Error("Client-only method called in server mode");let n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(15);i[n]=Oe.CHANNEL_REQUEST,U(i,e,++n),U(i,5,n+=4),i.utf8Write("shell",n+=4,5),i[n+=5]=r===void 0||r===!0?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, shell)`),Ne(this,this._packetRW.write.finalize(i))}exec(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");let i=Buffer.isBuffer(r),s=i?r.length:Buffer.byteLength(r),o=this._packetRW.write.allocStart,a=this._packetRW.write.alloc(18+s);a[o]=Oe.CHANNEL_REQUEST,U(a,e,++o),U(a,4,o+=4),a.utf8Write("exec",o+=4,4),a[o+=4]=n===void 0||n===!0?1:0,U(a,s,++o),i?a.set(r,o+=4):a.utf8Write(r,o+=4,s),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exec: ${r})`),Ne(this,this._packetRW.write.finalize(a))}signal(e,r){if(this._server)throw new Error("Client-only method called in server mode");let n=r;if(r=r.toUpperCase(),r.slice(0,3)==="SIG"&&(r=r.slice(3)),Zx[r]!==1)throw new Error(`Invalid signal: ${n}`);let i=r.length,s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(20+i);o[s]=Oe.CHANNEL_REQUEST,U(o,e,++s),U(o,6,s+=4),o.utf8Write("signal",s+=4,6),o[s+=6]=0,U(o,i,++s),o.utf8Write(r,s+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, signal: ${r})`),Ne(this,this._packetRW.write.finalize(o))}env(e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");let s=Buffer.byteLength(r),o=Buffer.isBuffer(n),a=o?n.length:Buffer.byteLength(n),l=this._packetRW.write.allocStart,u=this._packetRW.write.alloc(17+s+4+a);u[l]=Oe.CHANNEL_REQUEST,U(u,e,++l),U(u,3,l+=4),u.utf8Write("env",l+=4,3),u[l+=3]=i===void 0||i===!0?1:0,U(u,s,++l),u.utf8Write(r,l+=4,s),U(u,a,l+=s),o?u.set(n,l+=4):u.utf8Write(n,l+=4,a),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, env: ${r}=${n})`),Ne(this,this._packetRW.write.finalize(u))}x11Forward(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");let i=r.protocol,s=r.cookie,o=Buffer.isBuffer(i),a=o?i.length:Buffer.byteLength(i),l=Buffer.isBuffer(s),u=l?s.length:Buffer.byteLength(s),c=this._packetRW.write.allocStart,f=this._packetRW.write.alloc(22+a+4+u+4);f[c]=Oe.CHANNEL_REQUEST,U(f,e,++c),U(f,7,c+=4),f.utf8Write("x11-req",c+=4,7),f[c+=7]=n===void 0||n===!0?1:0,f[++c]=r.single?1:0,U(f,a,++c),o?f.set(i,c+=4):f.utf8Write(i,c+=4,a),U(f,u,c+=a),l?f.set(s,c+=4):f.latin1Write(s,c+=4,u),U(f,r.screen||0,c+=u),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, x11-req)`),Ne(this,this._packetRW.write.finalize(f))}subsystem(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");let i=Buffer.byteLength(r),s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(23+i);o[s]=Oe.CHANNEL_REQUEST,U(o,e,++s),U(o,9,s+=4),o.utf8Write("subsystem",s+=4,9),o[s+=9]=n===void 0||n===!0?1:0,U(o,i,++s),o.utf8Write(r,s+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, subsystem: ${r})`),Ne(this,this._packetRW.write.finalize(o))}openssh_agentForward(e,r){if(this._server)throw new Error("Client-only method called in server mode");let n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(36);i[n]=Oe.CHANNEL_REQUEST,U(i,e,++n),U(i,26,n+=4),i.utf8Write("auth-agent-req@openssh.com",n+=4,26),i[n+=26]=r===void 0||r===!0?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, auth-agent-req@openssh.com)`),Ne(this,this._packetRW.write.finalize(i))}openssh_hostKeysProve(e){if(this._server)throw new Error("Client-only method called in server mode");let r=0,n=[];for(let o of e){let a=o.getPublicSSH();r+=4+a.length,n.push(a)}let i=this._packetRW.write.allocStart,s=this._packetRW.write.alloc(35+r);s[i]=Oe.GLOBAL_REQUEST,U(s,29,++i),s.utf8Write("hostkeys-prove-00@openssh.com",i+=4,29),s[i+=29]=1,++i;for(let o of n)U(s,o.length,i),zh(o,s,0,o.length,i+=4),i+=o.length;this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (hostkeys-prove-00@openssh.com)"),Ne(this,this._packetRW.write.finalize(s))}serviceAccept(e){if(!this._server)throw new Error("Server-only method called in client mode");let r=Buffer.byteLength(e),n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(5+r);if(i[n]=Oe.SERVICE_ACCEPT,U(i,r,++n),i.utf8Write(e,n+=4,r),this._debug&&this._debug(`Outbound: Sending SERVICE_ACCEPT (${e})`),Ne(this,this._packetRW.write.finalize(i)),this._server&&this._banner&&e==="ssh-userauth"){let s=this._banner;this._banner=void 0;let o=Buffer.byteLength(s);n=this._packetRW.write.allocStart;let a=this._packetRW.write.alloc(5+o+4);a[n]=Oe.USERAUTH_BANNER,U(a,o,++n),a.utf8Write(s,n+=4,o),U(a,0,n+=o),this._debug&&this._debug("Outbound: Sending USERAUTH_BANNER"),Ne(this,this._packetRW.write.finalize(a))}}forwardedTcpip(e,r,n,i){if(!this._server)throw new Error("Server-only method called in client mode");let s=Buffer.byteLength(i.boundAddr),o=Buffer.byteLength(i.remoteAddr),a=this._packetRW.write.allocStart,l=this._packetRW.write.alloc(36+s+4+4+o+4);l[a]=Oe.CHANNEL_OPEN,U(l,15,++a),l.utf8Write("forwarded-tcpip",a+=4,15),U(l,e,a+=15),U(l,r,a+=4),U(l,n,a+=4),U(l,s,a+=4),l.utf8Write(i.boundAddr,a+=4,s),U(l,i.boundPort,a+=s),U(l,o,a+=4),l.utf8Write(i.remoteAddr,a+=4,o),U(l,i.remotePort,a+=o),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-tcpip)`),Ne(this,this._packetRW.write.finalize(l))}x11(e,r,n,i){if(!this._server)throw new Error("Server-only method called in client mode");let s=Buffer.byteLength(i.originAddr),o=this._packetRW.write.allocStart,a=this._packetRW.write.alloc(24+s+4);a[o]=Oe.CHANNEL_OPEN,U(a,3,++o),a.utf8Write("x11",o+=4,3),U(a,e,o+=3),U(a,r,o+=4),U(a,n,o+=4),U(a,s,o+=4),a.utf8Write(i.originAddr,o+=4,s),U(a,i.originPort,o+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, x11)`),Ne(this,this._packetRW.write.finalize(a))}openssh_authAgent(e,r,n){if(!this._server)throw new Error("Server-only method called in client mode");let i=this._packetRW.write.allocStart,s=this._packetRW.write.alloc(39);s[i]=Oe.CHANNEL_OPEN,U(s,22,++i),s.utf8Write("auth-agent@openssh.com",i+=4,22),U(s,e,i+=22),U(s,r,i+=4),U(s,n,i+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, auth-agent@openssh.com)`),Ne(this,this._packetRW.write.finalize(s))}openssh_forwardedStreamLocal(e,r,n,i){if(!this._server)throw new Error("Server-only method called in client mode");let s=Buffer.byteLength(i.socketPath),o=this._packetRW.write.allocStart,a=this._packetRW.write.alloc(54+s+4);a[o]=Oe.CHANNEL_OPEN,U(a,33,++o),a.utf8Write("forwarded-streamlocal@openssh.com",o+=4,33),U(a,e,o+=33),U(a,r,o+=4),U(a,n,o+=4),U(a,s,o+=4),a.utf8Write(i.socketPath,o+=4,s),U(a,0,o+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-streamlocal@openssh.com)`),Ne(this,this._packetRW.write.finalize(a))}exitStatus(e,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(25);i[n]=Oe.CHANNEL_REQUEST,U(i,e,++n),U(i,11,n+=4),i.utf8Write("exit-status",n+=4,11),i[n+=11]=0,U(i,r,++n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-status: ${r})`),Ne(this,this._packetRW.write.finalize(i))}exitSignal(e,r,n,i){if(!this._server)throw new Error("Server-only method called in client mode");let s=r;if(typeof s!="string"||!s)throw new Error(`Invalid signal: ${s}`);let o=r.toUpperCase();if(o.slice(0,3)==="SIG"&&(o=o.slice(3)),Zx[o]!==1)throw new Error(`Invalid signal: ${s}`);let a=Buffer.byteLength(o),l=i?Buffer.byteLength(i):0,u=this._packetRW.write.allocStart,c=this._packetRW.write.alloc(25+a+1+4+l+4);c[u]=Oe.CHANNEL_REQUEST,U(c,e,++u),U(c,11,u+=4),c.utf8Write("exit-signal",u+=4,11),c[u+=11]=0,U(c,a,++u),c.utf8Write(o,u+=4,a),c[u+=a]=n?1:0,U(c,l,++u),u+=4,l&&(c.utf8Write(i,u,l),u+=l),U(c,0,u),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-signal: ${r})`),Ne(this,this._packetRW.write.finalize(c))}authFailure(e,r){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0)throw new Error("No auth in progress");let n;if(typeof e=="boolean"&&(r=e,e=void 0),e){n=[];for(let a=0;a<e.length;++a)e[a].toLowerCase()!=="none"&&n.push(e[a]);n=n.join(",")}else n="";let i=n.length,s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(5+i+1);o[s]=Oe.USERAUTH_FAILURE,U(o,i,++s),o.utf8Write(n,s+=4,i),o[s+=i]=r===!0?1:0,this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_FAILURE"),Ne(this,this._packetRW.write.finalize(o))}authSuccess(){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0)throw new Error("No auth in progress");let e=this._packetRW.write.allocStart,r=this._packetRW.write.alloc(1);r[e]=Oe.USERAUTH_SUCCESS,this._authsQueue.shift(),this._authenticated=!0,this._debug&&this._debug("Outbound: Sending USERAUTH_SUCCESS"),Ne(this,this._packetRW.write.finalize(r)),this._kex.negotiated.cs.compress==="zlib@openssh.com"&&(this._packetRW.read=new l2),this._kex.negotiated.sc.compress==="zlib@openssh.com"&&(this._packetRW.write=new u2(this))}authPKOK(e,r){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0||this._authsQueue[0]!=="publickey")throw new Error('"publickey" auth not in progress');let n=Buffer.byteLength(e),i=r.length,s=this._packetRW.write.allocStart,o=this._packetRW.write.alloc(5+n+4+i);o[s]=Oe.USERAUTH_PK_OK,U(o,n,++s),o.utf8Write(e,s+=4,n),U(o,i,s+=n),o.set(r,s+=4),this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_PK_OK"),Ne(this,this._packetRW.write.finalize(o))}authPasswdChg(e){if(!this._server)throw new Error("Server-only method called in client mode");let r=Buffer.byteLength(e),n=this._packetRW.write.allocStart,i=this._packetRW.write.alloc(5+r+4);i[n]=Oe.USERAUTH_PASSWD_CHANGEREQ,U(i,r,++n),i.utf8Write(e,n+=4,r),U(i,0,n+=r),this._debug&&this._debug("Outbound: Sending USERAUTH_PASSWD_CHANGEREQ"),Ne(this,this._packetRW.write.finalize(i))}authInfoReq(e,r,n){if(!this._server)throw new Error("Server-only method called in client mode");let i=0,s=e?Buffer.byteLength(e):0,o=r?Buffer.byteLength(r):0;for(let u=0;u<n.length;++u)i+=4+Buffer.byteLength(n[u].prompt)+1;let a=this._packetRW.write.allocStart,l=this._packetRW.write.alloc(5+s+4+o+4+4+i);l[a]=Oe.USERAUTH_INFO_REQUEST,U(l,s,++a),a+=4,e&&(l.utf8Write(e,a,s),a+=s),U(l,o,a),a+=4,r&&(l.utf8Write(r,a,o),a+=o),U(l,0,a),U(l,n.length,a+=4),a+=4;for(let u=0;u<n.length;++u){let c=n[u],f=Buffer.byteLength(c.prompt);U(l,f,a),a+=4,f&&(l.utf8Write(c.prompt,a,f),a+=f),l[a++]=c.echo?1:0}this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_REQUEST"),Ne(this,this._packetRW.write.finalize(l))}},tU=/^SSH-(2\.0|1\.99)-([^ ]+)(?: (.*))?$/;function rU(t,e,r){let n,i;this._buffer?(n=Buffer.allocUnsafe(this._buffer.length+(r-e)),n.set(this._buffer,0),e===0?n.set(t,this._buffer.length):n.set(new Uint8Array(t.buffer,t.byteOffset+e,r-e),this._buffer.length),i=this._buffer.length,e=0):(n=t,i=0);let s=e,o=e,a=e,l=!1,u=0,c=0;for(;e<n.length;++e){let f=n[e];if(f===13){l=!0;continue}if(f===10){if(a>o&&a-o>4&&n[o]===83&&n[o+1]===83&&n[o+2]===72&&n[o+3]===45){let h=n.latin1Slice(s,a+1),p=o===s?h:h.slice(o-s),g=tU.exec(p);if(!g)throw new Error("Invalid identification string");let m={greeting:o===s?"":h.slice(0,o-s),identRaw:p,versions:{protocol:g[1],software:g[2]},comments:g[3]};return this._remoteIdentRaw=Buffer.from(p),this._debug&&this._debug(`Remote ident: ${i2(p)}`),this._compatFlags=sU(m),this._buffer=void 0,this._decipher=new UM(0,GM.bind(this,{firstPacket:!0})),this._parse=nU,this._onHeader(m),this._destruct?(o2(this),e+1-i):r}if(this._server)throw new Error("Greetings from clients not permitted");if(++c>ZM)throw new Error("Max greeting lines exceeded");l=!1,o=e+1,u=0}else{if(l)throw new Error("Invalid header: expected newline");if(++u>=JM)throw new Error("Header line too long")}a=e}return this._buffer||(this._buffer=a2(n,s)),e-i}function nU(t,e,r){return this._decipher.decrypt(t,e,r)}function iU(t){if(this._onPacket(),t.length===0){this._debug&&this._debug("Inbound: Skipping empty packet payload");return}t=this._packetRW.read.read(t);let e=t[0];e===Oe.USERAUTH_SUCCESS&&!this._server&&!this._authenticated&&(this._authenticated=!0,this._kex.negotiated.cs.compress==="zlib@openssh.com"&&(this._packetRW.write=new u2(this)),this._kex.negotiated.sc.compress==="zlib@openssh.com"&&(this._packetRW.read=new l2));let r=jM[e];if(r===void 0){this._debug&&this._debug(`Inbound: Unsupported message type: ${e}`);return}return r(this,t)}function sU(t){let e=t.versions.software,r=0;for(let n of qM)typeof n[0]=="string"?e===n[0]&&(r|=n[1]):n[0].test(e)&&(r|=n[1]);return r}function oU(t){let e=Object.keys(t),r=Buffer.allocUnsafe(5*e.length+1),n=0;for(let i=0;i<e.length;++i){let s=e[i];if(s==="TTY_OP_END")continue;let o=I_[s];if(o===void 0)continue;let a=t[s];typeof a=="number"&&isFinite(a)&&(r[n++]=o,r[n++]=a>>>24,r[n++]=a>>>16,r[n++]=a>>>8,r[n++]=a)}return r[n++]=I_.TTY_OP_END,n<r.length?a2(r,0,n):r}function aU(t){let e="ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss";HM&&(e=`ssh-ed25519,${e}`);let r=Buffer.byteLength(e),n=t._packetRW.write.allocStart,i=t._packetRW.write.alloc(28+r);i[n]=Oe.EXT_INFO,U(i,1,++n),U(i,15,n+=4),i.utf8Write("server-sig-algs",n+=4,15),U(i,r,n+=15),i.utf8Write(e,n+=4,r),t._debug&&t._debug("Outbound: Sending EXT_INFO"),Ne(t,t._packetRW.write.finalize(i))}f2.exports=T_});var _2=x(Qu=>{"use strict";var Yh=require("assert"),{inspect:lU}=require("util");function h2(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function d2(t,e){if(Yh(typeof e=="string","`thing` has to be of type string"),Array.isArray(t)){let r=t.length;return Yh(r>0,"At least one expected value needs to be specified"),t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}return`of ${e} ${String(t)}`}Qu.ERR_INTERNAL_ASSERTION=class g2 extends Error{constructor(e){super(),Error.captureStackTrace(this,g2);let r=`This is caused by either a bug in ssh2 or incorrect usage of ssh2 internals.
Please open an issue with this stack trace at https://github.com/mscdex/ssh2/issues
`;this.message=e===void 0?r:`${e}
${r}`}};var uU=2**32,p2=(()=>{try{return new Function("return 2n ** 32n")()}catch{}})();Qu.ERR_OUT_OF_RANGE=class m2 extends RangeError{constructor(e,r,n,i){super(),Error.captureStackTrace(this,m2),Yh(r,'Missing "range" argument');let s=i?e:`The value of "${e}" is out of range.`,o;Number.isInteger(n)&&Math.abs(n)>uU?o=h2(String(n)):typeof n=="bigint"?(o=String(n),(n>p2||n<-p2)&&(o=h2(o)),o+="n"):o=lU(n),s+=` It must be ${r}. Received ${o}`,this.message=s}};var Vh=class t extends TypeError{constructor(e,r,n){super(),Error.captureStackTrace(this,t),Yh(typeof e=="string","'name' must be a string");let i;typeof r=="string"&&r.startsWith("not ")?(i="must not be",r=r.replace(/^not /,"")):i="must be";let s;if(e.endsWith(" argument"))s=`The ${e} ${i} ${d2(r,"type")}`;else{let o=e.includes(".")?"property":"argument";s=`The "${e}" ${o} ${i} ${d2(r,"type")}`}s+=`. Received type ${typeof n}`,this.message=s}};Qu.ERR_INVALID_ARG_TYPE=Vh;Qu.validateNumber=function(e,r){if(typeof e!="number")throw new Vh(r,"number",e)}});var Gu=x((eie,R2)=>{"use strict";var cU=require("events"),Os=require("fs"),{constants:rn}=Os,{Readable:S2,Writable:U_}=require("stream"),{inherits:C2,types:{isDate:N_}}=require("util"),fU=Buffer[Symbol.species],{bufferCopy:ks,bufferSlice:$a,makeBufferParser:hU,writeUInt32BE:X}=Gn(),Ji={SIZE:1,UIDGID:2,PERMISSIONS:4,ACMODTIME:8,EXTENDED:2147483648},Ue=Buffer.alloc(28),ht={OK:0,EOF:1,NO_SUCH_FILE:2,PERMISSION_DENIED:3,FAILURE:4,BAD_MESSAGE:5,NO_CONNECTION:6,CONNECTION_LOST:7,OP_UNSUPPORTED:8},dU=new Map(Object.values(ht).map(t=>[t,1])),pU={[ht.OK]:"No error",[ht.EOF]:"End of file",[ht.NO_SUCH_FILE]:"No such file or directory",[ht.PERMISSION_DENIED]:"Permission denied",[ht.FAILURE]:"Failure",[ht.BAD_MESSAGE]:"Bad message",[ht.NO_CONNECTION]:"No connection",[ht.CONNECTION_LOST]:"Connection lost",[ht.OP_UNSUPPORTED]:"Operation unsupported"},Le={INIT:1,OPEN:3,CLOSE:4,READ:5,WRITE:6,LSTAT:7,FSTAT:8,SETSTAT:9,FSETSTAT:10,OPENDIR:11,READDIR:12,REMOVE:13,MKDIR:14,RMDIR:15,REALPATH:16,STAT:17,RENAME:18,READLINK:19,SYMLINK:20,EXTENDED:200},nn={VERSION:2,STATUS:101,HANDLE:102,DATA:103,NAME:104,ATTRS:105,EXTENDED:201},Be={READ:1,WRITE:2,APPEND:4,CREAT:8,TRUNC:16,EXCL:32},E2=2*1024,wt=2**32-1,gU=Buffer.from([0,0,0,5,Le.INIT,0,0,0,3]),mU=Buffer.from([0,0,0,5,nn.VERSION,0,0,0,3]),_U=/^SSH-2.0-(?:OpenSSH|dropbear)/,k_=256*1024,W=hU(),EU={readable:!1,writable:!1,push:t=>{},once:()=>{},on:()=>{},emit:()=>{},end:()=>{}};function w2(){}var B_=class extends cU{constructor(e,r,n){super(),(typeof n!="object"||!n)&&(n={});let i=e._protocol._remoteIdentRaw;this.server=!!n.server,this._debug=typeof n.debug=="function"?n.debug:void 0,this._isOpenSSH=i&&_U.test(i),this._version=-1,this._extensions={},this._biOpt=n.biOpt,this._pktLenBytes=0,this._pktLen=0,this._pktPos=0,this._pktType=0,this._pktData=void 0,this._writeReqid=-1,this._requests={},this._maxInPktLen=k_,this._maxOutPktLen=34e3,this._maxReadLen=(this._isOpenSSH?k_:34e3)-E2,this._maxWriteLen=(this._isOpenSSH?k_:34e3)-E2,this.maxOpenHandles=void 0,this._client=e,this._protocol=e._protocol,this._callbacks=[],this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this._waitWindow=!1,this._chunkcb=void 0,this._buffer=[],this.type=r.type,this.subtype=void 0,this.incoming=r.incoming,this.outgoing=r.outgoing,this.stderr=EU,this.readable=!0}push(e){if(e===null){if(T2(this),!this.readable)return;this.readable=!1,this.emit("end");return}let r=0;for(;r<e.length;){if(this._pktLenBytes<4){let o=Math.min(4-this._pktLenBytes,e.length-r);for(this._pktLenBytes+=o;o--;)this._pktLen=(this._pktLen<<8)+e[r++];if(this._pktLenBytes<4)return;if(this._pktLen===0)return yt(this,"Invalid packet length");if(this._pktLen>this._maxInPktLen){let a=this._maxInPktLen;return yt(this,`Packet length ${this._pktLen} exceeds max length of ${a}`)}if(r>=e.length)return}if(this._pktPos<this._pktLen){let o=Math.min(this._pktLen-this._pktPos,e.length-r);if(r!==0||o!==e.length?o===this._pktLen?this._pkt=new fU(e.buffer,e.byteOffset+r,o):(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(new Uint8Array(e.buffer,e.byteOffset+r,o),this._pktPos)):o===this._pktLen?this._pkt=e:(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(e,this._pktPos)),r+=o,this._pktPos+=o,this._pktPos<this._pktLen)return}let n=this._pkt[0],i=this._pkt;this._pktLen=0,this._pktLenBytes=0,this._pkt=void 0,this._pktPos=0;let s=this.server?SU[n]:bU[n];if(!s)return yt(this,`Unknown packet type ${n}`);if(this._version===-1){if(this.server){if(n!==Le.INIT)return yt(this,`Expected INIT packet, got ${n}`)}else if(n!==nn.VERSION)return yt(this,`Expected VERSION packet, got ${n}`)}if(s(this,i)===!1)return}}end(){this.destroy()}destroy(){(this.outgoing.state==="open"||this.outgoing.state==="eof")&&(this.outgoing.state="closing",this._protocol.channelClose(this.outgoing.id))}_init(){this._init=w2,this.server||ut(this,gU)}createReadStream(e,r){if(this.server)throw new Error("Client-only method called in server mode");return new Zi(this,e,r)}createWriteStream(e,r){if(this.server)throw new Error("Client-only method called in server mode");return new On(this,e,r)}open(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");typeof n=="function"&&(i=n,n=void 0);let s=typeof r=="number"?r:D2(r);if(s===null)throw new Error(`Unknown flags string: ${r}`);let o=0,a=0;(typeof n=="string"||typeof n=="number")&&(n={mode:n}),typeof n=="object"&&n!==null&&(n=Ro(n),o=n.flags,a=n.nb);let l=Buffer.byteLength(e),u=9,c=Buffer.allocUnsafe(13+l+4+4+a);X(c,c.length-4,0),c[4]=Le.OPEN;let f=this._writeReqid=this._writeReqid+1&wt;X(c,f,5),X(c,l,u),c.utf8Write(e,u+=4,l),X(c,s,u+=l),X(c,o,u+=4),a&&(u+=4,a===Ue.length?c.set(Ue,u):ks(Ue,c,0,a,u),u+=a),this._requests[f]={cb:i};let h=ut(this,c);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} OPEN`)}close(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let n=e.length,i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.CLOSE;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.set(e,i+=4),this._requests[o]={cb:r};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} CLOSE`)}read(e,r,n,i,s,o){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(r))throw new Error("buffer is not a Buffer");if(n>=r.length)throw new Error("offset is out of bounds");if(n+i>r.length)throw new Error("length extends beyond buffer");if(s===null)throw new Error("null position currently unsupported");x2(this,e,r,n,i,s,o)}readData(e,r,n,i,s,o){this.read(e,r,n,i,s,o)}write(e,r,n,i,s,o){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(r))throw new Error("buffer is not a Buffer");if(n>r.length)throw new Error("offset is out of bounds");if(n+i>r.length)throw new Error("length extends beyond buffer");if(s===null)throw new Error("null position currently unsupported");if(!i){o&&process.nextTick(o,void 0,0);return}let a=this._maxWriteLen,l=Math.max(i-a,0),u=s;l&&(i=a);let c=e.length,f=9,h=Buffer.allocUnsafe(13+c+8+4+i);X(h,h.length-4,0),h[4]=Le.WRITE;let p=this._writeReqid=this._writeReqid+1&wt;X(h,p,5),X(h,c,f),h.set(e,f+=4),f+=c;for(let m=7;m>=0;--m)h[f+m]=s&255,s/=256;X(h,i,f+=8),ks(r,h,n,n+i,f+=4),this._requests[p]={cb:m=>{m?typeof o=="function"&&o(m):l?this.write(e,r,n+i,l,u+i,o):typeof o=="function"&&o(void 0,n+i)}};let g=ut(this,h);if(this._debug){let m=g?"Sent":"Buffered";this._debug(`SFTP: Outbound: ${m} WRITE (id:${p})`)}}writeData(e,r,n,i,s,o){this.write(e,r,n,i,s,o)}fastGet(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");y2(this,Os,e,r,n,i)}fastPut(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");y2(Os,this,e,r,n,i)}readFile(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i;if(typeof n=="function"?i=n:typeof r=="function"&&(i=r,r=void 0),typeof r=="string")r={encoding:r,flag:"r"};else if(!r)r={encoding:null,flag:"r"};else if(typeof r!="object")throw new TypeError("Bad arguments");let s=r.encoding;if(s&&!Buffer.isEncoding(s))throw new Error(`Unknown encoding: ${s}`);let o,a,l,u=0,c,f=0,h=r.flag||"r",p=()=>{o===0?(a=Buffer.allocUnsafe(8192),this.read(c,a,0,8192,f,g)):this.read(c,a,u,o-u,f,g)},g=(E,A)=>{let w;if(E){if(w=E.code===ht.EOF,!w)return this.close(c,()=>i&&i(E))}else w=!1;if(w||o===0&&A===0)return m();f+=A,u+=A,o!==0?u===o?m():p():(l.push($a(a,0,A)),p())};g._wantEOFError=!0;let m=()=>{this.close(c,E=>(o===0?a=Buffer.concat(l,u):u<o&&(a=$a(a,0,u)),s&&(a=a.toString(s)),i&&i(E,a)))};this.open(e,h,438,(E,A)=>{if(E)return i&&i(E);c=A;let w=(k,S)=>{if(k){this.stat(e,(B,F)=>{if(B)return this.close(c,()=>{i&&i(k)});w(null,F)});return}if(o=S.size||0,o===0)return l=[],p();a=Buffer.allocUnsafe(o),p()};this.fstat(c,w)})}writeFile(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");let s;if(typeof i=="function"?s=i:typeof n=="function"&&(s=n,n=void 0),typeof n=="string")n={encoding:n,mode:438,flag:"w"};else if(!n)n={encoding:"utf8",mode:438,flag:"w"};else if(typeof n!="object")throw new TypeError("Bad arguments");if(n.encoding&&!Buffer.isEncoding(n.encoding))throw new Error(`Unknown encoding: ${n.encoding}`);let o=n.flag||"w";this.open(e,o,n.mode,(a,l)=>{if(a)s&&s(a);else{let u=Buffer.isBuffer(r)?r:Buffer.from(""+r,n.encoding||"utf8"),c=/a/.test(o)?null:0;if(c===null){let f=(h,p)=>{if(h){this.stat(e,(g,m)=>{if(g)return this.close(l,()=>{s&&s(h)});f(null,m)});return}P_(this,l,u,0,u.length,p.size,s)};this.fstat(l,f);return}P_(this,l,u,0,u.length,c,s)}})}appendFile(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");let s;if(typeof i=="function"?s=i:typeof n=="function"&&(s=n,n=void 0),typeof n=="string")n={encoding:n,mode:438,flag:"a"};else if(!n)n={encoding:"utf8",mode:438,flag:"a"};else if(typeof n!="object")throw new TypeError("Bad arguments");n.flag||(n=Object.assign({flag:"a"},n)),this.writeFile(e,r,n,s)}exists(e,r){if(this.server)throw new Error("Client-only method called in server mode");this.stat(e,n=>{r&&r(!n)})}unlink(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.REMOVE;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} REMOVE`)}rename(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i=Buffer.byteLength(e),s=Buffer.byteLength(r),o=9,a=Buffer.allocUnsafe(13+i+4+s);X(a,a.length-4,0),a[4]=Le.RENAME;let l=this._writeReqid=this._writeReqid+1&wt;X(a,l,5),X(a,i,o),a.utf8Write(e,o+=4,i),X(a,s,o+=i),a.utf8Write(r,o+=4,s),this._requests[l]={cb:n};let u=ut(this,a);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} RENAME`)}mkdir(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i=0,s=0;typeof r=="function"&&(n=r,r=void 0),typeof r=="object"&&r!==null&&(r=Ro(r),i=r.flags,s=r.nb);let o=Buffer.byteLength(e),a=9,l=Buffer.allocUnsafe(13+o+4+s);X(l,l.length-4,0),l[4]=Le.MKDIR;let u=this._writeReqid=this._writeReqid+1&wt;X(l,u,5),X(l,o,a),l.utf8Write(e,a+=4,o),X(l,i,a+=o),s&&(a+=4,s===Ue.length?l.set(Ue,a):ks(Ue,l,0,s,a),a+=s),this._requests[u]={cb:n};let c=ut(this,l);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} MKDIR`)}rmdir(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.RMDIR;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} RMDIR`)}readdir(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");typeof r=="function"&&(n=r,r={}),(typeof r!="object"||r===null)&&(r={});let i=!(r&&r.full);if(!Buffer.isBuffer(e)&&typeof e!="string")throw new Error("missing directory handle or path");if(typeof e=="string"){let c=[],f=0,h=(p,g)=>{if(p)return n(p);this.readdir(g,r,(m,E)=>{let A=m&&m.code===ht.EOF;if(m&&!A)return this.close(g,()=>n(m));if(A)return this.close(g,w=>{if(w)return n(w);n(void 0,c)});for(let w=0;w<E.length;++w,++f)c[f]=E[w];h(void 0,g)})};return this.opendir(e,h)}let s=e.length,o=9,a=Buffer.allocUnsafe(13+s);X(a,a.length-4,0),a[4]=Le.READDIR;let l=this._writeReqid=this._writeReqid+1&wt;X(a,l,5),X(a,s,o),a.set(e,o+=4),this._requests[l]={cb:i?(c,f)=>{if(typeof n=="function"){if(c)return n(c);for(let h=f.length-1;h>=0;--h)(f[h].filename==="."||f[h].filename==="..")&&f.splice(h,1);n(void 0,f)}}:n};let u=ut(this,a);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} READDIR`)}fstat(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let n=e.length,i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.FSTAT;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.set(e,i+=4),this._requests[o]={cb:r};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} FSTAT`)}stat(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.STAT;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} STAT`)}lstat(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.LSTAT;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} LSTAT`)}opendir(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.OPENDIR;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} OPENDIR`)}setstat(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i=0,s=0;typeof r=="object"&&r!==null?(r=Ro(r),i=r.flags,s=r.nb):typeof r=="function"&&(n=r);let o=Buffer.byteLength(e),a=9,l=Buffer.allocUnsafe(13+o+4+s);X(l,l.length-4,0),l[4]=Le.SETSTAT;let u=this._writeReqid=this._writeReqid+1&wt;X(l,u,5),X(l,o,a),l.utf8Write(e,a+=4,o),X(l,i,a+=o),s&&(a+=4,s===Ue.length?l.set(Ue,a):ks(Ue,l,0,s,a),a+=s),this._requests[u]={cb:n};let c=ut(this,l);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} SETSTAT`)}fsetstat(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let i=0,s=0;typeof r=="object"&&r!==null?(r=Ro(r),i=r.flags,s=r.nb):typeof r=="function"&&(n=r);let o=e.length,a=9,l=Buffer.allocUnsafe(13+o+4+s);X(l,l.length-4,0),l[4]=Le.FSETSTAT;let u=this._writeReqid=this._writeReqid+1&wt;X(l,u,5),X(l,o,a),l.set(e,a+=4),X(l,i,a+=o),s&&(a+=4,s===Ue.length?l.set(Ue,a):ks(Ue,l,0,s,a),a+=s),this._requests[u]={cb:n};let c=ut(this,l);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} FSETSTAT`)}futimes(e,r,n,i){return this.fsetstat(e,{atime:Ga(r),mtime:Ga(n)},i)}utimes(e,r,n,i){return this.setstat(e,{atime:Ga(r),mtime:Ga(n)},i)}fchown(e,r,n,i){return this.fsetstat(e,{uid:r,gid:n},i)}chown(e,r,n,i){return this.setstat(e,{uid:r,gid:n},i)}fchmod(e,r,n){return this.fsetstat(e,{mode:r},n)}chmod(e,r,n){return this.setstat(e,{mode:r},n)}readlink(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.READLINK;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:(l,u)=>{if(typeof r=="function"){if(l)return r(l);if(!u||!u.length)return r(new Error("Response missing link info"));r(void 0,u[0].filename)}}};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} READLINK`)}symlink(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i=Buffer.byteLength(r),s=Buffer.byteLength(e),o=9,a=Buffer.allocUnsafe(13+i+4+s);X(a,a.length-4,0),a[4]=Le.SYMLINK;let l=this._writeReqid=this._writeReqid+1&wt;X(a,l,5),this._isOpenSSH?(X(a,s,o),a.utf8Write(e,o+=4,s),X(a,i,o+=s),a.utf8Write(r,o+=4,i)):(X(a,i,o),a.utf8Write(r,o+=4,i),X(a,s,o+=i),a.utf8Write(e,o+=4,s)),this._requests[l]={cb:n};let u=ut(this,a);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} SYMLINK`)}realpath(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=Buffer.byteLength(e),i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=Le.REALPATH;let o=this._writeReqid=this._writeReqid+1&wt;X(s,o,5),X(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:(l,u)=>{if(typeof r=="function"){if(l)return r(l);if(!u||!u.length)return r(new Error("Response missing path info"));r(void 0,u[0].filename)}}};let a=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} REALPATH`)}ext_openssh_rename(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i=this._extensions["posix-rename@openssh.com"];if(!i||i!=="1")throw new Error("Server does not support this extended request");let s=Buffer.byteLength(e),o=Buffer.byteLength(r),a=9,l=Buffer.allocUnsafe(41+s+4+o);X(l,l.length-4,0),l[4]=Le.EXTENDED;let u=this._writeReqid=this._writeReqid+1&wt;X(l,u,5),X(l,24,a),l.utf8Write("posix-rename@openssh.com",a+=4,24),X(l,s,a+=24),l.utf8Write(e,a+=4,s),X(l,o,a+=s),l.utf8Write(r,a+=4,o),this._requests[u]={cb:n};let c=ut(this,l);if(this._debug){let f=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${f} posix-rename@openssh.com`)}}ext_openssh_statvfs(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=this._extensions["statvfs@openssh.com"];if(!n||n!=="2")throw new Error("Server does not support this extended request");let i=Buffer.byteLength(e),s=9,o=Buffer.allocUnsafe(36+i);X(o,o.length-4,0),o[4]=Le.EXTENDED;let a=this._writeReqid=this._writeReqid+1&wt;X(o,a,5),X(o,19,s),o.utf8Write("statvfs@openssh.com",s+=4,19),X(o,i,s+=19),o.utf8Write(e,s+=4,i),this._requests[a]={extended:"statvfs@openssh.com",cb:r};let l=ut(this,o);if(this._debug){let u=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${u} statvfs@openssh.com`)}}ext_openssh_fstatvfs(e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=this._extensions["fstatvfs@openssh.com"];if(!n||n!=="2")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let i=e.length,s=9,o=Buffer.allocUnsafe(37+i);X(o,o.length-4,0),o[4]=Le.EXTENDED;let a=this._writeReqid=this._writeReqid+1&wt;X(o,a,5),X(o,20,s),o.utf8Write("fstatvfs@openssh.com",s+=4,20),X(o,i,s+=20),o.set(e,s+=4),this._requests[a]={extended:"fstatvfs@openssh.com",cb:r};let l=ut(this,o);if(this._debug){let u=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${u} fstatvfs@openssh.com`)}}ext_openssh_hardlink(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["hardlink@openssh.com"]!=="1")throw new Error("Server does not support this extended request");let s=Buffer.byteLength(e),o=Buffer.byteLength(r),a=9,l=Buffer.allocUnsafe(37+s+4+o);X(l,l.length-4,0),l[4]=Le.EXTENDED;let u=this._writeReqid=this._writeReqid+1&wt;X(l,u,5),X(l,20,a),l.utf8Write("hardlink@openssh.com",a+=4,20),X(l,s,a+=20),l.utf8Write(e,a+=4,s),X(l,o,a+=s),l.utf8Write(r,a+=4,o),this._requests[u]={cb:n};let c=ut(this,l);if(this._debug){let f=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${f} hardlink@openssh.com`)}}ext_openssh_fsync(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["fsync@openssh.com"]!=="1")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let i=e.length,s=9,o=Buffer.allocUnsafe(34+i);X(o,o.length-4,0),o[4]=Le.EXTENDED;let a=this._writeReqid=this._writeReqid+1&wt;X(o,a,5),X(o,17,s),o.utf8Write("fsync@openssh.com",s+=4,17),X(o,i,s+=17),o.set(e,s+=4),this._requests[a]={cb:r};let l=ut(this,o);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} fsync@openssh.com`)}ext_openssh_lsetstat(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["lsetstat@openssh.com"]!=="1")throw new Error("Server does not support this extended request");let s=0,o=0;typeof r=="object"&&r!==null?(r=Ro(r),s=r.flags,o=r.nb):typeof r=="function"&&(n=r);let a=Buffer.byteLength(e),l=9,u=Buffer.allocUnsafe(37+a+4+o);X(u,u.length-4,0),u[4]=Le.EXTENDED;let c=this._writeReqid=this._writeReqid+1&wt;X(u,c,5),X(u,20,l),u.utf8Write("lsetstat@openssh.com",l+=4,20),X(u,a,l+=20),u.utf8Write(e,l+=4,a),X(u,s,l+=a),o&&(l+=4,o===Ue.length?u.set(Ue,l):ks(Ue,u,0,o,l),l+=o),this._requests[c]={cb:n};let f=ut(this,u);if(this._debug){let h=f?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${h} lsetstat@openssh.com`)}}ext_openssh_expandPath(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["expand-path@openssh.com"]!=="1")throw new Error("Server does not support this extended request");let i=Buffer.byteLength(e),s=9,o=Buffer.allocUnsafe(40+i);X(o,o.length-4,0),o[4]=Le.EXTENDED;let a=this._writeReqid=this._writeReqid+1&wt;X(o,a,5),X(o,23,s),o.utf8Write("expand-path@openssh.com",s+=4,23),X(o,i,s+=20),o.utf8Write(e,s+=4,i),this._requests[a]={cb:(u,c)=>{if(typeof r=="function"){if(u)return r(u);if(!c||!c.length)return r(new Error("Response missing expanded path"));r(void 0,c[0].filename)}}};let l=ut(this,o);if(this._debug){let u=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${u} expand-path@openssh.com`)}}ext_copy_data(e,r,n,i,s,o){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["copy-data"]!=="1")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("Source handle is not a Buffer");if(!Buffer.isBuffer(i))throw new Error("Destination handle is not a Buffer");let l=0,u=Buffer.allocUnsafe(26+e.length+8+8+4+i.length+8);X(u,u.length-4,l),l+=4,u[l]=Le.EXTENDED,++l;let c=this._writeReqid=this._writeReqid+1&wt;X(u,c,l),l+=4,X(u,9,l),l+=4,u.utf8Write("copy-data",l,9),l+=9,X(u,e.length,l),l+=4,u.set(e,l),l+=e.length;for(let h=7;h>=0;--h)u[l+h]=r&255,r/=256;l+=8;for(let h=7;h>=0;--h)u[l+h]=n&255,n/=256;l+=8,X(u,i.length,l),l+=4,u.set(i,l),l+=i.length;for(let h=7;h>=0;--h)u[l+h]=s&255,s/=256;this._requests[c]={cb:o};let f=ut(this,u);if(this._debug){let h=f?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${h} copy-data`)}}ext_home_dir(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["home-directory"]!=="1")throw new Error("Server does not support this extended request");if(typeof e!="string")throw new TypeError("username is not a string");let i=0,s=Buffer.byteLength(e),o=Buffer.allocUnsafe(31+s);X(o,o.length-4,i),i+=4,o[i]=Le.EXTENDED,++i;let a=this._writeReqid=this._writeReqid+1&wt;X(o,a,i),i+=4,X(o,14,i),i+=4,o.utf8Write("home-directory",i,14),i+=14,X(o,s,i),i+=4,o.utf8Write(e,i,s),i+=s,this._requests[a]={cb:(u,c)=>{if(typeof r=="function"){if(u)return r(u);if(!c||!c.length)return r(new Error("Response missing home directory"));r(void 0,c[0].filename)}}};let l=ut(this,o);if(this._debug){let u=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${u} home-directory`)}}ext_users_groups(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["users-groups-by-id@openssh.com"]!=="1")throw new Error("Server does not support this extended request");if(!Array.isArray(e))throw new TypeError("uids is not an array");for(let u of e)if(!Number.isInteger(u)||u<0||u>2**32-1)throw new Error("uid values must all be 32-bit unsigned integers");if(!Array.isArray(r))throw new TypeError("gids is not an array");for(let u of r)if(!Number.isInteger(u)||u<0||u>2**32-1)throw new Error("gid values must all be 32-bit unsigned integers");let s=0,o=Buffer.allocUnsafe(47+4*e.length+4+4*r.length);X(o,o.length-4,s),s+=4,o[s]=Le.EXTENDED,++s;let a=this._writeReqid=this._writeReqid+1&wt;X(o,a,s),s+=4,X(o,30,s),s+=4,o.utf8Write("users-groups-by-id@openssh.com",s,30),s+=30,X(o,4*e.length,s),s+=4;for(let u of e)X(o,u,s),s+=4;X(o,4*r.length,s),s+=4;for(let u of r)X(o,u,s),s+=4;this._requests[a]={extended:"users-groups-by-id@openssh.com",cb:n};let l=ut(this,o);if(this._debug){let u=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${u} users-groups-by-id@openssh.com`)}}handle(e,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!Buffer.isBuffer(r))throw new Error("handle is not a Buffer");let n=r.length;if(n>256)throw new Error("handle too large (> 256 bytes)");let i=9,s=Buffer.allocUnsafe(13+n);X(s,s.length-4,0),s[4]=nn.HANDLE,X(s,e,5),X(s,n,i),n&&s.set(r,i+=4);let o=ut(this,s);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} HANDLE`)}status(e,r,n){if(!this.server)throw new Error("Server-only method called in client mode");if(!dU.has(r))throw new Error(`Bad status code: ${r}`);n||(n="");let i=Buffer.byteLength(n),s=9,o=Buffer.allocUnsafe(17+i+4);X(o,o.length-4,0),o[4]=nn.STATUS,X(o,e,5),X(o,r,s),X(o,i,s+=4),s+=4,i&&(o.utf8Write(n,s,i),s+=i),X(o,0,s);let a=ut(this,o);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} STATUS`)}data(e,r,n){if(!this.server)throw new Error("Server-only method called in client mode");let i=Buffer.isBuffer(r);if(!i&&typeof r!="string")throw new Error("data is not a Buffer or string");let s;!i&&!n&&(n=void 0,s=!0);let o=i?r.length:Buffer.byteLength(r,n),a=9,l=Buffer.allocUnsafe(13+o);X(l,l.length-4,0),l[4]=nn.DATA,X(l,e,5),X(l,o,a),o&&(i?l.set(r,a+=4):s?l.utf8Write(r,a+=4,o):l.write(r,a+=4,o,n));let u=ut(this,l);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} DATA`)}name(e,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!Array.isArray(r)){if(typeof r!="object"||r===null)throw new Error("names is not an object or array");r=[r]}let n=r.length,i=0,s,o=[];for(let c=0;c<n;++c){let f=r[c],h=!f||!f.filename||typeof f.filename!="string"?"":f.filename;i+=4+Buffer.byteLength(h);let p=!f||!f.longname||typeof f.longname!="string"?"":f.longname;if(i+=4+Buffer.byteLength(p),typeof f.attrs=="object"&&f.attrs!==null){if(s=Ro(f.attrs),i+=4+s.nb,s.nb){let g;s.nb===Ue.length?g=new Uint8Array(Ue):(g=new Uint8Array(s.nb),ks(Ue,g,0,s.nb,0)),s.bytes=g}o.push(s)}else i+=4,o.push(null)}let a=9,l=Buffer.allocUnsafe(13+i);X(l,l.length-4,0),l[4]=nn.NAME,X(l,e,5),X(l,n,a),a+=4;for(let c=0;c<n;++c){let f=r[c];{let p=!f||!f.filename||typeof f.filename!="string"?"":f.filename,g=Buffer.byteLength(p);X(l,g,a),a+=4,g&&(l.utf8Write(p,a,g),a+=g)}{let p=!f||!f.longname||typeof f.longname!="string"?"":f.longname,g=Buffer.byteLength(p);X(l,g,a),a+=4,g&&(l.utf8Write(p,a,g),a+=g)}let h=o[c];h?(X(l,h.flags,a),a+=4,h.flags&&h.bytes&&(l.set(h.bytes,a),a+=h.nb)):(X(l,0,a),a+=4)}let u=ut(this,l);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} NAME`)}attrs(e,r){if(!this.server)throw new Error("Server-only method called in client mode");if(typeof r!="object"||r===null)throw new Error("attrs is not an object");r=Ro(r);let n=r.flags,i=r.nb,s=9,o=Buffer.allocUnsafe(13+i);X(o,o.length-4,0),o[4]=nn.ATTRS,X(o,e,5),X(o,n,s),i&&(s+=4,i===Ue.length?o.set(Ue,s):ks(Ue,o,0,i,s),s+=i);let a=ut(this,o);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} ATTRS`)}};function yU(t){try{return Buffer.allocUnsafe(t)}catch(e){return e}}function x2(t,e,r,n,i,s,o,a){let l=t._maxReadLen,u=Math.max(i-l,0);u&&(i=l);let c=e.length,f=9,h=s,p=Buffer.allocUnsafe(13+c+8+4);X(p,p.length-4,0),p[4]=Le.READ;let g=t._writeReqid=t._writeReqid+1&wt;X(p,g,5),X(p,c,f),p.set(e,f+=4),f+=c;for(let A=7;A>=0;--A)p[f+A]=h&255,h/=256;X(p,i,f+=8),typeof o!="function"&&(o=w2);let m=a||{nb:0,position:s,off:n,origOff:n,len:void 0,overflow:void 0,cb:(A,w,k)=>{let S=m.len,B=m.overflow;if(A){if(o._wantEOFError||A.code!==ht.EOF)return o(A)}else{if(k>S)return o(new Error("Received more data than requested"));if(k===S&&B){m.nb+=k,m.position+=k,m.off+=k,x2(t,e,r,m.off,B,m.position,o,m);return}}k=k||0,m.origOff===0&&r.length===m.nb?w=r:w=$a(r,m.origOff,m.origOff+m.nb+k),o(void 0,m.nb+k,w,m.position)},buffer:void 0};m.len=i,m.overflow=u,m.buffer=$a(r,n,n+i),t._requests[g]=m;let E=ut(t,p);t._debug&&t._debug(`SFTP: Outbound: ${E?"Buffered":"Sending"} READ`)}function y2(t,e,r,n,i,s){let o=64,a=32768,l,u,c;typeof i=="function"?s=i:typeof i=="object"&&i!==null&&(typeof i.concurrency=="number"&&i.concurrency>0&&!isNaN(i.concurrency)&&(o=i.concurrency),typeof i.chunkSize=="number"&&i.chunkSize>0&&!isNaN(i.chunkSize)&&(a=i.chunkSize),typeof i.fileSize=="number"&&i.fileSize>0&&!isNaN(i.fileSize)&&(c=i.fileSize),typeof i.step=="function"&&(l=i.step),(typeof i.mode=="string"||typeof i.mode=="number")&&(u=q_(i.mode)));let f,h=0,p=0,g=!1,m,E,A,w=a*o;function k(S){if(g)return;g=!0;let B=0,F;m||E?(F=()=>{--B===0&&s(S)},m&&(t===Os||t.outgoing.state==="open")&&++B,E&&(e===Os||e.outgoing.state==="open")&&++B,m&&(t===Os||t.outgoing.state==="open")&&t.close(m,F),E&&(e===Os||e.outgoing.state==="open")&&e.close(E,F)):s(S)}t.open(r,"r",(S,B)=>{if(S)return k(S);m=B,c===void 0?t.fstat(m,F):F(null,{size:c});function F(M,D){if(M){if(t!==Os){t.stat(r,(I,N)=>{if(I)return k(M);F(null,N)});return}return k(M)}f=D.size,e.open(n,"w",(I,N)=>{if(I)return k(I);if(E=N,f<=0)return k();for(;w>f;){if(o===1){w=f;break}w-=a,--o}if(A=yU(w),A instanceof Error)return k(A);u!==void 0?e.fchmod(E,u,function O(z){if(z){e.chmod(n,u,J=>O());return}y()}):y();function T(O,z,J,L,$,K){if(O)return k(O);$=$||0,e.write(E,A,$,z,L,Z);function Z(fe){if(fe)return k(fe);if(p+=z,l&&l(p,z,f),z<K)return P($,L+z,K-z);if(p===f){e.close(E,he=>{if(E=void 0,he)return k(he);t.close(m,qe=>{if(m=void 0,qe)return k(qe);s()})});return}if(h>=f)return;let ue=h+a>f?f-h:a;P($,h,ue),h+=ue}}function Q(O,z,J){return(L,$,K)=>{T(L,$,K,z,O,J)}}function P(O,z,J){t.read(m,A,O,J,z,Q(O,z,J))}function y(){let O=0,z=0;for(;h<f&&O<o;){let J=h+a>f?f-h:a;P(z,h,J),z+=J,h+=J,++O}}})}})}function P_(t,e,r,n,i,s,o){let a=typeof o=="function"?o:void 0;t.write(e,r,n,i,s,(l,u)=>{if(l)return t.close(e,()=>{a&&a(l)});u===i?t.close(e,a):(n+=u,i-=u,s+=u,P_(t,e,r,n,i,s,a))})}var Jh=class{constructor(e){this.mode=e&&e.mode,this.uid=e&&e.uid,this.gid=e&&e.gid,this.size=e&&e.size,this.atime=e&&e.atime,this.mtime=e&&e.mtime,this.extended=e&&e.extended}isDirectory(){return(this.mode&rn.S_IFMT)===rn.S_IFDIR}isFile(){return(this.mode&rn.S_IFMT)===rn.S_IFREG}isBlockDevice(){return(this.mode&rn.S_IFMT)===rn.S_IFBLK}isCharacterDevice(){return(this.mode&rn.S_IFMT)===rn.S_IFCHR}isSymbolicLink(){return(this.mode&rn.S_IFMT)===rn.S_IFLNK}isFIFO(){return(this.mode&rn.S_IFMT)===rn.S_IFIFO}isSocket(){return(this.mode&rn.S_IFMT)===rn.S_IFSOCK}};function Ro(t){let e=0,r=0;if(typeof t=="object"&&t!==null){if(typeof t.size=="number"){e|=Ji.SIZE;let n=t.size;Ue[r++]=n/72057594037927940,Ue[r++]=n/281474976710656,Ue[r++]=n/1099511627776,Ue[r++]=n/4294967296,Ue[r++]=n/16777216,Ue[r++]=n/65536,Ue[r++]=n/256,Ue[r++]=n}if(typeof t.uid=="number"&&typeof t.gid=="number"){e|=Ji.UIDGID;let n=t.uid,i=t.gid;Ue[r++]=n>>>24,Ue[r++]=n>>>16,Ue[r++]=n>>>8,Ue[r++]=n,Ue[r++]=i>>>24,Ue[r++]=i>>>16,Ue[r++]=i>>>8,Ue[r++]=i}if(typeof t.mode=="number"||typeof t.mode=="string"){let n=q_(t.mode);e|=Ji.PERMISSIONS,Ue[r++]=n>>>24,Ue[r++]=n>>>16,Ue[r++]=n>>>8,Ue[r++]=n}if((typeof t.atime=="number"||N_(t.atime))&&(typeof t.mtime=="number"||N_(t.mtime))){let n=Ga(t.atime),i=Ga(t.mtime);e|=Ji.ACMODTIME,Ue[r++]=n>>>24,Ue[r++]=n>>>16,Ue[r++]=n>>>8,Ue[r++]=n,Ue[r++]=i>>>24,Ue[r++]=i>>>16,Ue[r++]=i>>>8,Ue[r++]=i}}return{flags:e,nb:r}}function Ga(t){if(typeof t=="number"&&t===t)return t;if(N_(t))return parseInt(t.getTime()/1e3,10);throw new Error(`Cannot parse time: ${t}`)}function q_(t){if(typeof t=="number"&&t===t)return t;if(typeof t=="string")return q_(parseInt(t,8));throw new Error(`Cannot parse mode: ${t}`)}var F_={r:Be.READ,"r+":Be.READ|Be.WRITE,w:Be.TRUNC|Be.CREAT|Be.WRITE,wx:Be.TRUNC|Be.CREAT|Be.WRITE|Be.EXCL,xw:Be.TRUNC|Be.CREAT|Be.WRITE|Be.EXCL,"w+":Be.TRUNC|Be.CREAT|Be.READ|Be.WRITE,"wx+":Be.TRUNC|Be.CREAT|Be.READ|Be.WRITE|Be.EXCL,"xw+":Be.TRUNC|Be.CREAT|Be.READ|Be.WRITE|Be.EXCL,a:Be.APPEND|Be.CREAT|Be.WRITE,ax:Be.APPEND|Be.CREAT|Be.WRITE|Be.EXCL,xa:Be.APPEND|Be.CREAT|Be.WRITE|Be.EXCL,"a+":Be.APPEND|Be.CREAT|Be.READ|Be.WRITE,"ax+":Be.APPEND|Be.CREAT|Be.READ|Be.WRITE|Be.EXCL,"xa+":Be.APPEND|Be.CREAT|Be.READ|Be.WRITE|Be.EXCL};function D2(t){let e=F_[t];return e!==void 0?e:null}var AU=(()=>{let t=Object.keys(F_);return e=>{for(let r=0;r<t.length;++r){let n=t[r];if(F_[n]===e)return n}return null}})();function ja(t){let e=W.readUInt32BE();if(e===void 0)return;let r=new Jh;if(e&Ji.SIZE){let n=W.readUInt64BE(t);if(n===void 0)return;r.size=n}if(e&Ji.UIDGID){let n=W.readUInt32BE(),i=W.readUInt32BE();if(i===void 0)return;r.uid=n,r.gid=i}if(e&Ji.PERMISSIONS){let n=W.readUInt32BE();if(n===void 0)return;r.mode=n}if(e&Ji.ACMODTIME){let n=W.readUInt32BE(),i=W.readUInt32BE();if(i===void 0)return;r.atime=n,r.mtime=i}if(e&Ji.EXTENDED){let n=W.readUInt32BE();if(n===void 0)return;let i={};for(let s=0;s<n;++s){let o=W.readString(!0),a=W.readString();if(a===void 0)return;i[o]=a}r.extended=i}return r}function ut(t,e){let r=I2(t,e);return r!==void 0?(t._buffer.push(r),!1):!0}function I2(t,e){let r=t.outgoing;if(r.state!=="open")return;if(r.window===0)return t._waitWindow=!0,t._chunkcb=A2,e;let n,i=e.length,s=0;for(;i-s>0&&r.window>0;){let o=Math.min(i-s,r.window,r.packetSize);r.window-=o,r.window===0&&(t._waitWindow=!0,t._chunkcb=A2),s===0&&o===i?t._protocol.channelData(t.outgoing.id,e):t._protocol.channelData(t.outgoing.id,$a(e,s,s+o)),s+=o}return i-s>0&&(s>0?n=$a(e,s,i):n=e),n}function A2(){this._chunkcb=void 0;let t=this._buffer,e=0;for(;e<t.length;){let r=t[e],n=I2(this,r);if(n!==void 0){n!==r&&(t[e]=n),e>0&&(this._buffer=t.slice(e));return}++e}e>0&&(this._buffer=[])}function yt(t,e,r){let n=new Error(e);return n.level="sftp-protocol",!r&&t._debug&&t._debug(`SFTP: Inbound: ${e}`),t.emit("error",n),t.destroy(),T2(t),!1}function T2(t){let e=Object.keys(t._requests);if(e.length===0)return;let r=t._requests;t._requests={};let n=new Error("No response from server");for(let i=0;i<e.length;++i){let s=r[e[i]];typeof s.cb=="function"&&s.cb(n)}}function vU(t,e){let r=9,n=Buffer.allocUnsafe(31);X(n,n.length-4,0),n[4]=Le.EXTENDED;let i=t._writeReqid=t._writeReqid+1&wt;X(n,i,5),X(n,18,r),n.utf8Write("limits@openssh.com",r+=4,18),t._requests[i]={extended:"limits@openssh.com",cb:e};let s=ut(t,n);if(t._debug){let o=s?"Buffered":"Sending";t._debug(`SFTP: Outbound: ${o} limits@openssh.com`)}}var bU={[nn.VERSION]:(t,e)=>{if(t._version!==-1)return yt(t,"Duplicate VERSION packet");let r={};W.init(e,1);let n=W.readUInt32BE();for(;W.avail();){let i=W.readString(!0),s=W.readString(!0);if(s===void 0){n=void 0;break}r[i]=s}if(W.clear(),n===void 0)return yt(t,"Malformed VERSION packet");if(t._debug){let i=Object.keys(r);i.length?t._debug(`SFTP: Inbound: Received VERSION (v${n}, exts:${i})`):t._debug(`SFTP: Inbound: Received VERSION (v${n})`)}if(t._version=n,t._extensions=r,r["limits@openssh.com"]==="1")return vU(t,(i,s)=>{i||(s.maxPktLen>0&&(t._maxOutPktLen=s.maxPktLen),s.maxReadLen>0&&(t._maxReadLen=s.maxReadLen),s.maxWriteLen>0&&(t._maxWriteLen=s.maxWriteLen),t.maxOpenHandles=s.maxOpenHandles>0?s.maxOpenHandles:1/0),t.emit("ready")});t.emit("ready")},[nn.STATUS]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readUInt32BE(),i=W.readString(!0);if(W.clear(),t._debug){let o=JSON.stringify(i);t._debug(`SFTP: Inbound: Received STATUS (id:${r}, ${n}, ${o})`)}let s=t._requests[r];if(delete t._requests[r],s&&typeof s.cb=="function"){if(n===ht.OK){s.cb();return}let o=new Error(i||pU[n]||"Unknown status");o.code=n,s.cb(o)}},[nn.HANDLE]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString();if(W.clear(),n===void 0)return r!==void 0&&delete t._requests[r],yt(t,"Malformed HANDLE packet");t._debug&&t._debug(`SFTP: Inbound: Received HANDLE (id:${r})`);let i=t._requests[r];delete t._requests[r],i&&typeof i.cb=="function"&&i.cb(void 0,n)},[nn.DATA]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n;if(r!==void 0&&(n=t._requests[r],delete t._requests[r]),n&&typeof n.cb=="function")if(n.buffer){let i=W.readString(n.buffer);if(W.clear(),i!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${i})`),n.cb(void 0,n.buffer,i);return}}else{let i=W.readString();if(W.clear(),i!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${i.length})`),n.cb(void 0,i);return}}else{let i=W.skipString();if(W.clear(),i!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${i})`);return}}return yt(t,"Malformed DATA packet")},[nn.NAME]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n;r!==void 0&&(n=t._requests[r],delete t._requests[r]);let i=W.readUInt32BE();if(i!==void 0){let s=[];for(let o=0;o<i;++o){let a=W.readString(!0),l=W.readString(!0),u=ja(t._biOpt);if(u===void 0){s=void 0;break}s.push({filename:a,longname:l,attrs:u})}if(s!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received NAME (id:${r}, ${s.length})`),W.clear(),n&&typeof n.cb=="function"&&n.cb(void 0,s);return}}return W.clear(),yt(t,"Malformed NAME packet")},[nn.ATTRS]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n;r!==void 0&&(n=t._requests[r],delete t._requests[r]);let i=ja(t._biOpt);if(W.clear(),i!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received ATTRS (id:${r})`),n&&typeof n.cb=="function"&&n.cb(void 0,i);return}return yt(t,"Malformed ATTRS packet")},[nn.EXTENDED]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE();if(r!==void 0){let n=t._requests[r];if(n)switch(delete t._requests[r],n.extended){case"statvfs@openssh.com":case"fstatvfs@openssh.com":{let i=t._biOpt,s={f_bsize:W.readUInt64BE(i),f_frsize:W.readUInt64BE(i),f_blocks:W.readUInt64BE(i),f_bfree:W.readUInt64BE(i),f_bavail:W.readUInt64BE(i),f_files:W.readUInt64BE(i),f_ffree:W.readUInt64BE(i),f_favail:W.readUInt64BE(i),f_sid:W.readUInt64BE(i),f_flag:W.readUInt64BE(i),f_namemax:W.readUInt64BE(i)};if(s.f_namemax===void 0)break;t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${n.extended})`),W.clear(),typeof n.cb=="function"&&n.cb(void 0,s);return}case"limits@openssh.com":{let i={maxPktLen:W.readUInt64BE(),maxReadLen:W.readUInt64BE(),maxWriteLen:W.readUInt64BE(),maxOpenHandles:W.readUInt64BE()};if(i.maxOpenHandles===void 0)break;t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${n.extended})`),W.clear(),typeof n.cb=="function"&&n.cb(void 0,i);return}case"users-groups-by-id@openssh.com":{let i=W.readUInt32BE();if(i===void 0)break;let s=new Array(i);for(let l=0;l<s.length;++l)s[l]=W.readString(!0);let o=W.readUInt32BE();if(o===void 0)break;let a=new Array(o);for(let l=0;l<a.length;++l)a[l]=W.readString(!0);if(a.length>0&&a[a.length-1]===void 0)break;t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${n.extended})`),W.clear(),typeof n.cb=="function"&&n.cb(void 0,s,a);return}default:t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),W.clear(),typeof n.cb=="function"&&n.cb();return}else{t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),W.clear();return}}return W.clear(),yt(t,"Malformed EXTENDED_REPLY packet")}},SU={[Le.INIT]:(t,e)=>{if(t._version!==-1)return yt(t,"Duplicate INIT packet");let r={};W.init(e,1);let n=W.readUInt32BE();for(;W.avail();){let i=W.readString(!0),s=W.readString(!0);if(s===void 0){n=void 0;break}r[i]=s}if(W.clear(),n===void 0)return yt(t,"Malformed INIT packet");if(t._debug){let i=Object.keys(r);i.length?t._debug(`SFTP: Inbound: Received INIT (v${n}, exts:${i})`):t._debug(`SFTP: Inbound: Received INIT (v${n})`)}ut(t,mU),t._version=n,t._extensions=r,t.emit("ready")},[Le.OPEN]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0),i=W.readUInt32BE(),s=ja(t._biOpt);if(W.clear(),s===void 0)return yt(t,"Malformed OPEN packet");t._debug&&t._debug(`SFTP: Inbound: Received OPEN (id:${r})`),t.emit("OPEN",r,n,i,s)||t.status(r,ht.OP_UNSUPPORTED)},[Le.CLOSE]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString();if(W.clear(),n===void 0||n.length>256)return yt(t,"Malformed CLOSE packet");t._debug&&t._debug(`SFTP: Inbound: Received CLOSE (id:${r})`),t.emit("CLOSE",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.READ]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(),i=W.readUInt64BE(t._biOpt),s=W.readUInt32BE();if(W.clear(),s===void 0||n.length>256)return yt(t,"Malformed READ packet");t._debug&&t._debug(`SFTP: Inbound: Received READ (id:${r})`),t.emit("READ",r,n,i,s)||t.status(r,ht.OP_UNSUPPORTED)},[Le.WRITE]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(),i=W.readUInt64BE(t._biOpt),s=W.readString();if(W.clear(),s===void 0||n.length>256)return yt(t,"Malformed WRITE packet");t._debug&&t._debug(`SFTP: Inbound: Received WRITE (id:${r})`),t.emit("WRITE",r,n,i,s)||t.status(r,ht.OP_UNSUPPORTED)},[Le.LSTAT]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0);if(W.clear(),n===void 0)return yt(t,"Malformed LSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received LSTAT (id:${r})`),t.emit("LSTAT",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.FSTAT]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString();if(W.clear(),n===void 0||n.length>256)return yt(t,"Malformed FSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received FSTAT (id:${r})`),t.emit("FSTAT",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.SETSTAT]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0),i=ja(t._biOpt);if(W.clear(),i===void 0)return yt(t,"Malformed SETSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received SETSTAT (id:${r})`),t.emit("SETSTAT",r,n,i)||t.status(r,ht.OP_UNSUPPORTED)},[Le.FSETSTAT]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(),i=ja(t._biOpt);if(W.clear(),i===void 0||n.length>256)return yt(t,"Malformed FSETSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received FSETSTAT (id:${r})`),t.emit("FSETSTAT",r,n,i)||t.status(r,ht.OP_UNSUPPORTED)},[Le.OPENDIR]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0);if(W.clear(),n===void 0)return yt(t,"Malformed OPENDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received OPENDIR (id:${r})`),t.emit("OPENDIR",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.READDIR]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString();if(W.clear(),n===void 0||n.length>256)return yt(t,"Malformed READDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received READDIR (id:${r})`),t.emit("READDIR",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.REMOVE]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0);if(W.clear(),n===void 0)return yt(t,"Malformed REMOVE packet");t._debug&&t._debug(`SFTP: Inbound: Received REMOVE (id:${r})`),t.emit("REMOVE",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.MKDIR]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0),i=ja(t._biOpt);if(W.clear(),i===void 0)return yt(t,"Malformed MKDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received MKDIR (id:${r})`),t.emit("MKDIR",r,n,i)||t.status(r,ht.OP_UNSUPPORTED)},[Le.RMDIR]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0);if(W.clear(),n===void 0)return yt(t,"Malformed RMDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received RMDIR (id:${r})`),t.emit("RMDIR",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.REALPATH]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0);if(W.clear(),n===void 0)return yt(t,"Malformed REALPATH packet");t._debug&&t._debug(`SFTP: Inbound: Received REALPATH (id:${r})`),t.emit("REALPATH",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.STAT]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0);if(W.clear(),n===void 0)return yt(t,"Malformed STAT packet");t._debug&&t._debug(`SFTP: Inbound: Received STAT (id:${r})`),t.emit("STAT",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.RENAME]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0),i=W.readString(!0);if(W.clear(),i===void 0)return yt(t,"Malformed RENAME packet");t._debug&&t._debug(`SFTP: Inbound: Received RENAME (id:${r})`),t.emit("RENAME",r,n,i)||t.status(r,ht.OP_UNSUPPORTED)},[Le.READLINK]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0);if(W.clear(),n===void 0)return yt(t,"Malformed READLINK packet");t._debug&&t._debug(`SFTP: Inbound: Received READLINK (id:${r})`),t.emit("READLINK",r,n)||t.status(r,ht.OP_UNSUPPORTED)},[Le.SYMLINK]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0),i=W.readString(!0);if(W.clear(),i===void 0)return yt(t,"Malformed SYMLINK packet");t._debug&&t._debug(`SFTP: Inbound: Received SYMLINK (id:${r})`);let s;t._isOpenSSH?s=t.emit("SYMLINK",r,i,n):s=t.emit("SYMLINK",r,n,i),s||t.status(r,ht.OP_UNSUPPORTED)},[Le.EXTENDED]:(t,e)=>{W.init(e,1);let r=W.readUInt32BE(),n=W.readString(!0);if(n===void 0)return W.clear(),yt(t,"Malformed EXTENDED packet");let i;W.avail()&&(i=W.readRaw()),W.clear(),t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED (id:${r})`),t.emit("EXTENDED",r,n,i)||t.status(r,ht.OP_UNSUPPORTED)}},{ERR_INVALID_ARG_TYPE:CU,ERR_OUT_OF_RANGE:Xh,validateNumber:wU}=_2(),v2=128,$r,L_=[];function xU(t){L_.length>0?$r=L_.pop():$r=Buffer.allocUnsafe(t),$r.used=0}function M_(t,e){if(!Number.isSafeInteger(t))throw wU(t,e),Number.isInteger(t)?new Xh(e,">= 0 and <= 2 ** 53 - 1",t):new Xh(e,"an integer",t);if(t<0)throw new Xh(e,">= 0 and <= 2 ** 53 - 1",t)}function O_(t){return t+7&-8}function Zi(t,e,r){if(r===void 0)r={};else if(typeof r=="string")r={encoding:r};else{if(r===null||typeof r!="object")throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}if(r.highWaterMark===void 0&&(r.highWaterMark=64*1024),r.emitClose=!1,r.autoDestroy=!1,S2.call(this,r),this.path=e,this.flags=r.flags===void 0?"r":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=r.autoClose===void 0?!0:r.autoClose,this.pos=0,this.bytesRead=0,this.isClosed=!1,this.handle=r.handle===void 0?null:r.handle,this.sftp=t,this._opening=!1,this.start!==void 0&&(M_(this.start,"start"),this.pos=this.start),this.end===void 0)this.end=1/0;else if(this.end!==1/0&&(M_(this.end,"end"),this.start!==void 0&&this.start>this.end))throw new Xh("start",`<= "end" (here: ${this.end})`,this.start);this.on("end",function(){this.autoClose&&this.destroy()}),Buffer.isBuffer(this.handle)||this.open()}C2(Zi,S2);Zi.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,(t,e)=>{if(this._opening=!1,t){this.emit("error",t),this.autoClose&&this.destroy();return}this.handle=e,this.emit("open",e),this.emit("ready"),this.read()}))};Zi.prototype._read=function(t){if(!Buffer.isBuffer(this.handle))return this.once("open",()=>this._read(t));if(this.destroyed)return;(!$r||$r.length-$r.used<v2)&&xU(this.readableHighWaterMark||this._readableState.highWaterMark);let e=$r,r=Math.min($r.length-$r.used,t),n=$r.used;if(this.end!==void 0&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return this.push(null);this.sftp.read(this.handle,$r,$r.used,r,this.pos,(i,s)=>{if(i){this.emit("error",i),this.autoClose&&this.destroy();return}let o=null;if(n+r===e.used&&e===$r)e.used=O_(e.used+s-r);else{let a=n+r&-8,l=O_(n+s);a-l>=v2&&L_.push(e.slice(l,a))}s>0&&(this.bytesRead+=s,o=e.slice(n,n+s)),this.pos+=s,this.push(o)}),$r.used=O_($r.used+r)};Zi.prototype._destroy=function(t,e){if(this._opening&&!Buffer.isBuffer(this.handle)){this.once("open",b2.bind(null,this,e,t));return}b2(this,e,t),this.handle=null,this._opening=!1};function b2(t,e,r){if(!t.handle)return n();t.sftp.close(t.handle,n);function n(i){i=i||r,e(i),t.isClosed=!0,i||t.emit("close")}}Zi.prototype.close=function(t){this.destroy(null,t)};Object.defineProperty(Zi.prototype,"pending",{get(){return this.handle===null},configurable:!0});function On(t,e,r){if(r===void 0)r={};else if(typeof r=="string")r={encoding:r};else{if(r===null||typeof r!="object")throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}r.emitClose=!1,r.autoDestroy=!1,U_.call(this,r),this.path=e,this.flags=r.flags===void 0?"w":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.autoClose=r.autoClose===void 0?!0:r.autoClose,this.pos=0,this.bytesWritten=0,this.isClosed=!1,this.handle=r.handle===void 0?null:r.handle,this.sftp=t,this._opening=!1,this.start!==void 0&&(M_(this.start,"start"),this.pos=this.start),r.encoding&&this.setDefaultEncoding(r.encoding),this.on("finish",function(){this._writableState.finalCalled||this.autoClose&&this.destroy()}),Buffer.isBuffer(this.handle)||this.open()}C2(On,U_);On.prototype._final=function(t){this.autoClose&&this.destroy(),t()};On.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,(t,e)=>{if(this._opening=!1,t){this.emit("error",t),this.autoClose&&this.destroy();return}this.handle=e;let r=n=>{if(n){this.sftp.chmod(this.path,this.mode,i=>r());return}if(this.flags[0]==="a"){let i=(s,o)=>{if(s){this.sftp.stat(this.path,(a,l)=>{if(a){this.destroy(),this.emit("error",s);return}i(null,l)});return}this.pos=o.size,this.emit("open",e),this.emit("ready")};this.sftp.fstat(e,i);return}this.emit("open",e),this.emit("ready")};this.sftp.fchmod(e,this.mode,r)}))};On.prototype._write=function(t,e,r){if(!Buffer.isBuffer(t)){let n=new CU("data","Buffer",t);return this.emit("error",n)}if(!Buffer.isBuffer(this.handle))return this.once("open",function(){this._write(t,e,r)});this.sftp.write(this.handle,t,0,t.length,this.pos,(n,i)=>{if(n)return this.autoClose&&this.destroy(),r(n);this.bytesWritten+=i,r()}),this.pos+=t.length};On.prototype._writev=function(t,e){if(!Buffer.isBuffer(this.handle))return this.once("open",function(){this._writev(t,e)});let r=this.sftp,n=this.handle,i=t.length,s=(o,a)=>{if(o)return this.destroy(),e(o);this.bytesWritten+=a,--i===0&&e()};for(let o=0;o<t.length;++o){let a=t[o].chunk;r.write(n,a,0,a.length,this.pos,s),this.pos+=a.length}};typeof U_.prototype.destroy!="function"&&(On.prototype.destroy=Zi.prototype.destroy);On.prototype._destroy=Zi.prototype._destroy;On.prototype.close=function(t){if(t){if(this.isClosed){process.nextTick(t);return}this.on("close",t)}this.autoClose||this.on("finish",this.destroy.bind(this)),this.end()};On.prototype.destroySoon=On.prototype.end;Object.defineProperty(On.prototype,"pending",{get(){return this.handle===null},configurable:!0});R2.exports={flagsToString:AU,OPEN_MODE:Be,SFTP:B_,Stats:Jh,STATUS_CODE:ht,stringToFlags:D2}});var $_=x((tie,B2)=>{"use strict";var{Duplex:DU,Readable:IU,Writable:TU}=require("stream"),{CHANNEL_EXTENDED_DATATYPE:{STDERR:k2}}=Yi(),{bufferSlice:Zh}=Gn(),RU=32*1024,ju=2*1024*1024,G_=ju/2,H_=class extends IU{constructor(e,r){super(r),this._channel=e}_read(e){this._channel._waitChanDrain&&(this._channel._waitChanDrain=!1,this._channel.incoming.window<=G_&&j_(this._channel))}},W_=class extends TU{constructor(e){super({highWaterMark:ju}),this._channel=e}_write(e,r,n){let i=this._channel,s=i._client._protocol,o=i.outgoing,a=o.packetSize,l=o.id,u=o.window,c=e.length,f=0;if(o.state==="open"){for(;c-f>0&&u>0;){let h=c-f;h>u&&(h=u),h>a&&(h=a),f===0&&h===c?s.channelExtData(l,e,k2):s.channelExtData(l,Zh(e,f,f+h),k2),f+=h,u-=h}if(o.window=u,c-f>0){u===0&&(i._waitWindow=!0),f>0?i._chunkErr=Zh(e,f,c):i._chunkErr=e,i._chunkcbErr=n;return}n()}}},Q_=class extends DU{constructor(e,r,n){let i={highWaterMark:ju,allowHalfOpen:!n||n&&n.allowHalfOpen!==!1,emitClose:!1};super(i),this.allowHalfOpen=i.allowHalfOpen;let s=!!(n&&n.server);this.server=s,this.type=r.type,this.subtype=void 0,this.incoming=r.incoming,this.outgoing=r.outgoing,this._callbacks=[],this._client=e,this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this.stdin=this.stdout=this,s?this.stderr=new W_(this):this.stderr=new H_(this,i),this._waitWindow=!1,this._waitChanDrain=!1,this._chunk=void 0,this._chunkcb=void 0,this._chunkErr=void 0,this._chunkcbErr=void 0,this.on("finish",O2).on("prefinish",O2),this.on("end",N2).on("close",N2)}_read(e){this._waitChanDrain&&(this._waitChanDrain=!1,this.incoming.window<=G_&&j_(this))}_write(e,r,n){let i=this._client._protocol,s=this.outgoing,o=s.packetSize,a=s.id,l=s.window,u=e.length,c=0;if(s.state==="open"){for(;u-c>0&&l>0;){let f=u-c;f>l&&(f=l),f>o&&(f=o),c===0&&f===u?i.channelData(a,e):i.channelData(a,Zh(e,c,c+f)),c+=f,l-=f}if(s.window=l,u-c>0){l===0&&(this._waitWindow=!0),c>0?this._chunk=Zh(e,c,u):this._chunk=e,this._chunkcb=n;return}n()}}eof(){this.outgoing.state==="open"&&(this.outgoing.state="eof",this._client._protocol.channelEOF(this.outgoing.id))}close(){(this.outgoing.state==="open"||this.outgoing.state==="eof")&&(this.outgoing.state="closing",this._client._protocol.channelClose(this.outgoing.id))}destroy(){return this.end(),this.close(),this}setWindow(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");this.type==="session"&&(this.subtype==="shell"||this.subtype==="exec")&&this.writable&&this.outgoing.state==="open"&&this._client._protocol.windowChange(this.outgoing.id,e,r,n,i)}signal(e){if(this.server)throw new Error("Client-only method called in server mode");this.type==="session"&&this.writable&&this.outgoing.state==="open"&&this._client._protocol.signal(this.outgoing.id,e)}exit(e,r,n){if(!this.server)throw new Error("Server-only method called in client mode");this.type==="session"&&this.writable&&this.outgoing.state==="open"&&(typeof e=="number"?this._client._protocol.exitStatus(this.outgoing.id,e):this._client._protocol.exitSignal(this.outgoing.id,e,r,n))}};function O2(){this.eof(),(this.server||!this.allowHalfOpen)&&this.close(),this.writable=!1}function N2(){this.readable=!1}function j_(t){if(t.outgoing.state==="closed")return;let e=ju-t.incoming.window;e<=0||(t.incoming.window+=e,t._client._protocol.channelWindowAdjust(t.outgoing.id,e))}B2.exports={Channel:Q_,MAX_WINDOW:ju,PACKET_SIZE:RU,windowAdjust:j_,WINDOW_THRESHOLD:G_}});var Y_=x((rie,L2)=>{"use strict";var{SFTP:kU}=Gu(),$u=2**32-1;function P2(t,e,r,n){if(t._chanMgr.remove(e),typeof n!="function")return;let i;r instanceof Error?i=r:typeof r=="object"&&r!==null?(i=new Error(`(SSH) Channel open failure: ${r.description}`),i.reason=r.reason):(i=new Error("(SSH) Channel open failure: server closed channel unexpectedly"),i.reason=""),n(i)}function F2(t,e,r,n,i){if(typeof r=="function"){P2(t,e,n,r);return}if(typeof r!="object"||r===null||r.incoming&&r.incoming.state==="closed"||(t._chanMgr.remove(e),r.server&&r.constructor.name==="Session"))return;r.incoming.state="closed",r.readable&&r.push(null),r.server?r.stderr.writable&&r.stderr.end():r.stderr.readable&&r.stderr.push(null),r.constructor!==kU&&(r.outgoing.state==="open"||r.outgoing.state==="eof")&&!i&&r.close(),r.outgoing.state==="closing"&&(r.outgoing.state="closed");let s=r._readableState,o=r._writableState;o&&!o.ending&&!o.finished&&!i&&r.end();let a=r._callbacks;r._callbacks=[];for(let l=0;l<a.length;++l)a[l](!0);if(r.server)!r.readable||r.destroyed||s&&s.endEmitted?r.emit("close"):r.once("end",()=>r.emit("close"));else{let l;switch(r.type){case"direct-streamlocal@openssh.com":case"direct-tcpip":l=()=>r.emit("close");break;default:{let c=r._exit;l=()=>{c.code===null?r.emit("close",c.code,c.signal,c.dump,c.desc):r.emit("close",c.code)}}}!r.readable||r.destroyed||s&&s.endEmitted?l():r.once("end",l);let u=r.stderr._readableState;!r.stderr.readable||r.stderr.destroyed||u&&u.endEmitted?r.stderr.emit("close"):r.stderr.once("end",()=>r.stderr.emit("close"))}}var z_=class{constructor(e){this._client=e,this._channels={},this._cur=-1,this._count=0}add(e){let r;if(this._cur<$u)r=++this._cur;else if(this._count===0)this._cur=0,r=0;else{let n=this._channels;for(let i=0;i<$u;++i)if(n[i]===void 0){r=i;break}}return r===void 0?-1:(this._channels[r]=e||!0,++this._count,r)}update(e,r){if(typeof e!="number"||e<0||e>=$u||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);r&&this._channels[e]&&(this._channels[e]=r)}get(e){if(typeof e!="number"||e<0||e>=$u||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);return this._channels[e]}remove(e){if(typeof e!="number"||e<0||e>=$u||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);this._channels[e]&&(delete this._channels[e],this._count&&--this._count)}cleanup(e){let r=this._channels;this._channels={},this._cur=-1,this._count=0;let n=Object.keys(r),i=this._client;for(let s=0;s<n.length;++s){let o=+n[s],a=r[o];F2(i,o,a._channel||a,e,!0)}}},K_=(()=>{let t=Object.prototype.toString;return e=>t.call(e)==="[object RegExp]"})();function OU(t,e,r){if(Array.isArray(t)&&t.length>0){for(let n=0;n<t.length;++n)if(r.indexOf(t[n])===-1)throw new Error(`Unsupported algorithm: ${t[n]}`);return t}if(typeof t=="object"&&t!==null){let n=Object.keys(t),i=e;for(let s=0;s<n.length;++s){let o=n[s],a=t[o];switch(o){case"append":if(Array.isArray(a)||(a=[a]),Array.isArray(a))for(let l=0;l<a.length;++l){let u=a[l];if(typeof u=="string"){if(!u||i.indexOf(u)!==-1)continue;if(r.indexOf(u)===-1)throw new Error(`Unsupported algorithm: ${u}`);i===e&&(i=i.slice()),i.push(u)}else if(K_(u))for(let c=0;c<r.length;++c){let f=r[c];if(u.test(f)){if(i.indexOf(f)!==-1)continue;i===e&&(i=i.slice()),i.push(f)}}}break;case"prepend":if(Array.isArray(a)||(a=[a]),Array.isArray(a))for(let l=a.length;l>=0;--l){let u=a[l];if(typeof u=="string"){if(!u||i.indexOf(u)!==-1)continue;if(r.indexOf(u)===-1)throw new Error(`Unsupported algorithm: ${u}`);i===e&&(i=i.slice()),i.unshift(u)}else if(K_(u))for(let c=r.length;c>=0;--c){let f=r[c];if(u.test(f)){if(i.indexOf(f)!==-1)continue;i===e&&(i=i.slice()),i.unshift(f)}}}break;case"remove":if(Array.isArray(a)||(a=[a]),Array.isArray(a))for(let l=0;l<a.length;++l){let u=a[l];if(typeof u=="string"){if(!u)continue;let c=i.indexOf(u);if(c===-1)continue;i===e&&(i=i.slice()),i.splice(c,1)}else if(K_(u))for(let c=0;c<i.length;++c)u.test(i[c])&&(i===e&&(i=i.slice()),i.splice(c,1),--c)}break}}return i}return e}L2.exports={ChannelManager:z_,generateAlgorithmList:OU,onChannelOpenFailure:P2,onCHANNEL_CLOSE:F2,isWritable:t=>t&&t.writable&&t._readableState&&t._readableState.ended===!1}});var rE=x((nie,nD)=>{"use strict";var{createHash:NU,getHashes:BU,randomFillSync:PU}=require("crypto"),{Socket:FU}=require("net"),{lookup:LU}=require("dns"),MU=require("events"),UU=BU(),{COMPAT:eD,CHANNEL_EXTENDED_DATATYPE:{STDERR:qU},CHANNEL_OPEN_FAILURE:Ku,DEFAULT_CIPHER:M2,DEFAULT_COMPRESSION:U2,DEFAULT_KEX:q2,DEFAULT_MAC:H2,DEFAULT_SERVER_HOST_KEY:W2,DISCONNECT_REASON:Q2,DISCONNECT_REASON_BY_VALUE:HU,SUPPORTED_CIPHER:WU,SUPPORTED_COMPRESSION:QU,SUPPORTED_KEX:GU,SUPPORTED_MAC:jU,SUPPORTED_SERVER_HOST_KEY:$U}=Yi(),{init:KU}=Ds(),zU=R_(),{parseKey:rd}=Rs(),{SFTP:YU}=Gu(),{bufferCopy:G2,makeBufferParser:tD,makeError:VU,readUInt32BE:XU,sigSSHToASN1:JU,writeUInt32BE:V_}=Gn(),{AgentContext:j2,createAgent:$2,isAgent:K2}=g_(),{Channel:rD,MAX_WINDOW:nd,PACKET_SIZE:id,windowAdjust:z2,WINDOW_THRESHOLD:Y2}=$_(),{ChannelManager:ZU,generateAlgorithmList:zu,isWritable:ar,onChannelOpenFailure:e9,onCHANNEL_CLOSE:t9}=Y_(),ed=tD(),td=tD(),Yu=/^OpenSSH_(?:(?![0-4])\d)|(?:\d{2,})/,eE=t=>{},tE=class extends MU{constructor(){super(),this.config={host:void 0,port:void 0,localAddress:void 0,localPort:void 0,forceIPv4:void 0,forceIPv6:void 0,keepaliveCountMax:void 0,keepaliveInterval:void 0,readyTimeout:void 0,ident:void 0,username:void 0,password:void 0,privateKey:void 0,tryKeyboard:void 0,agent:void 0,allowAgentFwd:void 0,authHandler:void 0,hostHashAlgo:void 0,hostHashCb:void 0,strictVendor:void 0,debug:void 0},this._agent=void 0,this._readyTimeout=void 0,this._chanMgr=void 0,this._callbacks=void 0,this._forwarding=void 0,this._forwardingUnix=void 0,this._acceptX11=void 0,this._agentFwdEnabled=void 0,this._remoteVer=void 0,this._protocol=void 0,this._sock=void 0,this._resetKA=void 0}connect(e){if(this._sock&&ar(this._sock))return this.once("close",()=>{this.connect(e)}),this.end(),this;this.config.host=e.hostname||e.host||"localhost",this.config.port=e.port||22,this.config.localAddress=typeof e.localAddress=="string"?e.localAddress:void 0,this.config.localPort=typeof e.localPort=="string"||typeof e.localPort=="number"?e.localPort:void 0,this.config.forceIPv4=e.forceIPv4||!1,this.config.forceIPv6=e.forceIPv6||!1,this.config.keepaliveCountMax=typeof e.keepaliveCountMax=="number"&&e.keepaliveCountMax>=0?e.keepaliveCountMax:3,this.config.keepaliveInterval=typeof e.keepaliveInterval=="number"&&e.keepaliveInterval>0?e.keepaliveInterval:0,this.config.readyTimeout=typeof e.readyTimeout=="number"&&e.readyTimeout>=0?e.readyTimeout:2e4,this.config.ident=typeof e.ident=="string"||Buffer.isBuffer(e.ident)?e.ident:void 0;let r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:[]},sc:void 0},n=!0;if(typeof e.algorithms=="object"&&e.algorithms!==null&&(r.kex=zu(e.algorithms.kex,q2,GU),r.kex!==q2&&(n=!1),r.serverHostKey=zu(e.algorithms.serverHostKey,W2,$U),r.serverHostKey!==W2&&(n=!1),r.cs.cipher=zu(e.algorithms.cipher,M2,WU),r.cs.cipher!==M2&&(n=!1),r.cs.mac=zu(e.algorithms.hmac,H2,jU),r.cs.mac!==H2&&(n=!1),r.cs.compress=zu(e.algorithms.compress,U2,QU),r.cs.compress!==U2&&(n=!1),n||(r.sc=r.cs)),typeof e.username=="string")this.config.username=e.username;else if(typeof e.user=="string")this.config.username=e.user;else throw new Error("Invalid username");this.config.password=typeof e.password=="string"?e.password:void 0,this.config.privateKey=typeof e.privateKey=="string"||Buffer.isBuffer(e.privateKey)?e.privateKey:void 0,this.config.localHostname=typeof e.localHostname=="string"?e.localHostname:void 0,this.config.localUsername=typeof e.localUsername=="string"?e.localUsername:void 0,this.config.tryKeyboard=e.tryKeyboard===!0,typeof e.agent=="string"&&e.agent.length?this.config.agent=$2(e.agent):K2(e.agent)?this.config.agent=e.agent:this.config.agent=void 0,this.config.allowAgentFwd=e.agentForward===!0&&this.config.agent!==void 0;let i=this.config.authHandler=typeof e.authHandler=="function"||Array.isArray(e.authHandler)?e.authHandler:void 0;this.config.strictVendor=typeof e.strictVendor=="boolean"?e.strictVendor:!0;let s=this.config.debug=typeof e.debug=="function"?e.debug:void 0;if(e.agentForward===!0&&!this.config.allowAgentFwd)throw new Error("You must set a valid agent path to allow agent forwarding");let o=this._callbacks=[];this._chanMgr=new ZU(this),this._forwarding={},this._forwardingUnix={},this._acceptX11=0,this._agentFwdEnabled=!1,this._agent=this.config.agent?this.config.agent:void 0,this._remoteVer=void 0;let a;if(this.config.privateKey){if(a=rd(this.config.privateKey,e.passphrase),a instanceof Error)throw new Error(`Cannot parse privateKey: ${a.message}`);if(Array.isArray(a)&&(a=a[0]),a.getPrivatePEM()===null)throw new Error("privateKey value does not contain a (valid) private key")}let l;if(typeof e.hostVerifier=="function"){let L=e.hostVerifier,$;UU.indexOf(e.hostHash)!==-1&&($=e.hostHash),l=(K,Z)=>{$&&(K=NU($).update(K).digest("hex"));let fe=L(K,Z);fe!==void 0&&Z(fe)}}let u=this._sock=e.sock||new FU,c=!1,f=!1;this._protocol&&this._protocol.cleanup();let h=s?(L,$,K)=>{s(`Debug output from server: ${JSON.stringify(K)}`)}:void 0,p,g=this._protocol=new zU({ident:this.config.ident,offer:n?void 0:r,onWrite:L=>{ar(u)&&u.write(L)},onError:L=>{L.level==="handshake"&&clearTimeout(this._readyTimeout),g._destruct||u.removeAllListeners("data"),this.emit("error",L);try{u.end()}catch{}},onHeader:L=>{f=!0,this._remoteVer=L.versions.software,L.greeting&&this.emit("greeting",L.greeting)},onHandshakeComplete:L=>{this.emit("handshake",L),c||(c=!0,g.service("ssh-userauth"))},debug:s,hostVerifier:l,messageHandlers:{DEBUG:h,DISCONNECT:(L,$,K)=>{if($!==Q2.BY_APPLICATION){K||(K=HU[$],K===void 0&&(K=`Unexpected disconnection reason: ${$}`));let Z=new Error(K);Z.code=$,this.emit("error",Z)}u.end()},SERVICE_ACCEPT:(L,$)=>{$==="ssh-userauth"&&O()},EXT_INFO:(L,$)=>{if(p===void 0){for(let K of $)if(K.name==="server-sig-algs"){p=K.algs;return}p=null}},USERAUTH_BANNER:(L,$)=>{this.emit("banner",$)},USERAUTH_SUCCESS:L=>{S(),clearTimeout(this._readyTimeout),this.emit("ready")},USERAUTH_FAILURE:(L,$,K)=>{if(D.keyAlgos){let Z=D.keyAlgos[0][0];if(s&&s(`Client: ${D.type} (${Z}) auth failed`),D.keyAlgos.shift(),D.keyAlgos.length){let[fe,ue]=D.keyAlgos[0];switch(D.type){case"agent":g.authPK(D.username,D.agentCtx.currentKey(),fe);return;case"publickey":g.authPK(D.username,D.key,fe);return;case"hostbased":g.authHostbased(D.username,D.key,D.localHostname,D.localUsername,fe,(he,qe)=>{let bt=D.key.sign(he,ue);if(bt instanceof Error)return bt.message=`Error while signing with key: ${bt.message}`,bt.level="client-authentication",this.emit("error",bt),O();qe(bt)});return}}else D.keyAlgos=void 0}if(D.type==="agent"){let Z=D.agentCtx.pos();return s&&s(`Client: Agent key #${Z+1} failed`),z()}s&&s(`Client: ${D.type} auth failed`),I=K,N=$,O()},USERAUTH_PASSWD_CHANGEREQ:(L,$)=>{D.type==="password"&&this.emit("change password",$,K=>{g.authPassword(this.config.username,this.config.password,K)})},USERAUTH_PK_OK:L=>{let $,K;if(D.keyAlgos&&([$,K]=D.keyAlgos[0]),D.type==="agent"){let Z=D.agentCtx.currentKey();g.authPK(D.username,Z,$,(fe,ue)=>{let he={hash:K};D.agentCtx.sign(Z,fe,he,(qe,bt)=>{if(qe)qe.level="agent",this.emit("error",qe);else return ue(bt);z()})})}else D.type==="publickey"&&g.authPK(D.username,D.key,$,(Z,fe)=>{let ue=D.key.sign(Z,K);if(ue instanceof Error)return ue.message=`Error signing data with key: ${ue.message}`,ue.level="client-authentication",this.emit("error",ue),O();fe(ue)})},USERAUTH_INFO_REQUEST:(L,$,K,Z)=>{if(D.type==="keyboard-interactive"){if((Array.isArray(Z)?Z.length:0)===0){s&&s("Client: Sending automatic USERAUTH_INFO_RESPONSE"),g.authInfoRes();return}D.prompt($,K,"",Z,ue=>{g.authInfoRes(ue)})}},REQUEST_SUCCESS:(L,$)=>{o.length&&o.shift()(!1,$)},REQUEST_FAILURE:L=>{o.length&&o.shift()(!0)},GLOBAL_REQUEST:(L,$,K,Z)=>{switch($){case"hostkeys-00@openssh.com":o9(this,Z,(fe,ue)=>{fe||this.emit("hostkeys",ue)}),K&&g.requestSuccess();break;default:K&&g.requestFailure()}},CHANNEL_OPEN:(L,$)=>{i9(this,$)},CHANNEL_OPEN_CONFIRMATION:(L,$)=>{let K=this._chanMgr.get($.recipient);if(typeof K!="function")return;let Z=K.type==="sftp",ue={type:Z?"session":K.type,incoming:{id:$.recipient,window:nd,packetSize:id,state:"open"},outgoing:{id:$.sender,window:$.window,packetSize:$.packetSize,state:"open"}},he=Z?new YU(this,ue,{debug:s}):new rD(this,ue);this._chanMgr.update($.recipient,he),K(void 0,he)},CHANNEL_OPEN_FAILURE:(L,$,K,Z)=>{let fe=this._chanMgr.get($);if(typeof fe!="function")return;e9(this,$,{reason:K,description:Z},fe)},CHANNEL_DATA:(L,$,K)=>{let Z=this._chanMgr.get($);if(!(typeof Z!="object"||Z===null)&&Z.incoming.window!==0){if(Z.incoming.window-=K.length,Z.push(K)===!1){Z._waitChanDrain=!0;return}Z.incoming.window<=Y2&&z2(Z)}},CHANNEL_EXTENDED_DATA:(L,$,K,Z)=>{if(Z!==qU)return;let fe=this._chanMgr.get($);if(!(typeof fe!="object"||fe===null)&&fe.incoming.window!==0){if(fe.incoming.window-=K.length,!fe.stderr.push(K)){fe._waitChanDrain=!0;return}fe.incoming.window<=Y2&&z2(fe)}},CHANNEL_WINDOW_ADJUST:(L,$,K)=>{let Z=this._chanMgr.get($);typeof Z!="object"||Z===null||(Z.outgoing.window+=K,Z._waitWindow&&(Z._waitWindow=!1,Z._chunk?Z._write(Z._chunk,null,Z._chunkcb):Z._chunkcb?Z._chunkcb():Z._chunkErr?Z.stderr._write(Z._chunkErr,null,Z._chunkcbErr):Z._chunkcbErr&&Z._chunkcbErr()))},CHANNEL_SUCCESS:(L,$)=>{let K=this._chanMgr.get($);typeof K!="object"||K===null||(this._resetKA(),K._callbacks.length&&K._callbacks.shift()(!1))},CHANNEL_FAILURE:(L,$)=>{let K=this._chanMgr.get($);typeof K!="object"||K===null||(this._resetKA(),K._callbacks.length&&K._callbacks.shift()(!0))},CHANNEL_REQUEST:(L,$,K,Z,fe)=>{let ue=this._chanMgr.get($);if(typeof ue!="object"||ue===null)return;let he=ue._exit;if(he.code===void 0){switch(K){case"exit-status":ue.emit("exit",he.code=fe);return;case"exit-signal":ue.emit("exit",he.code=null,he.signal=`SIG${fe.signal}`,he.dump=fe.coreDumped,he.desc=fe.errorMessage);return}Z&&L.channelFailure(ue.outgoing.id)}},CHANNEL_EOF:(L,$)=>{let K=this._chanMgr.get($);typeof K!="object"||K===null||K.incoming.state==="open"&&(K.incoming.state="eof",K.readable&&K.push(null),K.stderr.readable&&K.stderr.push(null))},CHANNEL_CLOSE:(L,$)=>{t9(this,$,this._chanMgr.get($))}}});u.pause();let m=this.config.keepaliveInterval,E=this.config.keepaliveCountMax,A=0,w,k=()=>{if(++A>E){if(clearInterval(w),u.readable){let L=new Error("Keepalive timeout");L.level="client-timeout",this.emit("error",L),u.destroy()}return}ar(u)?(o.push(S),g.ping()):clearInterval(w)};function S(){m>0&&(A=0,clearInterval(w),ar(u)&&(w=setInterval(k,m)))}this._resetKA=S;let B=(()=>{let L=!1;return()=>{if(!L&&(L=!0,M&&!f)){let $=VU("Connection lost before handshake","protocol",!0);this.emit("error",$)}}})(),F=(()=>{let L=!1;return()=>{L||(L=!0,M=!0,s&&s("Socket connected"),this.emit("connect"),KU.then(()=>{g.start(),u.on("data",$=>{try{g.parse($,0,$.length)}catch(K){this.emit("error",K);try{ar(u)&&u.end()}catch{}}}),u.stderr&&typeof u.stderr.resume=="function"&&u.stderr.resume(),u.resume()}).catch($=>{this.emit("error",$);try{ar(u)&&u.end()}catch{}}))}})(),M=!1;u.on("connect",F).on("timeout",()=>{this.emit("timeout")}).on("error",L=>{s&&s(`Socket error: ${L.message}`),clearTimeout(this._readyTimeout),L.level="client-socket",this.emit("error",L)}).on("end",()=>{s&&s("Socket ended"),B(),g.cleanup(),clearTimeout(this._readyTimeout),clearInterval(w),this.emit("end")}).on("close",()=>{s&&s("Socket closed"),B(),g.cleanup(),clearTimeout(this._readyTimeout),clearInterval(w),this.emit("close");let L=o;o=this._callbacks=[];let $=new Error("No response from server");for(let K=0;K<L.length;++K)L[K]($);this._chanMgr.cleanup($)});let D,I=null,N=null,T=["none"];this.config.password!==void 0&&T.push("password"),a!==void 0&&T.push("publickey"),this._agent!==void 0&&T.push("agent"),this.config.tryKeyboard&&T.push("keyboard-interactive"),a!==void 0&&this.config.localHostname!==void 0&&this.config.localUsername!==void 0&&T.push("hostbased"),Array.isArray(i)?i=Z2(i):typeof i!="function"&&(i=Z2(T));let Q=!1,P=L=>{if(!Q){if(Q=!0,L===!1){let $=new Error("All configured authentication methods failed");$.level="client-authentication",this.emit("error",$),this.end();return}if(typeof L=="string"){let $=L;if(T.indexOf($)===-1)return y(`Authentication method not allowed: ${$}`);let K=this.config.username;switch($){case"password":L={type:$,username:K,password:this.config.password};break;case"publickey":L={type:$,username:K,key:a};break;case"hostbased":L={type:$,username:K,key:a,localHostname:this.config.localHostname,localUsername:this.config.localUsername};break;case"agent":L={type:$,username:K,agentCtx:new j2(this._agent)};break;case"keyboard-interactive":L={type:$,username:K,prompt:(...Z)=>this.emit("keyboard-interactive",...Z)};break;case"none":L={type:$,username:K};break;default:return y(`Skipping unsupported authentication method: ${L}`)}}else{if(typeof L!="object"||L===null)return y(`Skipping invalid authentication attempt: ${L}`);{let $=L.username;if(typeof $!="string")return y(`Skipping invalid authentication attempt: ${L}`);let K=L.type;switch(K){case"password":{let{password:Z}=L;if(typeof Z!="string"&&!Buffer.isBuffer(Z))return y("Skipping invalid password auth attempt");L={type:K,username:$,password:Z};break}case"publickey":{let Z=rd(L.key,L.passphrase);if(Z instanceof Error)return y("Skipping invalid key auth attempt");if(!Z.isPrivateKey())return y("Skipping non-private key");L={type:K,username:$,key:Z};break}case"hostbased":{let{localHostname:Z,localUsername:fe}=L,ue=rd(L.key,L.passphrase);if(ue instanceof Error||typeof Z!="string"||typeof fe!="string")return y("Skipping invalid hostbased auth attempt");if(!ue.isPrivateKey())return y("Skipping non-private key");L={type:K,username:$,key:ue,localHostname:Z,localUsername:fe};break}case"agent":{let Z=L.agent;if(typeof Z=="string"&&Z.length)Z=$2(Z);else if(!K2(Z))return y(`Skipping invalid agent: ${L.agent}`);L={type:K,username:$,agentCtx:new j2(Z)};break}case"keyboard-interactive":{let{prompt:Z}=L;if(typeof Z!="function")return y("Skipping invalid keyboard-interactive auth attempt");L={type:K,username:$,prompt:Z};break}case"none":L={type:K,username:$};break;default:return y(`Skipping unsupported authentication method: ${L}`)}}}D=L;try{let $=D.username;switch(D.type){case"password":g.authPassword($,D.password);break;case"publickey":{let K;if(D.keyAlgos=Z_(this,D.key,p),D.keyAlgos)if(D.keyAlgos.length)K=D.keyAlgos[0][0];else return y("Skipping key authentication (no mutual hash algorithm)");g.authPK($,D.key,K);break}case"hostbased":{let K,Z;if(D.keyAlgos=Z_(this,D.key,p),D.keyAlgos)if(D.keyAlgos.length)[K,Z]=D.keyAlgos[0];else return y("Skipping hostbased authentication (no mutual hash algorithm)");g.authHostbased($,D.key,D.localHostname,D.localUsername,K,(fe,ue)=>{let he=D.key.sign(fe,Z);if(he instanceof Error)return he.message=`Error while signing with key: ${he.message}`,he.level="client-authentication",this.emit("error",he),O();ue(he)});break}case"agent":D.agentCtx.init(K=>{if(K)return K.level="agent",this.emit("error",K),O();z()});break;case"keyboard-interactive":g.authKeyboard($);break;case"none":g.authNone($);break}}finally{Q=!1}}};function y(L){s&&s(L),process.nextTick(O)}function O(){Q=!1;let L=i(N,I,P);Q||L===void 0||P(L)}let z=()=>{if(D.type==="agent"){let L=D.agentCtx.nextKey();if(L===!1)s&&s("Agent: No more keys left to try"),s&&s("Client: agent auth failed"),O();else{let $=D.agentCtx.pos(),K;if(D.keyAlgos=Z_(this,L,p),D.keyAlgos)if(D.keyAlgos.length)K=D.keyAlgos[0][0];else{s&&s(`Agent: Skipping key #${$+1} (no mutual hash algorithm)`),z();return}s&&s(`Agent: Trying key #${$+1}`),g.authPK(D.username,L,K)}}},J=()=>{this.config.readyTimeout>0&&(this._readyTimeout=setTimeout(()=>{let L=new Error("Timed out while waiting for handshake");L.level="client-timeout",this.emit("error",L),u.destroy()},this.config.readyTimeout))};if(e.sock)J(),typeof u.connecting=="boolean"&&u.connecting||F();else{let L=this.config.host,$=this.config.forceIPv4,K=this.config.forceIPv6;s&&s(`Client: Trying ${L} on port ${this.config.port} ...`);let Z=()=>{J(),u.connect({host:L,port:this.config.port,localAddress:this.config.localAddress,localPort:this.config.localPort}),u.setMaxListeners(0),u.setTimeout(typeof e.timeout=="number"?e.timeout:0)};!$&&!K||$&&K?Z():LU(L,$?4:6,(fe,ue,he)=>{if(fe){let qe=$?"IPv4":"IPv6",bt=new Error(`Error while looking up ${qe} address for '${L}': ${fe}`);clearTimeout(this._readyTimeout),bt.level="client-dns",this.emit("error",bt),this.emit("close");return}L=ue,Z()})}return this}end(){return this._sock&&ar(this._sock)&&(this._protocol.disconnect(Q2.BY_APPLICATION),this._sock.end()),this}destroy(){return this._sock&&ar(this._sock)&&this._sock.destroy(),this}exec(e,r,n){if(!this._sock||!ar(this._sock))throw new Error("Not connected");typeof r=="function"&&(n=r,r={});let i={allowHalfOpen:r.allowHalfOpen!==!1};return Ka(this,"session",i,(s,o)=>{if(s){n(s);return}let a=[];function l(u){if(u){o.close(),n(u);return}a.length&&a.shift()()}(this.config.allowAgentFwd===!0||r&&r.agentForward===!0&&this._agent!==void 0)&&a.push(()=>J2(o,l)),typeof r=="object"&&r!==null&&(typeof r.env=="object"&&r.env!==null&&X_(o,r.env),(typeof r.pty=="object"&&r.pty!==null||r.pty===!0)&&a.push(()=>X2(o,r.pty,l)),(typeof r.x11=="object"&&r.x11!==null||r.x11==="number"||r.x11===!0)&&a.push(()=>V2(o,r.x11,l))),a.push(()=>n9(o,e,r,n)),a.shift()()}),this}shell(e,r,n){if(!this._sock||!ar(this._sock))throw new Error("Not connected");return typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),e&&(e.x11!==void 0||e.env!==void 0)&&(r=e,e=void 0),Ka(this,"session",(i,s)=>{if(i){n(i);return}let o=[];function a(l){if(l){s.close(),n(l);return}o.length&&o.shift()()}(this.config.allowAgentFwd===!0||r&&r.agentForward===!0&&this._agent!==void 0)&&o.push(()=>J2(s,a)),e!==!1&&o.push(()=>X2(s,e,a)),typeof r=="object"&&r!==null&&(typeof r.env=="object"&&r.env!==null&&X_(s,r.env),(typeof r.x11=="object"&&r.x11!==null||r.x11==="number"||r.x11===!0)&&o.push(()=>V2(s,r.x11,a))),o.push(()=>r9(s,n)),o.shift()()}),this}subsys(e,r){if(!this._sock||!ar(this._sock))throw new Error("Not connected");return Ka(this,"session",(n,i)=>{if(n){r(n);return}J_(i,e,(s,o)=>{if(s){r(s);return}r(void 0,o)})}),this}forwardIn(e,r,n){if(!this._sock||!ar(this._sock))throw new Error("Not connected");let i=typeof n=="function";return i&&this._callbacks.push((s,o)=>{if(s){n(s!==!0?s:new Error(`Unable to bind to ${e}:${r}`));return}let a=r;r===0&&o&&o.length>=4&&(a=XU(o,0),this._protocol._compatFlags&eD.DYN_RPORT_BUG||(r=a)),this._forwarding[`${e}:${r}`]=a,n(void 0,a)}),this._protocol.tcpipForward(e,r,i),this}unforwardIn(e,r,n){if(!this._sock||!ar(this._sock))throw new Error("Not connected");let i=typeof n=="function";return i&&this._callbacks.push(s=>{if(s){n(s!==!0?s:new Error(`Unable to unbind from ${e}:${r}`));return}delete this._forwarding[`${e}:${r}`],n()}),this._protocol.cancelTcpipForward(e,r,i),this}forwardOut(e,r,n,i,s){if(!this._sock||!ar(this._sock))throw new Error("Not connected");let o={srcIP:e,srcPort:r,dstIP:n,dstPort:i};return typeof s!="function"&&(s=eE),Ka(this,"direct-tcpip",o,s),this}openssh_noMoreSessions(e){if(!this._sock||!ar(this._sock))throw new Error("Not connected");let r=typeof e=="function";return!this.config.strictVendor||this.config.strictVendor&&Yu.test(this._remoteVer)?(r&&this._callbacks.push(n=>{if(n){e(n!==!0?n:new Error("Unable to disable future sessions"));return}e()}),this._protocol.openssh_noMoreSessions(r),this):r?(process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardInStreamLocal(e,r){if(!this._sock||!ar(this._sock))throw new Error("Not connected");let n=typeof r=="function";return!this.config.strictVendor||this.config.strictVendor&&Yu.test(this._remoteVer)?(n&&this._callbacks.push(i=>{if(i){r(i!==!0?i:new Error(`Unable to bind to ${e}`));return}this._forwardingUnix[e]=!0,r()}),this._protocol.openssh_streamLocalForward(e,n),this):n?(process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_unforwardInStreamLocal(e,r){if(!this._sock||!ar(this._sock))throw new Error("Not connected");let n=typeof r=="function";return!this.config.strictVendor||this.config.strictVendor&&Yu.test(this._remoteVer)?(n&&this._callbacks.push(i=>{if(i){r(i!==!0?i:new Error(`Unable to unbind from ${e}`));return}delete this._forwardingUnix[e],r()}),this._protocol.openssh_cancelStreamLocalForward(e,n),this):n?(process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardOutStreamLocal(e,r){if(!this._sock||!ar(this._sock))throw new Error("Not connected");return typeof r!="function"&&(r=eE),!this.config.strictVendor||this.config.strictVendor&&Yu.test(this._remoteVer)?(Ka(this,"direct-streamlocal@openssh.com",{socketPath:e},r),this):(process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this)}sftp(e,r){if(!this._sock||!ar(this._sock))throw new Error("Not connected");return typeof e=="function"&&(r=e,e=void 0),Ka(this,"sftp",(n,i)=>{if(n){r(n);return}let s=(o,a)=>{if(o){r(o);return}function l(){i.removeListener("ready",u),i.removeListener("error",c),i.removeListener("exit",f),i.removeListener("close",f)}function u(){l(),r(void 0,i)}function c(h){l(),r(h)}function f(h,p){l();let g;typeof h=="number"?g=`Received exit code ${h} while establishing SFTP session`:p!==void 0?g=`Received signal ${p} while establishing SFTP session`:g="Received unexpected SFTP session termination";let m=new Error(g);m.code=h,m.signal=p,r(m)}i.on("ready",u).on("error",c).on("exit",f).on("close",f),i._init()};typeof e=="object"&&e!==null?X_(i,e,o=>{if(o){r(o);return}J_(i,"sftp",s)}):J_(i,"sftp",s)}),this}setNoDelay(e){return this._sock&&typeof this._sock.setNoDelay=="function"&&this._sock.setNoDelay(e),this}};function Ka(t,e,r,n){let i=nd,s=id;typeof r=="function"&&(n=r,r={});let o=(l,u)=>{n(l,u)};o.type=e;let a=t._chanMgr.add(o);if(a===-1){n(new Error("No free channels available"));return}switch(e){case"session":case"sftp":t._protocol.session(a,i,s);break;case"direct-tcpip":t._protocol.directTcpip(a,i,s,r);break;case"direct-streamlocal@openssh.com":t._protocol.openssh_directStreamLocal(a,i,s,r);break;default:throw new Error(`Unsupported channel type: ${e}`)}}function V2(t,e,r){let n={single:!1,protocol:"MIT-MAGIC-COOKIE-1",cookie:void 0,screen:0};typeof e=="function"?r=e:typeof e=="object"&&e!==null&&(typeof e.single=="boolean"&&(n.single=e.single),typeof e.screen=="number"&&(n.screen=e.screen),typeof e.protocol=="string"&&(n.protocol=e.protocol),typeof e.cookie=="string"?n.cookie=e.cookie:Buffer.isBuffer(e.cookie)&&(n.cookie=e.cookie.hexSlice(0,e.cookie.length))),n.cookie===void 0&&(n.cookie=s9());let i=typeof r=="function";if(t.outgoing.state!=="open"){i&&r(new Error("Channel is not open"));return}i&&t._callbacks.push(s=>{if(s){r(s!==!0?s:new Error("Unable to request X11"));return}t._hasX11=!0,++t._client._acceptX11,t.once("close",()=>{t._client._acceptX11&&--t._client._acceptX11}),r()}),t._client._protocol.x11Forward(t.outgoing.id,n,i)}function X2(t,e,r){let n=24,i=80,s=640,o=480,a="vt100",l=null;typeof e=="function"?r=e:typeof e=="object"&&e!==null&&(typeof e.rows=="number"&&(n=e.rows),typeof e.cols=="number"&&(i=e.cols),typeof e.width=="number"&&(s=e.width),typeof e.height=="number"&&(o=e.height),typeof e.term=="string"&&(a=e.term),typeof e.modes=="object"&&(l=e.modes));let u=typeof r=="function";if(t.outgoing.state!=="open"){u&&r(new Error("Channel is not open"));return}u&&t._callbacks.push(c=>{if(c){r(c!==!0?c:new Error("Unable to request a pseudo-terminal"));return}r()}),t._client._protocol.pty(t.outgoing.id,n,i,o,s,a,l,u)}function J2(t,e){let r=typeof e=="function";if(t.outgoing.state!=="open"){r&&e(new Error("Channel is not open"));return}if(t._client._agentFwdEnabled){r&&e(!1);return}t._client._agentFwdEnabled=!0,t._callbacks.push(n=>{if(n){t._client._agentFwdEnabled=!1,r&&e(n!==!0?n:new Error("Unable to request agent forwarding"));return}r&&e()}),t._client._protocol.openssh_agentForward(t.outgoing.id,!0)}function r9(t,e){if(t.outgoing.state!=="open"){e(new Error("Channel is not open"));return}t._callbacks.push(r=>{if(r){e(r!==!0?r:new Error("Unable to open shell"));return}t.subtype="shell",e(void 0,t)}),t._client._protocol.shell(t.outgoing.id,!0)}function n9(t,e,r,n){if(t.outgoing.state!=="open"){n(new Error("Channel is not open"));return}t._callbacks.push(i=>{if(i){n(i!==!0?i:new Error("Unable to exec"));return}t.subtype="exec",t.allowHalfOpen=r.allowHalfOpen!==!1,n(void 0,t)}),t._client._protocol.exec(t.outgoing.id,e,!0)}function X_(t,e,r){let n=typeof r=="function";if(t.outgoing.state!=="open"){n&&r(new Error("Channel is not open"));return}n&&t._callbacks.push(s=>{if(s){r(s!==!0?s:new Error("Unable to set environment"));return}r()});let i=Object.keys(e||{});for(let s=0;s<i.length;++s){let o=i[s],a=e[o];t._client._protocol.env(t.outgoing.id,o,a,n)}}function J_(t,e,r){if(t.outgoing.state!=="open"){r(new Error("Channel is not open"));return}t._callbacks.push(n=>{if(n){r(n!==!0?n:new Error(`Unable to start subsystem: ${e}`));return}t.subtype="subsystem",r(void 0,t)}),t._client._protocol.subsystem(t.outgoing.id,e,!0)}function i9(t,e){let r=-1,n,i=()=>{let l={type:e.type,incoming:{id:r,window:nd,packetSize:id,state:"open"},outgoing:{id:e.sender,window:e.window,packetSize:e.packetSize,state:"open"}},u=new rD(t,l);return t._chanMgr.update(r,u),t._protocol.channelOpenConfirm(e.sender,r,nd,id),u},s=()=>{n===void 0&&(r===-1?n=Ku.RESOURCE_SHORTAGE:n=Ku.CONNECT_FAILED),r!==-1&&t._chanMgr.remove(r),t._protocol.channelOpenFail(e.sender,n,"")},o=()=>(r=t._chanMgr.add(),r===-1&&(n=Ku.RESOURCE_SHORTAGE,t.config.debug&&t.config.debug("Client: Automatic rejection of incoming channel open: no channels available")),r!==-1),a=e.data;switch(e.type){case"forwarded-tcpip":{let l=t._forwarding[`${a.destIP}:${a.destPort}`];if(l!==void 0&&o()){a.destPort===0&&(a.destPort=l),t.emit("tcp connection",a,i,s);return}break}case"forwarded-streamlocal@openssh.com":if(t._forwardingUnix[a.socketPath]!==void 0&&o()){t.emit("unix connection",a,i,s);return}break;case"auth-agent@openssh.com":if(t._agentFwdEnabled&&typeof t._agent.getStream=="function"&&o()){t._agent.getStream((l,u)=>{if(l)return s();let c=i();c.pipe(u).pipe(c)});return}break;case"x11":if(t._acceptX11!==0&&o()){t.emit("x11",a,i,s);return}break;default:n=Ku.UNKNOWN_CHANNEL_TYPE,t.config.debug&&t.config.debug(`Client: Automatic rejection of unsupported incoming channel open type: ${e.type}`)}n===void 0&&(n=Ku.ADMINISTRATIVELY_PROHIBITED,t.config.debug&&t.config.debug("Client: Automatic rejection of unexpected incoming channel open for: "+e.type)),s()}var s9=(()=>{let t=Buffer.allocUnsafe(16);return()=>(PU(t,0,16),t.hexSlice(0,16))})();function Z2(t){if(!Array.isArray(t))throw new Error("authList must be an array");let e=0;return(r,n,i)=>e===t.length?!1:t[e++]}function o9(t,e,r){if(!t._sock||!ar(t._sock))return;if(typeof r!="function"&&(r=eE),!Array.isArray(e))throw new TypeError("Invalid keys argument type");let n=[];for(let i of e){let s=rd(i);if(s instanceof Error)throw s;n.push(s)}if(!t.config.strictVendor||t.config.strictVendor&&Yu.test(t._remoteVer)){t._callbacks.push((i,s)=>{if(i){r(i!==!0?i:new Error("Server failed to prove supplied keys"));return}let o=[],a=0;for(ed.init(s,0);ed.avail()&&a!==n.length;){let l=n[a++],u=l.getPublicSSH(),c=ed.readString();td.init(c,0);let f=td.readString(!0),h=td.readString(),p;if(f!==l.type)if(l.type==="ssh-rsa")switch(f){case"rsa-sha2-256":p="sha256";break;case"rsa-sha2-512":p="sha512";break;default:continue}else continue;let g=t._protocol._kex.sessionID,m=Buffer.allocUnsafe(37+g.length+4+u.length),E=0;V_(m,29,E),m.utf8Write("hostkeys-prove-00@openssh.com",E+=4,29),V_(m,g.length,E+=29),G2(g,m,0,g.length,E+=4),V_(m,u.length,E+=g.length),G2(u,m,0,u.length,E+=4),(h=JU(h,f))&&l.verify(m,h,p)===!0&&o.push(l)}td.clear(),ed.clear(),r(null,o)}),t._protocol.openssh_hostKeysProve(n);return}process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version"))}function Z_(t,e,r){switch(e.type){case"ssh-rsa":if(t._protocol._compatFlags&eD.IMPLY_RSA_SHA2_SIGALGS&&(Array.isArray(r)?r=["rsa-sha2-256","rsa-sha2-512",...r]:r=["rsa-sha2-256","rsa-sha2-512"]),Array.isArray(r)){if(r.indexOf("rsa-sha2-256")!==-1)return[["rsa-sha2-256","sha256"]];if(r.indexOf("rsa-sha2-512")!==-1)return[["rsa-sha2-512","sha512"]];if(r.indexOf("ssh-rsa")===-1)return[]}return[["ssh-rsa","sha1"]]}}nD.exports=tE});var sD=x(iD=>{"use strict";var{Agent:iE}=require("http"),{Agent:a9}=require("https"),{connect:l9}=require("tls"),nE;for(let t of[iE,a9]){class e extends t{constructor(n,i){super(i),this._connectCfg=n,this._defaultSrcIP=i&&i.srcIP||"localhost"}createConnection(n,i){let s=n&&n.localAddress||this._defaultSrcIP,o=n&&n.localPort||0,a=n.host,l=n.port;nE===void 0&&(nE=rE());let u=new nE,c=!1;u.on("ready",()=>{u.forwardOut(s,o,a,l,(f,h)=>{if(c=!0,f)return u.end(),i(f);h.once("close",()=>u.end()),i(null,u9(h,t,n))})}).on("error",i).on("close",()=>{c||i(new Error("Unexpected connection close"))}).connect(this._connectCfg)}}iD[t===iE?"SSHTTPAgent":"SSHTTPSAgent"]=e}function Vu(){}function u9(t,e,r){if(e===iE)return t.setKeepAlive=Vu,t.setNoDelay=Vu,t.setTimeout=Vu,t.ref=Vu,t.unref=Vu,t.destroySoon=t.destroy,t;r.socket=t;let n=l9(r),i=(()=>{let s=!1;return()=>{s||(s=!0,t.isPaused()&&t.resume())}})();return n.on("end",i).on("close",i),n}});var aD=x((sie,lE)=>{"use strict";var{Server:c9}=require("net"),Ju=require("events"),{listenerCount:qr}=Ju,{CHANNEL_OPEN_FAILURE:za,DEFAULT_CIPHER:f9,DEFAULT_COMPRESSION:h9,DEFAULT_KEX:d9,DEFAULT_MAC:p9,DEFAULT_SERVER_HOST_KEY:g9,DISCONNECT_REASON:Ya,DISCONNECT_REASON_BY_VALUE:m9,SUPPORTED_CIPHER:_9,SUPPORTED_COMPRESSION:E9,SUPPORTED_KEX:y9,SUPPORTED_MAC:A9,SUPPORTED_SERVER_HOST_KEY:v9}=Yi(),{init:b9}=Ds(),{KexInit:S9}=Hh(),{parseKey:oD}=Rs(),C9=R_(),{SFTP:w9}=Gu(),{writeUInt32BE:x9}=Gn(),{Channel:Va,MAX_WINDOW:Ns,PACKET_SIZE:Bs,windowAdjust:D9,WINDOW_THRESHOLD:I9}=$_(),{ChannelManager:T9,generateAlgorithmList:Xu,isWritable:sd,onChannelOpenFailure:R9,onCHANNEL_CLOSE:k9}=Y_(),O9=10,Ps=class extends Ju{constructor(e,r,n,i,s){super(),this.username=this.user=r,this.service=n,this.method=i,this._initialResponse=!1,this._finalResponse=!1,this._multistep=!1,this._cbfinal=(o,a,l)=>{this._finalResponse||(this._finalResponse=!0,s(this,o,a,l))},this._protocol=e}accept(){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!0)}reject(e,r){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!1,e,r)}},od=class extends Ps{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this._multistep=!0,this._cb=void 0,this._onInfoResponse=a=>{let l=this._cb;l&&(this._cb=void 0,l(a))},this.submethods=s,this.on("abort",()=>{this._cb&&this._cb(new Error("Authentication request aborted"))})}prompt(e,r,n,i){Array.isArray(e)||(e=[e]),typeof r=="function"?(i=r,r=n=void 0):typeof n=="function"?(i=n,n=void 0):typeof i!="function"&&(i=void 0);for(let s=0;s<e.length;++s)typeof e[s]=="string"&&(e[s]={prompt:e[s],echo:!0});this._cb=i,this._initialResponse=!0,this._protocol.authInfoReq(r,n,e)}},oE=class extends Ps{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this.key={algo:s.keyAlgo,data:s.key},this.hashAlgo=s.hashAlgo,this.signature=s.signature,this.blob=s.blob}accept(){this.signature?Ps.prototype.accept.call(this):(this._initialResponse=!0,this._protocol.authPKOK(this.key.algo,this.key.data))}},aE=class extends Ps{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this.key={algo:s.keyAlgo,data:s.key},this.hashAlgo=s.hashAlgo,this.signature=s.signature,this.blob=s.blob,this.localHostname=s.localHostname,this.localUsername=s.localUsername}},ad=class extends Ps{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this.password=s,this._changeCb=void 0}requestChange(e,r){if(this._changeCb)throw new Error("Change request already in progress");if(typeof e!="string")throw new Error("prompt argument must be a string");if(typeof r!="function")throw new Error("Callback argument must be a function");this._changeCb=r,this._protocol.authPasswdChg(e)}},Ei=class extends Ju{constructor(e,r,n){super(),this.type="session",this.subtype=void 0,this.server=!0,this._ending=!1,this._channel=void 0,this._chanInfo={type:"session",incoming:{id:n,window:Ns,packetSize:Bs,state:"open"},outgoing:{id:r.sender,window:r.window,packetSize:r.packetSize,state:"open"}}}},mn=class extends Ju{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new Error("Missing configuration object");let n=Object.create(null),i=[],s=e.hostKeys;if(!Array.isArray(s))throw new Error("hostKeys must be an array");let o=typeof e.algorithms=="object"&&e.algorithms!==null?e.algorithms:{},a=Xu(o.serverHostKey,g9,v9);for(let h=0;h<s.length;++h){let p;if(Buffer.isBuffer(s[h])||typeof s[h]=="string"?p=oD(s[h]):p=oD(s[h].key,s[h].passphrase),p instanceof Error)throw new Error(`Cannot parse privateKey: ${p.message}`);if(Array.isArray(p)&&(p=p[0]),p.getPrivatePEM()===null)throw new Error("privateKey value contains an invalid private key");if(!i.includes(p.type))if(p.type==="ssh-rsa"){let g=a.indexOf("ssh-rsa"),m=a.indexOf("rsa-sha2-256"),E=a.indexOf("rsa-sha2-512");g===-1&&(g=1/0),[g,m,E].sort(N9).forEach(A=>{if(A===-1)return;let w;switch(A){case g:w="ssh-rsa";break;case m:w="rsa-sha2-256";break;case E:w="rsa-sha2-512";break;default:return}n[w]=p,i.push(w)})}else n[p.type]=p,i.push(p.type)}let l={kex:Xu(o.kex,d9,y9).concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:i,cs:{cipher:Xu(o.cipher,f9,_9),mac:Xu(o.hmac,p9,A9),compress:Xu(o.compress,h9,E9),lang:[]},sc:void 0};l.sc=l.cs,typeof r=="function"&&this.on("connection",r);let u=typeof e.debug=="function"?e.debug:void 0,c=e.ident?Buffer.from(e.ident):void 0,f=new S9(l);this._srv=new c9(h=>{if(this._connections>=this.maxConnections){h.destroy();return}++this._connections,h.once("close",()=>{--this._connections});let p;if(u){let g=`[${process.hrtime().join(".")}] `;p=m=>{u(`${g}${m}`)}}new ld(h,n,c,f,p,this,e)}).on("error",h=>{this.emit("error",h)}).on("listening",()=>{this.emit("listening")}).on("close",()=>{this.emit("close")}),this._connections=0,this.maxConnections=1/0}injectSocket(e){this._srv.emit("connection",e)}listen(...e){return this._srv.listen(...e),this}address(){return this._srv.address()}getConnections(e){return this._srv.getConnections(e),this}close(e){return this._srv.close(e),this}ref(){return this._srv.ref(),this}unref(){return this._srv.unref(),this}};mn.KEEPALIVE_CLIENT_INTERVAL=15e3;mn.KEEPALIVE_CLIENT_COUNT_MAX=3;var ld=class extends Ju{constructor(e,r,n,i,s,o,a){super();let l=0,u=!1,c=[],f,h,p,g=[];this._sock=e,this._chanMgr=new T9(this),this._debug=s,this.noMoreSessions=!1,this.authenticated=!1;function m(M){}this.on("error",m);let E=s?(M,D,I)=>{s(`Debug output from client: ${JSON.stringify(I)}`)}:void 0,A=typeof a.keepaliveInterval=="number"&&isFinite(a.keepaliveInterval)&&a.keepaliveInterval>0?a.keepaliveInterval:typeof mn.KEEPALIVE_CLIENT_INTERVAL=="number"&&isFinite(mn.KEEPALIVE_CLIENT_INTERVAL)&&mn.KEEPALIVE_CLIENT_INTERVAL>0?mn.KEEPALIVE_CLIENT_INTERVAL:-1,w=typeof a.keepaliveCountMax=="number"&&isFinite(a.keepaliveCountMax)&&a.keepaliveCountMax>=0?a.keepaliveCountMax:typeof mn.KEEPALIVE_CLIENT_COUNT_MAX=="number"&&isFinite(mn.KEEPALIVE_CLIENT_COUNT_MAX)&&mn.KEEPALIVE_CLIENT_COUNT_MAX>=0?mn.KEEPALIVE_CLIENT_COUNT_MAX:-1,k=0;A!==-1&&w!==-1&&(this.once("ready",()=>{let M=()=>{clearInterval(h)};this.on("close",M).on("end",M),h=setInterval(()=>{if(++k>w){clearInterval(h);let D=new Error("Keepalive timeout");D.level="client-timeout",this.emit("error",D),this.end()}else S.ping()},A)}),p=()=>{h&&h.refresh(),k=0});let S=this._protocol=new C9({server:!0,hostKeys:r,ident:n,offer:i,onPacket:p,greeting:a.greeting,banner:a.banner,onWrite:M=>{sd(e)&&e.write(M)},onError:M=>{S._destruct||e.removeAllListeners("data"),this.emit("error",M);try{e.end()}catch{}},onHeader:M=>{this.removeListener("error",m);let D={ip:e.remoteAddress,family:e.remoteFamily,port:e.remotePort,header:M};if(!o.emit("connection",this,D)){S.disconnect(Ya.BY_APPLICATION),e.end();return}M.greeting&&this.emit("greeting",M.greeting)},onHandshakeComplete:M=>{++l>1&&this.emit("rekey"),this.emit("handshake",M)},debug:s,messageHandlers:{DEBUG:E,DISCONNECT:(M,D,I)=>{if(D!==Ya.BY_APPLICATION){I||(I=m9[D],I===void 0&&(I=`Unexpected disconnection reason: ${D}`));let N=new Error(I);N.code=D,this.emit("error",N)}e.end()},CHANNEL_OPEN:(M,D)=>{if(D.type==="session"&&this.noMoreSessions||!this.authenticated){let z=za.ADMINISTRATIVELY_PROHIBITED;return S.channelOpenFail(D.sender,z)}let I=-1,N,T=!1,Q,P=()=>{T||(T=!0,N===void 0&&(I===-1?N=za.RESOURCE_SHORTAGE:N=za.CONNECT_FAILED),I!==-1&&this._chanMgr.remove(I),S.channelOpenFail(D.sender,N,""))},y=()=>(I=this._chanMgr.add(),I===-1&&(N=za.RESOURCE_SHORTAGE,s&&s("Automatic rejection of incoming channel open: no channels available")),I!==-1),O=D.data;switch(D.type){case"session":if(qr(this,"session")&&y()){Q=()=>{if(T)return;T=!0;let z=new Ei(this,D,I);return this._chanMgr.update(I,z),S.channelOpenConfirm(D.sender,I,Ns,Bs),z},this.emit("session",Q,P);return}break;case"direct-tcpip":if(qr(this,"tcpip")&&y()){Q=()=>{if(T)return;T=!0;let z={type:void 0,incoming:{id:I,window:Ns,packetSize:Bs,state:"open"},outgoing:{id:D.sender,window:D.window,packetSize:D.packetSize,state:"open"}},J=new Va(this,z,{server:!0});return this._chanMgr.update(I,J),S.channelOpenConfirm(D.sender,I,Ns,Bs),J},this.emit("tcpip",Q,P,O);return}break;case"direct-streamlocal@openssh.com":if(qr(this,"openssh.streamlocal")&&y()){Q=()=>{if(T)return;T=!0;let z={type:void 0,incoming:{id:I,window:Ns,packetSize:Bs,state:"open"},outgoing:{id:D.sender,window:D.window,packetSize:D.packetSize,state:"open"}},J=new Va(this,z,{server:!0});return this._chanMgr.update(I,J),S.channelOpenConfirm(D.sender,I,Ns,Bs),J},this.emit("openssh.streamlocal",Q,P,O);return}break;default:N=za.UNKNOWN_CHANNEL_TYPE,s&&s(`Automatic rejection of unsupported incoming channel open type: ${D.type}`)}N===void 0&&(N=za.ADMINISTRATIVELY_PROHIBITED,s&&s(`Automatic rejection of unexpected incoming channel open for: ${D.type}`)),P()},CHANNEL_OPEN_CONFIRMATION:(M,D)=>{let I=this._chanMgr.get(D.recipient);if(typeof I!="function")return;let N={type:I.type,incoming:{id:D.recipient,window:Ns,packetSize:Bs,state:"open"},outgoing:{id:D.sender,window:D.window,packetSize:D.packetSize,state:"open"}},T=new Va(this,N,{server:!0});this._chanMgr.update(D.recipient,T),I(void 0,T)},CHANNEL_OPEN_FAILURE:(M,D,I,N)=>{let T=this._chanMgr.get(D);if(typeof T!="function")return;R9(this,D,{reason:I,description:N},T)},CHANNEL_DATA:(M,D,I)=>{let N=this._chanMgr.get(D);if(!(typeof N!="object"||N===null)&&!(N.constructor===Ei&&(N=N._channel,!N))&&N.incoming.window!==0){if(N.incoming.window-=I.length,N.push(I)===!1){N._waitChanDrain=!0;return}N.incoming.window<=I9&&D9(N)}},CHANNEL_EXTENDED_DATA:(M,D,I,N)=>{},CHANNEL_WINDOW_ADJUST:(M,D,I)=>{let N=this._chanMgr.get(D);typeof N!="object"||N===null||N.constructor===Ei&&(N=N._channel,!N)||(N.outgoing.window+=I,N._waitWindow&&(N._waitWindow=!1,N._chunk?N._write(N._chunk,null,N._chunkcb):N._chunkcb?N._chunkcb():N._chunkErr?N.stderr._write(N._chunkErr,null,N._chunkcbErr):N._chunkcbErr&&N._chunkcbErr()))},CHANNEL_SUCCESS:(M,D)=>{let I=this._chanMgr.get(D);typeof I!="object"||I===null||I.constructor===Ei&&(I=I._channel,!I)||I._callbacks.length&&I._callbacks.shift()(!1)},CHANNEL_FAILURE:(M,D)=>{let I=this._chanMgr.get(D);typeof I!="object"||I===null||I.constructor===Ei&&(I=I._channel,!I)||I._callbacks.length&&I._callbacks.shift()(!0)},CHANNEL_REQUEST:(M,D,I,N,T)=>{let Q=this._chanMgr.get(D);if(typeof Q!="object"||Q===null)return;let P=!1,y,O;if(Q.constructor!==Ei){N&&S.channelFailure(Q.outgoing.id);return}if(N&&(I!=="shell"&&I!=="exec"&&I!=="subsystem"&&(y=()=>{P||Q._ending||Q._channel||(P=!0,S.channelSuccess(Q._chanInfo.outgoing.id))}),O=()=>{P||Q._ending||Q._channel||(P=!0,S.channelFailure(Q._chanInfo.outgoing.id))}),Q._ending){O&&O();return}switch(I){case"env":if(qr(Q,"env")){Q.emit("env",y,O,{key:T.name,val:T.value});return}break;case"pty-req":if(qr(Q,"pty")){Q.emit("pty",y,O,T);return}break;case"window-change":qr(Q,"window-change")?Q.emit("window-change",y,O,T):O&&O();break;case"x11-req":if(qr(Q,"x11")){Q.emit("x11",y,O,T);return}break;case"signal":if(qr(Q,"signal")){Q.emit("signal",y,O,{name:T});return}break;case"auth-agent-req@openssh.com":if(qr(Q,"auth-agent")){Q.emit("auth-agent",y,O);return}break;case"shell":if(qr(Q,"shell")){y=()=>{if(P||Q._ending||Q._channel)return;P=!0,N&&S.channelSuccess(Q._chanInfo.outgoing.id);let z=new Va(this,Q._chanInfo,{server:!0});return z.subtype=Q.subtype=I,Q._channel=z,z},Q.emit("shell",y,O);return}break;case"exec":if(qr(Q,"exec")){y=()=>{if(P||Q._ending||Q._channel)return;P=!0,N&&S.channelSuccess(Q._chanInfo.outgoing.id);let z=new Va(this,Q._chanInfo,{server:!0});return z.subtype=Q.subtype=I,Q._channel=z,z},Q.emit("exec",y,O,{command:T});return}break;case"subsystem":{let z=T==="sftp";if(y=()=>{if(P||Q._ending||Q._channel)return;P=!0,N&&S.channelSuccess(Q._chanInfo.outgoing.id);let J;return z?J=new w9(this,Q._chanInfo,{server:!0,debug:s}):(J=new Va(this,Q._chanInfo,{server:!0}),J.subtype=Q.subtype=`${I}:${T}`),Q._channel=J,J},T==="sftp"){if(qr(Q,"sftp")){Q.emit("sftp",y,O);return}z=!1}if(qr(Q,"subsystem")){Q.emit("subsystem",y,O,{name:T});return}break}}s&&s(`Automatic rejection of incoming channel request: ${I}`),O&&O()},CHANNEL_EOF:(M,D)=>{let I=this._chanMgr.get(D);typeof I!="object"||I===null||I.constructor===Ei&&(I._ending||(I._ending=!0,I.emit("eof"),I.emit("end")),I=I._channel,!I)||I.incoming.state==="open"&&(I.incoming.state="eof",I.readable&&I.push(null))},CHANNEL_CLOSE:(M,D)=>{let I=this._chanMgr.get(D);typeof I!="object"||I===null||I.constructor===Ei&&(I._ending=!0,I.emit("close"),I=I._channel,!I)||k9(this,D,I)},SERVICE_REQUEST:(M,D)=>{if(l===0||u||this.authenticated||D!=="ssh-userauth"){S.disconnect(Ya.SERVICE_NOT_AVAILABLE),e.end();return}u=!0,S.serviceAccept(D)},USERAUTH_REQUEST:(M,D,I,N,T)=>{if(l===0||this.authenticated||f&&(f.username!==D||f.service!==I)||N!=="password"&&N!=="publickey"&&N!=="hostbased"&&N!=="keyboard-interactive"&&N!=="none"||c.length===O9){S.disconnect(Ya.PROTOCOL_ERROR),e.end();return}else if(I!=="ssh-connection"){S.disconnect(Ya.SERVICE_NOT_AVAILABLE),e.end();return}let Q;switch(N){case"keyboard-interactive":Q=new od(S,D,I,N,T,B);break;case"publickey":Q=new oE(S,D,I,N,T,B);break;case"hostbased":Q=new aE(S,D,I,N,T,B);break;case"password":if(f&&f instanceof ad&&f._changeCb){let P=f._changeCb;f._changeCb=void 0,P(T.newPassword);return}Q=new ad(S,D,I,N,T,B);break;case"none":Q=new Ps(S,D,I,N,B);break}if(f)if(f._initialResponse)f._multistep&&!f._finalResponse&&(f._cleanup&&f._cleanup(),f.emit("abort"));else return c.push(Q);f=Q,qr(this,"authentication")?this.emit("authentication",f):f.reject()},USERAUTH_INFO_RESPONSE:(M,D)=>{f&&f instanceof od&&f._onInfoResponse(D)},GLOBAL_REQUEST:(M,D,I,N)=>{let T={type:null,buf:null};function Q(P,y){T.type=P,T.buf=y,F()}if(I&&g.push(T),(D==="tcpip-forward"||D==="cancel-tcpip-forward"||D==="no-more-sessions@openssh.com"||D==="streamlocal-forward@openssh.com"||D==="cancel-streamlocal-forward@openssh.com")&&qr(this,"request")&&this.authenticated){let P,y;if(I){let O=!1;P=z=>{if(O)return;O=!0;let J;D==="tcpip-forward"&&N.bindPort===0&&typeof z=="number"&&(J=Buffer.allocUnsafe(4),x9(J,z,0)),Q("SUCCESS",J)},y=()=>{O||(O=!0,Q("FAILURE"))}}if(D==="no-more-sessions@openssh.com"){this.noMoreSessions=!0,P&&P();return}this.emit("request",P,y,D,N)}else I&&Q("FAILURE")}}});e.pause(),b9.then(()=>{S.start(),e.on("data",M=>{try{S.parse(M,0,M.length)}catch(D){this.emit("error",D);try{sd(e)&&e.end()}catch{}}}),e.resume()}).catch(M=>{this.emit("error",M);try{sd(e)&&e.end()}catch{}}),e.on("error",M=>{M.level="socket",this.emit("error",M)}).once("end",()=>{s&&s("Socket ended"),S.cleanup(),this.emit("end")}).once("close",()=>{s&&s("Socket closed"),S.cleanup(),this.emit("close");let M=new Error("No response from server");this._chanMgr.cleanup(M)});let B=(M,D,I,N)=>{f===M&&!this.authenticated&&(D?(f=void 0,this.authenticated=!0,S.authSuccess(),c=[],this.emit("ready")):(S.authFailure(I,N),c.length&&(f=c.pop(),qr(this,"authentication")?this.emit("authentication",f):f.reject())))};function F(){for(;g.length>0&&g[0].type;){let M=g.shift();M.type==="SUCCESS"&&S.requestSuccess(M.buf),M.type==="FAILURE"&&S.requestFailure()}}}end(){return this._sock&&sd(this._sock)&&(this._protocol.disconnect(Ya.BY_APPLICATION),this._sock.end()),this}x11(e,r,n){return sE(this,"x11",{originAddr:e,originPort:r},n),this}forwardOut(e,r,n,i,s){return sE(this,"forwarded-tcpip",{boundAddr:e,boundPort:r,remoteAddr:n,remotePort:i},s),this}openssh_forwardOutStreamLocal(e,r){return sE(this,"forwarded-streamlocal@openssh.com",{socketPath:e},r),this}rekey(e){let r;try{this._protocol.rekey()}catch(n){r=n}typeof e=="function"&&(r?process.nextTick(e,r):this.once("rekey",e))}setNoDelay(e){return this._sock&&typeof this._sock.setNoDelay=="function"&&this._sock.setNoDelay(e),this}};function sE(t,e,r,n){let i=Ns,s=Bs;typeof r=="function"&&(n=r,r={});let o=(l,u)=>{n(l,u)};o.type=e;let a=t._chanMgr.add(o);if(a===-1){n(new Error("No free channels available"));return}switch(e){case"forwarded-tcpip":t._protocol.forwardedTcpip(a,i,s,r);break;case"x11":t._protocol.x11(a,i,s,r);break;case"forwarded-streamlocal@openssh.com":t._protocol.openssh_forwardedStreamLocal(a,i,s,r);break;default:throw new Error(`Unsupported channel type: ${e}`)}}function N9(t,e){return t-e}lE.exports=mn;lE.exports.IncomingClient=ld});var hD=x((oie,fD)=>{"use strict";var{createCipheriv:B9,generateKeyPair:P9,generateKeyPairSync:F9,getCurves:L9,randomBytes:lD}=require("crypto"),{Ber:qt}=wu(),M9=Dm().pbkdf,{CIPHER_INFO:U9}=Ds(),q9=16,H9=16,W9=L9(),Q9=new Map(Object.entries(U9));function uD(t,e){if(typeof t!="string")throw new TypeError("Key type must be a string");let r={type:"spki",format:"der"},n={type:"pkcs8",format:"der"};switch(t.toLowerCase()){case"rsa":{if(typeof e!="object"||e===null)throw new TypeError("Missing options object for RSA key");let i=e.bits;if(!Number.isInteger(i))throw new TypeError("RSA bits must be an integer");if(i<=0||i>16384)throw new RangeError("RSA bits must be non-zero and <= 16384");return["rsa",{modulusLength:i,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ecdsa":{if(typeof e!="object"||e===null)throw new TypeError("Missing options object for ECDSA key");if(!Number.isInteger(e.bits))throw new TypeError("ECDSA bits must be an integer");let i;switch(e.bits){case 256:i="prime256v1";break;case 384:i="secp384r1";break;case 521:i="secp521r1";break;default:throw new Error("ECDSA bits must be 256, 384, or 521")}if(!W9.includes(i))throw new Error("Unsupported ECDSA bits value");return["ec",{namedCurve:i,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ed25519":return["ed25519",{publicKeyEncoding:r,privateKeyEncoding:n}];default:throw new Error(`Unsupported key type: ${t}`)}}function G9(t,e,r){switch(t){case"rsa":{let n=new qt.Reader(r);if(n.readSequence(),n.readInt()!==0)throw new Error("Unsupported version in RSA private key");if(n.readSequence(),n.readOID()!=="1.2.840.113549.1.1.1")throw new Error("Bad RSA private OID");if(n.readByte()!==qt.Null)throw new Error("Malformed RSA private key (expected null)");if(n.readByte()!==0)throw new Error("Malformed RSA private key (expected zero-length null)");if(n=new qt.Reader(n.readString(qt.OctetString,!0)),n.readSequence(),n.readInt()!==0)throw new Error("Unsupported version in RSA private key");let i=n.readString(qt.Integer,!0),s=n.readString(qt.Integer,!0),o=n.readString(qt.Integer,!0),a=n.readString(qt.Integer,!0),l=n.readString(qt.Integer,!0);n.readString(qt.Integer,!0),n.readString(qt.Integer,!0);let u=n.readString(qt.Integer,!0),c=Buffer.from("ssh-rsa"),f=Buffer.allocUnsafe(4+c.length+4+i.length+4+s.length+4+o.length+4+u.length+4+a.length+4+l.length),h=0;f.writeUInt32BE(c.length,h+=0),f.set(c,h+=4),f.writeUInt32BE(i.length,h+=c.length),f.set(i,h+=4),f.writeUInt32BE(s.length,h+=i.length),f.set(s,h+=4),f.writeUInt32BE(o.length,h+=s.length),f.set(o,h+=4),f.writeUInt32BE(u.length,h+=o.length),f.set(u,h+=4),f.writeUInt32BE(a.length,h+=u.length),f.set(a,h+=4),f.writeUInt32BE(l.length,h+=a.length),f.set(l,h+=4);let p=Buffer.allocUnsafe(4+c.length+4+s.length+4+i.length);return h=0,p.writeUInt32BE(c.length,h+=0),p.set(c,h+=4),p.writeUInt32BE(s.length,h+=c.length),p.set(s,h+=4),p.writeUInt32BE(i.length,h+=s.length),p.set(i,h+=4),{sshName:c.toString(),priv:f,pub:p}}case"ec":{let n=new qt.Reader(e);if(n.readSequence(),n.readSequence(),n.readOID()!=="1.2.840.10045.2.1")throw new Error("Bad ECDSA public OID");n.readOID();let i=n.readString(qt.BitString,!0);{let h=0;for(;h<i.length&&i[h]===0;++h);h>0&&(i=i.slice(h))}if(n=new qt.Reader(r),n.readSequence(),n.readInt()!==0)throw new Error("Unsupported version in ECDSA private key");if(n.readSequence(),n.readOID()!=="1.2.840.10045.2.1")throw new Error("Bad ECDSA private OID");let s=n.readOID(),o;switch(s){case"1.2.840.10045.3.1.7":o="nistp256";break;case"1.3.132.0.34":o="nistp384";break;case"1.3.132.0.35":o="nistp521";break;default:throw new Error("Unsupported curve in ECDSA private key")}if(n=new qt.Reader(n.readString(qt.OctetString,!0)),n.readSequence(),n.readInt()!==1)throw new Error("Unsupported version in ECDSA private key");let a=Buffer.concat([Buffer.from([0]),n.readString(qt.OctetString,!0)]),l=Buffer.from(`ecdsa-sha2-${o}`);o=Buffer.from(o);let u=Buffer.allocUnsafe(4+l.length+4+o.length+4+i.length+4+a.length),c=0;u.writeUInt32BE(l.length,c+=0),u.set(l,c+=4),u.writeUInt32BE(o.length,c+=l.length),u.set(o,c+=4),u.writeUInt32BE(i.length,c+=o.length),u.set(i,c+=4),u.writeUInt32BE(a.length,c+=i.length),u.set(a,c+=4);let f=Buffer.allocUnsafe(4+l.length+4+o.length+4+i.length);return c=0,f.writeUInt32BE(l.length,c+=0),f.set(l,c+=4),f.writeUInt32BE(o.length,c+=l.length),f.set(o,c+=4),f.writeUInt32BE(i.length,c+=o.length),f.set(i,c+=4),{sshName:l.toString(),priv:u,pub:f}}case"ed25519":{let n=new qt.Reader(e);if(n.readSequence(),n.readSequence(),n.readOID()!=="1.3.101.112")throw new Error("Bad ED25519 public OID");let i=n.readString(qt.BitString,!0);{let c=0;for(;c<i.length&&i[c]===0;++c);c>0&&(i=i.slice(c))}if(n=new qt.Reader(r),n.readSequence(),n.readInt()!==0)throw new Error("Unsupported version in ED25519 private key");if(n.readSequence(),n.readOID()!=="1.3.101.112")throw new Error("Bad ED25519 private OID");n=new qt.Reader(n.readString(qt.OctetString,!0));let s=n.readString(qt.OctetString,!0),o=Buffer.from("ssh-ed25519"),a=Buffer.allocUnsafe(4+o.length+4+i.length+4+(s.length+i.length)),l=0;a.writeUInt32BE(o.length,l+=0),a.set(o,l+=4),a.writeUInt32BE(i.length,l+=o.length),a.set(i,l+=4),a.writeUInt32BE(s.length+i.length,l+=i.length),a.set(s,l+=4),a.set(i,l+=s.length);let u=Buffer.allocUnsafe(4+o.length+4+i.length);return l=0,u.writeUInt32BE(o.length,l+=0),u.set(o,l+=4),u.writeUInt32BE(i.length,l+=o.length),u.set(i,l+=4),{sshName:o.toString(),priv:a,pub:u}}}}function cD(t,e,r,n){let i="new",s,o="";if(typeof n=="object"&&n!==null&&(typeof n.comment=="string"&&n.comment&&(o=n.comment),typeof n.format=="string"&&n.format&&(i=n.format),n.passphrase)){let a;if(typeof n.passphrase=="string")a=Buffer.from(n.passphrase);else if(Buffer.isBuffer(n.passphrase))a=n.passphrase;else throw new Error("Invalid passphrase");if(n.cipher===void 0)throw new Error("Missing cipher name");let l=Q9.get(n.cipher);if(l===void 0)throw new Error("Invalid cipher name");if(i==="new"){let u=H9;if(n.rounds!==void 0){if(!Number.isInteger(n.rounds))throw new TypeError("rounds must be an integer");n.rounds>0&&(u=n.rounds)}let c=Buffer.allocUnsafe(l.keyLen+l.ivLen),f=lD(q9);if(M9(a,a.length,f,f.length,c,c.length,u)!==0)return new Error("Failed to generate information to encrypt key");let p=Buffer.allocUnsafe(4+f.length+4);{let g=0;p.writeUInt32BE(f.length,g+=0),p.set(f,g+=4),p.writeUInt32BE(u,g+=f.length)}s={cipher:l,cipherName:n.cipher,kdfName:"bcrypt",kdfOptions:p,key:c.slice(0,l.keyLen),iv:c.slice(l.keyLen)}}}switch(i){case"new":{let a=`-----BEGIN OPENSSH PRIVATE KEY-----
`,l,u=Buffer.from(s?s.cipherName:"none"),c=Buffer.from(s?s.kdfName:"none"),f=s?s.kdfOptions:Buffer.alloc(0),h=s?s.cipher.blockLen:8,p=G9(t,e,r),g=lD(4),m=Buffer.from(o),E=8+p.priv.length+4+m.length,A=[];for(let F=1;(E+A.length)%h;++F)A.push(F&255);A=Buffer.from(A);let w=Buffer.allocUnsafe(E+A.length),k;{let F=0;w.set(g,F+=0),w.set(g,F+=4),w.set(p.priv,F+=4),w.writeUInt32BE(m.length,F+=p.priv.length),w.set(m,F+=4),w.set(A,F+=m.length)}if(s){let F={authTagLength:s.cipher.authLen},M=B9(s.cipher.sslName,s.key,s.iv,F);M.setAutoPadding(!1),w=Buffer.concat([M.update(w),M.final()]),s.cipher.authLen>0?k=M.getAuthTag():k=Buffer.alloc(0),s.key.fill(0),s.iv.fill(0)}else k=Buffer.alloc(0);let S=Buffer.from("openssh-key-v1\0"),B=Buffer.allocUnsafe(S.length+4+u.length+4+c.length+4+f.length+4+4+p.pub.length+4+w.length+k.length);{let F=0;B.set(S,F+=0),B.writeUInt32BE(u.length,F+=S.length),B.set(u,F+=4),B.writeUInt32BE(c.length,F+=u.length),B.set(c,F+=4),B.writeUInt32BE(f.length,F+=c.length),B.set(f,F+=4),B.writeUInt32BE(1,F+=f.length),B.writeUInt32BE(p.pub.length,F+=4),B.set(p.pub,F+=4),B.writeUInt32BE(w.length,F+=p.pub.length),B.set(w,F+=4),B.set(k,F+=w.length)}{let F=B.base64Slice(0,B.length),M=F.replace(/.{64}/g,`$&
`);F.length&63&&(M+=`
`),a+=M}{let F=p.pub.base64Slice(0,p.pub.length);l=`${p.sshName} ${F}${o?` ${o}`:""}`}return a+=`-----END OPENSSH PRIVATE KEY-----
`,{private:a,public:l}}default:throw new Error("Invalid output key format")}}function j9(){}fD.exports={generateKeyPair:(t,e,r)=>{typeof e=="function"&&(r=e,e=void 0),typeof r!="function"&&(r=j9);let n=uD(t,e);P9(...n,(i,s,o)=>{if(i)return r(i);let a;try{a=cD(n[0],s,o,e)}catch(l){return r(l)}r(null,a)})},generateKeyPairSync:(t,e)=>{let r=uD(t,e),{publicKey:n,privateKey:i}=F9(...r);return cD(r[0],n,i,e)}}});var pD=x((aie,dD)=>{"use strict";var{AgentProtocol:$9,BaseAgent:K9,createAgent:z9,CygwinAgent:Y9,OpenSSHAgent:V9,PageantAgent:X9}=g_(),{SSHTTPAgent:J9,SSHTTPSAgent:Z9}=sD(),{parseKey:eq}=Rs(),{flagsToString:tq,OPEN_MODE:rq,STATUS_CODE:nq,stringToFlags:iq}=Gu();dD.exports={AgentProtocol:$9,BaseAgent:K9,createAgent:z9,Client:rE(),CygwinAgent:Y9,HTTPAgent:J9,HTTPSAgent:Z9,OpenSSHAgent:V9,PageantAgent:X9,Server:aD(),utils:{parseKey:eq,...hD(),sftp:{flagsToString:tq,OPEN_MODE:rq,STATUS_CODE:nq,stringToFlags:iq}}}});var mD=x((lie,gD)=>{var sq=pD().Client,oq=require("http");gD.exports=function(t){var e=new sq,r=new oq.Agent;r.createConnection=function(i,s){try{e.once("ready",function(){e.exec("docker system dial-stdio",function(o,a){o&&n(o,s),s(null,a),a.addListener("error",l=>{n(l,s)}),a.once("close",()=>{e.end(),r.destroy()})})}).on("error",o=>{n(o,s)}).connect(t),e.once("end",()=>r.destroy())}catch(o){n(o)}};function n(i,s){if(e.end(),r.destroy(),s)s(i);else throw i}return r}});var uE=x((uie,_D)=>{_D.exports=require("stream")});var SD=x((cie,bD)=>{"use strict";function ED(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(r),!0).forEach(function(n){aq(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ED(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aq(t,e,r){return e=vD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vD(n.key),n)}}function uq(t,e,r){return e&&AD(t.prototype,e),r&&AD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vD(t){var e=cq(t,"string");return typeof e=="symbol"?e:String(e)}function cq(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fq=require("buffer"),ud=fq.Buffer,hq=require("util"),cE=hq.inspect,dq=cE&&cE.custom||"inspect";function pq(t,e,r){ud.prototype.copy.call(t,e,r)}bD.exports=(function(){function t(){lq(this,t),this.head=null,this.tail=null,this.length=0}return uq(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return ud.alloc(0);for(var n=ud.allocUnsafe(r>>>0),i=this.head,s=0;i;)pq(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=ud.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:dq,value:function(r,n){return cE(this,yD(yD({},n),{},{depth:0,customInspect:!1}))}}]),t})()});var hE=x((fie,wD)=>{"use strict";function gq(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(fE,this,t)):process.nextTick(fE,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(cd,r):(r._writableState.errorEmitted=!0,process.nextTick(CD,r,s)):process.nextTick(CD,r,s):e?(process.nextTick(cd,r),e(s)):process.nextTick(cd,r)}),this)}function CD(t,e){fE(t,e),cd(t)}function cd(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function mq(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function fE(t,e){t.emit("error",e)}function _q(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}wD.exports={destroy:gq,undestroy:mq,errorOrDestroy:_q}});var Fs=x((hie,ID)=>{"use strict";var DD={};function Nn(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,l){super(n(o,a,l))}}i.prototype.name=r.name,i.prototype.code=t,DD[t]=i}function xD(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function Eq(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function yq(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Aq(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Nn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Nn("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&Eq(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(yq(t," argument"))i=`The ${t} ${n} ${xD(e,"type")}`;else{let s=Aq(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${xD(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);Nn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Nn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Nn("ERR_STREAM_PREMATURE_CLOSE","Premature close");Nn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Nn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Nn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Nn("ERR_STREAM_WRITE_AFTER_END","write after end");Nn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Nn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Nn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");ID.exports.codes=DD});var dE=x((die,TD)=>{"use strict";var vq=Fs().codes.ERR_INVALID_OPT_VALUE;function bq(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Sq(t,e,r,n){var i=bq(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new vq(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}TD.exports={getHighWaterMark:Sq}});var RD=x((pie,pE)=>{typeof Object.create=="function"?pE.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:pE.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Ls=x((gie,mE)=>{try{if(gE=require("util"),typeof gE.inherits!="function")throw"";mE.exports=gE.inherits}catch{mE.exports=RD()}var gE});var OD=x((mie,kD)=>{kD.exports=require("util").deprecate});var yE=x((_ie,MD)=>{"use strict";MD.exports=Jt;function BD(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Vq(e,t)}}var Xa;Jt.WritableState=ec;var Cq={deprecate:OD()},PD=uE(),hd=require("buffer").Buffer,wq=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function xq(t){return hd.from(t)}function Dq(t){return hd.isBuffer(t)||t instanceof wq}var EE=hE(),Iq=dE(),Tq=Iq.getHighWaterMark,Ms=Fs().codes,Rq=Ms.ERR_INVALID_ARG_TYPE,kq=Ms.ERR_METHOD_NOT_IMPLEMENTED,Oq=Ms.ERR_MULTIPLE_CALLBACK,Nq=Ms.ERR_STREAM_CANNOT_PIPE,Bq=Ms.ERR_STREAM_DESTROYED,Pq=Ms.ERR_STREAM_NULL_VALUES,Fq=Ms.ERR_STREAM_WRITE_AFTER_END,Lq=Ms.ERR_UNKNOWN_ENCODING,Ja=EE.errorOrDestroy;Ls()(Jt,PD);function Mq(){}function ec(t,e,r){Xa=Xa||ko(),t=t||{},typeof r!="boolean"&&(r=e instanceof Xa),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Tq(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){jq(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new BD(this)}ec.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(ec.prototype,"buffer",{get:Cq.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var fd;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(fd=Function.prototype[Symbol.hasInstance],Object.defineProperty(Jt,Symbol.hasInstance,{value:function(e){return fd.call(this,e)?!0:this!==Jt?!1:e&&e._writableState instanceof ec}})):fd=function(e){return e instanceof this};function Jt(t){Xa=Xa||ko();var e=this instanceof Xa;if(!e&&!fd.call(Jt,this))return new Jt(t);this._writableState=new ec(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),PD.call(this)}Jt.prototype.pipe=function(){Ja(this,new Nq)};function Uq(t,e){var r=new Fq;Ja(t,r),process.nextTick(e,r)}function qq(t,e,r,n){var i;return r===null?i=new Pq:typeof r!="string"&&!e.objectMode&&(i=new Rq("chunk",["string","Buffer"],r)),i?(Ja(t,i),process.nextTick(n,i),!1):!0}Jt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&Dq(t);return s&&!hd.isBuffer(t)&&(t=xq(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Mq),n.ending?Uq(this,r):(s||qq(this,n,t,r))&&(n.pendingcb++,i=Wq(this,n,s,t,e,r)),i};Jt.prototype.cork=function(){this._writableState.corked++};Jt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&FD(this,t))};Jt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Lq(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Jt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Hq(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=hd.from(e,r)),e}Object.defineProperty(Jt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Wq(t,e,r,n,i,s){if(!r){var o=Hq(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _E(t,e,!1,a,n,i,s);return l}function _E(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Bq("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Qq(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(Zu,t,e),t._writableState.errorEmitted=!0,Ja(t,n)):(i(n),t._writableState.errorEmitted=!0,Ja(t,n),Zu(t,e))}function Gq(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function jq(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Oq;if(Gq(r),e)Qq(t,r,n,e,i);else{var s=LD(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&FD(t,r),n?process.nextTick(ND,t,r,s,i):ND(t,r,s,i)}}function ND(t,e,r,n){r||$q(t,e),e.pendingcb--,n(),Zu(t,e)}function $q(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function FD(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,_E(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new BD(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,c=r.callback,f=e.objectMode?1:l.length;if(_E(t,e,!1,f,l,u,c),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Jt.prototype._write=function(t,e,r){r(new kq("_write()"))};Jt.prototype._writev=null;Jt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Yq(this,n,r),this};Object.defineProperty(Jt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function LD(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Kq(t,e){t._final(function(r){e.pendingcb--,r&&Ja(t,r),e.prefinished=!0,t.emit("prefinish"),Zu(t,e)})}function zq(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Kq,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Zu(t,e){var r=LD(e);if(r&&(zq(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Yq(t,e,r){e.ending=!0,Zu(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Vq(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Jt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Jt.prototype.destroy=EE.destroy;Jt.prototype._undestroy=EE.undestroy;Jt.prototype._destroy=function(t,e){e(t)}});var ko=x((Eie,qD)=>{"use strict";var Xq=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};qD.exports=yi;var UD=bE(),vE=yE();Ls()(yi,UD);for(AE=Xq(vE.prototype),dd=0;dd<AE.length;dd++)pd=AE[dd],yi.prototype[pd]||(yi.prototype[pd]=vE.prototype[pd]);var AE,pd,dd;function yi(t){if(!(this instanceof yi))return new yi(t);UD.call(this,t),vE.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Jq)))}Object.defineProperty(yi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(yi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(yi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Jq(){this._writableState.ended||process.nextTick(Zq,this)}function Zq(t){t.end()}Object.defineProperty(yi.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var QD=x((SE,WD)=>{var gd=require("buffer"),Ai=gd.Buffer;function HD(t,e){for(var r in t)e[r]=t[r]}Ai.from&&Ai.alloc&&Ai.allocUnsafe&&Ai.allocUnsafeSlow?WD.exports=gd:(HD(gd,SE),SE.Buffer=Oo);function Oo(t,e,r){return Ai(t,e,r)}Oo.prototype=Object.create(Ai.prototype);HD(Ai,Oo);Oo.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ai(t,e,r)};Oo.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ai(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Oo.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ai(t)};Oo.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return gd.SlowBuffer(t)}});var xE=x(jD=>{"use strict";var wE=QD().Buffer,GD=wE.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function e7(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function t7(t){var e=e7(t);if(typeof e!="string"&&(wE.isEncoding===GD||!GD(t)))throw new Error("Unknown encoding: "+t);return e||t}jD.StringDecoder=tc;function tc(t){this.encoding=t7(t);var e;switch(this.encoding){case"utf16le":this.text=a7,this.end=l7,e=4;break;case"utf8":this.fillLast=i7,e=4;break;case"base64":this.text=u7,this.end=c7,e=3;break;default:this.write=f7,this.end=h7;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=wE.allocUnsafe(e)}tc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};tc.prototype.end=o7;tc.prototype.text=s7;tc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function CE(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function r7(t,e,r){var n=e.length-1;if(n<r)return 0;var i=CE(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=CE(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=CE(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function n7(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function i7(t){var e=this.lastTotal-this.lastNeed,r=n7(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function s7(t,e){var r=r7(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function o7(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function a7(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l7(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function u7(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function c7(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f7(t){return t.toString(this.encoding)}function h7(t){return t&&t.length?this.write(t):""}});var md=x((Aie,zD)=>{"use strict";var $D=Fs().codes.ERR_STREAM_PREMATURE_CLOSE;function d7(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function p7(){}function g7(t){return t.setHeader&&typeof t.abort=="function"}function KD(t,e,r){if(typeof e=="function")return KD(t,null,e);e||(e={}),r=d7(r||p7);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,u=function(){n=!1,l=!0,i||r.call(t)},c=function(g){r.call(t,g)},f=function(){var g;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(g=new $D),r.call(t,g);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(g=new $D),r.call(t,g)},h=function(){t.req.on("finish",a)};return g7(t)?(t.on("complete",a),t.on("abort",f),t.req?h():t.on("request",h)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",c),t.on("close",f),function(){t.removeListener("complete",a),t.removeListener("abort",f),t.removeListener("request",h),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",f)}}zD.exports=KD});var VD=x((vie,YD)=>{"use strict";var _d;function Us(t,e,r){return e=m7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m7(t){var e=_7(t,"string");return typeof e=="symbol"?e:String(e)}function _7(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E7=md(),qs=Symbol("lastResolve"),No=Symbol("lastReject"),rc=Symbol("error"),Ed=Symbol("ended"),Bo=Symbol("lastPromise"),DE=Symbol("handlePromise"),Po=Symbol("stream");function Hs(t,e){return{value:t,done:e}}function y7(t){var e=t[qs];if(e!==null){var r=t[Po].read();r!==null&&(t[Bo]=null,t[qs]=null,t[No]=null,e(Hs(r,!1)))}}function A7(t){process.nextTick(y7,t)}function v7(t,e){return function(r,n){t.then(function(){if(e[Ed]){r(Hs(void 0,!0));return}e[DE](r,n)},n)}}var b7=Object.getPrototypeOf(function(){}),S7=Object.setPrototypeOf((_d={get stream(){return this[Po]},next:function(){var e=this,r=this[rc];if(r!==null)return Promise.reject(r);if(this[Ed])return Promise.resolve(Hs(void 0,!0));if(this[Po].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[rc]?a(e[rc]):o(Hs(void 0,!0))})});var n=this[Bo],i;if(n)i=new Promise(v7(n,this));else{var s=this[Po].read();if(s!==null)return Promise.resolve(Hs(s,!1));i=new Promise(this[DE])}return this[Bo]=i,i}},Us(_d,Symbol.asyncIterator,function(){return this}),Us(_d,"return",function(){var e=this;return new Promise(function(r,n){e[Po].destroy(null,function(i){if(i){n(i);return}r(Hs(void 0,!0))})})}),_d),b7),C7=function(e){var r,n=Object.create(S7,(r={},Us(r,Po,{value:e,writable:!0}),Us(r,qs,{value:null,writable:!0}),Us(r,No,{value:null,writable:!0}),Us(r,rc,{value:null,writable:!0}),Us(r,Ed,{value:e._readableState.endEmitted,writable:!0}),Us(r,DE,{value:function(s,o){var a=n[Po].read();a?(n[Bo]=null,n[qs]=null,n[No]=null,s(Hs(a,!1))):(n[qs]=s,n[No]=o)},writable:!0}),r));return n[Bo]=null,E7(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[No];s!==null&&(n[Bo]=null,n[qs]=null,n[No]=null,s(i)),n[rc]=i;return}var o=n[qs];o!==null&&(n[Bo]=null,n[qs]=null,n[No]=null,o(Hs(void 0,!0))),n[Ed]=!0}),e.on("readable",A7.bind(null,n)),n};YD.exports=C7});var eI=x((bie,ZD)=>{"use strict";function XD(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(u){r(u);return}a.done?e(l):Promise.resolve(l).then(n,i)}function w7(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(l){XD(s,n,i,o,a,"next",l)}function a(l){XD(s,n,i,o,a,"throw",l)}o(void 0)})}}function JD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function x7(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JD(Object(r),!0).forEach(function(n){D7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D7(t,e,r){return e=I7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I7(t){var e=T7(t,"string");return typeof e=="symbol"?e:String(e)}function T7(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R7=Fs().codes.ERR_INVALID_ARG_TYPE;function k7(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new R7("iterable",["Iterable"],e);var i=new t(x7({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=w7(function*(){try{var l=yield n.next(),u=l.value,c=l.done;c?i.push(null):i.push(yield u)?o():s=!1}catch(f){i.destroy(f)}}),a.apply(this,arguments)}return i}ZD.exports=k7});var bE=x((Cie,cI)=>{"use strict";cI.exports=At;var Za;At.ReadableState=iI;var Sie=require("events").EventEmitter,nI=function(e,r){return e.listeners(r).length},ic=uE(),yd=require("buffer").Buffer,O7=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function N7(t){return yd.from(t)}function B7(t){return yd.isBuffer(t)||t instanceof O7}var IE=require("util"),ot;IE&&IE.debuglog?ot=IE.debuglog("stream"):ot=function(){};var P7=SD(),PE=hE(),F7=dE(),L7=F7.getHighWaterMark,Ad=Fs().codes,M7=Ad.ERR_INVALID_ARG_TYPE,U7=Ad.ERR_STREAM_PUSH_AFTER_EOF,q7=Ad.ERR_METHOD_NOT_IMPLEMENTED,H7=Ad.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,el,TE,RE;Ls()(At,ic);var nc=PE.errorOrDestroy,kE=["error","close","destroy","pause","resume"];function W7(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function iI(t,e,r){Za=Za||ko(),t=t||{},typeof r!="boolean"&&(r=e instanceof Za),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=L7(this,t,"readableHighWaterMark",r),this.buffer=new P7,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(el||(el=xE().StringDecoder),this.decoder=new el(t.encoding),this.encoding=t.encoding)}function At(t){if(Za=Za||ko(),!(this instanceof At))return new At(t);var e=this instanceof Za;this._readableState=new iI(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ic.call(this)}Object.defineProperty(At.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});At.prototype.destroy=PE.destroy;At.prototype._undestroy=PE.undestroy;At.prototype._destroy=function(t,e){e(t)};At.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=yd.from(t,e),e=""),n=!0),sI(this,t,e,!1,n)};At.prototype.unshift=function(t){return sI(this,t,null,!0,!1)};function sI(t,e,r,n,i){ot("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,j7(t,s);else{var o;if(i||(o=Q7(s,e)),o)nc(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==yd.prototype&&(e=N7(e)),n)s.endEmitted?nc(t,new H7):OE(t,s,e,!0);else if(s.ended)nc(t,new U7);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?OE(t,s,e,!1):BE(t,s)):OE(t,s,e,!1)}else n||(s.reading=!1,BE(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function OE(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&vd(t)),BE(t,e)}function Q7(t,e){var r;return!B7(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new M7("chunk",["string","Buffer","Uint8Array"],e)),r}At.prototype.isPaused=function(){return this._readableState.flowing===!1};At.prototype.setEncoding=function(t){el||(el=xE().StringDecoder);var e=new el(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var tI=1073741824;function G7(t){return t>=tI?t=tI:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function rI(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=G7(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}At.prototype.read=function(t){ot("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ot("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?NE(this):vd(this),null;if(t=rI(t,e),t===0&&e.ended)return e.length===0&&NE(this),null;var n=e.needReadable;ot("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ot("length less than watermark",n)),e.ended||e.reading?(n=!1,ot("reading or ended",n)):n&&(ot("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=rI(r,e)));var i;return t>0?i=lI(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&NE(this)),i!==null&&this.emit("data",i),i};function j7(t,e){if(ot("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?vd(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,oI(t)))}}function vd(t){var e=t._readableState;ot("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ot("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(oI,t))}function oI(t){var e=t._readableState;ot("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,FE(t)}function BE(t,e){e.readingMore||(e.readingMore=!0,process.nextTick($7,t,e))}function $7(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(ot("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}At.prototype._read=function(t){nc(this,new q7("_read()"))};At.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,ot("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:m;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(E,A){ot("onunpipe"),E===r&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,c())}function a(){ot("onend"),t.end()}var l=K7(r);t.on("drain",l);var u=!1;function c(){ot("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",f),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",f);function f(E){ot("ondata");var A=t.write(E);ot("dest.write",A),A===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&uI(n.pipes,t)!==-1)&&!u&&(ot("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(E){ot("onerror",E),m(),t.removeListener("error",h),nI(t,"error")===0&&nc(t,E)}W7(t,"error",h);function p(){t.removeListener("finish",g),m()}t.once("close",p);function g(){ot("onfinish"),t.removeListener("close",p),m()}t.once("finish",g);function m(){ot("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(ot("pipe resume"),r.resume()),t};function K7(t){return function(){var r=t._readableState;ot("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&nI(t,"data")&&(r.flowing=!0,FE(t))}}At.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=uI(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};At.prototype.on=function(t,e){var r=ic.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ot("on readable",n.length,n.reading),n.length?vd(this):n.reading||process.nextTick(z7,this)),r};At.prototype.addListener=At.prototype.on;At.prototype.removeListener=function(t,e){var r=ic.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(aI,this),r};At.prototype.removeAllListeners=function(t){var e=ic.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(aI,this),e};function aI(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function z7(t){ot("readable nexttick read 0"),t.read(0)}At.prototype.resume=function(){var t=this._readableState;return t.flowing||(ot("resume"),t.flowing=!t.readableListening,Y7(this,t)),t.paused=!1,this};function Y7(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(V7,t,e))}function V7(t,e){ot("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),FE(t),e.flowing&&!e.reading&&t.read(0)}At.prototype.pause=function(){return ot("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ot("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function FE(t){var e=t._readableState;for(ot("flow",e.flowing);e.flowing&&t.read()!==null;);}At.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(ot("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(ot("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(a){return function(){return t[a].apply(t,arguments)}})(i));for(var s=0;s<kE.length;s++)t.on(kE[s],this.emit.bind(this,kE[s]));return this._read=function(o){ot("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(At.prototype[Symbol.asyncIterator]=function(){return TE===void 0&&(TE=VD()),TE(this)});Object.defineProperty(At.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(At.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(At.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});At._fromList=lI;Object.defineProperty(At.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function lI(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function NE(t){var e=t._readableState;ot("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(X7,e,t))}function X7(t,e){if(ot("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(At.from=function(t,e){return RE===void 0&&(RE=eI()),RE(At,t,e)});function uI(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var LE=x((wie,hI)=>{"use strict";hI.exports=es;var bd=Fs().codes,J7=bd.ERR_METHOD_NOT_IMPLEMENTED,Z7=bd.ERR_MULTIPLE_CALLBACK,eH=bd.ERR_TRANSFORM_ALREADY_TRANSFORMING,tH=bd.ERR_TRANSFORM_WITH_LENGTH_0,Sd=ko();Ls()(es,Sd);function rH(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Z7);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function es(t){if(!(this instanceof es))return new es(t);Sd.call(this,t),this._transformState={afterTransform:rH.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",nH)}function nH(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){fI(t,e,r)}):fI(this,null,null)}es.prototype.push=function(t,e){return this._transformState.needTransform=!1,Sd.prototype.push.call(this,t,e)};es.prototype._transform=function(t,e,r){r(new J7("_transform()"))};es.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};es.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};es.prototype._destroy=function(t,e){Sd.prototype._destroy.call(this,t,function(r){e(r)})};function fI(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new tH;if(t._transformState.transforming)throw new eH;return t.push(null)}});var gI=x((xie,pI)=>{"use strict";pI.exports=sc;var dI=LE();Ls()(sc,dI);function sc(t){if(!(this instanceof sc))return new sc(t);dI.call(this,t)}sc.prototype._transform=function(t,e,r){r(null,t)}});var AI=x((Die,yI)=>{"use strict";var ME;function iH(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var EI=Fs().codes,sH=EI.ERR_MISSING_ARGS,oH=EI.ERR_STREAM_DESTROYED;function mI(t){if(t)throw t}function aH(t){return t.setHeader&&typeof t.abort=="function"}function lH(t,e,r,n){n=iH(n);var i=!1;t.on("close",function(){i=!0}),ME===void 0&&(ME=md()),ME(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,aH(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new oH("pipe"))}}}function _I(t){t()}function uH(t,e){return t.pipe(e)}function cH(t){return!t.length||typeof t[t.length-1]!="function"?mI:t.pop()}function fH(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=cH(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new sH("streams");var i,s=e.map(function(o,a){var l=a<e.length-1,u=a>0;return lH(o,l,u,function(c){i||(i=c),c&&s.forEach(_I),!l&&(s.forEach(_I),n(i))})});return e.reduce(uH)}yI.exports=fH});var Fo=x((Bn,ac)=>{var oc=require("stream");process.env.READABLE_STREAM==="disable"&&oc?(ac.exports=oc.Readable,Object.assign(ac.exports,oc),ac.exports.Stream=oc):(Bn=ac.exports=bE(),Bn.Stream=oc||Bn,Bn.Readable=Bn,Bn.Writable=yE(),Bn.Duplex=ko(),Bn.Transform=LE(),Bn.PassThrough=gI(),Bn.finished=md(),Bn.pipeline=AI())});var SI=x((Iie,bI)=>{bI.exports=vi;var hH=require("util"),vI=Fo();hH.inherits(vi,vI.Duplex);function vi(t,e,r){var n=this;if(!(n instanceof vi))return new vi(t,e,r);vI.Duplex.call(n,r),n._output=null,n.connect(t,e)}vi.prototype.connect=function(t,e){var r=this;r.req=t,r._output=e,r.emit("response",e),e.on("data",function(n){r.push(n)||r._output.pause()}),e.on("end",function(){r.push(null)})};vi.prototype._read=function(t){this._output&&this._output.resume()};vi.prototype._write=function(t,e,r){this.req.write(t,e),r()};vi.prototype.end=function(t,e,r){return this._output.socket.destroySoon(),this.req.end(t,e,r)};vi.prototype.destroy=function(){this.req.destroy(),this._output.socket.destroy()};vi.prototype.destroySoon=function(){this.req.destroy(),this._output.socket.destroy()}});var wI=x((Tie,CI)=>{var tl=1e3,rl=tl*60,nl=rl*60,Lo=nl*24,dH=Lo*7,pH=Lo*365.25;CI.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return gH(t);if(r==="number"&&isFinite(t))return e.long?_H(t):mH(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function gH(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*pH;case"weeks":case"week":case"w":return r*dH;case"days":case"day":case"d":return r*Lo;case"hours":case"hour":case"hrs":case"hr":case"h":return r*nl;case"minutes":case"minute":case"mins":case"min":case"m":return r*rl;case"seconds":case"second":case"secs":case"sec":case"s":return r*tl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function mH(t){var e=Math.abs(t);return e>=Lo?Math.round(t/Lo)+"d":e>=nl?Math.round(t/nl)+"h":e>=rl?Math.round(t/rl)+"m":e>=tl?Math.round(t/tl)+"s":t+"ms"}function _H(t){var e=Math.abs(t);return e>=Lo?Cd(t,e,Lo,"day"):e>=nl?Cd(t,e,nl,"hour"):e>=rl?Cd(t,e,rl,"minute"):e>=tl?Cd(t,e,tl,"second"):t+" ms"}function Cd(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var UE=x((Rie,xI)=>{function EH(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=wI(),r.destroy=u,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let f=0;for(let h=0;h<c.length;h++)f=(f<<5)-f+c.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(c){let f,h=null,p,g;function m(...E){if(!m.enabled)return;let A=m,w=Number(new Date),k=w-(f||w);A.diff=k,A.prev=f,A.curr=w,f=w,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let S=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(F,M)=>{if(F==="%%")return"%";S++;let D=r.formatters[M];if(typeof D=="function"){let I=E[S];F=D.call(A,I),E.splice(S,1),S--}return F}),r.formatArgs.call(A,E),(A.log||r.log).apply(A,E)}return m.namespace=c,m.useColors=r.useColors(),m.color=r.selectColor(c),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,g=r.enabled(c)),g),set:E=>{h=E}}),typeof r.init=="function"&&r.init(m),m}function n(c,f){let h=r(this.namespace+(typeof f>"u"?":":f)+c);return h.log=this.log,h}function i(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let h of f)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function s(c,f){let h=0,p=0,g=-1,m=0;for(;h<c.length;)if(p<f.length&&(f[p]===c[h]||f[p]==="*"))f[p]==="*"?(g=p,m=h,p++):(h++,p++);else if(g!==-1)p=g+1,m++,h=m;else return!1;for(;p<f.length&&f[p]==="*";)p++;return p===f.length}function o(){let c=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),c}function a(c){for(let f of r.skips)if(s(c,f))return!1;for(let f of r.names)if(s(c,f))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}xI.exports=EH});var DI=x((sn,wd)=>{sn.formatArgs=AH;sn.save=vH;sn.load=bH;sn.useColors=yH;sn.storage=SH();sn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();sn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function yH(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function AH(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+wd.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}sn.log=console.debug||console.log||(()=>{});function vH(t){try{t?sn.storage.setItem("debug",t):sn.storage.removeItem("debug")}catch{}}function bH(){let t;try{t=sn.storage.getItem("debug")||sn.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function SH(){try{return localStorage}catch{}}wd.exports=UE()(sn);var{formatters:CH}=wd.exports;CH.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var TI=x((vr,Dd)=>{var wH=require("tty"),xd=require("util");vr.init=OH;vr.log=TH;vr.formatArgs=DH;vr.save=RH;vr.load=kH;vr.useColors=xH;vr.destroy=xd.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");vr.colors=[6,2,3,4,5,1];try{let t=cm();t&&(t.stderr||t).level>=2&&(vr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}vr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function xH(){return"colors"in vr.inspectOpts?!!vr.inspectOpts.colors:wH.isatty(process.stderr.fd)}function DH(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Dd.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=IH()+e+" "+t[0]}function IH(){return vr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function TH(...t){return process.stderr.write(xd.formatWithOptions(vr.inspectOpts,...t)+`
`)}function RH(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function kH(){return process.env.DEBUG}function OH(t){t.inspectOpts={};let e=Object.keys(vr.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=vr.inspectOpts[e[r]]}Dd.exports=UE()(vr);var{formatters:II}=Dd.exports;II.o=function(t){return this.inspectOpts.colors=this.useColors,xd.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};II.O=function(t){return this.inspectOpts.colors=this.useColors,xd.inspect(t,this.inspectOpts)}});var RI=x((kie,qE)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?qE.exports=DI():qE.exports=TI()});var OI=x((Oie,kI)=>{var NH=require("fs");kI.exports=function(t,e,r){e=typeof e<"u"?e:`
`,r=typeof r<"u"?r:"utf8";var n=[],i=NH.readFileSync(t,r);if(i.indexOf("-END CERTIFICATE-")<0||i.indexOf("-BEGIN CERTIFICATE-")<0)throw Error("File does not contain 'BEGIN CERTIFICATE' or 'END CERTIFICATE'");i=i.split(e);var s=[],o,a;for(o=0,a=i.length;o<a;o++){var l=i[o];l.length!==0&&(s.push(l),l.match(/-END CERTIFICATE-/)&&(n.push(s.join(e)),s=[]))}return n}});var LI=x((Nie,FI)=>{var BH=require("querystring"),PH=Uw(),Td=require("fs"),uc=require("path"),lc=require("url"),FH=mD(),LH=SI(),Id=RI()("modem"),BI=Em(),MH=require("util"),UH=OI(),PI=require("os"),qH=PI.type()==="Windows_NT",HH=require("stream"),WH=function(){var t,e={};if(!process.env.DOCKER_HOST)e.socketPath=qH?"//./pipe/docker_engine":NI;else if(process.env.DOCKER_HOST.indexOf("unix://")===0)e.socketPath=process.env.DOCKER_HOST.substring(7)||NI;else if(process.env.DOCKER_HOST.indexOf("npipe://")===0)e.socketPath=process.env.DOCKER_HOST.substring(8)||"//./pipe/docker_engine";else{var r=process.env.DOCKER_HOST;r.indexOf("//")<0&&(r="tcp://"+r);try{t=new lc.URL(r)}catch{throw new Error("DOCKER_HOST env variable should be something like tcp://localhost:1234")}e.port=t.port,process.env.DOCKER_TLS_VERIFY==="1"||e.port==="2376"?e.protocol="https":t.protocol==="ssh:"?(e.protocol="ssh",e.username=t.username,e.sshOptions={agent:process.env.SSH_AUTH_SOCK}):e.protocol="http",process.env.DOCKER_PATH_PREFIX?e.pathPrefix=process.env.DOCKER_PATH_PREFIX:e.pathPrefix="/",e.host=t.hostname,process.env.DOCKER_CERT_PATH&&(e.ca=UH(uc.join(process.env.DOCKER_CERT_PATH,"ca.pem")),e.cert=Td.readFileSync(uc.join(process.env.DOCKER_CERT_PATH,"cert.pem")),e.key=Td.readFileSync(uc.join(process.env.DOCKER_CERT_PATH,"key.pem"))),process.env.DOCKER_CLIENT_TIMEOUT&&(e.timeout=parseInt(process.env.DOCKER_CLIENT_TIMEOUT,10))}return e},NI=function(){return new Promise(function(t){var e=uc.join(PI.homedir(),".docker","run","docker.sock");Td.access(e,function(r){t(r?"/var/run/docker.sock":e)})})},Ws=function(t){var e=WH(),r=Object.assign({},e,t);this.host=r.host,this.host||(this.socketPath=r.socketPath),this.port=r.port,this.pathPrefix=r.pathPrefix,this.username=r.username,this.password=r.password,this.version=r.version,this.key=r.key,this.cert=r.cert,this.ca=r.ca,this.timeout=r.timeout,this.connectionTimeout=r.connectionTimeout,this.checkServerIdentity=r.checkServerIdentity,this.agent=r.agent,this.headers=r.headers||{},this.sshOptions=Object.assign({},t?t.sshOptions:{},e.sshOptions),this.sshOptions.agentForward===void 0&&(this.sshOptions.agentForward=r.agentForward),this.key&&this.cert&&this.ca&&(this.protocol="https"),this.protocol=r.protocol||this.protocol||"http"};Ws.prototype.dial=function(t,e){var r,n,i;if(t.options&&(r=t.options),r&&r.authconfig&&delete r.authconfig,r&&r.abortSignal&&delete r.abortSignal,this.version&&(t.path="/"+this.version+t.path),this.host){var s=lc.parse(this.host);n=lc.format({protocol:s.protocol||this.protocol,hostname:s.hostname||this.host,port:this.port,pathname:s.pathname||this.pathPrefix}),n=lc.resolve(n,t.path)}else n=t.path;t.path.indexOf("?")!==-1&&(r&&Object.keys(r).length>0?n+=this.buildQuerystring(r._query||r):n=n.substring(0,n.length-1));var o={path:n,method:t.method,headers:t.headers||Object.assign({},this.headers),key:this.key,cert:this.cert,ca:this.ca};if(this.checkServerIdentity&&(o.checkServerIdentity=this.checkServerIdentity),this.agent&&(o.agent=this.agent),t.authconfig&&(o.headers["X-Registry-Auth"]=t.authconfig.key||t.authconfig.base64||Buffer.from(JSON.stringify(t.authconfig)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_")),t.registryconfig&&(o.headers["X-Registry-Config"]=t.registryconfig.base64||Buffer.from(JSON.stringify(t.registryconfig)).toString("base64")),t.abortSignal&&(o.signal=t.abortSignal),t.file?(typeof t.file=="string"?i=Td.createReadStream(uc.resolve(t.file)):i=t.file,o.headers["Content-Type"]="application/tar"):r&&t.method==="POST"&&(i=JSON.stringify(r._body||r),t.allowEmpty||i!=="{}"&&i!=='""'?o.headers["Content-Type"]="application/json":i=void 0),typeof i=="string"?o.headers["Content-Length"]=Buffer.byteLength(i):Buffer.isBuffer(i)===!0?o.headers["Content-Length"]=i.length:(o.method==="PUT"||t.hijack||t.openStdin)&&(o.headers["Transfer-Encoding"]="chunked"),t.hijack&&(o.headers.Connection="Upgrade",o.headers.Upgrade=o.headers.Upgrade??"tcp"),this.socketPath)this.getSocketPath().then(l=>{o.socketPath=l,this.buildRequest(o,t,i,e)});else{var a=lc.parse(n);o.hostname=a.hostname,o.port=a.port,o.path=a.path,this.buildRequest(o,t,i,e)}};Ws.prototype.getSocketPath=function(){if(this.socketPath){if(this.socketPathCache)return Promise.resolve(this.socketPathCache);var t=typeof this.socketPath=="function"?this.socketPath():this.socketPath;return this.socketPathCache=t,Promise.resolve(t)}};Ws.prototype.buildRequest=function(t,e,r,n){var i=this,s,o=!1,a=i.protocol==="ssh"?Object.assign(t,{agent:FH(Object.assign({},i.sshOptions,{host:i.host,port:i.port,username:i.username,password:i.password})),protocol:"http:"}):t,l=PH[i.protocol==="ssh"?"http":i.protocol].request(a,function(){});Id("Sending: %s",MH.inspect(t,{showHidden:!0,depth:null})),i.connectionTimeout&&(s=setTimeout(function(){Id("Connection Timeout of %s ms exceeded",i.connectionTimeout),l.destroy()},i.connectionTimeout)),i.timeout&&(l.setTimeout(i.timeout),l.on("timeout",function(){Id("Timeout of %s ms exceeded",i.timeout),l.destroy()})),e.hijack===!0&&(clearTimeout(s),l.on("upgrade",function(u,c,f){if(o===!1)return o=!0,f.length>0&&c.unshift(f),n(null,c)})),l.on("connect",function(){clearTimeout(s)}),l.on("disconnect",function(){clearTimeout(s)}),l.on("response",function(u){if(clearTimeout(s),e.isStream===!0)o===!1&&(o=!0,i.buildPayload(null,e.isStream,e.statusCodes,e.openStdin,l,u,null,n));else{t.signal!=null&&HH.addAbortSignal(t.signal,u);var c=[];u.on("data",function(f){c.push(f)}),u.on("end",function(){var f=Buffer.concat(c),h=f.toString();Id("Received: %s",h);var p=BI.parseJSON(h)||f;o===!1&&(o=!0,i.buildPayload(null,e.isStream,e.statusCodes,!1,l,u,p,n))})}}),l.on("error",function(u){clearTimeout(s),o===!1&&(o=!0,i.buildPayload(u,e.isStream,e.statusCodes,!1,{},{},null,n))}),typeof r=="string"||Buffer.isBuffer(r)?l.write(r):r&&(r.on("error",function(u){l.destroy(u)}),r.pipe(l)),!e.openStdin&&(typeof r=="string"||r===void 0||Buffer.isBuffer(r))&&l.end()};Ws.prototype.buildPayload=function(t,e,r,n,i,s,o,a){if(t)return a(t,null);r[s.statusCode]!==!0?l(e,s,o,function(u,c){if(u)return a(u,null);var f=new Error("(HTTP code "+s.statusCode+") "+(r[s.statusCode]||"unexpected")+" - "+(c.message||c.error||c)+" ");f.reason=r[s.statusCode],f.statusCode=s.statusCode,f.json=o,a(f,null)}):n?a(null,new LH(i,s)):e?a(null,s):a(null,o);function l(u,c,f,h){var p="",g=!1;u?(c.on("data",function(E){p+=E}),c.on("error",function(E){m(E,null)}),c.on("end",function(){m(null,BI.parseJSON(p)||p)})):h(null,f);function m(E,A){g===!1&&(E?h(E):h(null,A)),g=!0}}};Ws.prototype.demuxStream=function(t,e,r){var n=null,i=null,s=Buffer.from("");function o(l){if(l&&(s=Buffer.concat([s,l])),n){if(s.length>=i){var c=a(i);n===1?e.write(c):r.write(c),n=null,o()}}else if(s.length>=8){var u=a(8);n=u.readUInt8(0),i=u.readUInt32BE(4),o()}}function a(l){var u=s.subarray(0,l);return s=Buffer.from(s.subarray(l,s.length)),u}t.on("data",o)};Ws.prototype.followProgress=function(t,e,r){var n="",i=[],s=!1;t.on("data",o),t.on("error",a),t.on("end",l),t.on("close",l);function o(u){n+=u.toString(),c();function c(){for(var h;(h=n.indexOf(`
`))>=0;){if(h==0){n=n.slice(1);continue}f(n.slice(0,h)),n=n.slice(h+1)}}function f(h){if(h[h.length-1]=="\r"&&(h=h.substr(0,h.length-1)),h.length>0){var p=JSON.parse(h);i.push(p),r&&r(p)}}}function a(u){s=!0,t.removeListener("data",o),t.removeListener("error",a),t.removeListener("end",l),t.removeListener("close",l),e(u,i)}function l(){s||e(null,i),s=!0}};Ws.prototype.buildQuerystring=function(t){var e={};return Object.keys(t).map(function(r,n){t[r]&&typeof t[r]=="object"&&!Array.isArray(t[r])?e[r]=JSON.stringify(t[r]):e[r]=t[r]}),BH.stringify(e)};FI.exports=Ws});var HI=x((Bie,qI)=>{"use strict";var on=require("path"),WE=t=>new QE(t);WE.default=WE;qI.exports=WE;function MI(t){return Array.isArray(t)?t:[t]}var QH=/(?<=.)\/$/,GH=/(?<=.)\\$/,jH=on.sep==="\\"?GH:QH,UI=typeof Symbol<"u"?Symbol.for("dockerignore"):"dockerignore";function HE(t){return on.normalize(t).replace(jH,"")}function $H(t){return on.sep==="/"?t:t.replace(/\\/g,"/")}function KH(t){return on.sep==="/"?t:t.replace(/\//g,on.sep)}var QE=class{constructor({ignorecase:e=!0}={}){this._rules=[],this._ignorecase=e,this[UI]=!0,this._initCache()}_initCache(){this._cache={}}add(e){return this._added=!1,typeof e=="string"&&(e=e.split(/\r?\n/g)),MI(e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_addPattern(e){if(e&&e[UI]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(this._checkPattern(e)){let r=this._createRule(e.trim());r!==null&&(this._added=!0,this._rules.push(r))}}_checkPattern(e){return e&&typeof e=="string"&&e.indexOf("#")!==0&&e.trim()!==""}filter(e){return MI(e).filter(r=>this._filter(r))}createFilter(){return e=>this._filter(e)}ignores(e){return!this._filter(e)}_createRule(e){let r=e,n=!1;if(e[0]==="!"&&(n=!0,e=e.substring(1).trim()),e.length>0&&(e=HE(e),e=$H(e),e.length>1&&e[0]==="/"&&(e=e.slice(1))),n&&(e="!"+e),e=e.trim(),e==="")return null;if(e=HE(e),e[0]==="!"){if(e.length===1)return null;n=!0,e=e.substring(1)}else n=!1;return{origin:r,pattern:e,dirs:e.split(on.sep),negative:n}}_filter(e){return e?e in this._cache?this._cache[e]:this._cache[e]=this._test(e):!1}_test(e){e=KH(e);let r=HE(on.dirname(e)),n=r.split(on.sep),i=!1;return this._rules.forEach(s=>{let o=this._match(e,s);if(!o&&r!==".")if(s.dirs.includes("**"))for(let a=s.dirs.filter(l=>l!=="**").length;a<=n.length;a++)o=o||this._match(n.slice(0,a).join(on.sep),s);else s.dirs.length<=n.length&&(o=this._match(n.slice(0,s.dirs.length).join(on.sep),s));o&&(i=!s.negative)}),!i}_match(e,r){return this._compile(r).regexp.test(e)}_compile(e){if(e.regexp)return e;let r="^",n=on.sep==="\\"?"\\\\":on.sep;for(let i=0;i<e.pattern.length;i++){let s=e.pattern[i];if(s==="*")e.pattern[i+1]==="*"?(i++,e.pattern[i+1]===on.sep&&i++,e.pattern[i+1]===void 0?r+=".*":r+=`(.*${n})?`):r+=`[^${n}]*`;else if(s==="?")r+=`[^${n}]`;else if(s==="."||s==="$")r+=`\\${s}`;else if(s==="\\"){if(on.sep==="\\"){r+=n;continue}e.pattern[i+1]!==void 0?(r+="\\"+e.pattern[i+1],i++):r+="\\"}else r+=s}return r+="$",e.regexp=new RegExp(r,this._ignorecase?"i":""),e}}});var zI=x((Pie,KI)=>{"use strict";var Pn=require("fs"),Mo=require("path"),zH=Pn.lchown?"lchown":"chown",YH=Pn.lchownSync?"lchownSync":"chownSync",QI=Pn.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),WI=(t,e,r)=>{try{return Pn[YH](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},VH=(t,e,r)=>{try{return Pn.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},XH=QI?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):Pn.chown(t,e,r,n)}:(t,e,r,n)=>n,GE=QI?(t,e,r)=>{try{return WI(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;VH(t,e,r)}}:(t,e,r)=>WI(t,e,r),JH=process.version,GI=(t,e,r)=>Pn.readdir(t,e,r),ZH=(t,e)=>Pn.readdirSync(t,e);/^v4\./.test(JH)&&(GI=(t,e,r)=>Pn.readdir(t,r));var Rd=(t,e,r,n)=>{Pn[zH](t,e,r,XH(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},jI=(t,e,r,n,i)=>{if(typeof e=="string")return Pn.lstat(Mo.resolve(t,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,jI(t,o,r,n,i)});if(e.isDirectory())jE(Mo.resolve(t,e.name),r,n,s=>{if(s)return i(s);let o=Mo.resolve(t,e.name);Rd(o,r,n,i)});else{let s=Mo.resolve(t,e.name);Rd(s,r,n,i)}},jE=(t,e,r,n)=>{GI(t,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return Rd(t,e,r,n);let o=s.length,a=null,l=u=>{if(!a){if(u)return n(a=u);if(--o===0)return Rd(t,e,r,n)}};s.forEach(u=>jI(t,u,e,r,l))})},eW=(t,e,r,n)=>{if(typeof e=="string")try{let i=Pn.lstatSync(Mo.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&$I(Mo.resolve(t,e.name),r,n),GE(Mo.resolve(t,e.name),r,n)},$I=(t,e,r)=>{let n;try{n=ZH(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return GE(t,e,r);throw i}return n&&n.length&&n.forEach(i=>eW(t,i,e,r)),GE(t,e,r)};KI.exports=jE;jE.sync=$I});var XI=x((Fie,VI)=>{"use strict";var{Buffer:zn}=require("buffer"),YI=Symbol.for("BufferList");function Ft(t){if(!(this instanceof Ft))return new Ft(t);Ft._init.call(this,t)}Ft._init=function(e){Object.defineProperty(this,YI,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Ft.prototype._new=function(e){return new Ft(e)};Ft.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};Ft.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};Ft.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Ft.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Ft.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||zn.alloc(0);let s=!!e,o=this._offset(n),a=i-n,l=a,u=s&&r||0,c=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:zn.concat(this._bufs,this.length);for(let f=0;f<this._bufs.length;f++)this._bufs[f].copy(e,u),u+=this._bufs[f].length;return e}if(l<=this._bufs[o[0]].length-c)return s?this._bufs[o[0]].copy(e,r,c,c+l):this._bufs[o[0]].slice(c,c+l);s||(e=zn.allocUnsafe(a));for(let f=o[0];f<this._bufs.length;f++){let h=this._bufs[f].length-c;if(l>h)this._bufs[f].copy(e,u,c),u+=h;else{this._bufs[f].copy(e,u,c,c+l),u+=h;break}l-=h,c&&(c=0)}return e.length>u?e.slice(0,u):e};Ft.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};Ft.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};Ft.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Ft.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Ft.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(zn.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(zn.from(e));return this};Ft.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Ft.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=zn.from([t]):typeof t=="string"?t=zn.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=zn.from(t.buffer,t.byteOffset,t.byteLength):zn.isBuffer(t)||(t=zn.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let l=o.indexOf(t,s);if(l!==-1)return this._reverseOffset([i,l]);s=o.length-t.length+1}else{let l=this._reverseOffset([i,s]);if(this._match(l,t))return l;s++}s=0}return-1};Ft.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Ft.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:Ft.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();Ft.prototype._isBufferList=function(e){return e instanceof Ft||Ft.isBufferList(e)};Ft.isBufferList=function(e){return e!=null&&e[YI]};VI.exports=Ft});var JI=x((Lie,kd)=>{"use strict";var $E=Fo().Duplex,tW=Ls(),cc=XI();function Hr(t){if(!(this instanceof Hr))return new Hr(t);if(typeof t=="function"){this._callback=t;let e=function(n){this._callback&&(this._callback(n),this._callback=null)}.bind(this);this.on("pipe",function(n){n.on("error",e)}),this.on("unpipe",function(n){n.removeListener("error",e)}),t=null}cc._init.call(this,t),$E.call(this)}tW(Hr,$E);Object.assign(Hr.prototype,cc.prototype);Hr.prototype._new=function(e){return new Hr(e)};Hr.prototype._write=function(e,r,n){this._appendBuffer(e),typeof n=="function"&&n()};Hr.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)};Hr.prototype.end=function(e){$E.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)};Hr.prototype._destroy=function(e,r){this._bufs.length=0,this.length=0,r(e)};Hr.prototype._isBufferList=function(e){return e instanceof Hr||e instanceof cc||Hr.isBufferList(e)};Hr.isBufferList=cc.isBufferList;kd.exports=Hr;kd.exports.BufferListStream=Hr;kd.exports.BufferList=cc});var YE=x(sl=>{var rW=Buffer.alloc,nW="0000000000000000000",iW="7777777777777777777",ZI=48,eT=Buffer.from("ustar\0","binary"),sW=Buffer.from("00","binary"),oW=Buffer.from("ustar ","binary"),aW=Buffer.from(" \0","binary"),lW=parseInt("7777",8),fc=257,zE=263,uW=function(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)},cW=function(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null},fW=function(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0},tT=function(t,e,r,n){for(;r<n;r++)if(t[r]===e)return r;return n},rT=function(t){for(var e=256,r=0;r<148;r++)e+=t[r];for(var n=156;n<512;n++)e+=t[n];return e},Qs=function(t,e){return t=t.toString(8),t.length>e?iW.slice(0,e)+" ":nW.slice(0,e-t.length)+t+" "};function hW(t){var e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;for(var r=[],n=t.length-1;n>0;n--){var i=t[n];e?r.push(i):r.push(255-i)}var s=0,o=r.length;for(n=0;n<o;n++)s+=r[n]*Math.pow(256,n);return e?s:-1*s}var Gs=function(t,e,r){if(t=t.slice(e,e+r),e=0,t[e]&128)return hW(t);for(;e<t.length&&t[e]===32;)e++;for(var n=uW(tT(t,32,e,t.length),t.length,t.length);e<n&&t[e]===0;)e++;return n===e?0:parseInt(t.slice(e,n).toString(),8)},il=function(t,e,r,n){return t.slice(e,tT(t,0,e,e+r)).toString(n)},KE=function(t){var e=Buffer.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t};sl.decodeLongPath=function(t,e){return il(t,0,t.length,e)};sl.encodePax=function(t){var e="";t.name&&(e+=KE(" path="+t.name+`
`)),t.linkname&&(e+=KE(" linkpath="+t.linkname+`
`));var r=t.pax;if(r)for(var n in r)e+=KE(" "+n+"="+r[n]+`
`);return Buffer.from(e)};sl.decodePax=function(t){for(var e={};t.length;){for(var r=0;r<t.length&&t[r]!==32;)r++;var n=parseInt(t.slice(0,r).toString(),10);if(!n)return e;var i=t.slice(r+1,n-1).toString(),s=i.indexOf("=");if(s===-1)return e;e[i.slice(0,s)]=i.slice(s+1),t=t.slice(n)}return e};sl.encode=function(t){var e=rW(512),r=t.name,n="";if(t.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),Buffer.byteLength(r)!==r.length)return null;for(;Buffer.byteLength(r)>100;){var i=r.indexOf("/");if(i===-1)return null;n+=n?"/"+r.slice(0,i):r.slice(0,i),r=r.slice(i+1)}return Buffer.byteLength(r)>100||Buffer.byteLength(n)>155||t.linkname&&Buffer.byteLength(t.linkname)>100?null:(e.write(r),e.write(Qs(t.mode&lW,6),100),e.write(Qs(t.uid,6),108),e.write(Qs(t.gid,6),116),e.write(Qs(t.size,11),124),e.write(Qs(t.mtime.getTime()/1e3|0,11),136),e[156]=ZI+fW(t.type),t.linkname&&e.write(t.linkname,157),eT.copy(e,fc),sW.copy(e,zE),t.uname&&e.write(t.uname,265),t.gname&&e.write(t.gname,297),e.write(Qs(t.devmajor||0,6),329),e.write(Qs(t.devminor||0,6),337),n&&e.write(n,345),e.write(Qs(rT(e),6),148),e)};sl.decode=function(t,e,r){var n=t[156]===0?0:t[156]-ZI,i=il(t,0,100,e),s=Gs(t,100,8),o=Gs(t,108,8),a=Gs(t,116,8),l=Gs(t,124,12),u=Gs(t,136,12),c=cW(n),f=t[157]===0?null:il(t,157,100,e),h=il(t,265,32),p=il(t,297,32),g=Gs(t,329,8),m=Gs(t,337,8),E=rT(t);if(E===256)return null;if(E!==Gs(t,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(eT.compare(t,fc,fc+6)===0)t[345]&&(i=il(t,345,155,e)+"/"+i);else if(!(oW.compare(t,fc,fc+6)===0&&aW.compare(t,zE,zE+2)===0)){if(!r)throw new Error("Invalid tar header: unknown format.")}return n===0&&i&&i[i.length-1]==="/"&&(n=5),{name:i,mode:s,uid:o,gid:a,size:l,mtime:new Date(1e3*u),type:c,linkname:f,uname:h,gname:p,devmajor:g,devminor:m}}});var uT=x((Uie,lT)=>{var iT=require("util"),dW=JI(),hc=YE(),sT=Fo().Writable,oT=Fo().PassThrough,aT=function(){},nT=function(t){return t&=511,t&&512-t},pW=function(t,e){var r=new Od(t,e);return r.end(),r},gW=function(t,e){return e.path&&(t.name=e.path),e.linkpath&&(t.linkname=e.linkpath),e.size&&(t.size=parseInt(e.size,10)),t.pax=e,t},Od=function(t,e){this._parent=t,this.offset=e,oT.call(this,{autoDestroy:!1})};iT.inherits(Od,oT);Od.prototype.destroy=function(t){this._parent.destroy(t)};var ts=function(t){if(!(this instanceof ts))return new ts(t);sT.call(this,t),t=t||{},this._offset=0,this._buffer=dW(),this._missing=0,this._partial=!1,this._onparse=aT,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var e=this,r=e._buffer,n=function(){e._continue()},i=function(h){if(e._locked=!1,h)return e.destroy(h);e._stream||n()},s=function(){e._stream=null;var h=nT(e._header.size);h?e._parse(h,o):e._parse(512,f),e._locked||n()},o=function(){e._buffer.consume(nT(e._header.size)),e._parse(512,f),n()},a=function(){var h=e._header.size;e._paxGlobal=hc.decodePax(r.slice(0,h)),r.consume(h),s()},l=function(){var h=e._header.size;e._pax=hc.decodePax(r.slice(0,h)),e._paxGlobal&&(e._pax=Object.assign({},e._paxGlobal,e._pax)),r.consume(h),s()},u=function(){var h=e._header.size;this._gnuLongPath=hc.decodeLongPath(r.slice(0,h),t.filenameEncoding),r.consume(h),s()},c=function(){var h=e._header.size;this._gnuLongLinkPath=hc.decodeLongPath(r.slice(0,h),t.filenameEncoding),r.consume(h),s()},f=function(){var h=e._offset,p;try{p=e._header=hc.decode(r.slice(0,512),t.filenameEncoding,t.allowUnknownFormat)}catch(g){e.emit("error",g)}if(r.consume(512),!p){e._parse(512,f),n();return}if(p.type==="gnu-long-path"){e._parse(p.size,u),n();return}if(p.type==="gnu-long-link-path"){e._parse(p.size,c),n();return}if(p.type==="pax-global-header"){e._parse(p.size,a),n();return}if(p.type==="pax-header"){e._parse(p.size,l),n();return}if(e._gnuLongPath&&(p.name=e._gnuLongPath,e._gnuLongPath=null),e._gnuLongLinkPath&&(p.linkname=e._gnuLongLinkPath,e._gnuLongLinkPath=null),e._pax&&(e._header=p=gW(p,e._pax),e._pax=null),e._locked=!0,!p.size||p.type==="directory"){e._parse(512,f),e.emit("entry",p,pW(e,h),i);return}e._stream=new Od(e,h),e.emit("entry",p,e._stream,i),e._parse(p.size,s),n()};this._onheader=f,this._parse(512,f)};iT.inherits(ts,sT);ts.prototype.destroy=function(t){this._destroyed||(this._destroyed=!0,t&&this.emit("error",t),this.emit("close"),this._stream&&this._stream.emit("close"))};ts.prototype._parse=function(t,e){this._destroyed||(this._offset+=t,this._missing=t,e===this._onheader&&(this._partial=!1),this._onparse=e)};ts.prototype._continue=function(){if(!this._destroyed){var t=this._cb;this._cb=aT,this._overflow?this._write(this._overflow,void 0,t):t()}};ts.prototype._write=function(t,e,r){if(!this._destroyed){var n=this._stream,i=this._buffer,s=this._missing;if(t.length&&(this._partial=!0),t.length<s)return this._missing-=t.length,this._overflow=null,n?n.write(t,r):(i.append(t),r());this._cb=r,this._missing=0;var o=null;t.length>s&&(o=t.slice(s),t=t.slice(0,s)),n?n.end(t):i.append(t),this._overflow=o,this._onparse()}};ts.prototype._final=function(t){if(this._partial)return this.destroy(new Error("Unexpected end of data"));t()};lT.exports=ts});var fT=x((qie,cT)=>{cT.exports=require("fs").constants||require("constants")});var pT=x((Hie,dT)=>{dT.exports=hT;function hT(t,e){if(t&&e)return hT(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=t.apply(this,n),o=n[n.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(a){s[a]=o[a]}),s}}});var XE=x((Wie,VE)=>{var gT=pT();VE.exports=gT(Nd);VE.exports.strict=gT(mT);Nd.proto=Nd(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Nd(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return mT(this)},configurable:!0})});function Nd(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function mT(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var JE=x((Qie,ET)=>{var mW=XE(),_W=function(){},EW=global.Bare?queueMicrotask:process.nextTick.bind(process),yW=function(t){return t.setHeader&&typeof t.abort=="function"},AW=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},_T=function(t,e,r){if(typeof e=="function")return _T(t,null,e);e||(e={}),r=mW(r||_W);var n=t._writableState,i=t._readableState,s=e.readable||e.readable!==!1&&t.readable,o=e.writable||e.writable!==!1&&t.writable,a=!1,l=function(){t.writable||u()},u=function(){o=!1,s||r.call(t)},c=function(){s=!1,o||r.call(t)},f=function(E){r.call(t,E?new Error("exited with error code: "+E):null)},h=function(E){r.call(t,E)},p=function(){EW(g)},g=function(){if(!a){if(s&&!(i&&i.ended&&!i.destroyed))return r.call(t,new Error("premature close"));if(o&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"))}},m=function(){t.req.on("finish",u)};return yW(t)?(t.on("complete",u),t.on("abort",p),t.req?m():t.on("request",m)):o&&!n&&(t.on("end",l),t.on("close",l)),AW(t)&&t.on("exit",f),t.on("end",c),t.on("finish",u),e.error!==!1&&t.on("error",h),t.on("close",p),function(){a=!0,t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("exit",f),t.removeListener("end",c),t.removeListener("error",h),t.removeListener("close",p)}};ET.exports=_T});var ST=x((Gie,bT)=>{var ol=fT(),yT=JE(),Pd=Ls(),vW=Buffer.alloc,AT=Fo().Readable,al=Fo().Writable,bW=require("string_decoder").StringDecoder,Bd=YE(),SW=parseInt("755",8),CW=parseInt("644",8),vT=vW(1024),ey=function(){},ZE=function(t,e){e&=511,e&&t.push(vT.slice(0,512-e))};function wW(t){switch(t&ol.S_IFMT){case ol.S_IFBLK:return"block-device";case ol.S_IFCHR:return"character-device";case ol.S_IFDIR:return"directory";case ol.S_IFIFO:return"fifo";case ol.S_IFLNK:return"symlink"}return"file"}var Fd=function(t){al.call(this),this.written=0,this._to=t,this._destroyed=!1};Pd(Fd,al);Fd.prototype._write=function(t,e,r){if(this.written+=t.length,this._to.push(t))return r();this._to._drain=r};Fd.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var Ld=function(){al.call(this),this.linkname="",this._decoder=new bW("utf-8"),this._destroyed=!1};Pd(Ld,al);Ld.prototype._write=function(t,e,r){this.linkname+=this._decoder.write(t),r()};Ld.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var dc=function(){al.call(this),this._destroyed=!1};Pd(dc,al);dc.prototype._write=function(t,e,r){r(new Error("No body allowed for this entry"))};dc.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var bi=function(t){if(!(this instanceof bi))return new bi(t);AT.call(this,t),this._drain=ey,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};Pd(bi,AT);bi.prototype.entry=function(t,e,r){if(this._stream)throw new Error("already piping an entry");if(!(this._finalized||this._destroyed)){typeof e=="function"&&(r=e,e=null),r||(r=ey);var n=this;if((!t.size||t.type==="symlink")&&(t.size=0),t.type||(t.type=wW(t.mode)),t.mode||(t.mode=t.type==="directory"?SW:CW),t.uid||(t.uid=0),t.gid||(t.gid=0),t.mtime||(t.mtime=new Date),typeof e=="string"&&(e=Buffer.from(e)),Buffer.isBuffer(e)){t.size=e.length,this._encode(t);var i=this.push(e);return ZE(n,t.size),i?process.nextTick(r):this._drain=r,new dc}if(t.type==="symlink"&&!t.linkname){var s=new Ld;return yT(s,function(a){if(a)return n.destroy(),r(a);t.linkname=s.linkname,n._encode(t),r()}),s}if(this._encode(t),t.type!=="file"&&t.type!=="contiguous-file")return process.nextTick(r),new dc;var o=new Fd(this);return this._stream=o,yT(o,function(a){if(n._stream=null,a)return n.destroy(),r(a);if(o.written!==t.size)return n.destroy(),r(new Error("size mismatch"));ZE(n,t.size),n._finalizing&&n.finalize(),r()}),o}};bi.prototype.finalize=function(){if(this._stream){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(vT),this.push(null))};bi.prototype.destroy=function(t){this._destroyed||(this._destroyed=!0,t&&this.emit("error",t),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())};bi.prototype._encode=function(t){if(!t.pax){var e=Bd.encode(t);if(e){this.push(e);return}}this._encodePax(t)};bi.prototype._encodePax=function(t){var e=Bd.encodePax({name:t.name,linkname:t.linkname,pax:t.pax}),r={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:e.length,mtime:t.mtime,type:"pax-header",linkname:t.linkname&&"PaxHeader",uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};this.push(Bd.encode(r)),this.push(e),ZE(this,e.length),r.size=t.size,r.type=t.type,this.push(Bd.encode(r))};bi.prototype._read=function(t){var e=this._drain;this._drain=ey,e()};bT.exports=bi});var CT=x(ty=>{ty.extract=uT();ty.pack=ST()});var ry=x(($ie,xT)=>{var xW=XE(),DW=JE(),Md;try{Md=require("fs")}catch{}var pc=function(){},IW=typeof process>"u"?!1:/^v?\.0/.test(process.version),Ud=function(t){return typeof t=="function"},TW=function(t){return!IW||!Md?!1:(t instanceof(Md.ReadStream||pc)||t instanceof(Md.WriteStream||pc))&&Ud(t.close)},RW=function(t){return t.setHeader&&Ud(t.abort)},kW=function(t,e,r,n){n=xW(n);var i=!1;t.on("close",function(){i=!0}),DW(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,TW(t))return t.close(pc);if(RW(t))return t.abort();if(Ud(t.destroy))return t.destroy();n(o||new Error("stream was destroyed"))}}},wT=function(t){t()},OW=function(t,e){return t.pipe(e)},NW=function(){var t=Array.prototype.slice.call(arguments),e=Ud(t[t.length-1]||pc)&&t.pop()||pc;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,s){var o=s<t.length-1,a=s>0;return kW(i,o,a,function(l){r||(r=l),l&&n.forEach(wT),!o&&(n.forEach(wT),e(r))})});return t.reduce(OW)};xT.exports=NW});var RT=x((Kie,TT)=>{var qd=require("path"),DT=require("fs"),IT=parseInt("0777",8);TT.exports=ll.mkdirp=ll.mkdirP=ll;function ll(t,e,r,n){typeof e=="function"?(r=e,e={}):(!e||typeof e!="object")&&(e={mode:e});var i=e.mode,s=e.fs||DT;i===void 0&&(i=IT&~process.umask()),n||(n=null);var o=r||function(){};t=qd.resolve(t),s.mkdir(t,i,function(a){if(!a)return n=n||t,o(null,n);switch(a.code){case"ENOENT":ll(qd.dirname(t),e,function(l,u){l?o(l,u):ll(t,e,o,u)});break;default:s.stat(t,function(l,u){l||!u.isDirectory()?o(a,n):o(null,n)});break}})}ll.sync=function t(e,r,n){(!r||typeof r!="object")&&(r={mode:r});var i=r.mode,s=r.fs||DT;i===void 0&&(i=IT&~process.umask()),n||(n=null),e=qd.resolve(e);try{s.mkdirSync(e,i),n=n||e}catch(a){switch(a.code){case"ENOENT":n=t(qd.dirname(e),r,n),t(e,r,n);break;default:var o;try{o=s.statSync(e)}catch{throw a}if(!o.isDirectory())throw a;break}}return n}});var UT=x(sy=>{var BW=zI(),NT=CT(),BT=ry(),PW=RT(),PT=require("fs"),Tr=require("path"),FW=require("os"),gc=FW.platform()==="win32",mc=function(){},iy=function(t){return t},ny=gc?function(t){return t.replace(/\\/g,"/").replace(/[:?<>|]/g,"_")}:iy,LW=function(t,e,r,n,i,s){var o=i||["."];return function(l){if(!o.length)return l();var u=o.shift(),c=Tr.join(r,u);e.call(t,c,function(f,h){if(f)return l(f);if(!h.isDirectory())return l(null,u,h);t.readdir(c,function(p,g){if(p)return l(p);s&&g.sort();for(var m=0;m<g.length;m++)n(Tr.join(r,u,g[m]))||o.push(Tr.join(u,g[m]));l(null,u,h)})})}},FT=function(t,e){return function(r){r.name=r.name.split("/").slice(e).join("/");var n=r.linkname;return n&&(r.type==="link"||Tr.isAbsolute(n))&&(r.linkname=n.split("/").slice(e).join("/")),t(r)}};sy.pack=function(t,e){t||(t="."),e||(e={});var r=e.fs||PT,n=e.ignore||e.filter||mc,i=e.map||mc,s=e.mapStream||iy,o=LW(r,e.dereference?r.stat:r.lstat,t,n,e.entries,e.sort),a=e.strict!==!1,l=typeof e.umask=="number"?~e.umask:~LT(),u=typeof e.dmode=="number"?e.dmode:0,c=typeof e.fmode=="number"?e.fmode:0,f=e.pack||NT.pack(),h=e.finish||mc;e.strip&&(i=FT(i,e.strip)),e.readable&&(u|=parseInt(555,8),c|=parseInt(444,8)),e.writable&&(u|=parseInt(333,8),c|=parseInt(222,8));var p=function(E,A){r.readlink(Tr.join(t,E),function(w,k){if(w)return f.destroy(w);A.linkname=ny(k),f.entry(A,m)})},g=function(E,A,w){if(E)return f.destroy(E);if(!A)return e.finalize!==!1&&f.finalize(),h(f);if(w.isSocket())return m();var k={name:ny(A),mode:(w.mode|(w.isDirectory()?u:c))&l,mtime:w.mtime,size:w.size,type:"file",uid:w.uid,gid:w.gid};if(w.isDirectory())return k.size=0,k.type="directory",k=i(k)||k,f.entry(k,m);if(w.isSymbolicLink())return k.size=0,k.type="symlink",k=i(k)||k,p(A,k);if(k=i(k)||k,!w.isFile())return a?f.destroy(new Error("unsupported type for "+A)):m();var S=f.entry(k,m);if(S){var B=s(r.createReadStream(Tr.join(t,A),{start:0,end:k.size>0?k.size-1:k.size}),k);B.on("error",function(F){S.destroy(F)}),BT(B,S)}},m=function(E){if(E)return f.destroy(E);o(g)};return m(),f};var MW=function(t){return t.length?t[t.length-1]:null},UW=function(){return process.getuid?process.getuid():-1},LT=function(){return process.umask?process.umask():0};sy.extract=function(t,e){t||(t="."),e||(e={});var r=e.fs||PT,n=e.ignore||e.filter||mc,i=e.map||mc,s=e.mapStream||iy,o=e.chown!==!1&&!gc&&UW()===0,a=e.extract||NT.extract(),l=[],u=new Date,c=typeof e.umask=="number"?~e.umask:~LT(),f=typeof e.dmode=="number"?e.dmode:0,h=typeof e.fmode=="number"?e.fmode:0,p=e.strict!==!1;e.strip&&(i=FT(i,e.strip)),e.readable&&(f|=parseInt(555,8),h|=parseInt(444,8)),e.writable&&(f|=parseInt(333,8),h|=parseInt(222,8));var g=function(A,w){for(var k;(k=MW(l))&&A.slice(0,k[0].length)!==k[0];)l.pop();if(!k)return w();r.utimes(k[0],u,k[1],w)},m=function(A,w,k){if(e.utimes===!1)return k();if(w.type==="directory")return r.utimes(A,u,w.mtime,k);if(w.type==="symlink")return g(A,k);r.utimes(A,u,w.mtime,function(S){if(S)return k(S);g(A,k)})},E=function(A,w,k){var S=w.type==="symlink",B=S?r.lchmod:r.chmod,F=S?r.lchown:r.chown;if(!B)return k();var M=(w.mode|(w.type==="directory"?f:h))&c;F&&o?F.call(r,A,w.uid,w.gid,D):D(null);function D(I){if(I)return k(I);if(!B)return k();B.call(r,A,M,k)}};return a.on("entry",function(A,w,k){A=i(A)||A,A.name=ny(A.name);var S=Tr.join(t,Tr.join("/",A.name));if(n(S,A))return w.resume(),k();var B=function(N){if(N)return k(N);m(S,A,function(T){if(T)return k(T);if(gc)return k();E(S,A,k)})},F=function(){if(gc)return k();r.unlink(S,function(){var N=Tr.resolve(Tr.dirname(S),A.linkname);if(!OT(N,t))return k(new Error(S+" is not a valid symlink"));r.symlink(A.linkname,S,B)})},M=function(){if(gc)return k();r.unlink(S,function(){var N=Tr.join(t,Tr.join("/",A.linkname));r.realpath(N,function(T,Q){if(T||!OT(Q,t))return k(new Error(S+" is not a valid hardlink"));r.link(Q,S,function(P){if(P&&P.code==="EPERM"&&e.hardlinkAsFilesFallback)return w=r.createReadStream(N),D();B(P)})})})},D=function(){var N=r.createWriteStream(S),T=s(w,A);N.on("error",function(Q){T.destroy(Q)}),BT(T,N,function(Q){if(Q)return k(Q);N.on("close",B)})};if(A.type==="directory")return l.push([S,A.mtime]),kT(S,{fs:r,own:o,uid:A.uid,gid:A.gid},B);var I=Tr.dirname(S);MT(r,I,Tr.join(t,"."),function(N,T){if(N)return k(N);if(!T)return k(new Error(I+" is not a valid path"));kT(I,{fs:r,own:o,uid:A.uid,gid:A.gid},function(Q){if(Q)return k(Q);switch(A.type){case"file":return D();case"link":return M();case"symlink":return F()}if(p)return k(new Error("unsupported type for "+S+" ("+A.type+")"));w.resume(),k()})})}),e.finish&&a.on("finish",e.finish),a};function MT(t,e,r,n){if(e===r)return n(null,!0);t.lstat(e,function(i,s){if(i&&i.code!=="ENOENT")return n(i);if(i||s.isDirectory())return MT(t,Tr.join(e,".."),r,n);n(null,!1)})}function kT(t,e,r){PW(t,{fs:e.fs},function(n,i){!n&&i&&e.own?BW(i,e.uid,e.gid,r):r(n)})}function OT(t,e){return e=Tr.resolve(e),e===t||t.startsWith(e+Tr.sep)}});var an=x((Yie,ul)=>{var qW=HI(),HW=require("fs"),WW=require("path"),QW=UT(),GW=require("zlib"),qT=[],jW=qT.forEach,$W=qT.slice;ul.exports.extend=function(t){return jW.call($W.call(arguments,1),function(e){if(e)for(var r in e)t[r]=e[r]}),t};ul.exports.processArgs=function(t,e,r){return!e&&typeof t=="function"&&(e=t,t=null),{callback:e,opts:ul.exports.extend({},r,t)}};ul.exports.parseRepositoryTag=function(t){var e,r=t.indexOf("@"),n=t.lastIndexOf(":");if(r>=0)e=r;else if(n>=0)e=n;else return{repository:t};var i=t.slice(e+1);return i.indexOf("/")===-1?{repository:t.slice(0,e),tag:i}:{repository:t}};ul.exports.prepareBuildContext=function(t,e){t&&t.context?HW.readFile(WW.join(t.context,".dockerignore"),(r,n)=>{let i,s;r||(s=qW({ignorecase:!1}).add(n.toString()).createFilter(),i=u=>!s(u));let o=t.src.slice()||[],a=QW.pack(t.context,{entries:s?o.filter(s):o,ignore:i});e(a.pipe(GW.createGzip()))}):e(t)}});var ay=x((Vie,HT)=>{var oy=an(),_c=function(t,e){this.modem=t,this.id=e};_c.prototype[require("util").inspect.custom]=function(){return this};_c.prototype.start=function(t,e){var r=this,n=oy.processArgs(t,e),i={path:"/exec/"+this.id+"/start",method:"POST",abortSignal:n.opts.abortSignal,isStream:!0,allowEmpty:!0,hijack:n.opts.hijack,openStdin:n.opts.stdin,statusCodes:{200:!0,204:!0,404:"no such exec",409:"container stopped/paused",500:"container not running"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){if(s)return n.callback(s,o);n.callback(s,o)})};_c.prototype.resize=function(t,e){var r=this,n=oy.processArgs(t,e),i={path:"/exec/"+this.id+"/resize?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such exec",500:"container not running"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){if(s)return n.callback(s,o);n.callback(s,o)})};_c.prototype.inspect=function(t,e){var r=this,n=oy.processArgs(t,e),i={path:"/exec/"+this.id+"/json",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such exec",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){if(s)return n.callback(s,o);n.callback(s,o)})};HT.exports=_c});var GT=x((Jie,QT)=>{var Xie=an().extend,WT=ay(),kt=an(),xt=function(t,e){this.modem=t,this.id=e,this.defaultOptions={top:{},start:{},commit:{},stop:{},pause:{},unpause:{},restart:{},resize:{},attach:{},remove:{},copy:{},kill:{},exec:{},rename:{},log:{},stats:{},getArchive:{},infoArchive:{},putArchive:{},update:{},wait:{}}};xt.prototype[require("util").inspect.custom]=function(){return this};xt.prototype.inspect=function(t,e){var r=this,n=kt.processArgs(t,e),i={path:"/containers/"+this.id+"/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such container",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.rename=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.rename),i={path:"/containers/"+this.id+"/rename?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.update=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.update),i={path:"/containers/"+this.id+"/update",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.top=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.top),i={path:"/containers/"+this.id+"/top?",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.changes=function(t,e){var r=this,n=kt.processArgs(t,e),i={path:"/containers/"+this.id+"/changes",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such container",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.listCheckpoint=function(t,e){var r=this,n=kt.processArgs(t,e),i={path:"/containers/"+this.id+"/checkpoints?",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.deleteCheckpoint=function(t,e,r){var n=this,i=kt.processArgs(e,r),s={path:"/containers/"+this.id+"/checkpoints/"+t+"?",method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:i.opts};if(i.callback===void 0)return new this.modem.Promise(function(o,a){n.modem.dial(s,function(l,u){if(l)return a(l);o(u)})});this.modem.dial(s,function(o,a){i.callback(o,a)})};xt.prototype.createCheckpoint=function(t,e){var r=this,n=kt.processArgs(t,e),i={path:"/containers/"+this.id+"/checkpoints",method:"POST",abortSignal:n.opts.abortSignal,allowEmpty:!0,statusCodes:{200:!0,201:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.export=function(t,e){var r=this,n=kt.processArgs(t,e),i={path:"/containers/"+this.id+"/export",method:"GET",abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,404:"no such container",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.start=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.start),i={path:"/containers/"+this.id+"/start?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,304:"container already started",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.pause=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.pause),i={path:"/containers/"+this.id+"/pause",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.unpause=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.unpause),i={path:"/containers/"+this.id+"/unpause",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.exec=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.exec),i={path:"/containers/"+this.id+"/exec",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"no such container",409:"container stopped/paused",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(new WT(r.modem,l.Id))})});this.modem.dial(i,function(s,o){if(s)return n.callback(s,o);n.callback(s,new WT(r.modem,o.Id))})};xt.prototype.commit=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.commit);n.opts.container=this.id;var i={path:"/commit?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.stop=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.stop),i={path:"/containers/"+this.id+"/stop?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,304:"container already stopped",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.restart=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.restart),i={path:"/containers/"+this.id+"/restart?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.kill=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.kill),i={path:"/containers/"+this.id+"/kill?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.resize=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.resize),i={path:"/containers/"+this.id+"/resize?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.attach=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.attach),i={path:"/containers/"+this.id+"/attach?",method:"POST",abortSignal:n.opts.abortSignal,isStream:!0,hijack:n.opts.hijack,openStdin:n.opts.stdin,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.wait=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.wait),i={path:"/containers/"+this.id+"/wait?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.remove=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.remove),i={path:"/containers/"+this.id+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.copy=function(t,e){var r=this;console.log("container.copy is deprecated since Docker v1.8.x");var n=kt.processArgs(t,e,this.defaultOptions.copy),i={path:"/containers/"+this.id+"/copy",method:"POST",abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.getArchive=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.getArchive),i={path:"/containers/"+this.id+"/archive?",method:"GET",abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,400:"client error, bad parameters",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.infoArchive=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.infoArchive),i={path:"/containers/"+this.id+"/archive?",method:"HEAD",abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,400:"client error, bad parameters",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.putArchive=function(t,e,r){var n=this,i=kt.processArgs(e,r,this.defaultOptions.putArchive),s={path:"/containers/"+this.id+"/archive?",method:"PUT",file:t,abortSignal:i.opts.abortSignal,statusCodes:{200:!0,400:"client error, bad parameters",403:"client error, permission denied",404:"no such container",500:"server error"},options:i.opts};if(i.callback===void 0)return new this.modem.Promise(function(o,a){n.modem.dial(s,function(l,u){if(l)return a(l);o(u)})});this.modem.dial(s,function(o,a){i.callback(o,a)})};xt.prototype.logs=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.log),i={path:"/containers/"+this.id+"/logs?",method:"GET",abortSignal:n.opts.abortSignal,isStream:n.opts.follow||!1,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};xt.prototype.stats=function(t,e){var r=this,n=kt.processArgs(t,e,this.defaultOptions.stats),i=!0;n.opts.stream===!1&&(i=!1);var s={path:"/containers/"+this.id+"/stats?",method:"GET",abortSignal:n.opts.abortSignal,isStream:i,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,a){r.modem.dial(s,function(l,u){if(l)return a(l);o(u)})});this.modem.dial(s,function(o,a){n.callback(o,a)})};QT.exports=xt});var $T=x((Zie,jT)=>{var Hd=an(),rs=function(t,e){this.modem=t,this.name=e};rs.prototype[require("util").inspect.custom]=function(){return this};rs.prototype.inspect=function(i,e){var r=Hd.processArgs(i,e),n=this,i={path:"/images/"+this.name+"/json",method:"GET",options:r.opts,statusCodes:{200:!0,404:"no such image",500:"server error"}};if(r.callback===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){if(s)return r.callback(s,o);r.callback(s,o)})};rs.prototype.distribution=function(t,e){var r=Hd.processArgs(t,e),n=this,i={path:"/distribution/"+this.name+"/json",method:"GET",statusCodes:{200:!0,401:"no such image",500:"server error"},authconfig:r.opts?r.opts.authconfig:void 0};if(r.callback===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){if(s)return r.callback(s,o);r.callback(s,o)})};rs.prototype.history=function(t){var e=this,r={path:"/images/"+this.name+"/history",method:"GET",statusCodes:{200:!0,404:"no such image",500:"server error"}};if(t===void 0)return new this.modem.Promise(function(n,i){e.modem.dial(r,function(s,o){if(s)return i(s);n(o)})});this.modem.dial(r,function(n,i){if(n)return t(n,i);t(n,i)})};rs.prototype.get=function(t){var e=this,r={path:"/images/"+this.name+"/get",method:"GET",isStream:!0,statusCodes:{200:!0,500:"server error"}};if(t===void 0)return new this.modem.Promise(function(n,i){e.modem.dial(r,function(s,o){if(s)return i(s);n(o)})});this.modem.dial(r,function(n,i){if(n)return t(n,i);t(n,i)})};rs.prototype.push=function(t,e,r){var n=this,i=Hd.processArgs(t,e),s=!0;i.opts.stream===!1&&(s=!1);var o={path:"/images/"+this.name+"/push?",method:"POST",options:i.opts,authconfig:i.opts.authconfig||r,abortSignal:i.opts.abortSignal,isStream:s,statusCodes:{200:!0,404:"no such image",500:"server error"}};if(delete o.options.authconfig,e===void 0)return new this.modem.Promise(function(a,l){n.modem.dial(o,function(u,c){if(u)return l(u);a(c)})});this.modem.dial(o,function(a,l){e(a,l)})};rs.prototype.tag=function(t,e){var r=this,n={path:"/images/"+this.name+"/tag?",method:"POST",options:t,abortSignal:t&&t.abortSignal,statusCodes:{200:!0,201:!0,400:"bad parameter",404:"no such image",409:"conflict",500:"server error"}};if(e===void 0)return new this.modem.Promise(function(i,s){r.modem.dial(n,function(o,a){if(o)return s(o);i(a)})});this.modem.dial(n,function(i,s){e(i,s)})};rs.prototype.remove=function(t,e){var r=this,n=Hd.processArgs(t,e),i={path:"/images/"+this.name+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such image",409:"conflict",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};jT.exports=rs});var YT=x((ese,zT)=>{var KT=an(),Wd=function(t,e){this.modem=t,this.name=e};Wd.prototype[require("util").inspect.custom]=function(){return this};Wd.prototype.inspect=function(t,e){var r=this,n=KT.processArgs(t,e),i={path:"/volumes/"+this.name,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such volume",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Wd.prototype.remove=function(t,e){var r=this,n=KT.processArgs(t,e),i={path:"/volumes/"+this.name,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{204:!0,404:"no such volume",409:"conflict",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};zT.exports=Wd});var XT=x((tse,VT)=>{var Qd=an(),cl=function(t,e){this.modem=t,this.id=e};cl.prototype[require("util").inspect.custom]=function(){return this};cl.prototype.inspect=function(i,e){var r=this,n=Qd.processArgs(i,e),i={path:"/networks/"+this.id+"?",method:"GET",statusCodes:{200:!0,404:"no such network",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};cl.prototype.remove=function(t,e){var r=this,n=Qd.processArgs(t,e),i={path:"/networks/"+this.id,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such network",409:"conflict",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};cl.prototype.connect=function(t,e){var r=this,n=Qd.processArgs(t,e),i={path:"/networks/"+this.id+"/connect",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"network or container is not found",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};cl.prototype.disconnect=function(t,e){var r=this,n=Qd.processArgs(t,e),i={path:"/networks/"+this.id+"/disconnect",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"network or container is not found",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};VT.exports=cl});var ZT=x((rse,JT)=>{var ly=an(),fl=function(t,e){this.modem=t,this.id=e};fl.prototype[require("util").inspect.custom]=function(){return this};fl.prototype.inspect=function(t,e){var r=this,n=ly.processArgs(t,e),i={path:"/services/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such service",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};fl.prototype.remove=function(t,e){var r=this,n=ly.processArgs(t,e),i={path:"/services/"+this.id,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such service",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};fl.prototype.update=function(t,e,r){var n=this;if(!r){var i=typeof e;i==="function"?(r=e,e=t,t=e.authconfig||void 0):i==="undefined"&&(e=t,t=e.authconfig||void 0)}var s={path:"/services/"+this.id+"/update?",method:"POST",abortSignal:e&&e.abortSignal,statusCodes:{200:!0,404:"no such service",500:"server error"},authconfig:t,options:e};if(r===void 0)return new this.modem.Promise(function(o,a){n.modem.dial(s,function(l,u){if(l)return a(l);o(u)})});this.modem.dial(s,function(o,a){r(o,a)})};fl.prototype.logs=function(t,e){var r=this,n=ly.processArgs(t,e,{}),i={path:"/services/"+this.id+"/logs?",method:"GET",abortSignal:n.opts.abortSignal,isStream:n.opts.follow||!1,statusCodes:{200:!0,404:"no such service",500:"server error",503:"node is not part of a swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};JT.exports=fl});var tR=x((nse,eR)=>{var js=an(),Yn=function(t,e,r){this.modem=t,this.name=e,this.remote=r||e};Yn.prototype[require("util").inspect.custom]=function(){return this};Yn.prototype.inspect=function(t,e){var r=this,n=js.processArgs(t,e),i={path:"/plugins/"+this.name+"/json",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"plugin is not installed",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Yn.prototype.remove=function(t,e){var r=this,n=js.processArgs(t,e),i={path:"/plugins/"+this.name+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"plugin is not installed",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){if(s)return n.callback(s,o);n.callback(s,o)})};Yn.prototype.privileges=function(t,e){var r=this,n=js.processArgs(t,e),i={path:"/plugins/privileges?",method:"GET",options:{remote:this.remote},abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Yn.prototype.pull=function(t,e){var r=this,n=js.processArgs(t,e);n.opts._query&&!n.opts._query.name&&(n.opts._query.name=this.name),n.opts._query&&!n.opts._query.remote&&(n.opts._query.remote=this.remote);var i={path:"/plugins/pull?",method:"POST",abortSignal:n.opts.abortSignal,isStream:!0,options:n.opts,statusCodes:{200:!0,204:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Yn.prototype.enable=function(t,e){var r=this,n=js.processArgs(t,e),i={path:"/plugins/"+this.name+"/enable?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Yn.prototype.disable=function(t,e){var r=this,n=js.processArgs(t,e),i={path:"/plugins/"+this.name+"/disable",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Yn.prototype.push=function(t,e){var r=this,n=js.processArgs(t,e),i={path:"/plugins/"+this.name+"/push",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"plugin not installed",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Yn.prototype.configure=function(t,e){var r=this,n=js.processArgs(t,e),i={path:"/plugins/"+this.name+"/set",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"plugin not installed",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Yn.prototype.upgrade=function(t,e,r){var n=this;!r&&typeof e=="function"&&(r=e,e=t,t=e.authconfig||void 0);var i={path:"/plugins/"+this.name+"/upgrade?",method:"POST",abortSignal:e&&e.abortSignal,statusCodes:{200:!0,204:!0,404:"plugin not installed",500:"server error"},authconfig:t,options:e};if(r===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){r(s,o)})};eR.exports=Yn});var iR=x((ise,nR)=>{var rR=an(),Ec=function(t,e){this.modem=t,this.id=e};Ec.prototype[require("util").inspect.custom]=function(){return this};Ec.prototype.inspect=function(t,e){var r=this,n=rR.processArgs(t,e),i={path:"/secrets/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"secret not found",406:"node is not part of a swarm",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Ec.prototype.update=function(t,e){var r=this;!e&&typeof t=="function"&&(e=t);var n={path:"/secrets/"+this.id+"/update?",method:"POST",abortSignal:t&&t.abortSignal,statusCodes:{200:!0,404:"secret not found",500:"server error"},options:t};if(e===void 0)return new this.modem.Promise(function(i,s){r.modem.dial(n,function(o,a){if(o)return s(o);i(a)})});this.modem.dial(n,function(i,s){e(i,s)})};Ec.prototype.remove=function(t,e){var r=this,n=rR.processArgs(t,e),i={path:"/secrets/"+this.id,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"secret not found",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};nR.exports=Ec});var oR=x((sse,sR)=>{var uy=an(),yc=function(t,e){this.modem=t,this.id=e};yc.prototype[require("util").inspect.custom]=function(){return this};yc.prototype.inspect=function(t,e){var r=this,n=uy.processArgs(t,e),i={path:"/configs/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"config not found",500:"server error",503:"node is not part of a swarm"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};yc.prototype.update=function(t,e){var r=this,n=uy.processArgs(t,e),i={path:"/configs/"+this.id+"/update?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"config not found",500:"server error",503:"node is not part of a swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};yc.prototype.remove=function(t,e){var r=this,n=uy.processArgs(t,e),i={path:"/configs/"+this.id,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"config not found",500:"server error",503:"node is not part of a swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};sR.exports=yc});var uR=x((ose,lR)=>{var aR=an(),Gd=function(t,e){this.modem=t,this.id=e,this.defaultOptions={log:{}}};Gd.prototype[require("util").inspect.custom]=function(){return this};Gd.prototype.inspect=function(t,e){var r=this,n=aR.processArgs(t,e),i={path:"/tasks/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"unknown task",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Gd.prototype.logs=function(t,e){var r=this,n=aR.processArgs(t,e,this.defaultOptions.log),i={path:"/tasks/"+this.id+"/logs?",method:"GET",abortSignal:n.opts.abortSignal,isStream:n.opts.follow||!1,statusCodes:{101:!0,200:!0,404:"no such container",500:"server error",503:"node is not part of a swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};lR.exports=Gd});var hR=x((ase,fR)=>{var cR=an(),Ac=function(t,e){this.modem=t,this.id=e};Ac.prototype[require("util").inspect.custom]=function(){return this};Ac.prototype.inspect=function(t,e){var r=this,n=cR.processArgs(t,e),i={path:"/nodes/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such node",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};Ac.prototype.update=function(t,e){var r=this;!e&&typeof t=="function"&&(e=t);var n={path:"/nodes/"+this.id+"/update?",method:"POST",abortSignal:t&&t.abortSignal,statusCodes:{200:!0,404:"no such node",406:"node is not part of a swarm",500:"server error"},options:t};if(e===void 0)return new this.modem.Promise(function(i,s){r.modem.dial(n,function(o,a){if(o)return s(o);i(a)})});this.modem.dial(n,function(i,s){e(i,s)})};Ac.prototype.remove=function(t,e){var r=this,n=cR.processArgs(t,e),i={path:"/nodes/"+this.id+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such node",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};fR.exports=Ac});var nt=x(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=Fn.DEFAULT_MAX_SEND_MESSAGE_LENGTH=Fn.Propagate=Fn.LogVerbosity=Fn.Status=void 0;var dR;(function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(dR||(Fn.Status=dR={}));var pR;(function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.NONE=3]="NONE"})(pR||(Fn.LogVerbosity=pR={}));var gR;(function(t){t[t.DEADLINE=1]="DEADLINE",t[t.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",t[t.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",t[t.CANCELLATION=8]="CANCELLATION",t[t.DEFAULTS=65535]="DEFAULTS"})(gR||(Fn.Propagate=gR={}));Fn.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;Fn.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024});var cy=x((use,KW)=>{KW.exports={name:"@grpc/grpc-js",version:"1.14.0",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:">=12.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@grpc/proto-loader":"file:../proto-loader","@types/gulp":"^4.0.17","@types/gulp-mocha":"0.0.37","@types/lodash":"^4.14.202","@types/mocha":"^10.0.6","@types/ncp":"^2.0.8","@types/node":">=20.11.20","@types/pify":"^5.0.4","@types/semver":"^7.5.8","@typescript-eslint/eslint-plugin":"^7.1.0","@typescript-eslint/parser":"^7.1.0","@typescript-eslint/typescript-estree":"^7.1.0","clang-format":"^1.8.0",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.21",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.6.0","ts-node":"^10.9.2",typescript:"^5.3.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run copy-protos && npm run generate-types && npm run generate-test-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs proto/ proto/xds/ proto/protoc-gen-validate/ -O src/generated/ --grpcLib ../index channelz.proto xds/service/orca/v3/orca.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto echo_service.proto","copy-protos":"node ./copy-protos"},dependencies:{"@grpc/proto-loader":"^0.8.0","@js-sdsl/ordered-map":"^4.4.2"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/**/*.proto","proto/**/LICENSE","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var Ot=x(_n=>{"use strict";var fy,hy,dy,py;Object.defineProperty(_n,"__esModule",{value:!0});_n.log=_n.setLoggerVerbosity=_n.setLogger=_n.getLogger=void 0;_n.trace=iQ;_n.isTracerEnabled=_R;var $s=nt(),zW=require("process"),YW=cy().version,VW={error:(t,...e)=>{console.error("E "+t,...e)},info:(t,...e)=>{console.error("I "+t,...e)},debug:(t,...e)=>{console.error("D "+t,...e)}},Uo=VW,hl=$s.LogVerbosity.ERROR,XW=(hy=(fy=process.env.GRPC_NODE_VERBOSITY)!==null&&fy!==void 0?fy:process.env.GRPC_VERBOSITY)!==null&&hy!==void 0?hy:"";switch(XW.toUpperCase()){case"DEBUG":hl=$s.LogVerbosity.DEBUG;break;case"INFO":hl=$s.LogVerbosity.INFO;break;case"ERROR":hl=$s.LogVerbosity.ERROR;break;case"NONE":hl=$s.LogVerbosity.NONE;break;default:}var JW=()=>Uo;_n.getLogger=JW;var ZW=t=>{Uo=t};_n.setLogger=ZW;var eQ=t=>{hl=t};_n.setLoggerVerbosity=eQ;var tQ=(t,...e)=>{let r;if(t>=hl){switch(t){case $s.LogVerbosity.DEBUG:r=Uo.debug;break;case $s.LogVerbosity.INFO:r=Uo.info;break;case $s.LogVerbosity.ERROR:r=Uo.error;break}r||(r=Uo.error),r&&r.bind(Uo)(...e)}};_n.log=tQ;var rQ=(py=(dy=process.env.GRPC_NODE_TRACE)!==null&&dy!==void 0?dy:process.env.GRPC_TRACE)!==null&&py!==void 0?py:"",gy=new Set,mR=new Set;for(let t of rQ.split(","))t.startsWith("-")?mR.add(t.substring(1)):gy.add(t);var nQ=gy.has("all");function iQ(t,e,r){_R(e)&&(0,_n.log)(t,new Date().toISOString()+" | v"+YW+" "+zW.pid+" | "+e+" | "+r)}function _R(t){return!mR.has(t)&&(nQ||gy.has(t))}});var $d=x(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.getErrorMessage=sQ;jd.getErrorCode=oQ;function sQ(t){return t instanceof Error?t.message:String(t)}function oQ(t){return typeof t=="object"&&t!==null&&"code"in t&&typeof t.code=="number"?t.code:null}});var br=x(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.Metadata=void 0;var aQ=Ot(),lQ=nt(),uQ=$d(),cQ=/^[:0-9a-z_.-]+$/,fQ=/^[ -~]*$/;function hQ(t){return cQ.test(t)}function dQ(t){return fQ.test(t)}function yR(t){return t.endsWith("-bin")}function pQ(t){return!t.startsWith("grpc-")}function Kd(t){return t.toLowerCase()}function ER(t,e){if(!hQ(t))throw new Error('Metadata key "'+t+'" contains illegal characters');if(e!=null)if(yR(t)){if(!Buffer.isBuffer(e))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(e))throw new Error("keys that don't end with '-bin' must have String values");if(!dQ(e))throw new Error('Metadata string value "'+e+'" contains illegal characters')}}var my=class t{constructor(e={}){this.internalRepr=new Map,this.opaqueData=new Map,this.options=e}set(e,r){e=Kd(e),ER(e,r),this.internalRepr.set(e,[r])}add(e,r){e=Kd(e),ER(e,r);let n=this.internalRepr.get(e);n===void 0?this.internalRepr.set(e,[r]):n.push(r)}remove(e){e=Kd(e),this.internalRepr.delete(e)}get(e){return e=Kd(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[r,n]of this.internalRepr)if(n.length>0){let i=n[0];e[r]=Buffer.isBuffer(i)?Buffer.from(i):i}return e}clone(){let e=new t(this.options),r=e.internalRepr;for(let[n,i]of this.internalRepr){let s=i.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);r.set(n,s)}return e}merge(e){for(let[r,n]of e.internalRepr){let i=(this.internalRepr.get(r)||[]).concat(n);this.internalRepr.set(r,i)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[r,n]of this.internalRepr)r.startsWith(":")||(e[r]=n.map(gQ));return e}toJSON(){let e={};for(let[r,n]of this.internalRepr)e[r]=n;return e}setOpaque(e,r){this.opaqueData.set(e,r)}getOpaque(e){return this.opaqueData.get(e)}static fromHttp2Headers(e){let r=new t;for(let n of Object.keys(e)){if(n.charAt(0)===":")continue;let i=e[n];try{yR(n)?Array.isArray(i)?i.forEach(s=>{r.add(n,Buffer.from(s,"base64"))}):i!==void 0&&(pQ(n)?i.split(",").forEach(s=>{r.add(n,Buffer.from(s.trim(),"base64"))}):r.add(n,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach(s=>{r.add(n,s)}):i!==void 0&&r.add(n,i)}catch(s){let o=`Failed to add metadata entry ${n}: ${i}. ${(0,uQ.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,aQ.log)(lQ.LogVerbosity.ERROR,o)}}return r}};zd.Metadata=my;var gQ=t=>Buffer.isBuffer(t)?t.toString("base64"):t});var Vd=x(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.CallCredentials=void 0;var Ay=br();function mQ(t){return"getRequestHeaders"in t&&typeof t.getRequestHeaders=="function"}var dl=class t{static createFromMetadataGenerator(e){return new Ey(e)}static createFromGoogleCredential(e){return t.createFromMetadataGenerator((r,n)=>{let i;mQ(e)?i=e.getRequestHeaders(r.service_url):i=new Promise((s,o)=>{e.getRequestMetadata(r.service_url,(a,l)=>{if(a){o(a);return}if(!l){o(new Error("Headers not set by metadata plugin"));return}s(l)})}),i.then(s=>{let o=new Ay.Metadata;for(let a of Object.keys(s))o.add(a,s[a]);n(null,o)},s=>{n(s)})})}static createEmpty(){return new yy}};Yd.CallCredentials=dl;var _y=class t extends dl{constructor(e){super(),this.creds=e}async generateMetadata(e){let r=new Ay.Metadata,n=await Promise.all(this.creds.map(i=>i.generateMetadata(e)));for(let i of n)r.merge(i);return r}compose(e){return new t(this.creds.concat([e]))}_equals(e){return this===e?!0:e instanceof t?this.creds.every((r,n)=>r._equals(e.creds[n])):!1}},Ey=class t extends dl{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((r,n)=>{this.metadataGenerator(e,(i,s)=>{s!==void 0?r(s):n(i)})})}compose(e){return new _y([this,e])}_equals(e){return this===e?!0:e instanceof t?this.metadataGenerator===e.metadataGenerator:!1}},yy=class t extends dl{generateMetadata(e){return Promise.resolve(new Ay.Metadata)}compose(e){return e}_equals(e){return e instanceof t}}});var by=x(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.CIPHER_SUITES=void 0;vc.getDefaultRootsData=EQ;var _Q=require("fs");vc.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var AR=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,vy=null;function EQ(){return AR?(vy===null&&(vy=_Q.readFileSync(AR)),vy):null}});var Kr=x(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.parseUri=AQ;pl.splitHostPort=vQ;pl.combineHostPort=bQ;pl.uriToString=SQ;var yQ=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function AQ(t){let e=yQ.exec(t);return e===null?null:{scheme:e[1],authority:e[2],path:e[3]}}var vR=/^\d+$/;function vQ(t){if(t.startsWith("[")){let e=t.indexOf("]");if(e===-1)return null;let r=t.substring(1,e);if(r.indexOf(":")===-1)return null;if(t.length>e+1)if(t[e+1]===":"){let n=t.substring(e+2);return vR.test(n)?{host:r,port:+n}:null}else return null;else return{host:r}}else{let e=t.split(":");return e.length===2?vR.test(e[1])?{host:e[0],port:+e[1]}:null:{host:t}}}function bQ(t){return t.port===void 0?t.host:t.host.includes(":")?`[${t.host}]:${t.port}`:`${t.host}:${t.port}`}function SQ(t){let e="";return t.scheme!==void 0&&(e+=t.scheme+":"),t.authority!==void 0&&(e+="//"+t.authority+"/"),e+=t.path,e}});var Vn=x(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.CHANNEL_ARGS_CONFIG_SELECTOR_KEY=void 0;ns.registerResolver=CQ;ns.registerDefaultScheme=wQ;ns.createResolver=xQ;ns.getDefaultAuthority=DQ;ns.mapUriDefaultScheme=IQ;var Cy=Kr();ns.CHANNEL_ARGS_CONFIG_SELECTOR_KEY="grpc.internal.config_selector";var gl={},Sy=null;function CQ(t,e){gl[t]=e}function wQ(t){Sy=t}function xQ(t,e,r){if(t.scheme!==void 0&&t.scheme in gl)return new gl[t.scheme](t,e,r);throw new Error(`No resolver could be created for target ${(0,Cy.uriToString)(t)}`)}function DQ(t){if(t.scheme!==void 0&&t.scheme in gl)return gl[t.scheme].getDefaultAuthority(t);throw new Error(`Invalid target ${(0,Cy.uriToString)(t)}`)}function IQ(t){return t.scheme===void 0||!(t.scheme in gl)?Sy!==null?{scheme:Sy,authority:void 0,path:(0,Cy.uriToString)(t)}:null:t}});var ml=x(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.ChannelCredentials=void 0;Sc.createCertificateProviderChannelCredentials=OQ;var bc=require("tls"),Zd=Vd(),xy=by(),bR=Kr(),TQ=Vn(),RQ=Ot(),kQ=nt();function wy(t,e){if(t&&!(t instanceof Buffer))throw new TypeError(`${e}, if provided, must be a Buffer.`)}var qo=class{compose(e){return new Ty(this,e)}static createSsl(e,r,n,i){var s;if(wy(e,"Root certificate"),wy(r,"Private key"),wy(n,"Certificate chain"),r&&!n)throw new Error("Private key must be given with accompanying certificate chain");if(!r&&n)throw new Error("Certificate chain must be given with accompanying private key");let o=(0,bc.createSecureContext)({ca:(s=e??(0,xy.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,key:r??void 0,cert:n??void 0,ciphers:xy.CIPHER_SUITES});return new Xd(o,i??{})}static createFromSecureContext(e,r){return new Xd(e,r??{})}static createInsecure(){return new Dy}};Sc.ChannelCredentials=qo;var Dy=class t extends qo{constructor(){super()}compose(e){throw new Error("Cannot compose insecure credentials")}_isSecure(){return!1}_equals(e){return e instanceof t}_createSecureConnector(e,r,n){return{connect(i){return Promise.resolve({socket:i,secure:!1})},waitForReady:()=>Promise.resolve(),getCallCredentials:()=>n??Zd.CallCredentials.createEmpty(),destroy(){}}}};function SR(t,e,r,n){var i,s;let o={secureContext:t},a=r;if("grpc.http_connect_target"in n){let f=(0,bR.parseUri)(n["grpc.http_connect_target"]);f&&(a=f)}let l=(0,TQ.getDefaultAuthority)(a),u=(0,bR.splitHostPort)(l),c=(i=u?.host)!==null&&i!==void 0?i:l;if(o.host=c,e.checkServerIdentity&&(o.checkServerIdentity=e.checkServerIdentity),e.rejectUnauthorized!==void 0&&(o.rejectUnauthorized=e.rejectUnauthorized),o.ALPNProtocols=["h2"],n["grpc.ssl_target_name_override"]){let f=n["grpc.ssl_target_name_override"],h=(s=o.checkServerIdentity)!==null&&s!==void 0?s:bc.checkServerIdentity;o.checkServerIdentity=(p,g)=>h(f,g),o.servername=f}else o.servername=c;return n["grpc-node.tls_enable_trace"]&&(o.enableTrace=!0),o}var Iy=class{constructor(e,r){this.connectionOptions=e,this.callCredentials=r}connect(e){let r=Object.assign({socket:e},this.connectionOptions);return new Promise((n,i)=>{let s=(0,bc.connect)(r,()=>{var o;if((!((o=this.connectionOptions.rejectUnauthorized)!==null&&o!==void 0)||o)&&!s.authorized){i(s.authorizationError);return}n({socket:s,secure:!0})});s.on("error",o=>{i(o)})})}waitForReady(){return Promise.resolve()}getCallCredentials(){return this.callCredentials}destroy(){}},Xd=class t extends qo{constructor(e,r){super(),this.secureContext=e,this.verifyOptions=r}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof t?this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity:!1}_createSecureConnector(e,r,n){let i=SR(this.secureContext,this.verifyOptions,e,r);return new Iy(i,n??Zd.CallCredentials.createEmpty())}},Jd=class t extends qo{constructor(e,r,n){super(),this.caCertificateProvider=e,this.identityCertificateProvider=r,this.verifyOptions=n,this.refcount=0,this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this),this.secureContextWatchers=[]}_isSecure(){return!0}_equals(e){var r,n;return this===e?!0:e instanceof t?this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&((r=this.verifyOptions)===null||r===void 0?void 0:r.checkServerIdentity)===((n=e.verifyOptions)===null||n===void 0?void 0:n.checkServerIdentity):!1}ref(){var e;this.refcount===0&&(this.caCertificateProvider.addCaCertificateListener(this.caCertificateUpdateListener),(e=this.identityCertificateProvider)===null||e===void 0||e.addIdentityCertificateListener(this.identityCertificateUpdateListener)),this.refcount+=1}unref(){var e;this.refcount-=1,this.refcount===0&&(this.caCertificateProvider.removeCaCertificateListener(this.caCertificateUpdateListener),(e=this.identityCertificateProvider)===null||e===void 0||e.removeIdentityCertificateListener(this.identityCertificateUpdateListener))}_createSecureConnector(e,r,n){return this.ref(),new t.SecureConnectorImpl(this,e,r,n??Zd.CallCredentials.createEmpty())}maybeUpdateWatchers(){if(this.hasReceivedUpdates()){for(let e of this.secureContextWatchers)e(this.getLatestSecureContext());this.secureContextWatchers=[]}}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.maybeUpdateWatchers()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.maybeUpdateWatchers()}hasReceivedUpdates(){return!(this.latestCaUpdate===void 0||this.identityCertificateProvider&&this.latestIdentityUpdate===void 0)}getSecureContext(){return this.hasReceivedUpdates()?Promise.resolve(this.getLatestSecureContext()):new Promise(e=>{this.secureContextWatchers.push(e)})}getLatestSecureContext(){var e,r;if(!this.latestCaUpdate||this.identityCertificateProvider!==null&&!this.latestIdentityUpdate)return null;try{return(0,bc.createSecureContext)({ca:this.latestCaUpdate.caCertificate,key:(e=this.latestIdentityUpdate)===null||e===void 0?void 0:e.privateKey,cert:(r=this.latestIdentityUpdate)===null||r===void 0?void 0:r.certificate,ciphers:xy.CIPHER_SUITES})}catch(n){return(0,RQ.log)(kQ.LogVerbosity.ERROR,"Failed to createSecureContext with error "+n.message),null}}};Jd.SecureConnectorImpl=class{constructor(t,e,r,n){this.parent=t,this.channelTarget=e,this.options=r,this.callCredentials=n}connect(t){return new Promise((e,r)=>{let n=this.parent.getLatestSecureContext();if(!n){r(new Error("Failed to load credentials"));return}t.closed&&r(new Error("Socket closed while loading credentials"));let i=SR(n,this.parent.verifyOptions,this.channelTarget,this.options),s=Object.assign({socket:t},i),o=()=>{r(new Error("Socket closed"))},a=u=>{r(u)},l=(0,bc.connect)(s,()=>{var u;if(l.removeListener("close",o),l.removeListener("error",a),(!((u=this.parent.verifyOptions.rejectUnauthorized)!==null&&u!==void 0)||u)&&!l.authorized){r(l.authorizationError);return}e({socket:l,secure:!0})});l.once("close",o),l.once("error",a)})}async waitForReady(){await this.parent.getSecureContext()}getCallCredentials(){return this.callCredentials}destroy(){this.parent.unref()}};function OQ(t,e,r){return new Jd(t,e,r??{})}var Ty=class t extends qo{constructor(e,r){if(super(),this.channelCredentials=e,this.callCredentials=r,!e._isSecure())throw new Error("Cannot compose insecure credentials")}compose(e){let r=this.callCredentials.compose(e);return new t(this.channelCredentials,r)}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof t?this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials):!1}_createSecureConnector(e,r,n){let i=this.callCredentials.compose(n??Zd.CallCredentials.createEmpty());return this.channelCredentials._createSecureConnector(e,r,i)}}});var zs=x(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.createChildChannelControlHelper=PQ;Si.registerLoadBalancerType=FQ;Si.registerDefaultLoadBalancerType=LQ;Si.createLoadBalancer=MQ;Si.isLoadBalancerNameRegistered=UQ;Si.parseLoadBalancingConfig=CR;Si.getDefaultConfig=qQ;Si.selectLbConfigFromList=HQ;var NQ=Ot(),BQ=nt();function PQ(t,e){var r,n,i,s,o,a,l,u,c,f;return{createSubchannel:(n=(r=e.createSubchannel)===null||r===void 0?void 0:r.bind(e))!==null&&n!==void 0?n:t.createSubchannel.bind(t),updateState:(s=(i=e.updateState)===null||i===void 0?void 0:i.bind(e))!==null&&s!==void 0?s:t.updateState.bind(t),requestReresolution:(a=(o=e.requestReresolution)===null||o===void 0?void 0:o.bind(e))!==null&&a!==void 0?a:t.requestReresolution.bind(t),addChannelzChild:(u=(l=e.addChannelzChild)===null||l===void 0?void 0:l.bind(e))!==null&&u!==void 0?u:t.addChannelzChild.bind(t),removeChannelzChild:(f=(c=e.removeChannelzChild)===null||c===void 0?void 0:c.bind(e))!==null&&f!==void 0?f:t.removeChannelzChild.bind(t)}}var Ks={},Cc=null;function FQ(t,e,r){Ks[t]={LoadBalancer:e,LoadBalancingConfig:r}}function LQ(t){Cc=t}function MQ(t,e){let r=t.getLoadBalancerName();return r in Ks?new Ks[r].LoadBalancer(e):null}function UQ(t){return t in Ks}function CR(t){let e=Object.keys(t);if(e.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let r=e[0];if(r in Ks)try{return Ks[r].LoadBalancingConfig.createFromJson(t[r])}catch(n){throw new Error(`${r}: ${n.message}`)}else throw new Error(`Unrecognized load balancing config name ${r}`)}function qQ(){if(!Cc)throw new Error("No default load balancer type registered");return new Ks[Cc].LoadBalancingConfig}function HQ(t,e=!1){for(let r of t)try{return CR(r)}catch(n){(0,NQ.log)(BQ.LogVerbosity.DEBUG,"Config parsing failed with error",n.message);continue}return e&&Cc?new Ks[Cc].LoadBalancingConfig:null}});var Ry=x(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.validateRetryThrottling=wR;wc.validateServiceConfig=xR;wc.extractAndSelectServiceConfig=XQ;var WQ=require("os"),ep=nt(),tp=/^\d+(\.\d{1,9})?s$/,QQ="node";function GQ(t){if("service"in t&&t.service!==""){if(typeof t.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof t.service}`);if("method"in t&&t.method!==""){if(typeof t.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof t.service}`);return{service:t.service,method:t.method}}else return{service:t.service}}else{if("method"in t&&t.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return{}}}function jQ(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in t)||typeof t.initialBackoff!="string"||!tp.test(t.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("maxBackoff"in t)||typeof t.maxBackoff!="string"||!tp.test(t.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("backoffMultiplier"in t)||typeof t.backoffMultiplier!="number"||t.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in t&&Array.isArray(t.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(t.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let e of t.retryableStatusCodes)if(typeof e=="number"){if(!Object.values(ep.Status).includes(e))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(ep.Status).includes(e.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:t.maxAttempts,initialBackoff:t.initialBackoff,maxBackoff:t.maxBackoff,backoffMultiplier:t.backoffMultiplier,retryableStatusCodes:t.retryableStatusCodes}}function $Q(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in t&&(typeof t.hedgingDelay!="string"||!tp.test(t.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in t&&Array.isArray(t.nonFatalStatusCodes))for(let r of t.nonFatalStatusCodes)if(typeof r=="number"){if(!Object.values(ep.Status).includes(r))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof r=="string"){if(!Object.values(ep.Status).includes(r.toUpperCase()))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value must be a string or number");let e={maxAttempts:t.maxAttempts};return t.hedgingDelay&&(e.hedgingDelay=t.hedgingDelay),t.nonFatalStatusCodes&&(e.nonFatalStatusCodes=t.nonFatalStatusCodes),e}function KQ(t){var e;let r={name:[]};if(!("name"in t)||!Array.isArray(t.name))throw new Error("Invalid method config: invalid name array");for(let n of t.name)r.name.push(GQ(n));if("waitForReady"in t){if(typeof t.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");r.waitForReady=t.waitForReady}if("timeout"in t)if(typeof t.timeout=="object"){if(!("seconds"in t.timeout)||typeof t.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in t.timeout)||typeof t.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");r.timeout=t.timeout}else if(typeof t.timeout=="string"&&tp.test(t.timeout)){let n=t.timeout.substring(0,t.timeout.length-1).split(".");r.timeout={seconds:n[0]|0,nanos:((e=n[1])!==null&&e!==void 0?e:0)|0}}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in t){if(typeof t.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=t.maxRequestBytes}if("maxResponseBytes"in t){if(typeof t.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=t.maxResponseBytes}if("retryPolicy"in t){if("hedgingPolicy"in t)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");r.retryPolicy=jQ(t.retryPolicy)}else"hedgingPolicy"in t&&(r.hedgingPolicy=$Q(t.hedgingPolicy));return r}function wR(t){if(!("maxTokens"in t)||typeof t.maxTokens!="number"||t.maxTokens<=0||t.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in t)||typeof t.tokenRatio!="number"||t.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+t.maxTokens.toFixed(3),tokenRatio:+t.tokenRatio.toFixed(3)}}function zQ(t){if(!(typeof t=="object"&&t!==null))throw new Error(`Invalid loadBalancingConfig: unexpected type ${typeof t}`);let e=Object.keys(t);if(e.length>1)throw new Error(`Invalid loadBalancingConfig: unexpected multiple keys ${e}`);if(e.length===0)throw new Error("Invalid loadBalancingConfig: load balancing policy name required");return{[e[0]]:t[e[0]]}}function xR(t){let e={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in t)if(typeof t.loadBalancingPolicy=="string")e.loadBalancingPolicy=t.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in t)if(Array.isArray(t.loadBalancingConfig))for(let n of t.loadBalancingConfig)e.loadBalancingConfig.push(zQ(n));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in t&&Array.isArray(t.methodConfig))for(let n of t.methodConfig)e.methodConfig.push(KQ(n));"retryThrottling"in t&&(e.retryThrottling=wR(t.retryThrottling));let r=[];for(let n of e.methodConfig)for(let i of n.name){for(let s of r)if(i.service===s.service&&i.method===s.method)throw new Error(`Invalid service config: duplicate name ${i.service}/${i.method}`);r.push(i)}return e}function YQ(t){if(!("serviceConfig"in t))throw new Error("Invalid service config choice: missing service config");let e={serviceConfig:xR(t.serviceConfig)};if("clientLanguage"in t)if(Array.isArray(t.clientLanguage)){e.clientLanguage=[];for(let n of t.clientLanguage)if(typeof n=="string")e.clientLanguage.push(n);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in t)if(Array.isArray(t.clientHostname)){e.clientHostname=[];for(let n of t.clientHostname)if(typeof n=="string")e.clientHostname.push(n);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in t)if(typeof t.percentage=="number"&&0<=t.percentage&&t.percentage<=100)e.percentage=t.percentage;else throw new Error("Invalid service config choice: invalid percentage");let r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let n in t)if(!r.includes(n))throw new Error(`Invalid service config choice: unexpected field ${n}`);return e}function VQ(t,e){if(!Array.isArray(t))throw new Error("Invalid service config list");for(let r of t){let n=YQ(r);if(!(typeof n.percentage=="number"&&e>n.percentage)){if(Array.isArray(n.clientHostname)){let i=!1;for(let s of n.clientHostname)s===WQ.hostname()&&(i=!0);if(!i)continue}if(Array.isArray(n.clientLanguage)){let i=!1;for(let s of n.clientLanguage)s===QQ&&(i=!0);if(!i)continue}return n.serviceConfig}}throw new Error("No matching service config found")}function XQ(t,e){for(let r of t)if(r.length>0&&r[0].startsWith("grpc_config=")){let n=r.join("").substring(12),i=JSON.parse(n);return VQ(i,e)}return null}});var zr=x(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.ConnectivityState=void 0;var DR;(function(t){t[t.IDLE=0]="IDLE",t[t.CONNECTING=1]="CONNECTING",t[t.READY=2]="READY",t[t.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",t[t.SHUTDOWN=4]="SHUTDOWN"})(DR||(rp.ConnectivityState=DR={}))});var is=x(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.QueuePicker=Ys.UnavailablePicker=Ys.PickResultType=void 0;var JQ=br(),ZQ=nt(),np;(function(t){t[t.COMPLETE=0]="COMPLETE",t[t.QUEUE=1]="QUEUE",t[t.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",t[t.DROP=3]="DROP"})(np||(Ys.PickResultType=np={}));var ky=class{constructor(e){this.status=Object.assign({code:ZQ.Status.UNAVAILABLE,details:"No connection established",metadata:new JQ.Metadata},e)}pick(e){return{pickResultType:np.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};Ys.UnavailablePicker=ky;var Oy=class{constructor(e,r){this.loadBalancer=e,this.childPicker=r,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),this.childPicker?this.childPicker.pick(e):{pickResultType:np.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};Ys.QueuePicker=Oy});var _l=x(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.BackoffTimeout=void 0;var eG=nt(),tG=Ot(),rG="backoff",nG=1e3,iG=1.6,sG=12e4,oG=.2;function aG(t,e){return Math.random()*(e-t)+t}var ip=class t{constructor(e,r){this.callback=e,this.initialDelay=nG,this.multiplier=iG,this.maxDelay=sG,this.jitter=oG,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,this.id=t.getNextId(),r&&(r.initialDelay&&(this.initialDelay=r.initialDelay),r.multiplier&&(this.multiplier=r.multiplier),r.jitter&&(this.jitter=r.jitter),r.maxDelay&&(this.maxDelay=r.maxDelay)),this.trace("constructed initialDelay="+this.initialDelay+" multiplier="+this.multiplier+" jitter="+this.jitter+" maxDelay="+this.maxDelay),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}static getNextId(){return this.nextId++}trace(e){tG.trace(eG.LogVerbosity.DEBUG,rG,"{"+this.id+"} "+e)}runTimer(e){var r,n;this.trace("runTimer(delay="+e+")"),this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+e),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.trace("timer fired"),this.running=!1,this.callback()},e),this.hasRef||(n=(r=this.timerId).unref)===null||n===void 0||n.call(r)}runOnce(){this.trace("runOnce()"),this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),r=e*this.jitter;this.nextDelay=e+aG(-r,r)}stop(){this.trace("stop()"),clearTimeout(this.timerId),this.running=!1}reset(){if(this.trace("reset() running="+this.running),this.nextDelay=this.initialDelay,this.running){let e=new Date,r=this.startTime;r.setMilliseconds(r.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<r?this.runTimer(r.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,r;this.hasRef=!0,(r=(e=this.timerId).ref)===null||r===void 0||r.call(e)}unref(){var e,r;this.hasRef=!1,(r=(e=this.timerId).unref)===null||r===void 0||r.call(e)}getEndTime(){return this.endTime}};sp.BackoffTimeout=ip;ip.nextId=0});var ap=x(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.ChildLoadBalancerHandler=void 0;var lG=zs(),uG=zr(),cG="child_load_balancer_helper",Ny=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(r){this.parent=r,this.child=null}createSubchannel(r,n){return this.parent.channelControlHelper.createSubchannel(r,n)}updateState(r,n,i){var s;if(this.calledByPendingChild()){if(r===uG.ConnectivityState.CONNECTING)return;(s=this.parent.currentChild)===null||s===void 0||s.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(r,n,i)}requestReresolution(){var r;let n=(r=this.parent.pendingChild)!==null&&r!==void 0?r:this.parent.currentChild;this.child===n&&this.parent.channelControlHelper.requestReresolution()}setChild(r){this.child=r}addChannelzChild(r){this.parent.channelControlHelper.addChannelzChild(r)}removeChannelzChild(r){this.parent.channelControlHelper.removeChannelzChild(r)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,r){return e.getLoadBalancerName()!==r.getLoadBalancerName()}updateAddressList(e,r,n,i){let s;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,r)){let o=new this.ChildPolicyHelper(this),a=(0,lG.createLoadBalancer)(r,o);o.setChild(a),this.currentChild===null?(this.currentChild=a,s=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=a,s=this.pendingChild)}else this.pendingChild===null?s=this.currentChild:s=this.pendingChild;return this.latestConfig=r,s.updateAddressList(e,r,n,i)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return cG}};op.ChildLoadBalancerHandler=Ny});var RR=x(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.ResolvingLoadBalancer=void 0;var fG=zs(),hG=Ry(),ln=zr(),IR=Vn(),xc=is(),dG=_l(),By=nt(),pG=br(),gG=Ot(),mG=nt(),_G=Kr(),EG=ap(),yG="resolving_load_balancer";function TR(t){gG.trace(mG.LogVerbosity.DEBUG,yG,t)}var AG=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function vG(t,e,r,n){for(let i of r.name)switch(n){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===t&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===t&&i.method===e)return!0}return!1}function bG(t,e,r,n){for(let i of r)if(vG(t,e,i,n))return i;return null}function SG(t){return{invoke(e,r){var n,i;let s=e.split("/").filter(l=>l.length>0),o=(n=s[0])!==null&&n!==void 0?n:"",a=(i=s[1])!==null&&i!==void 0?i:"";if(t&&t.methodConfig)for(let l of AG){let u=bG(o,a,t.methodConfig,l);if(u)return{methodConfig:u,pickInformation:{},status:By.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:By.Status.OK,dynamicFilterFactories:[]}},unref(){}}}var Py=class{constructor(e,r,n,i,s){this.target=e,this.channelControlHelper=r,this.channelOptions=n,this.onSuccessfulResolution=i,this.onFailedResolution=s,this.latestChildState=ln.ConnectivityState.IDLE,this.latestChildPicker=new xc.QueuePicker(this),this.latestChildErrorMessage=null,this.currentState=ln.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,n["grpc.service_config"]?this.defaultServiceConfig=(0,hG.validateServiceConfig)(JSON.parse(n["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(ln.ConnectivityState.IDLE,new xc.QueuePicker(this),null),this.childLoadBalancer=new EG.ChildLoadBalancerHandler({createSubchannel:r.createSubchannel.bind(r),requestReresolution:()=>{this.backoffTimeout.isRunning()?(TR("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(a,l,u)=>{this.latestChildState=a,this.latestChildPicker=l,this.latestChildErrorMessage=u,this.updateState(a,l,u)},addChannelzChild:r.addChannelzChild.bind(r),removeChannelzChild:r.removeChannelzChild.bind(r)}),this.innerResolver=(0,IR.createResolver)(e,this.handleResolverResult.bind(this),n);let o={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new dG.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker,this.latestChildErrorMessage)},o),this.backoffTimeout.unref()}handleResolverResult(e,r,n,i){var s,o;this.backoffTimeout.stop(),this.backoffTimeout.reset();let a=!0,l=null;if(n===null?l=this.defaultServiceConfig:n.ok?l=n.value:this.previousServiceConfig!==null?l=this.previousServiceConfig:(a=!1,this.handleResolutionFailure(n.error)),l!==null){let u=(s=l?.loadBalancingConfig)!==null&&s!==void 0?s:[],c=(0,fG.selectLbConfigFromList)(u,!0);c===null?(a=!1,this.handleResolutionFailure({code:By.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new pG.Metadata})):a=this.childLoadBalancer.updateAddressList(e,c,Object.assign(Object.assign({},this.channelOptions),r),i)}return a&&this.onSuccessfulResolution(l,(o=r[IR.CHANNEL_ARGS_CONFIG_SELECTOR_KEY])!==null&&o!==void 0?o:SG(l)),a}updateResolution(){this.innerResolver.updateResolution(),this.currentState===ln.ConnectivityState.IDLE&&this.updateState(ln.ConnectivityState.CONNECTING,this.latestChildPicker,this.latestChildErrorMessage),this.backoffTimeout.runOnce()}updateState(e,r,n){TR((0,_G.uriToString)(this.target)+" "+ln.ConnectivityState[this.currentState]+" -> "+ln.ConnectivityState[e]),e===ln.ConnectivityState.IDLE&&(r=new xc.QueuePicker(this,r)),this.currentState=e,this.channelControlHelper.updateState(e,r,n)}handleResolutionFailure(e){this.latestChildState===ln.ConnectivityState.IDLE&&(this.updateState(ln.ConnectivityState.TRANSIENT_FAILURE,new xc.UnavailablePicker(e),e.details),this.onFailedResolution(e))}exitIdle(){(this.currentState===ln.ConnectivityState.IDLE||this.currentState===ln.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,r){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=ln.ConnectivityState.IDLE,this.latestChildPicker=new xc.QueuePicker(this),this.currentState=ln.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}};lp.ResolvingLoadBalancer=Py});var kR=x(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.recognizedOptions=void 0;Dc.channelOptionsEqual=CG;Dc.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0,"grpc.lb.ring_hash.ring_size_cap":!0,"grpc-node.retry_max_attempts_limit":!0,"grpc-node.flow_control_window":!0,"grpc.server_call_metric_recording":!0};function CG(t,e){let r=Object.keys(t).sort(),n=Object.keys(e).sort();if(r.length!==n.length)return!1;for(let i=0;i<r.length;i+=1)if(r[i]!==n[i]||t[r[i]]!==e[n[i]])return!1;return!0}});var un=x(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.EndpointMap=void 0;Xn.isTcpSubchannelAddress=Tc;Xn.subchannelAddressEqual=up;Xn.subchannelAddressToString=NR;Xn.stringToSubchannelAddress=xG;Xn.endpointEqual=DG;Xn.endpointToString=IG;Xn.endpointHasAddress=BR;var OR=require("net");function Tc(t){return"port"in t}function up(t,e){return!t&&!e?!0:!t||!e?!1:Tc(t)?Tc(e)&&t.host===e.host&&t.port===e.port:!Tc(e)&&t.path===e.path}function NR(t){return Tc(t)?(0,OR.isIPv6)(t.host)?"["+t.host+"]:"+t.port:t.host+":"+t.port:t.path}var wG=443;function xG(t,e){return(0,OR.isIP)(t)?{host:t,port:e??wG}:{path:t}}function DG(t,e){if(t.addresses.length!==e.addresses.length)return!1;for(let r=0;r<t.addresses.length;r++)if(!up(t.addresses[r],e.addresses[r]))return!1;return!0}function IG(t){return"["+t.addresses.map(NR).join(", ")+"]"}function BR(t,e){for(let r of t.addresses)if(up(r,e))return!0;return!1}function Ic(t,e){if(t.addresses.length!==e.addresses.length)return!1;for(let r of t.addresses){let n=!1;for(let i of e.addresses)if(up(r,i)){n=!0;break}if(!n)return!1}return!0}var Fy=class{constructor(){this.map=new Set}get size(){return this.map.size}getForSubchannelAddress(e){for(let r of this.map)if(BR(r.key,e))return r.value}deleteMissing(e){let r=[];for(let n of this.map){let i=!1;for(let s of e)Ic(s,n.key)&&(i=!0);i||(r.push(n.value),this.map.delete(n))}return r}get(e){for(let r of this.map)if(Ic(e,r.key))return r.value}set(e,r){for(let n of this.map)if(Ic(e,n.key)){n.value=r;return}this.map.add({key:e,value:r})}delete(e){for(let r of this.map)if(Ic(e,r.key)){this.map.delete(r);return}}has(e){for(let r of this.map)if(Ic(e,r.key))return!0;return!1}clear(){this.map.clear()}*keys(){for(let e of this.map)yield e.key}*values(){for(let e of this.map)yield e.value}*entries(){for(let e of this.map)yield[e.key,e.value]}};Xn.EndpointMap=Fy});var PR=x(Gy=>{"use strict";Object.defineProperty(Gy,"t",{value:!0});var cp=class{constructor(e,r,n=1){this.i=void 0,this.h=void 0,this.o=void 0,this.u=e,this.l=r,this.p=n}I(){let e=this,r=e.o.o===e;if(r&&e.p===1)e=e.h;else if(e.i)for(e=e.i;e.h;)e=e.h;else{if(r)return e.o;let n=e.o;for(;n.i===e;)e=n,n=e.o;e=n}return e}B(){let e=this;if(e.h){for(e=e.h;e.i;)e=e.i;return e}else{let r=e.o;for(;r.h===e;)e=r,r=e.o;return e.h!==r?r:e}}_(){let e=this.o,r=this.h,n=r.i;return e.o===this?e.o=r:e.i===this?e.i=r:e.h=r,r.o=e,r.i=this,this.o=r,this.h=n,n&&(n.o=this),r}g(){let e=this.o,r=this.i,n=r.h;return e.o===this?e.o=r:e.i===this?e.i=r:e.h=r,r.o=e,r.h=this,this.o=r,this.i=n,n&&(n.o=this),r}},Ly=class extends cp{constructor(){super(...arguments),this.M=1}_(){let e=super._();return this.O(),e.O(),e}g(){let e=super.g();return this.O(),e.O(),e}O(){this.M=1,this.i&&(this.M+=this.i.M),this.h&&(this.M+=this.h.M)}},My=class{constructor(e=0){this.iteratorType=e}equals(e){return this.T===e.T}},Uy=class{constructor(){this.m=0}get length(){return this.m}size(){return this.m}empty(){return this.m===0}},qy=class extends Uy{};function Ho(){throw new RangeError("Iterator access denied!")}var Hy=class extends qy{constructor(e=function(n,i){return n<i?-1:n>i?1:0},r=!1){super(),this.v=void 0,this.A=e,this.enableIndex=r,this.N=r?Ly:cp,this.C=new this.N}R(e,r){let n=this.C;for(;e;){let i=this.A(e.u,r);if(i<0)e=e.h;else if(i>0)n=e,e=e.i;else return e}return n}K(e,r){let n=this.C;for(;e;)this.A(e.u,r)<=0?e=e.h:(n=e,e=e.i);return n}L(e,r){let n=this.C;for(;e;){let i=this.A(e.u,r);if(i<0)n=e,e=e.h;else if(i>0)e=e.i;else return e}return n}k(e,r){let n=this.C;for(;e;)this.A(e.u,r)<0?(n=e,e=e.h):e=e.i;return n}P(e){for(;;){let r=e.o;if(r===this.C)return;if(e.p===1){e.p=0;return}if(e===r.i){let n=r.h;if(n.p===1)n.p=0,r.p=1,r===this.v?this.v=r._():r._();else if(n.h&&n.h.p===1){n.p=r.p,r.p=0,n.h.p=0,r===this.v?this.v=r._():r._();return}else n.i&&n.i.p===1?(n.p=1,n.i.p=0,n.g()):(n.p=1,e=r)}else{let n=r.i;if(n.p===1)n.p=0,r.p=1,r===this.v?this.v=r.g():r.g();else if(n.i&&n.i.p===1){n.p=r.p,r.p=0,n.i.p=0,r===this.v?this.v=r.g():r.g();return}else n.h&&n.h.p===1?(n.p=1,n.h.p=0,n._()):(n.p=1,e=r)}}}S(e){if(this.m===1){this.clear();return}let r=e;for(;r.i||r.h;){if(r.h)for(r=r.h;r.i;)r=r.i;else r=r.i;let i=e.u;e.u=r.u,r.u=i;let s=e.l;e.l=r.l,r.l=s,e=r}this.C.i===r?this.C.i=r.o:this.C.h===r&&(this.C.h=r.o),this.P(r);let n=r.o;if(r===n.i?n.i=void 0:n.h=void 0,this.m-=1,this.v.p=0,this.enableIndex)for(;n!==this.C;)n.M-=1,n=n.o}U(e){let r=typeof e=="number"?e:void 0,n=typeof e=="function"?e:void 0,i=typeof e>"u"?[]:void 0,s=0,o=this.v,a=[];for(;a.length||o;)if(o)a.push(o),o=o.i;else{if(o=a.pop(),s===r)return o;i&&i.push(o),n&&n(o,s,this),s+=1,o=o.h}return i}j(e){for(;;){let r=e.o;if(r.p===0)return;let n=r.o;if(r===n.i){let i=n.h;if(i&&i.p===1){if(i.p=r.p=0,n===this.v)return;n.p=1,e=n;continue}else if(e===r.h){if(e.p=0,e.i&&(e.i.o=r),e.h&&(e.h.o=n),r.h=e.i,n.i=e.h,e.i=r,e.h=n,n===this.v)this.v=e,this.C.o=e;else{let s=n.o;s.i===n?s.i=e:s.h=e}e.o=n.o,r.o=e,n.o=e,n.p=1}else{r.p=0,n===this.v?this.v=n.g():n.g(),n.p=1;return}}else{let i=n.i;if(i&&i.p===1){if(i.p=r.p=0,n===this.v)return;n.p=1,e=n;continue}else if(e===r.i){if(e.p=0,e.i&&(e.i.o=n),e.h&&(e.h.o=r),n.h=e.i,r.i=e.h,e.i=n,e.h=r,n===this.v)this.v=e,this.C.o=e;else{let s=n.o;s.i===n?s.i=e:s.h=e}e.o=n.o,r.o=e,n.o=e,n.p=1}else{r.p=0,n===this.v?this.v=n._():n._(),n.p=1;return}}this.enableIndex&&(r.O(),n.O(),e.O());return}}q(e,r,n){if(this.v===void 0)return this.m+=1,this.v=new this.N(e,r,0),this.v.o=this.C,this.C.o=this.C.i=this.C.h=this.v,this.m;let i,s=this.C.i,o=this.A(s.u,e);if(o===0)return s.l=r,this.m;if(o>0)s.i=new this.N(e,r),s.i.o=s,i=s.i,this.C.i=i;else{let a=this.C.h,l=this.A(a.u,e);if(l===0)return a.l=r,this.m;if(l<0)a.h=new this.N(e,r),a.h.o=a,i=a.h,this.C.h=i;else{if(n!==void 0){let u=n.T;if(u!==this.C){let c=this.A(u.u,e);if(c===0)return u.l=r,this.m;if(c>0){let f=u.I(),h=this.A(f.u,e);if(h===0)return f.l=r,this.m;h<0&&(i=new this.N(e,r),f.h===void 0?(f.h=i,i.o=f):(u.i=i,i.o=u))}}}if(i===void 0)for(i=this.v;;){let u=this.A(i.u,e);if(u>0){if(i.i===void 0){i.i=new this.N(e,r),i.i.o=i,i=i.i;break}i=i.i}else if(u<0){if(i.h===void 0){i.h=new this.N(e,r),i.h.o=i,i=i.h;break}i=i.h}else return i.l=r,this.m}}}if(this.enableIndex){let a=i.o;for(;a!==this.C;)a.M+=1,a=a.o}return this.j(i),this.m+=1,this.m}H(e,r){for(;e;){let n=this.A(e.u,r);if(n<0)e=e.h;else if(n>0)e=e.i;else return e}return e||this.C}clear(){this.m=0,this.v=void 0,this.C.o=void 0,this.C.i=this.C.h=void 0}updateKeyByIterator(e,r){let n=e.T;if(n===this.C&&Ho(),this.m===1)return n.u=r,!0;let i=n.B().u;if(n===this.C.i)return this.A(i,r)>0?(n.u=r,!0):!1;let s=n.I().u;return n===this.C.h?this.A(s,r)<0?(n.u=r,!0):!1:this.A(s,r)>=0||this.A(i,r)<=0?!1:(n.u=r,!0)}eraseElementByPos(e){if(e<0||e>this.m-1)throw new RangeError;let r=this.U(e);return this.S(r),this.m}eraseElementByKey(e){if(this.m===0)return!1;let r=this.H(this.v,e);return r===this.C?!1:(this.S(r),!0)}eraseElementByIterator(e){let r=e.T;r===this.C&&Ho();let n=r.h===void 0;return e.iteratorType===0?n&&e.next():(!n||r.i===void 0)&&e.next(),this.S(r),e}getHeight(){if(this.m===0)return 0;function e(r){return r?Math.max(e(r.i),e(r.h))+1:0}return e(this.v)}},Wy=class extends My{constructor(e,r,n){super(n),this.T=e,this.C=r,this.iteratorType===0?(this.pre=function(){return this.T===this.C.i&&Ho(),this.T=this.T.I(),this},this.next=function(){return this.T===this.C&&Ho(),this.T=this.T.B(),this}):(this.pre=function(){return this.T===this.C.h&&Ho(),this.T=this.T.B(),this},this.next=function(){return this.T===this.C&&Ho(),this.T=this.T.I(),this})}get index(){let e=this.T,r=this.C.o;if(e===this.C)return r?r.M-1:0;let n=0;for(e.i&&(n+=e.i.M);e!==r;){let i=e.o;e===i.h&&(n+=1,i.i&&(n+=i.i.M)),e=i}return n}isAccessible(){return this.T!==this.C}},Jn=class t extends Wy{constructor(e,r,n,i){super(e,r,i),this.container=n}get pointer(){this.T===this.C&&Ho();let e=this;return new Proxy([],{get(r,n){return n==="0"?e.T.u:n==="1"?e.T.l:(r[0]=e.T.u,r[1]=e.T.l,r[n])},set(r,n,i){if(n!=="1")throw new TypeError("prop must be 1");return e.T.l=i,!0}})}copy(){return new t(this.T,this.C,this.container,this.iteratorType)}},Qy=class extends Hy{constructor(e=[],r,n){super(r,n);let i=this;e.forEach((function(s){i.setElement(s[0],s[1])}))}begin(){return new Jn(this.C.i||this.C,this.C,this)}end(){return new Jn(this.C,this.C,this)}rBegin(){return new Jn(this.C.h||this.C,this.C,this,1)}rEnd(){return new Jn(this.C,this.C,this,1)}front(){if(this.m===0)return;let e=this.C.i;return[e.u,e.l]}back(){if(this.m===0)return;let e=this.C.h;return[e.u,e.l]}lowerBound(e){let r=this.R(this.v,e);return new Jn(r,this.C,this)}upperBound(e){let r=this.K(this.v,e);return new Jn(r,this.C,this)}reverseLowerBound(e){let r=this.L(this.v,e);return new Jn(r,this.C,this)}reverseUpperBound(e){let r=this.k(this.v,e);return new Jn(r,this.C,this)}forEach(e){this.U((function(r,n,i){e([r.u,r.l],n,i)}))}setElement(e,r,n){return this.q(e,r,n)}getElementByPos(e){if(e<0||e>this.m-1)throw new RangeError;let r=this.U(e);return[r.u,r.l]}find(e){let r=this.H(this.v,e);return new Jn(r,this.C,this)}getElementByKey(e){return this.H(this.v,e).l}union(e){let r=this;return e.forEach((function(n){r.setElement(n[0],n[1])})),this.m}*[Symbol.iterator](){let e=this.m,r=this.U();for(let n=0;n<e;++n){let i=r[n];yield[i.u,i.l]}}};Gy.OrderedMap=Qy});var hp=x(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.registerAdminService=TG;fp.addAdminServicesToServer=RG;var FR=[];function TG(t,e){FR.push({getServiceDefinition:t,getHandlers:e})}function RG(t){for(let{getServiceDefinition:e,getHandlers:r}of FR)t.addService(e(),r())}});var LR=x(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.ClientDuplexStreamImpl=Zn.ClientWritableStreamImpl=Zn.ClientReadableStreamImpl=Zn.ClientUnaryCallImpl=void 0;Zn.callErrorFromStatus=OG;var kG=require("events"),Yy=require("stream"),Rc=nt();function OG(t,e){let r=`${t.code} ${Rc.Status[t.code]}: ${t.details}`,i=`${new Error(r).stack}
for call at
${e}`;return Object.assign(new Error(r),t,{stack:i})}var jy=class extends kG.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Rc.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,r;return(r=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:"unknown"}getAuthContext(){var e,r;return(r=(e=this.call)===null||e===void 0?void 0:e.getAuthContext())!==null&&r!==void 0?r:null}};Zn.ClientUnaryCallImpl=jy;var $y=class extends Yy.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Rc.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,r;return(r=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:"unknown"}getAuthContext(){var e,r;return(r=(e=this.call)===null||e===void 0?void 0:e.getAuthContext())!==null&&r!==void 0?r:null}_read(e){var r;(r=this.call)===null||r===void 0||r.startRead()}};Zn.ClientReadableStreamImpl=$y;var Ky=class extends Yy.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Rc.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,r;return(r=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:"unknown"}getAuthContext(){var e,r;return(r=(e=this.call)===null||e===void 0?void 0:e.getAuthContext())!==null&&r!==void 0?r:null}_write(e,r,n){var i;let s={callback:n},o=Number(r);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var r;(r=this.call)===null||r===void 0||r.halfClose(),e()}};Zn.ClientWritableStreamImpl=Ky;var zy=class extends Yy.Duplex{constructor(e,r){super({objectMode:!0}),this.serialize=e,this.deserialize=r}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Rc.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,r;return(r=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:"unknown"}getAuthContext(){var e,r;return(r=(e=this.call)===null||e===void 0?void 0:e.getAuthContext())!==null&&r!==void 0?r:null}_read(e){var r;(r=this.call)===null||r===void 0||r.startRead()}_write(e,r,n){var i;let s={callback:n},o=Number(r);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var r;(r=this.call)===null||r===void 0||r.halfClose(),e()}};Zn.ClientDuplexStreamImpl=zy});var Qo=x(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.InterceptingListenerImpl=void 0;Wo.statusOrFromValue=BG;Wo.statusOrFromError=PG;Wo.isInterceptingListener=FG;var NG=br();function BG(t){return{ok:!0,value:t}}function PG(t){var e;return{ok:!1,error:Object.assign(Object.assign({},t),{metadata:(e=t.metadata)!==null&&e!==void 0?e:new NG.Metadata})}}function FG(t){return t.onReceiveMetadata!==void 0&&t.onReceiveMetadata.length===1}var Vy=class{constructor(e,r){this.listener=e,this.nextListener=r,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,r=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(r),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=r,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(r),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,r=>{this.processingMetadata||this.processingMessage?this.pendingStatus=r:this.nextListener.onReceiveStatus(r)})}};Wo.InterceptingListenerImpl=Vy});var nA=x(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.InterceptingCall=ei.RequesterBuilder=ei.ListenerBuilder=ei.InterceptorConfigurationError=void 0;ei.getInterceptingCall=qG;var LG=br(),MR=Qo(),UR=nt(),qR=$d(),Oc=class t extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,t)}};ei.InterceptorConfigurationError=Oc;var Jy=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};ei.ListenerBuilder=Jy;var Zy=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};ei.RequesterBuilder=Zy;var Xy={onReceiveMetadata:(t,e)=>{e(t)},onReceiveMessage:(t,e)=>{e(t)},onReceiveStatus:(t,e)=>{e(t)}},kc={start:(t,e,r)=>{r(t,e)},sendMessage:(t,e)=>{e(t)},halfClose:t=>{t()},cancel:t=>{t()}},eA=class{constructor(e,r){var n,i,s,o;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,r?this.requester={start:(n=r.start)!==null&&n!==void 0?n:kc.start,sendMessage:(i=r.sendMessage)!==null&&i!==void 0?i:kc.sendMessage,halfClose:(s=r.halfClose)!==null&&s!==void 0?s:kc.halfClose,cancel:(o=r.cancel)!==null&&o!==void 0?o:kc.cancel}:this.requester=kc}cancelWithStatus(e,r){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,r)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,r){var n,i,s,o,a,l;let u={onReceiveMetadata:(i=(n=r?.onReceiveMetadata)===null||n===void 0?void 0:n.bind(r))!==null&&i!==void 0?i:(c=>{}),onReceiveMessage:(o=(s=r?.onReceiveMessage)===null||s===void 0?void 0:s.bind(r))!==null&&o!==void 0?o:(c=>{}),onReceiveStatus:(l=(a=r?.onReceiveStatus)===null||a===void 0?void 0:a.bind(r))!==null&&l!==void 0?l:(c=>{})};this.processingMetadata=!0,this.requester.start(e,u,(c,f)=>{var h,p,g;this.processingMetadata=!1;let m;if((0,MR.isInterceptingListener)(f))m=f;else{let E={onReceiveMetadata:(h=f.onReceiveMetadata)!==null&&h!==void 0?h:Xy.onReceiveMetadata,onReceiveMessage:(p=f.onReceiveMessage)!==null&&p!==void 0?p:Xy.onReceiveMessage,onReceiveStatus:(g=f.onReceiveStatus)!==null&&g!==void 0?g:Xy.onReceiveStatus};m=new MR.InterceptingListenerImpl(E,u)}this.nextCall.start(c,m),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,r){this.processingMessage=!0,this.requester.sendMessage(r,n=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=r):(this.nextCall.sendMessageWithContext(e,n),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}getAuthContext(){return this.nextCall.getAuthContext()}};ei.InterceptingCall=eA;function MG(t,e,r){var n,i;let s=(n=r.deadline)!==null&&n!==void 0?n:1/0,o=r.host,a=(i=r.parent)!==null&&i!==void 0?i:null,l=r.propagate_flags,u=r.credentials,c=t.createCall(e,s,o,a,l);return u&&c.setCredentials(u),c}var dp=class{constructor(e,r){this.call=e,this.methodDefinition=r}cancelWithStatus(e,r){this.call.cancelWithStatus(e,r)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,r){let n;try{n=this.methodDefinition.requestSerialize(r)}catch(i){this.call.cancelWithStatus(UR.Status.INTERNAL,`Request message serialization failure: ${(0,qR.getErrorMessage)(i)}`);return}this.call.sendMessageWithContext(e,n)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,r){let n=null;this.call.start(e,{onReceiveMetadata:i=>{var s;(s=r?.onReceiveMetadata)===null||s===void 0||s.call(r,i)},onReceiveMessage:i=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(i)}catch(a){n={code:UR.Status.INTERNAL,details:`Response message parsing error: ${(0,qR.getErrorMessage)(a)}`,metadata:new LG.Metadata},this.call.cancelWithStatus(n.code,n.details);return}(s=r?.onReceiveMessage)===null||s===void 0||s.call(r,o)},onReceiveStatus:i=>{var s,o;n?(s=r?.onReceiveStatus)===null||s===void 0||s.call(r,n):(o=r?.onReceiveStatus)===null||o===void 0||o.call(r,i)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}getAuthContext(){return this.call.getAuthContext()}},tA=class extends dp{constructor(e,r){super(e,r)}start(e,r){var n,i;let s=!1,o={onReceiveMetadata:(i=(n=r?.onReceiveMetadata)===null||n===void 0?void 0:n.bind(r))!==null&&i!==void 0?i:(a=>{}),onReceiveMessage:a=>{var l;s=!0,(l=r?.onReceiveMessage)===null||l===void 0||l.call(r,a)},onReceiveStatus:a=>{var l,u;s||(l=r?.onReceiveMessage)===null||l===void 0||l.call(r,null),(u=r?.onReceiveStatus)===null||u===void 0||u.call(r,a)}};super.start(e,o),this.call.startRead()}},rA=class extends dp{};function UG(t,e,r){let n=MG(t,r.path,e);return r.responseStream?new rA(n,r):new tA(n,r)}function qG(t,e,r,n){if(t.clientInterceptors.length>0&&t.clientInterceptorProviders.length>0)throw new Oc("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(t.callInterceptors.length>0&&t.callInterceptorProviders.length>0)throw new Oc("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];t.callInterceptors.length>0||t.callInterceptorProviders.length>0?i=[].concat(t.callInterceptors,t.callInterceptorProviders.map(a=>a(e))).filter(a=>a):i=[].concat(t.clientInterceptors,t.clientInterceptorProviders.map(a=>a(e))).filter(a=>a);let s=Object.assign({},r,{method_definition:e});return i.reduceRight((a,l)=>u=>l(u,a),a=>UG(n,a,e))(s)}});var oA=x(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.Client=void 0;var Ci=LR(),HG=aA(),WG=zr(),Vs=nt(),El=br(),pp=nA(),ti=Symbol(),yl=Symbol(),Al=Symbol(),ss=Symbol();function iA(t){return typeof t=="function"}function vl(t){var e;return((e=t.stack)===null||e===void 0?void 0:e.split(`
`).slice(1).join(`
`))||"no stack trace available"}var sA=class{constructor(e,r,n={}){var i,s;if(n=Object.assign({},n),this[yl]=(i=n.interceptors)!==null&&i!==void 0?i:[],delete n.interceptors,this[Al]=(s=n.interceptor_providers)!==null&&s!==void 0?s:[],delete n.interceptor_providers,this[yl].length>0&&this[Al].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[ss]=n.callInvocationTransformer,delete n.callInvocationTransformer,n.channelOverride)this[ti]=n.channelOverride;else if(n.channelFactoryOverride){let o=n.channelFactoryOverride;delete n.channelFactoryOverride,this[ti]=o(e,r,n)}else this[ti]=new HG.ChannelImplementation(e,r,n)}close(){this[ti].close()}getChannel(){return this[ti]}waitForReady(e,r){let n=i=>{if(i){r(new Error("Failed to connect before the deadline"));return}let s;try{s=this[ti].getConnectivityState(!0)}catch{r(new Error("The channel has been closed"));return}if(s===WG.ConnectivityState.READY)r();else try{this[ti].watchConnectivityState(s,e,n)}catch{r(new Error("The channel has been closed"))}};setImmediate(n)}checkOptionalUnaryResponseArguments(e,r,n){if(iA(e))return{metadata:new El.Metadata,options:{},callback:e};if(iA(r))return e instanceof El.Metadata?{metadata:e,options:{},callback:r}:{metadata:new El.Metadata,options:e,callback:r};if(!(e instanceof El.Metadata&&r instanceof Object&&iA(n)))throw new Error("Incorrect arguments passed");return{metadata:e,options:r,callback:n}}makeUnaryRequest(e,r,n,i,s,o,a){var l,u;let c=this.checkOptionalUnaryResponseArguments(s,o,a),f={path:e,requestStream:!1,responseStream:!1,requestSerialize:r,responseDeserialize:n},h={argument:i,metadata:c.metadata,call:new Ci.ClientUnaryCallImpl,channel:this[ti],methodDefinition:f,callOptions:c.options,callback:c.callback};this[ss]&&(h=this[ss](h));let p=h.call,g={clientInterceptors:this[yl],clientInterceptorProviders:this[Al],callInterceptors:(l=h.callOptions.interceptors)!==null&&l!==void 0?l:[],callInterceptorProviders:(u=h.callOptions.interceptor_providers)!==null&&u!==void 0?u:[]},m=(0,pp.getInterceptingCall)(g,h.methodDefinition,h.callOptions,h.channel);p.call=m;let E=null,A=!1,w=new Error;return m.start(h.metadata,{onReceiveMetadata:k=>{p.emit("metadata",k)},onReceiveMessage(k){E!==null&&m.cancelWithStatus(Vs.Status.UNIMPLEMENTED,"Too many responses received"),E=k},onReceiveStatus(k){if(!A){if(A=!0,k.code===Vs.Status.OK)if(E===null){let S=vl(w);h.callback((0,Ci.callErrorFromStatus)({code:Vs.Status.UNIMPLEMENTED,details:"No message received",metadata:k.metadata},S))}else h.callback(null,E);else{let S=vl(w);h.callback((0,Ci.callErrorFromStatus)(k,S))}w=null,p.emit("status",k)}}}),m.sendMessage(i),m.halfClose(),p}makeClientStreamRequest(e,r,n,i,s,o){var a,l;let u=this.checkOptionalUnaryResponseArguments(i,s,o),c={path:e,requestStream:!0,responseStream:!1,requestSerialize:r,responseDeserialize:n},f={metadata:u.metadata,call:new Ci.ClientWritableStreamImpl(r),channel:this[ti],methodDefinition:c,callOptions:u.options,callback:u.callback};this[ss]&&(f=this[ss](f));let h=f.call,p={clientInterceptors:this[yl],clientInterceptorProviders:this[Al],callInterceptors:(a=f.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=f.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},g=(0,pp.getInterceptingCall)(p,f.methodDefinition,f.callOptions,f.channel);h.call=g;let m=null,E=!1,A=new Error;return g.start(f.metadata,{onReceiveMetadata:w=>{h.emit("metadata",w)},onReceiveMessage(w){m!==null&&g.cancelWithStatus(Vs.Status.UNIMPLEMENTED,"Too many responses received"),m=w,g.startRead()},onReceiveStatus(w){if(!E){if(E=!0,w.code===Vs.Status.OK)if(m===null){let k=vl(A);f.callback((0,Ci.callErrorFromStatus)({code:Vs.Status.UNIMPLEMENTED,details:"No message received",metadata:w.metadata},k))}else f.callback(null,m);else{let k=vl(A);f.callback((0,Ci.callErrorFromStatus)(w,k))}A=null,h.emit("status",w)}}}),h}checkMetadataAndOptions(e,r){let n,i;return e instanceof El.Metadata?(n=e,r?i=r:i={}):(e?i=e:i={},n=new El.Metadata),{metadata:n,options:i}}makeServerStreamRequest(e,r,n,i,s,o){var a,l;let u=this.checkMetadataAndOptions(s,o),c={path:e,requestStream:!1,responseStream:!0,requestSerialize:r,responseDeserialize:n},f={argument:i,metadata:u.metadata,call:new Ci.ClientReadableStreamImpl(n),channel:this[ti],methodDefinition:c,callOptions:u.options};this[ss]&&(f=this[ss](f));let h=f.call,p={clientInterceptors:this[yl],clientInterceptorProviders:this[Al],callInterceptors:(a=f.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=f.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},g=(0,pp.getInterceptingCall)(p,f.methodDefinition,f.callOptions,f.channel);h.call=g;let m=!1,E=new Error;return g.start(f.metadata,{onReceiveMetadata(A){h.emit("metadata",A)},onReceiveMessage(A){h.push(A)},onReceiveStatus(A){if(!m){if(m=!0,h.push(null),A.code!==Vs.Status.OK){let w=vl(E);h.emit("error",(0,Ci.callErrorFromStatus)(A,w))}E=null,h.emit("status",A)}}}),g.sendMessage(i),g.halfClose(),h}makeBidiStreamRequest(e,r,n,i,s){var o,a;let l=this.checkMetadataAndOptions(i,s),u={path:e,requestStream:!0,responseStream:!0,requestSerialize:r,responseDeserialize:n},c={metadata:l.metadata,call:new Ci.ClientDuplexStreamImpl(r,n),channel:this[ti],methodDefinition:u,callOptions:l.options};this[ss]&&(c=this[ss](c));let f=c.call,h={clientInterceptors:this[yl],clientInterceptorProviders:this[Al],callInterceptors:(o=c.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(a=c.callOptions.interceptor_providers)!==null&&a!==void 0?a:[]},p=(0,pp.getInterceptingCall)(h,c.methodDefinition,c.callOptions,c.channel);f.call=p;let g=!1,m=new Error;return p.start(c.metadata,{onReceiveMetadata(E){f.emit("metadata",E)},onReceiveMessage(E){f.push(E)},onReceiveStatus(E){if(!g){if(g=!0,f.push(null),E.code!==Vs.Status.OK){let A=vl(m);f.emit("error",(0,Ci.callErrorFromStatus)(E,A))}m=null,f.emit("status",E)}}}),f}};gp.Client=sA});var _p=x(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.makeClientConstructor=HR;mp.loadPackageDefinition=$G;var Nc=oA(),QG={unary:Nc.Client.prototype.makeUnaryRequest,server_stream:Nc.Client.prototype.makeServerStreamRequest,client_stream:Nc.Client.prototype.makeClientStreamRequest,bidi:Nc.Client.prototype.makeBidiStreamRequest};function lA(t){return["__proto__","prototype","constructor"].includes(t)}function HR(t,e,r){r||(r={});class n extends Nc.Client{}return Object.keys(t).forEach(i=>{if(lA(i))return;let s=t[i],o;if(typeof i=="string"&&i.charAt(0)==="$")throw new Error("Method names cannot start with $");s.requestStream?s.responseStream?o="bidi":o="client_stream":s.responseStream?o="server_stream":o="unary";let a=s.requestSerialize,l=s.responseDeserialize,u=GG(QG[o],s.path,a,l);n.prototype[i]=u,Object.assign(n.prototype[i],s),s.originalName&&!lA(s.originalName)&&(n.prototype[s.originalName]=n.prototype[i])}),n.service=t,n.serviceName=e,n}function GG(t,e,r,n){return function(...i){return t.call(this,e,r,n,...i)}}function jG(t){return"format"in t}function $G(t){let e={};for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let n=t[r],i=r.split(".");if(i.some(a=>lA(a)))continue;let s=i[i.length-1],o=e;for(let a of i.slice(0,-1))o[a]||(o[a]={}),o=o[a];jG(n)?o[s]=n:o[s]=HR(n,s,{})}return e}});var dA=x((Fse,fk)=>{var KG=1/0,zG="[object Symbol]",YG=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,VG=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yp="\\ud800-\\udfff",YR="\\u0300-\\u036f\\ufe20-\\ufe23",VR="\\u20d0-\\u20f0",XR="\\u2700-\\u27bf",JR="a-z\\xdf-\\xf6\\xf8-\\xff",XG="\\xac\\xb1\\xd7\\xf7",JG="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ZG="\\u2000-\\u206f",ej=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ZR="A-Z\\xc0-\\xd6\\xd8-\\xde",ek="\\ufe0e\\ufe0f",tk=XG+JG+ZG+ej,cA="['\u2019]",tj="["+yp+"]",WR="["+tk+"]",Ep="["+YR+VR+"]",rk="\\d+",rj="["+XR+"]",nk="["+JR+"]",ik="[^"+yp+tk+rk+XR+JR+ZR+"]",uA="\\ud83c[\\udffb-\\udfff]",nj="(?:"+Ep+"|"+uA+")",sk="[^"+yp+"]",fA="(?:\\ud83c[\\udde6-\\uddff]){2}",hA="[\\ud800-\\udbff][\\udc00-\\udfff]",bl="["+ZR+"]",ok="\\u200d",QR="(?:"+nk+"|"+ik+")",ij="(?:"+bl+"|"+ik+")",GR="(?:"+cA+"(?:d|ll|m|re|s|t|ve))?",jR="(?:"+cA+"(?:D|LL|M|RE|S|T|VE))?",ak=nj+"?",lk="["+ek+"]?",sj="(?:"+ok+"(?:"+[sk,fA,hA].join("|")+")"+lk+ak+")*",uk=lk+ak+sj,oj="(?:"+[rj,fA,hA].join("|")+")"+uk,aj="(?:"+[sk+Ep+"?",Ep,fA,hA,tj].join("|")+")",lj=RegExp(cA,"g"),uj=RegExp(Ep,"g"),cj=RegExp(uA+"(?="+uA+")|"+aj+uk,"g"),fj=RegExp([bl+"?"+nk+"+"+GR+"(?="+[WR,bl,"$"].join("|")+")",ij+"+"+jR+"(?="+[WR,bl+QR,"$"].join("|")+")",bl+"?"+QR+"+"+GR,bl+"+"+jR,rk,oj].join("|"),"g"),hj=RegExp("["+ok+yp+YR+VR+ek+"]"),dj=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},gj=typeof global=="object"&&global&&global.Object===Object&&global,mj=typeof self=="object"&&self&&self.Object===Object&&self,_j=gj||mj||Function("return this")();function Ej(t,e,r,n){var i=-1,s=t?t.length:0;for(n&&s&&(r=t[++i]);++i<s;)r=e(r,t[i],i,t);return r}function yj(t){return t.split("")}function Aj(t){return t.match(YG)||[]}function vj(t){return function(e){return t?.[e]}}var bj=vj(pj);function ck(t){return hj.test(t)}function Sj(t){return dj.test(t)}function Cj(t){return ck(t)?wj(t):yj(t)}function wj(t){return t.match(cj)||[]}function xj(t){return t.match(fj)||[]}var Dj=Object.prototype,Ij=Dj.toString,$R=_j.Symbol,KR=$R?$R.prototype:void 0,zR=KR?KR.toString:void 0;function Tj(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}function Rj(t){if(typeof t=="string")return t;if(Pj(t))return zR?zR.call(t):"";var e=t+"";return e=="0"&&1/t==-KG?"-0":e}function kj(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Tj(t,e,r)}function Oj(t){return function(e){e=Ap(e);var r=ck(e)?Cj(e):void 0,n=r?r[0]:e.charAt(0),i=r?kj(r,1).join(""):e.slice(1);return n[t]()+i}}function Nj(t){return function(e){return Ej(qj(Mj(e).replace(lj,"")),t,"")}}function Bj(t){return!!t&&typeof t=="object"}function Pj(t){return typeof t=="symbol"||Bj(t)&&Ij.call(t)==zG}function Ap(t){return t==null?"":Rj(t)}var Fj=Nj(function(t,e,r){return e=e.toLowerCase(),t+(r?Lj(e):e)});function Lj(t){return Uj(Ap(t).toLowerCase())}function Mj(t){return t=Ap(t),t&&t.replace(VG,bj).replace(uj,"")}var Uj=Oj("toUpperCase");function qj(t,e,r){return t=Ap(t),e=r?void 0:e,e===void 0?Sj(t)?xj(t):Aj(t):t.match(e)||[]}fk.exports=Fj});var pA=x((Lse,hk)=>{"use strict";hk.exports=Hj;function Hj(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,l){r[n]=function(c){if(s)if(s=!1,c)l(c);else{for(var f=new Array(arguments.length-1),h=0;h<f.length;)f[h++]=arguments[h];a.apply(null,f)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,l(u))}})}});var mk=x(gk=>{"use strict";var vp=gk;vp.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Sl=new Array(64),pk=new Array(123);for(ri=0;ri<64;)pk[Sl[ri]=ri<26?ri+65:ri<52?ri+71:ri<62?ri-4:ri-59|43]=ri++;var ri;vp.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,l;r<n;){var u=e[r++];switch(a){case 0:s[o++]=Sl[u>>2],l=(u&3)<<4,a=1;break;case 1:s[o++]=Sl[l|u>>4],l=(u&15)<<2,a=2;break;case 2:s[o++]=Sl[l|u>>6],s[o++]=Sl[u&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Sl[l],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var dk="invalid encoding";vp.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var l=e.charCodeAt(a++);if(l===61&&s>1)break;if((l=pk[l])===void 0)throw Error(dk);switch(s){case 0:o=l,s=1;break;case 1:r[n++]=o<<2|(l&48)>>4,o=l,s=2;break;case 2:r[n++]=(o&15)<<4|(l&60)>>2,o=l,s=3;break;case 3:r[n++]=(o&3)<<6|l,s=0;break}}if(s===1)throw Error(dk);return n-i};vp.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Ek=x((Use,_k)=>{"use strict";_k.exports=bp;function bp(){this._listeners={}}bp.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};bp.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};bp.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var wk=x((qse,Ck)=>{"use strict";Ck.exports=yk(yk);function yk(t){return typeof Float32Array<"u"?(function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(l,u,c){e[0]=l,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3]}function s(l,u,c){e[0]=l,u[c]=r[3],u[c+1]=r[2],u[c+2]=r[1],u[c+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(l,u){return r[0]=l[u],r[1]=l[u+1],r[2]=l[u+2],r[3]=l[u+3],e[0]}function a(l,u){return r[3]=l[u],r[2]=l[u+1],r[1]=l[u+2],r[0]=l[u+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o})():(function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var l=Math.floor(Math.log(i)/Math.LN2),u=Math.round(i*Math.pow(2,-l)*8388608)&8388607;n((a<<31|l+127<<23|u)>>>0,s,o)}}t.writeFloatLE=e.bind(null,Ak),t.writeFloatBE=e.bind(null,vk);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,l=o>>>23&255,u=o&8388607;return l===255?u?NaN:a*(1/0):l===0?a*1401298464324817e-60*u:a*Math.pow(2,l-150)*(u+8388608)}t.readFloatLE=r.bind(null,bk),t.readFloatBE=r.bind(null,Sk)})(),typeof Float64Array<"u"?(function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(l,u,c){e[0]=l,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3],u[c+4]=r[4],u[c+5]=r[5],u[c+6]=r[6],u[c+7]=r[7]}function s(l,u,c){e[0]=l,u[c]=r[7],u[c+1]=r[6],u[c+2]=r[5],u[c+3]=r[4],u[c+4]=r[3],u[c+5]=r[2],u[c+6]=r[1],u[c+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(l,u){return r[0]=l[u],r[1]=l[u+1],r[2]=l[u+2],r[3]=l[u+3],r[4]=l[u+4],r[5]=l[u+5],r[6]=l[u+6],r[7]=l[u+7],e[0]}function a(l,u){return r[7]=l[u],r[6]=l[u+1],r[5]=l[u+2],r[4]=l[u+3],r[3]=l[u+4],r[2]=l[u+5],r[1]=l[u+6],r[0]=l[u+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o})():(function(){function e(n,i,s,o,a,l){var u=o<0?1:0;if(u&&(o=-o),o===0)n(0,a,l+i),n(1/o>0?0:2147483648,a,l+s);else if(isNaN(o))n(0,a,l+i),n(2146959360,a,l+s);else if(o>17976931348623157e292)n(0,a,l+i),n((u<<31|2146435072)>>>0,a,l+s);else{var c;if(o<22250738585072014e-324)c=o/5e-324,n(c>>>0,a,l+i),n((u<<31|c/4294967296)>>>0,a,l+s);else{var f=Math.floor(Math.log(o)/Math.LN2);f===1024&&(f=1023),c=o*Math.pow(2,-f),n(c*4503599627370496>>>0,a,l+i),n((u<<31|f+1023<<20|c*1048576&1048575)>>>0,a,l+s)}}}t.writeDoubleLE=e.bind(null,Ak,0,4),t.writeDoubleBE=e.bind(null,vk,4,0);function r(n,i,s,o,a){var l=n(o,a+i),u=n(o,a+s),c=(u>>31)*2+1,f=u>>>20&2047,h=4294967296*(u&1048575)+l;return f===2047?h?NaN:c*(1/0):f===0?c*5e-324*h:c*Math.pow(2,f-1075)*(h+4503599627370496)}t.readDoubleLE=r.bind(null,bk,0,4),t.readDoubleBE=r.bind(null,Sk,4,0)})(),t}function Ak(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function vk(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function bk(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Sk(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var gA=x((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Dk=x(xk=>{"use strict";var mA=xk;mA.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};mA.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,l;r<n;)l=e[r++],l<128?o[a++]=l:l>191&&l<224?o[a++]=(l&31)<<6|e[r++]&63:l>239&&l<365?(l=((l&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(l>>10),o[a++]=56320+(l&1023)):o[a++]=(l&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};mA.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var Tk=x((Wse,Ik)=>{"use strict";Ik.exports=Wj;function Wj(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(l){if(l<1||l>i)return t(l);o+l>n&&(s=t(n),o=0);var u=e.call(s,o,o+=l);return o&7&&(o=(o|7)+1),u}}});var kk=x((Qse,Rk)=>{"use strict";Rk.exports=Sr;var Bc=wi();function Sr(t,e){this.lo=t>>>0,this.hi=e>>>0}var Go=Sr.zero=new Sr(0,0);Go.toNumber=function(){return 0};Go.zzEncode=Go.zzDecode=function(){return this};Go.length=function(){return 1};var Qj=Sr.zeroHash="\0\0\0\0\0\0\0\0";Sr.fromNumber=function(e){if(e===0)return Go;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Sr(n,i)};Sr.from=function(e){if(typeof e=="number")return Sr.fromNumber(e);if(Bc.isString(e))if(Bc.Long)e=Bc.Long.fromString(e);else return Sr.fromNumber(parseInt(e,10));return e.low||e.high?new Sr(e.low>>>0,e.high>>>0):Go};Sr.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Sr.prototype.toLong=function(e){return Bc.Long?new Bc.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var Xs=String.prototype.charCodeAt;Sr.fromHash=function(e){return e===Qj?Go:new Sr((Xs.call(e,0)|Xs.call(e,1)<<8|Xs.call(e,2)<<16|Xs.call(e,3)<<24)>>>0,(Xs.call(e,4)|Xs.call(e,5)<<8|Xs.call(e,6)<<16|Xs.call(e,7)<<24)>>>0)};Sr.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Sr.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Sr.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Sr.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var wi=x(_A=>{"use strict";var Re=_A;Re.asPromise=pA();Re.base64=mk();Re.EventEmitter=Ek();Re.float=wk();Re.inquire=gA();Re.utf8=Dk();Re.pool=Tk();Re.LongBits=kk();Re.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);Re.global=Re.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||_A;Re.emptyArray=Object.freeze?Object.freeze([]):[];Re.emptyObject=Object.freeze?Object.freeze({}):{};Re.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Re.isString=function(e){return typeof e=="string"||e instanceof String};Re.isObject=function(e){return e&&typeof e=="object"};Re.isset=Re.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Re.Buffer=(function(){try{var t=Re.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}})();Re._Buffer_from=null;Re._Buffer_allocUnsafe=null;Re.newBuffer=function(e){return typeof e=="number"?Re.Buffer?Re._Buffer_allocUnsafe(e):new Re.Array(e):Re.Buffer?Re._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};Re.Array=typeof Uint8Array<"u"?Uint8Array:Array;Re.Long=Re.global.dcodeIO&&Re.global.dcodeIO.Long||Re.global.Long||Re.inquire("long");Re.key2Re=/^true|false|0|1$/;Re.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Re.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Re.longToHash=function(e){return e?Re.LongBits.from(e).toHash():Re.LongBits.zeroHash};Re.longFromHash=function(e,r){var n=Re.LongBits.fromHash(e);return Re.Long?Re.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function Ok(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}Re.merge=Ok;Re.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Nk(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Ok(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}Re.newError=Nk;Re.ProtocolError=Nk("ProtocolError");Re.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};Re.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};Re.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Re._configure=function(){var t=Re.Buffer;if(!t){Re._Buffer_from=Re._Buffer_allocUnsafe=null;return}Re._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},Re._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Cp=x((jse,Lk)=>{"use strict";Lk.exports=vt;var Ln=wi(),EA,Sp=Ln.LongBits,Bk=Ln.base64,Pk=Ln.utf8;function Pc(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function AA(){}function Gj(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function vt(){this.len=0,this.head=new Pc(AA,0,0),this.tail=this.head,this.states=null}var Fk=function(){return Ln.Buffer?function(){return(vt.create=function(){return new EA})()}:function(){return new vt}};vt.create=Fk();vt.alloc=function(e){return new Ln.Array(e)};Ln.Array!==Array&&(vt.alloc=Ln.pool(vt.alloc,Ln.Array.prototype.subarray));vt.prototype._push=function(e,r,n){return this.tail=this.tail.next=new Pc(e,r,n),this.len+=r,this};function vA(t,e,r){e[r]=t&255}function jj(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function bA(t,e){this.len=t,this.next=void 0,this.val=e}bA.prototype=Object.create(Pc.prototype);bA.prototype.fn=jj;vt.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new bA((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};vt.prototype.int32=function(e){return e<0?this._push(SA,10,Sp.fromNumber(e)):this.uint32(e)};vt.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function SA(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}vt.prototype.uint64=function(e){var r=Sp.from(e);return this._push(SA,r.length(),r)};vt.prototype.int64=vt.prototype.uint64;vt.prototype.sint64=function(e){var r=Sp.from(e).zzEncode();return this._push(SA,r.length(),r)};vt.prototype.bool=function(e){return this._push(vA,1,e?1:0)};function yA(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}vt.prototype.fixed32=function(e){return this._push(yA,4,e>>>0)};vt.prototype.sfixed32=vt.prototype.fixed32;vt.prototype.fixed64=function(e){var r=Sp.from(e);return this._push(yA,4,r.lo)._push(yA,4,r.hi)};vt.prototype.sfixed64=vt.prototype.fixed64;vt.prototype.float=function(e){return this._push(Ln.float.writeFloatLE,4,e)};vt.prototype.double=function(e){return this._push(Ln.float.writeDoubleLE,8,e)};var $j=Ln.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};vt.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(vA,1,0);if(Ln.isString(e)){var n=vt.alloc(r=Bk.length(e));Bk.decode(e,n,0),e=n}return this.uint32(r)._push($j,r,e)};vt.prototype.string=function(e){var r=Pk.length(e);return r?this.uint32(r)._push(Pk.write,r,e):this._push(vA,1,0)};vt.prototype.fork=function(){return this.states=new Gj(this),this.head=this.tail=new Pc(AA,0,0),this.len=0,this};vt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Pc(AA,0,0),this.len=0),this};vt.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};vt.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};vt._configure=function(t){EA=t,vt.create=Fk(),EA._configure()}});var qk=x(($se,Uk)=>{"use strict";Uk.exports=xi;var Mk=Cp();(xi.prototype=Object.create(Mk.prototype)).constructor=xi;var Js=wi();function xi(){Mk.call(this)}xi._configure=function(){xi.alloc=Js._Buffer_allocUnsafe,xi.writeBytesBuffer=Js.Buffer&&Js.Buffer.prototype instanceof Uint8Array&&Js.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};xi.prototype.bytes=function(e){Js.isString(e)&&(e=Js._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(xi.writeBytesBuffer,r,e),this};function Kj(t,e,r){t.length<40?Js.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}xi.prototype.string=function(e){var r=Js.Buffer.byteLength(e);return this.uint32(r),r&&this._push(Kj,r,e),this};xi._configure()});var xp=x((Kse,jk)=>{"use strict";jk.exports=rr;var ni=wi(),wA,Qk=ni.LongBits,zj=ni.utf8;function ii(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function rr(t){this.buf=t,this.pos=0,this.len=t.length}var Hk=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new rr(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new rr(e);throw Error("illegal buffer")},Gk=function(){return ni.Buffer?function(r){return(rr.create=function(i){return ni.Buffer.isBuffer(i)?new wA(i):Hk(i)})(r)}:Hk};rr.create=Gk();rr.prototype._slice=ni.Array.prototype.subarray||ni.Array.prototype.slice;rr.prototype.uint32=(function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ii(this,10);return e}})();rr.prototype.int32=function(){return this.uint32()|0};rr.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function CA(){var t=new Qk(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ii(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw ii(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}rr.prototype.bool=function(){return this.uint32()!==0};function wp(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}rr.prototype.fixed32=function(){if(this.pos+4>this.len)throw ii(this,4);return wp(this.buf,this.pos+=4)};rr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ii(this,4);return wp(this.buf,this.pos+=4)|0};function Wk(){if(this.pos+8>this.len)throw ii(this,8);return new Qk(wp(this.buf,this.pos+=4),wp(this.buf,this.pos+=4))}rr.prototype.float=function(){if(this.pos+4>this.len)throw ii(this,4);var e=ni.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};rr.prototype.double=function(){if(this.pos+8>this.len)throw ii(this,4);var e=ni.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};rr.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw ii(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(r,n);if(r===n){var i=ni.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,r,n)};rr.prototype.string=function(){var e=this.bytes();return zj.read(e,0,e.length)};rr.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ii(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ii(this);while(this.buf[this.pos++]&128);return this};rr.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};rr._configure=function(t){wA=t,rr.create=Gk(),wA._configure();var e=ni.Long?"toLong":"toNumber";ni.merge(rr.prototype,{int64:function(){return CA.call(this)[e](!1)},uint64:function(){return CA.call(this)[e](!0)},sint64:function(){return CA.call(this).zzDecode()[e](!1)},fixed64:function(){return Wk.call(this)[e](!0)},sfixed64:function(){return Wk.call(this)[e](!1)}})}});var Yk=x((zse,zk)=>{"use strict";zk.exports=jo;var Kk=xp();(jo.prototype=Object.create(Kk.prototype)).constructor=jo;var $k=wi();function jo(t){Kk.call(this,t)}jo._configure=function(){$k.Buffer&&(jo.prototype._slice=$k.Buffer.prototype.slice)};jo.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};jo._configure()});var Xk=x((Yse,Vk)=>{"use strict";Vk.exports=Fc;var xA=wi();(Fc.prototype=Object.create(xA.EventEmitter.prototype)).constructor=Fc;function Fc(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");xA.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!r}Fc.prototype.rpcCall=function t(e,r,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return xA.asPromise(t,o,e,r,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(l,u){if(l)return o.emit("error",l,e),s(l);if(u===null){o.end(!0);return}if(!(u instanceof n))try{u=n[o.responseDelimited?"decodeDelimited":"decode"](u)}catch(c){return o.emit("error",c,e),s(c)}return o.emit("data",u,e),s(null,u)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};Fc.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var DA=x(Jk=>{"use strict";var Yj=Jk;Yj.Service=Xk()});var IA=x((Xse,Zk)=>{"use strict";Zk.exports={}});var rO=x(tO=>{"use strict";var cn=tO;cn.build="minimal";cn.Writer=Cp();cn.BufferWriter=qk();cn.Reader=xp();cn.BufferReader=Yk();cn.util=wi();cn.rpc=DA();cn.roots=IA();cn.configure=eO;function eO(){cn.util._configure(),cn.Writer._configure(cn.BufferWriter),cn.Reader._configure(cn.BufferReader)}eO()});var iO=x((Zse,nO)=>{"use strict";nO.exports=TA;function TA(t,e){typeof t=="string"&&(e=t,t=void 0);var r=[];function n(s){if(typeof s!="string"){var o=i();if(TA.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),l=new Array(a.length+1),u=new Array(a.length),c=0;c<a.length;)l[c]=a[c],u[c]=s[a[c++]];return l[c]=o,Function.apply(null,l).apply(null,u)}return Function(o)()}for(var f=new Array(arguments.length-1),h=0;h<f.length;)f[h]=arguments[++h];if(h=0,s=s.replace(/%([%dfijs])/g,function(g,m){var E=f[h++];switch(m){case"d":case"f":return String(Number(E));case"i":return String(Math.floor(E));case"j":return JSON.stringify(E);case"s":return String(E)}return"%"}),h!==f.length)throw Error("parameter count mismatch");return r.push(s),n}function i(s){return"function "+(s||e||"")+"("+(t&&t.join(",")||"")+`){
  `+r.join(`
  `)+`
}`}return n.toString=i,n}TA.verbose=!1});var oO=x((eoe,sO)=>{"use strict";sO.exports=Lc;var Vj=pA(),Xj=gA(),RA=Xj("fs");function Lc(t,e,r){return typeof e=="function"?(r=e,e={}):e||(e={}),r?!e.xhr&&RA&&RA.readFile?RA.readFile(t,function(i,s){return i&&typeof XMLHttpRequest<"u"?Lc.xhr(t,e,r):i?r(i):r(null,e.binary?s:s.toString("utf8"))}):Lc.xhr(t,e,r):Vj(Lc,this,t,e)}Lc.xhr=function(e,r,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4){if(i.status!==0&&i.status!==200)return n(Error("status "+i.status));if(r.binary){var o=i.response;if(!o){o=[];for(var a=0;a<i.responseText.length;++a)o.push(i.responseText.charCodeAt(a)&255)}return n(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return n(null,i.responseText)}},r.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}});var uO=x(lO=>{"use strict";var OA=lO,aO=OA.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},kA=OA.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var r=e.split("/"),n=aO(e),i="";n&&(i=r.shift()+"/");for(var s=0;s<r.length;)r[s]===".."?s>0&&r[s-1]!==".."?r.splice(--s,2):n?r.splice(s,1):++s:r[s]==="."?r.splice(s,1):++s;return i+r.join("/")};OA.resolve=function(e,r,n){return n||(r=kA(r)),aO(r)?r:(n||(e=kA(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?kA(e+"/"+r):r)}});var wl=x((roe,hO)=>{"use strict";hO.exports=dt;var Dp=eo();((dt.prototype=Object.create(Dp.prototype)).constructor=dt).className="Namespace";var NA=Zs(),Ip=Cr(),Jj=zo(),$o,Cl,Ko;dt.fromJSON=function(e,r){return new dt(e,r.options).addJSON(r.nested)};function cO(t,e){if(t&&t.length){for(var r={},n=0;n<t.length;++n)r[t[n].name]=t[n].toJSON(e);return r}}dt.arrayToJSON=cO;dt.isReservedId=function(e,r){if(e){for(var n=0;n<e.length;++n)if(typeof e[n]!="string"&&e[n][0]<=r&&e[n][1]>r)return!0}return!1};dt.isReservedName=function(e,r){if(e){for(var n=0;n<e.length;++n)if(e[n]===r)return!0}return!1};function dt(t,e){Dp.call(this,t,e),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function fO(t){t._nestedArray=null,t._lookupCache={};for(var e=t;e=e.parent;)e._lookupCache={};return t}Object.defineProperty(dt.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=Ip.toArray(this.nested))}});dt.prototype.toJSON=function(e){return Ip.toObject(["options",this.options,"nested",cO(this.nestedArray,e)])};dt.prototype.addJSON=function(e){var r=this;if(e)for(var n=Object.keys(e),i=0,s;i<n.length;++i)s=e[n[i]],r.add((s.fields!==void 0?$o.fromJSON:s.values!==void 0?Ko.fromJSON:s.methods!==void 0?Cl.fromJSON:s.id!==void 0?NA.fromJSON:dt.fromJSON)(n[i],s));return this};dt.prototype.get=function(e){return this.nested&&this.nested[e]||null};dt.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Ko)return this.nested[e].values;throw Error("no such enum: "+e)};dt.prototype.add=function(e){if(!(e instanceof NA&&e.extend!==void 0||e instanceof $o||e instanceof Jj||e instanceof Ko||e instanceof Cl||e instanceof dt))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var r=this.get(e.name);if(r)if(r instanceof dt&&e instanceof dt&&!(r instanceof $o||r instanceof Cl)){for(var n=r.nestedArray,i=0;i<n.length;++i)e.add(n[i]);this.remove(r),this.nested||(this.nested={}),e.setOptions(r.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}this.nested[e.name]=e,this instanceof $o||this instanceof Cl||this instanceof Ko||this instanceof NA||e._edition||(e._edition=e._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var s=this;s=s.parent;)s._needsRecursiveFeatureResolution=!0,s._needsRecursiveResolve=!0;return e.onAdd(this),fO(this)};dt.prototype.remove=function(e){if(!(e instanceof Dp))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),fO(this)};dt.prototype.define=function(e,r){if(Ip.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var n=this;e.length>0;){var i=e.shift();if(n.nested&&n.nested[i]){if(n=n.nested[i],!(n instanceof dt))throw Error("path conflicts with non-namespace objects")}else n.add(n=new dt(i))}return r&&n.addJSON(r),n};dt.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var e=this.nestedArray,r=0;for(this.resolve();r<e.length;)e[r]instanceof dt?e[r++].resolveAll():e[r++].resolve();return this._needsRecursiveResolve=!1,this};dt.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,e=this._edition||e,Dp.prototype._resolveFeaturesRecursive.call(this,e),this.nestedArray.forEach(r=>{r._resolveFeaturesRecursive(e)}),this):this};dt.prototype.lookup=function(e,r,n){if(typeof r=="boolean"?(n=r,r=void 0):r&&!Array.isArray(r)&&(r=[r]),Ip.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;var i=e.join(".");if(e[0]==="")return this.root.lookup(e.slice(1),r);var s=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+i];if(s&&(!r||r.indexOf(s.constructor)>-1)||(s=this._lookupImpl(e,i),s&&(!r||r.indexOf(s.constructor)>-1)))return s;if(n)return null;for(var o=this;o.parent;){if(s=o.parent._lookupImpl(e,i),s&&(!r||r.indexOf(s.constructor)>-1))return s;o=o.parent}return null};dt.prototype._lookupImpl=function(e,r){if(Object.prototype.hasOwnProperty.call(this._lookupCache,r))return this._lookupCache[r];var n=this.get(e[0]),i=null;if(n)e.length===1?i=n:n instanceof dt&&(e=e.slice(1),i=n._lookupImpl(e,e.join(".")));else for(var s=0;s<this.nestedArray.length;++s)this._nestedArray[s]instanceof dt&&(n=this._nestedArray[s]._lookupImpl(e,r))&&(i=n);return this._lookupCache[r]=i,i};dt.prototype.lookupType=function(e){var r=this.lookup(e,[$o]);if(!r)throw Error("no such type: "+e);return r};dt.prototype.lookupEnum=function(e){var r=this.lookup(e,[Ko]);if(!r)throw Error("no such Enum '"+e+"' in "+this);return r};dt.prototype.lookupTypeOrEnum=function(e){var r=this.lookup(e,[$o,Ko]);if(!r)throw Error("no such Type or Enum '"+e+"' in "+this);return r};dt.prototype.lookupService=function(e){var r=this.lookup(e,[Cl]);if(!r)throw Error("no such Service '"+e+"' in "+this);return r};dt._configure=function(t,e,r){$o=t,Cl=e,Ko=r}});var Tp=x((noe,dO)=>{"use strict";dO.exports=os;var BA=Zs();((os.prototype=Object.create(BA.prototype)).constructor=os).className="MapField";var Zj=Yo(),Mc=Cr();function os(t,e,r,n,i,s){if(BA.call(this,t,e,n,void 0,void 0,i,s),!Mc.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}os.fromJSON=function(e,r){return new os(e,r.id,r.keyType,r.type,r.options,r.comment)};os.prototype.toJSON=function(e){var r=e?!!e.keepComments:!1;return Mc.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};os.prototype.resolve=function(){if(this.resolved)return this;if(Zj.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return BA.prototype.resolve.call(this)};os.d=function(e,r,n){return typeof n=="function"?n=Mc.decorateType(n).name:n&&typeof n=="object"&&(n=Mc.decorateEnum(n).name),function(s,o){Mc.decorateType(s.constructor).add(new os(o,e,r,n))}}});var Rp=x((ioe,pO)=>{"use strict";pO.exports=Vo;var PA=eo();((Vo.prototype=Object.create(PA.prototype)).constructor=Vo).className="Method";var xl=Cr();function Vo(t,e,r,n,i,s,o,a,l){if(xl.isObject(i)?(o=i,i=s=void 0):xl.isObject(s)&&(o=s,s=void 0),!(e===void 0||xl.isString(e)))throw TypeError("type must be a string");if(!xl.isString(r))throw TypeError("requestType must be a string");if(!xl.isString(n))throw TypeError("responseType must be a string");PA.call(this,t,o),this.type=e||"rpc",this.requestType=r,this.requestStream=i?!0:void 0,this.responseType=n,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=l}Vo.fromJSON=function(e,r){return new Vo(e,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment,r.parsedOptions)};Vo.prototype.toJSON=function(e){var r=e?!!e.keepComments:!1;return xl.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",r?this.comment:void 0,"parsedOptions",this.parsedOptions])};Vo.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),PA.prototype.resolve.call(this))}});var kp=x((soe,mO)=>{"use strict";mO.exports=En;var as=wl();((En.prototype=Object.create(as.prototype)).constructor=En).className="Service";var FA=Rp(),Uc=Cr(),e$=DA();function En(t,e){as.call(this,t,e),this.methods={},this._methodsArray=null}En.fromJSON=function(e,r){var n=new En(e,r.options);if(r.methods)for(var i=Object.keys(r.methods),s=0;s<i.length;++s)n.add(FA.fromJSON(i[s],r.methods[i[s]]));return r.nested&&n.addJSON(r.nested),r.edition&&(n._edition=r.edition),n.comment=r.comment,n._defaultEdition="proto3",n};En.prototype.toJSON=function(e){var r=as.prototype.toJSON.call(this,e),n=e?!!e.keepComments:!1;return Uc.toObject(["edition",this._editionToJSON(),"options",r&&r.options||void 0,"methods",as.arrayToJSON(this.methodsArray,e)||{},"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(En.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Uc.toArray(this.methods))}});function gO(t){return t._methodsArray=null,t}En.prototype.get=function(e){return this.methods[e]||as.prototype.get.call(this,e)};En.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;as.prototype.resolve.call(this);for(var e=this.methodsArray,r=0;r<e.length;++r)e[r].resolve();return this};En.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,as.prototype._resolveFeaturesRecursive.call(this,e),this.methodsArray.forEach(r=>{r._resolveFeaturesRecursive(e)}),this):this};En.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof FA?(this.methods[e.name]=e,e.parent=this,gO(this)):as.prototype.add.call(this,e)};En.prototype.remove=function(e){if(e instanceof FA){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,gO(this)}return as.prototype.remove.call(this,e)};En.prototype.create=function(e,r,n){for(var i=new e$.Service(e,r,n),s=0,o;s<this.methodsArray.length;++s){var a=Uc.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[a]=Uc.codegen(["r","c"],Uc.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}});var Op=x((ooe,_O)=>{"use strict";_O.exports=Di;var t$=wi();function Di(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)this[e[r]]=t[e[r]]}Di.create=function(e){return this.$type.create(e)};Di.encode=function(e,r){return this.$type.encode(e,r)};Di.encodeDelimited=function(e,r){return this.$type.encodeDelimited(e,r)};Di.decode=function(e){return this.$type.decode(e)};Di.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};Di.verify=function(e){return this.$type.verify(e)};Di.fromObject=function(e){return this.$type.fromObject(e)};Di.toObject=function(e,r){return this.$type.toObject(e,r)};Di.prototype.toJSON=function(){return this.$type.toObject(this,t$.toJSONOptions)}});var LA=x((aoe,yO)=>{"use strict";yO.exports=i$;var r$=si(),ls=Yo(),EO=Cr();function n$(t){return"missing required '"+t.name+"'"}function i$(t){for(var e=EO.codegen(["r","l","e"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),r=0;r<t.fieldsArray.length;++r){var n=t._fieldsArray[r].resolve(),i=n.resolvedType instanceof r$?"int32":n.type,s="m"+EO.safeProp(n.name);e("case %i: {",n.id),n.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),ls.defaults[n.keyType]!==void 0?e("k=%j",ls.defaults[n.keyType]):e("k=null"),ls.defaults[i]!==void 0?e("value=%j",ls.defaults[i]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),ls.basic[i]===void 0?e("value=types[%i].decode(r,r.uint32())",r):e("value=r.%s()",i),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),ls.long[n.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):n.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),ls.packed[i]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,i)("}else"),ls.basic[i]===void 0?e(n.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",s,r):e("%s.push(r.%s())",s,i)):ls.basic[i]===void 0?e(n.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",s,r):e("%s=r.%s()",s,i),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<t._fieldsArray.length;++r){var o=t._fieldsArray[r];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",n$(o))}return e("return m")}});var qA=x((loe,AO)=>{"use strict";AO.exports=a$;var s$=si(),MA=Cr();function Mn(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function UA(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof s$){t("switch(%s){",n)("default:")("return%j",Mn(e,"enum value"));for(var i=Object.keys(e.resolvedType.values),s=0;s<i.length;++s)t("case %i:",e.resolvedType.values[i[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",Mn(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",Mn(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",Mn(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",Mn(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",Mn(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",Mn(e,"buffer"));break}return t}function o$(t,e,r){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",Mn(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",Mn(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",r)("return%j",Mn(e,"boolean key"));break}return t}function a$(t){var e=MA.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=t.oneofsArray,n={};r.length&&e("var p={}");for(var i=0;i<t.fieldsArray.length;++i){var s=t._fieldsArray[i].resolve(),o="m"+MA.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)e("if(!util.isObject(%s))",o)("return%j",Mn(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),o$(e,s,"k[i]"),UA(e,s,i,o+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",o)("return%j",Mn(s,"array"))("for(var i=0;i<%s.length;++i){",o),UA(e,s,i,o+"[i]")("}");else{if(s.partOf){var a=MA.safeProp(s.partOf.name);n[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),n[s.partOf.name]=1,e("p%s=1",a)}UA(e,s,i,o)}s.optional&&e("}")}return e("return null")}});var QA=x(bO=>{"use strict";var vO=bO,qc=si(),Ii=Cr();function HA(t,e,r,n){var i=!1;if(e.resolvedType)if(e.resolvedType instanceof qc){t("switch(d%s){",n);for(var s=e.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===e.typeDefault&&!i&&(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),e.repeated||t("break"),i=!0),t("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",n,s[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var l=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n);break}}return t}vO.fromObject=function(e){var r=e.fieldsArray,n=Ii.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!r.length)return n("return new this.ctor");n("var m=new this.ctor");for(var i=0;i<r.length;++i){var s=r[i].resolve(),o=Ii.safeProp(s.name);s.map?(n("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),HA(n,s,i,o+"[ks[i]]")("}")("}")):s.repeated?(n("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),HA(n,s,i,o+"[i]")("}")("}")):(s.resolvedType instanceof qc||n("if(d%s!=null){",o),HA(n,s,i,o),s.resolvedType instanceof qc||n("}"))}return n("return m")};function WA(t,e,r,n){if(e.resolvedType)e.resolvedType instanceof qc?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):t("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n);break}}return t}vO.toObject=function(e){var r=e.fieldsArray.slice().sort(Ii.compareFieldsById);if(!r.length)return Ii.codegen()("return {}");for(var n=Ii.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],o=[],a=0;a<r.length;++a)r[a].partOf||(r[a].resolve().repeated?i:r[a].map?s:o).push(r[a]);if(i.length){for(n("if(o.arrays||o.defaults){"),a=0;a<i.length;++a)n("d%s=[]",Ii.safeProp(i[a].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),a=0;a<s.length;++a)n("d%s={}",Ii.safeProp(s[a].name));n("}")}if(o.length){for(n("if(o.defaults){"),a=0;a<o.length;++a){var l=o[a],u=Ii.safeProp(l.name);if(l.resolvedType instanceof qc)n("d%s=o.enums===String?%j:%j",u,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var c="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",u,c)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else n("d%s=%j",u,l.typeDefault)}n("}")}var f=!1;for(a=0;a<r.length;++a){var l=r[a],h=e._fieldsArray.indexOf(l),u=Ii.safeProp(l.name);l.map?(f||(f=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),WA(n,l,h,u+"[ks2[j]]")("}")):l.repeated?(n("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),WA(n,l,h,u+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",u,l.name),WA(n,l,h,u),l.partOf&&n("if(o.oneofs)")("d%s=%j",Ii.safeProp(l.partOf.name),l.name)),n("}")}return n("return d")}});var GA=x(SO=>{"use strict";var l$=SO,u$=Op();l$[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),r=this.lookup(e);if(r){var n=t["@type"].charAt(0)==="."?t["@type"].slice(1):t["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var r="type.googleapis.com/",n="",i="";if(e&&e.json&&t.type_url&&t.value){i=t.type_url.substring(t.type_url.lastIndexOf("/")+1),n=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var s=this.lookup(i);s&&(t=s.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof u$){var o=t.$type.toObject(t,e),a=t.$type.fullName[0]==="."?t.$type.fullName.slice(1):t.$type.fullName;return n===""&&(n=r),i=n+a,o["@type"]=i,o}return this.toObject(t,e)}}});var Pp=x((foe,wO)=>{"use strict";wO.exports=Nt;var Un=wl();((Nt.prototype=Object.create(Un.prototype)).constructor=Nt).className="Type";var c$=si(),KA=zo(),Np=Zs(),f$=Tp(),h$=kp(),jA=Op(),$A=xp(),d$=Cp(),Wr=Cr(),p$=zA(),g$=LA(),m$=qA(),CO=QA(),_$=GA();function Nt(t,e){Un.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(Nt.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var r=this.fields[t[e]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Wr.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Wr.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Nt.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof jA||((t.prototype=new jA).constructor=t,Wr.merge(t.prototype,e)),t.$type=t.prototype.$type=this,Wr.merge(t,jA,!0),this._ctor=t;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:Wr.oneOfGetter(this._oneofsArray[r].oneof),set:Wr.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(t.prototype,n)}}});Nt.generateConstructor=function(e){for(var r=Wr.codegen(["p"],e.name),n=0,i;n<e.fieldsArray.length;++n)(i=e._fieldsArray[n]).map?r("this%s={}",Wr.safeProp(i.name)):i.repeated&&r("this%s=[]",Wr.safeProp(i.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function Bp(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}Nt.fromJSON=function(e,r){var n=new Nt(e,r.options);n.extensions=r.extensions,n.reserved=r.reserved;for(var i=Object.keys(r.fields),s=0;s<i.length;++s)n.add((typeof r.fields[i[s]].keyType<"u"?f$.fromJSON:Np.fromJSON)(i[s],r.fields[i[s]]));if(r.oneofs)for(i=Object.keys(r.oneofs),s=0;s<i.length;++s)n.add(KA.fromJSON(i[s],r.oneofs[i[s]]));if(r.nested)for(i=Object.keys(r.nested),s=0;s<i.length;++s){var o=r.nested[i[s]];n.add((o.id!==void 0?Np.fromJSON:o.fields!==void 0?Nt.fromJSON:o.values!==void 0?c$.fromJSON:o.methods!==void 0?h$.fromJSON:Un.fromJSON)(i[s],o))}return r.extensions&&r.extensions.length&&(n.extensions=r.extensions),r.reserved&&r.reserved.length&&(n.reserved=r.reserved),r.group&&(n.group=!0),r.comment&&(n.comment=r.comment),r.edition&&(n._edition=r.edition),n._defaultEdition="proto3",n};Nt.prototype.toJSON=function(e){var r=Un.prototype.toJSON.call(this,e),n=e?!!e.keepComments:!1;return Wr.toObject(["edition",this._editionToJSON(),"options",r&&r.options||void 0,"oneofs",Un.arrayToJSON(this.oneofsArray,e),"fields",Un.arrayToJSON(this.fieldsArray.filter(function(i){return!i.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};Nt.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;Un.prototype.resolveAll.call(this);var e=this.oneofsArray;for(n=0;n<e.length;)e[n++].resolve();for(var r=this.fieldsArray,n=0;n<r.length;)r[n++].resolve();return this};Nt.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,Un.prototype._resolveFeaturesRecursive.call(this,e),this.oneofsArray.forEach(r=>{r._resolveFeatures(e)}),this.fieldsArray.forEach(r=>{r._resolveFeatures(e)}),this):this};Nt.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};Nt.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Np&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),Bp(this)}return e instanceof KA?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),Bp(this)):Un.prototype.add.call(this,e)};Nt.prototype.remove=function(e){if(e instanceof Np&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),Bp(this)}if(e instanceof KA){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),Bp(this)}return Un.prototype.remove.call(this,e)};Nt.prototype.isReservedId=function(e){return Un.isReservedId(this.reserved,e)};Nt.prototype.isReservedName=function(e){return Un.isReservedName(this.reserved,e)};Nt.prototype.create=function(e){return new this.ctor(e)};Nt.prototype.setup=function(){for(var e=this.fullName,r=[],n=0;n<this.fieldsArray.length;++n)r.push(this._fieldsArray[n].resolve().resolvedType);this.encode=p$(this)({Writer:d$,types:r,util:Wr}),this.decode=g$(this)({Reader:$A,types:r,util:Wr}),this.verify=m$(this)({types:r,util:Wr}),this.fromObject=CO.fromObject(this)({types:r,util:Wr}),this.toObject=CO.toObject(this)({types:r,util:Wr});var i=_$[e];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this};Nt.prototype.encode=function(e,r){return this.setup().encode(e,r)};Nt.prototype.encodeDelimited=function(e,r){return this.encode(e,r&&r.len?r.fork():r).ldelim()};Nt.prototype.decode=function(e,r){return this.setup().decode(e,r)};Nt.prototype.decodeDelimited=function(e){return e instanceof $A||(e=$A.create(e)),this.decode(e,e.uint32())};Nt.prototype.verify=function(e){return this.setup().verify(e)};Nt.prototype.fromObject=function(e){return this.setup().fromObject(e)};Nt.prototype.toObject=function(e,r){return this.setup().toObject(e,r)};Nt.d=function(e){return function(n){Wr.decorateType(n,e)}}});var Up=x((hoe,IO)=>{"use strict";IO.exports=yn;var Mp=wl();((yn.prototype=Object.create(Mp.prototype)).constructor=yn).className="Root";var Fp=Zs(),YA=si(),E$=zo(),to=Cr(),VA,XA,Hc;function yn(t){Mp.call(this,"",t),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}yn.fromJSON=function(e,r){return r||(r=new yn),e.options&&r.setOptions(e.options),r.addJSON(e.nested).resolveAll()};yn.prototype.resolvePath=to.path.resolve;yn.prototype.fetch=to.fetch;function DO(){}yn.prototype.load=function t(e,r,n){typeof r=="function"&&(n=r,r=void 0);var i=this;if(!n)return to.asPromise(t,i,e,r);var s=n===DO;function o(p,g){if(n){if(s)throw p;g&&g.resolveAll();var m=n;n=null,m(p,g)}}function a(p){var g=p.lastIndexOf("google/protobuf/");if(g>-1){var m=p.substring(g);if(m in Hc)return m}return null}function l(p,g){try{if(to.isString(g)&&g.charAt(0)==="{"&&(g=JSON.parse(g)),!to.isString(g))i.setOptions(g.options).addJSON(g.nested);else{XA.filename=p;var m=XA(g,i,r),E,A=0;if(m.imports)for(;A<m.imports.length;++A)(E=a(m.imports[A])||i.resolvePath(p,m.imports[A]))&&u(E);if(m.weakImports)for(A=0;A<m.weakImports.length;++A)(E=a(m.weakImports[A])||i.resolvePath(p,m.weakImports[A]))&&u(E,!0)}}catch(w){o(w)}!s&&!c&&o(null,i)}function u(p,g){if(p=a(p)||p,!(i.files.indexOf(p)>-1)){if(i.files.push(p),p in Hc){s?l(p,Hc[p]):(++c,setTimeout(function(){--c,l(p,Hc[p])}));return}if(s){var m;try{m=to.fs.readFileSync(p).toString("utf8")}catch(E){g||o(E);return}l(p,m)}else++c,i.fetch(p,function(E,A){if(--c,!!n){if(E){g?c||o(null,i):o(E);return}l(p,A)}})}}var c=0;to.isString(e)&&(e=[e]);for(var f=0,h;f<e.length;++f)(h=i.resolvePath("",e[f]))&&u(h);return s?(i.resolveAll(),i):(c||o(null,i),i)};yn.prototype.loadSync=function(e,r){if(!to.isNode)throw Error("not supported");return this.load(e,r,DO)};yn.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return Mp.prototype.resolveAll.call(this)};var Lp=/^[A-Z]/;function xO(t,e){var r=e.parent.lookup(e.extend);if(r){var n=new Fp(e.fullName,e.id,e.type,e.rule,void 0,e.options);return r.get(n.name)||(n.declaringField=e,e.extensionField=n,r.add(n)),!0}return!1}yn.prototype._handleAdd=function(e){if(e instanceof Fp)e.extend!==void 0&&!e.extensionField&&(xO(this,e)||this.deferred.push(e));else if(e instanceof YA)Lp.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof E$)){if(e instanceof VA)for(var r=0;r<this.deferred.length;)xO(this,this.deferred[r])?this.deferred.splice(r,1):++r;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);Lp.test(e.name)&&(e.parent[e.name]=e)}(e instanceof VA||e instanceof YA||e instanceof Fp)&&(this._fullyQualifiedObjects[e.fullName]=e)};yn.prototype._handleRemove=function(e){if(e instanceof Fp){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var r=this.deferred.indexOf(e);r>-1&&this.deferred.splice(r,1)}}else if(e instanceof YA)Lp.test(e.name)&&delete e.parent[e.name];else if(e instanceof Mp){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);Lp.test(e.name)&&delete e.parent[e.name]}delete this._fullyQualifiedObjects[e.fullName]};yn._configure=function(t,e,r){VA=t,XA=e,Hc=r}});var Cr=x((doe,RO)=>{"use strict";var nr=RO.exports=wi(),TO=IA(),JA,ZA;nr.codegen=iO();nr.fetch=oO();nr.path=uO();nr.fs=nr.inquire("fs");nr.toArray=function(e){if(e){for(var r=Object.keys(e),n=new Array(r.length),i=0;i<r.length;)n[i]=e[r[i++]];return n}return[]};nr.toObject=function(e){for(var r={},n=0;n<e.length;){var i=e[n++],s=e[n++];s!==void 0&&(r[i]=s)}return r};var y$=/\\/g,A$=/"/g;nr.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};nr.safeProp=function(e){return!/^[$\w_]+$/.test(e)||nr.isReserved(e)?'["'+e.replace(y$,"\\\\").replace(A$,'\\"')+'"]':"."+e};nr.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var v$=/_([a-z])/g;nr.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(v$,function(r,n){return n.toUpperCase()})};nr.compareFieldsById=function(e,r){return e.id-r.id};nr.decorateType=function(e,r){if(e.$type)return r&&e.$type.name!==r&&(nr.decorateRoot.remove(e.$type),e.$type.name=r,nr.decorateRoot.add(e.$type)),e.$type;JA||(JA=Pp());var n=new JA(r||e.name);return nr.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var b$=0;nr.decorateEnum=function(e){if(e.$type)return e.$type;ZA||(ZA=si());var r=new ZA("Enum"+b$++,e);return nr.decorateRoot.add(r),Object.defineProperty(e,"$type",{value:r,enumerable:!1}),r};nr.setProperty=function(e,r,n,i){function s(o,a,l){var u=a.shift();if(u==="__proto__"||u==="prototype")return o;if(a.length>0)o[u]=s(o[u]||{},a,l);else{var c=o[u];if(c&&i)return o;c&&(l=[].concat(c).concat(l)),o[u]=l}return o}if(typeof e!="object")throw TypeError("dst must be an object");if(!r)throw TypeError("path must be specified");return r=r.split("."),s(e,r,n)};Object.defineProperty(nr,"decorateRoot",{get:function(){return TO.decorated||(TO.decorated=new(Up()))}})});var Yo=x(kO=>{"use strict";var Wc=kO,S$=Cr(),C$=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Qc(t,e){var r=0,n={};for(e|=0;r<t.length;)n[C$[r+e]]=t[r++];return n}Wc.basic=Qc([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Wc.defaults=Qc([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",S$.emptyArray,null]);Wc.long=Qc([0,0,0,1,1],7);Wc.mapKey=Qc([0,0,0,5,5,0,0,0,1,1,0,2],2);Wc.packed=Qc([1,5,0,0,0,5,5,0,0,0,1,1,0])});var Zs=x((goe,NO)=>{"use strict";NO.exports=wr;var jc=eo();((wr.prototype=Object.create(jc.prototype)).constructor=wr).className="Field";var OO=si(),ev=Yo(),lr=Cr(),Gc,w$=/^required|optional|repeated$/;wr.fromJSON=function(e,r){var n=new wr(e,r.id,r.type,r.rule,r.extend,r.options,r.comment);return r.edition&&(n._edition=r.edition),n._defaultEdition="proto3",n};function wr(t,e,r,n,i,s,o){if(lr.isObject(n)?(o=i,s=n,n=i=void 0):lr.isObject(i)&&(o=s,s=i,i=void 0),jc.call(this,t,s),!lr.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!lr.isString(r))throw TypeError("type must be a string");if(n!==void 0&&!w$.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==void 0&&!lr.isString(i))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=r,this.id=e,this.extend=i||void 0,this.repeated=n==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=lr.Long?ev.long[r]!==void 0:!1,this.bytes=r==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=o}Object.defineProperty(wr.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}});Object.defineProperty(wr.prototype,"optional",{get:function(){return!this.required}});Object.defineProperty(wr.prototype,"delimited",{get:function(){return this.resolvedType instanceof Gc&&this._features.message_encoding==="DELIMITED"}});Object.defineProperty(wr.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}});Object.defineProperty(wr.prototype,"hasPresence",{get:function(){return this.repeated||this.map?!1:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}});wr.prototype.setOption=function(e,r,n){return jc.prototype.setOption.call(this,e,r,n)};wr.prototype.toJSON=function(e){var r=e?!!e.keepComments:!1;return lr.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};wr.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=ev.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Gc?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof OO&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof OO)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=lr.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;lr.base64.test(this.typeDefault)?lr.base64.decode(this.typeDefault,e=lr.newBuffer(lr.base64.length(this.typeDefault)),0):lr.utf8.write(this.typeDefault,e=lr.newBuffer(lr.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=lr.emptyObject:this.repeated?this.defaultValue=lr.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Gc&&(this.parent.ctor.prototype[this.name]=this.defaultValue),jc.prototype.resolve.call(this)};wr.prototype._inferLegacyProtoFeatures=function(e){if(e!=="proto2"&&e!=="proto3")return{};var r={};if(this.rule==="required"&&(r.field_presence="LEGACY_REQUIRED"),this.parent&&ev.defaults[this.type]===void 0){var n=this.parent.get(this.type.split(".").pop());n&&n instanceof Gc&&n.group&&(r.message_encoding="DELIMITED")}return this.getOption("packed")===!0?r.repeated_field_encoding="PACKED":this.getOption("packed")===!1&&(r.repeated_field_encoding="EXPANDED"),r};wr.prototype._resolveFeatures=function(e){return jc.prototype._resolveFeatures.call(this,this._edition||e)};wr.d=function(e,r,n,i){return typeof r=="function"?r=lr.decorateType(r).name:r&&typeof r=="object"&&(r=lr.decorateEnum(r).name),function(o,a){lr.decorateType(o.constructor).add(new wr(a,e,r,n,{default:i}))}};wr._configure=function(e){Gc=e}});var zo=x((moe,FO)=>{"use strict";FO.exports=An;var Hp=eo();((An.prototype=Object.create(Hp.prototype)).constructor=An).className="OneOf";var BO=Zs(),qp=Cr();function An(t,e,r,n){if(Array.isArray(e)||(r=e,e=void 0),Hp.call(this,t,r),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}An.fromJSON=function(e,r){return new An(e,r.oneof,r.options,r.comment)};An.prototype.toJSON=function(e){var r=e?!!e.keepComments:!1;return qp.toObject(["options",this.options,"oneof",this.oneof,"comment",r?this.comment:void 0])};function PO(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}An.prototype.add=function(e){if(!(e instanceof BO))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,PO(this),this};An.prototype.remove=function(e){if(!(e instanceof BO))throw TypeError("field must be a Field");var r=this.fieldsArray.indexOf(e);if(r<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(r,1),r=this.oneof.indexOf(e.name),r>-1&&this.oneof.splice(r,1),e.partOf=null,this};An.prototype.onAdd=function(e){Hp.prototype.onAdd.call(this,e);for(var r=this,n=0;n<this.oneof.length;++n){var i=e.get(this.oneof[n]);i&&!i.partOf&&(i.partOf=r,r.fieldsArray.push(i))}PO(this)};An.prototype.onRemove=function(e){for(var r=0,n;r<this.fieldsArray.length;++r)(n=this.fieldsArray[r]).parent&&n.parent.remove(n);Hp.prototype.onRemove.call(this,e)};Object.defineProperty(An.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return!1;var t=this.fieldsArray[0];return t.options!=null&&t.options.proto3_optional===!0}});An.d=function(){for(var e=new Array(arguments.length),r=0;r<arguments.length;)e[r]=arguments[r++];return function(i,s){qp.decorateType(i.constructor).add(new An(s,e)),Object.defineProperty(i,s,{get:qp.oneOfGetter(e),set:qp.oneOfSetter(e)})}}});var eo=x((_oe,LO)=>{"use strict";LO.exports=Rr;Rr.className="ReflectionObject";var x$=zo(),$c=Cr(),Wp,D$={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},I$={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},T$={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function Rr(t,e){if(!$c.isString(t))throw TypeError("name must be a string");if(e&&!$c.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(Rr.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});Rr.prototype.toJSON=function(){throw Error()};Rr.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var r=e.root;r instanceof Wp&&r._handleAdd(this)};Rr.prototype.onRemove=function(e){var r=e.root;r instanceof Wp&&r._handleRemove(this),this.parent=null,this.resolved=!1};Rr.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Wp&&(this.resolved=!0),this)};Rr.prototype._resolveFeaturesRecursive=function(e){return this._resolveFeatures(this._edition||e)};Rr.prototype._resolveFeatures=function(e){if(!this._featuresResolved){var r={};if(!e)throw new Error("Unknown edition for "+this.fullName);var n=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if(e==="proto2")r=Object.assign({},I$);else if(e==="proto3")r=Object.assign({},T$);else if(e==="2023")r=Object.assign({},D$);else throw new Error("Unknown edition: "+e);this._features=Object.assign(r,n||{}),this._featuresResolved=!0;return}if(this.partOf instanceof x$){var i=Object.assign({},this.partOf._features);this._features=Object.assign(i,n||{})}else if(!this.declaringField)if(this.parent){var s=Object.assign({},this.parent._features);this._features=Object.assign(s,n||{})}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}};Rr.prototype._inferLegacyProtoFeatures=function(){return{}};Rr.prototype.getOption=function(e){if(this.options)return this.options[e]};Rr.prototype.setOption=function(e,r,n){return this.options||(this.options={}),/^features\./.test(e)?$c.setProperty(this.options,e,r,n):(!n||this.options[e]===void 0)&&(this.getOption(e)!==r&&(this.resolved=!1),this.options[e]=r),this};Rr.prototype.setParsedOption=function(e,r,n){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(n){var s=i.find(function(l){return Object.prototype.hasOwnProperty.call(l,e)});if(s){var o=s[e];$c.setProperty(o,n,r)}else s={},s[e]=$c.setProperty({},n,r),i.push(s)}else{var a={};a[e]=r,i.push(a)}return this};Rr.prototype.setOptions=function(e,r){if(e)for(var n=Object.keys(e),i=0;i<n.length;++i)this.setOption(n[i],e[n[i]],r);return this};Rr.prototype.toString=function(){var e=this.constructor.className,r=this.fullName;return r.length?e+" "+r:e};Rr.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition};Rr._configure=function(t){Wp=t}});var si=x((Eoe,UO)=>{"use strict";UO.exports=oi;var tv=eo();((oi.prototype=Object.create(tv.prototype)).constructor=oi).className="Enum";var MO=wl(),Qp=Cr();function oi(t,e,r,n,i,s){if(tv.call(this,t,r),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=i||{},this.valuesOptions=s,this._valuesFeatures={},this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)typeof e[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}oi.prototype._resolveFeatures=function(e){return e=this._edition||e,tv.prototype._resolveFeatures.call(this,e),Object.keys(this.values).forEach(r=>{var n=Object.assign({},this._features);this._valuesFeatures[r]=Object.assign(n,this.valuesOptions&&this.valuesOptions[r]&&this.valuesOptions[r].features)}),this};oi.fromJSON=function(e,r){var n=new oi(e,r.values,r.options,r.comment,r.comments);return n.reserved=r.reserved,r.edition&&(n._edition=r.edition),n._defaultEdition="proto3",n};oi.prototype.toJSON=function(e){var r=e?!!e.keepComments:!1;return Qp.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",r?this.comment:void 0,"comments",r?this.comments:void 0])};oi.prototype.add=function(e,r,n,i){if(!Qp.isString(e))throw TypeError("name must be a string");if(!Qp.isInteger(r))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[r]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+r+" in "+this);this.values[e]=r}else this.valuesById[this.values[e]=r]=e;return i&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=n||null,this};oi.prototype.remove=function(e){if(!Qp.isString(e))throw TypeError("name must be a string");var r=this.values[e];if(r==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[r],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};oi.prototype.isReservedId=function(e){return MO.isReservedId(this.reserved,e)};oi.prototype.isReservedName=function(e){return MO.isReservedName(this.reserved,e)}});var zA=x((yoe,HO)=>{"use strict";HO.exports=k$;var R$=si(),rv=Yo(),nv=Cr();function qO(t,e,r,n){return e.delimited?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(e.id<<3|2)>>>0)}function k$(t){for(var e=nv.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r,n,i=t.fieldsArray.slice().sort(nv.compareFieldsById),r=0;r<i.length;++r){var s=i[r].resolve(),o=t._fieldsArray.indexOf(s),a=s.resolvedType instanceof R$?"int32":s.type,l=rv.basic[a];n="m"+nv.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|rv.mapKey[s.keyType],s.keyType),l===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,n):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,a,n),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",n,n),s.packed&&rv.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",a,n)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",n),l===void 0?qO(e,s,o,n+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|l)>>>0,a,n)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,s.name),l===void 0?qO(e,s,o,n):e("w.uint32(%i).%s(%s)",(s.id<<3|l)>>>0,a,n))}return e("return w")}});var QO=x((Aoe,WO)=>{"use strict";var pt=WO.exports=rO();pt.build="light";function O$(t,e,r){return typeof e=="function"?(r=e,e=new pt.Root):e||(e=new pt.Root),e.load(t,r)}pt.load=O$;function N$(t,e){return e||(e=new pt.Root),e.loadSync(t)}pt.loadSync=N$;pt.encoder=zA();pt.decoder=LA();pt.verifier=qA();pt.converter=QA();pt.ReflectionObject=eo();pt.Namespace=wl();pt.Root=Up();pt.Enum=si();pt.Type=Pp();pt.Field=Zs();pt.OneOf=zo();pt.MapField=Tp();pt.Service=kp();pt.Method=Rp();pt.Message=Op();pt.wrappers=GA();pt.types=Yo();pt.util=Cr();pt.ReflectionObject._configure(pt.Root);pt.Namespace._configure(pt.Type,pt.Service,pt.Enum);pt.Root._configure(pt.Type);pt.Field._configure(pt.Type)});var sv=x((voe,$O)=>{"use strict";$O.exports=jO;var iv=/[\s{}=;:[\],'"()<>]/g,B$=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,P$=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,F$=/^ *[*/]+ */,L$=/^\s*\*?\/*/,M$=/\n/g,U$=/\s/,q$=/\\(.?)/g,H$={0:"\0",r:"\r",n:`
`,t:"	"};function GO(t){return t.replace(q$,function(e,r){switch(r){case"\\":case"":return r;default:return H$[r]||""}})}jO.unescape=GO;function jO(t,e){t=t.toString();var r=0,n=t.length,i=1,s=0,o={},a=[],l=null;function u(S){return Error("illegal "+S+" (line "+i+")")}function c(){var S=l==="'"?P$:B$;S.lastIndex=r-1;var B=S.exec(t);if(!B)throw u("string");return r=S.lastIndex,E(l),l=null,GO(B[1])}function f(S){return t.charAt(S)}function h(S,B,F){var M={type:t.charAt(S++),lineEmpty:!1,leading:F},D;e?D=2:D=3;var I=S-D,N;do if(--I<0||(N=t.charAt(I))===`
`){M.lineEmpty=!0;break}while(N===" "||N==="	");for(var T=t.substring(S,B).split(M$),Q=0;Q<T.length;++Q)T[Q]=T[Q].replace(e?L$:F$,"").trim();M.text=T.join(`
`).trim(),o[i]=M,s=i}function p(S){var B=g(S),F=t.substring(S,B),M=/^\s*\/\//.test(F);return M}function g(S){for(var B=S;B<n&&f(B)!==`
`;)B++;return B}function m(){if(a.length>0)return a.shift();if(l)return c();var S,B,F,M,D,I=r===0;do{if(r===n)return null;for(S=!1;U$.test(F=f(r));)if(F===`
`&&(I=!0,++i),++r===n)return null;if(f(r)==="/"){if(++r===n)throw u("comment");if(f(r)==="/")if(e){if(M=r,D=!1,p(r-1)){D=!0;do if(r=g(r),r===n||(r++,!I))break;while(p(r))}else r=Math.min(n,g(r)+1);D&&(h(M,r,I),I=!0),i++,S=!0}else{for(D=f(M=r+1)==="/";f(++r)!==`
`;)if(r===n)return null;++r,D&&(h(M,r-1,I),I=!0),++i,S=!0}else if((F=f(r))==="*"){M=r+1,D=e||f(M)==="*";do{if(F===`
`&&++i,++r===n)throw u("comment");B=F,F=f(r)}while(B!=="*"||F!=="/");++r,D&&(h(M,r-2,I),I=!0),S=!0}else return"/"}}while(S);var N=r;iv.lastIndex=0;var T=iv.test(f(N++));if(!T)for(;N<n&&!iv.test(f(N));)++N;var Q=t.substring(r,r=N);return(Q==='"'||Q==="'")&&(l=Q),Q}function E(S){a.push(S)}function A(){if(!a.length){var S=m();if(S===null)return null;E(S)}return a[0]}function w(S,B){var F=A(),M=F===S;if(M)return m(),!0;if(!B)throw u("token '"+F+"', '"+S+"' expected");return!1}function k(S){var B=null,F;return S===void 0?(F=o[i-1],delete o[i-1],F&&(e||F.type==="*"||F.lineEmpty)&&(B=F.leading?F.text:null)):(s<S&&A(),F=o[S],delete o[S],F&&!F.lineEmpty&&(e||F.type==="/")&&(B=F.leading?null:F.text)),B}return Object.defineProperty({next:m,peek:A,push:E,skip:w,cmnt:k},"line",{get:function(){return i}})}});var JO=x((boe,XO)=>{"use strict";XO.exports=us;us.filename=null;us.defaults={keepCase:!1};var W$=sv(),KO=Up(),zO=Pp(),YO=Zs(),Q$=Tp(),VO=zo(),G$=si(),j$=kp(),$$=Rp(),K$=eo(),z$=Yo(),ov=Cr(),Y$=/^[1-9][0-9]*$/,V$=/^-?[1-9][0-9]*$/,X$=/^0[x][0-9a-fA-F]+$/,J$=/^-?0[x][0-9a-fA-F]+$/,Z$=/^0[0-7]+$/,eK=/^-?0[0-7]+$/,tK=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,Ti=/^[a-zA-Z_][a-zA-Z_0-9]*$/,Ri=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function us(t,e,r){e instanceof KO||(r=e,e=new KO),r||(r=us.defaults);var n=r.preferTrailingComment||!1,i=W$(t,r.alternateCommentMode||!1),s=i.next,o=i.push,a=i.peek,l=i.skip,u=i.cmnt,c=!0,f,h,p,g="proto2",m=e,E=[],A={},w=r.keepCase?function(te){return te}:ov.camelCase;function k(){E.forEach(te=>{te._edition=g,Object.keys(A).forEach(ee=>{te.getOption(ee)===void 0&&te.setOption(ee,A[ee],!0)})})}function S(te,ee,se){var Ae=us.filename;return se||(us.filename=null),Error("illegal "+(ee||"token")+" '"+te+"' ("+(Ae?Ae+", ":"")+"line "+i.line+")")}function B(){var te=[],ee;do{if((ee=s())!=='"'&&ee!=="'")throw S(ee);te.push(s()),l(ee),ee=a()}while(ee==='"'||ee==="'");return te.join("")}function F(te){var ee=s();switch(ee){case"'":case'"':return o(ee),B();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return D(ee,!0)}catch{if(te&&Ri.test(ee))return ee;throw S(ee,"value")}}function M(te,ee){var se,Ae;do if(ee&&((se=a())==='"'||se==="'")){var Ee=B();if(te.push(Ee),g>=2023)throw S(Ee,"id")}else try{te.push([Ae=I(s()),l("to",!0)?I(s()):Ae])}catch(ae){if(ee&&Ri.test(se)&&g>=2023)te.push(se);else throw ae}while(l(",",!0));var j={options:void 0};j.setOption=function(ae,pe){this.options===void 0&&(this.options={}),this.options[ae]=pe},O(j,function(pe){if(pe==="option")ue(j,pe),l(";");else throw S(pe)},function(){Gr(j)})}function D(te,ee){var se=1;switch(te.charAt(0)==="-"&&(se=-1,te=te.substring(1)),te){case"inf":case"INF":case"Inf":return se*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(Y$.test(te))return se*parseInt(te,10);if(X$.test(te))return se*parseInt(te,16);if(Z$.test(te))return se*parseInt(te,8);if(tK.test(te))return se*parseFloat(te);throw S(te,"number",ee)}function I(te,ee){switch(te){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!ee&&te.charAt(0)==="-")throw S(te,"id");if(V$.test(te))return parseInt(te,10);if(J$.test(te))return parseInt(te,16);if(eK.test(te))return parseInt(te,8);throw S(te,"id")}function N(){if(f!==void 0)throw S("package");if(f=s(),!Ri.test(f))throw S(f,"name");m=m.define(f),l(";")}function T(){var te=a(),ee;switch(te){case"weak":ee=p||(p=[]),s();break;case"public":s();default:ee=h||(h=[]);break}te=B(),l(";"),ee.push(te)}function Q(){if(l("="),g=B(),g<2023)throw S(g,"syntax");l(";")}function P(){if(l("="),g=B(),!["2023"].includes(g))throw S(g,"edition");l(";")}function y(te,ee){switch(ee){case"option":return ue(te,ee),l(";"),!0;case"message":return z(te,ee),!0;case"enum":return Z(te,ee),!0;case"service":return ys(te,ee),!0;case"extend":return Qn(te,ee),!0}return!1}function O(te,ee,se){var Ae=i.line;if(te&&(typeof te.comment!="string"&&(te.comment=u()),te.filename=us.filename),l("{",!0)){for(var Ee;(Ee=s())!=="}";)ee(Ee);l(";",!0)}else se&&se(),l(";"),te&&(typeof te.comment!="string"||n)&&(te.comment=u(Ae)||te.comment)}function z(te,ee){if(!Ti.test(ee=s()))throw S(ee,"type name");var se=new zO(ee);O(se,function(Ee){if(!y(se,Ee))switch(Ee){case"map":$(se,Ee);break;case"required":if(g!=="proto2")throw S(Ee);case"repeated":J(se,Ee);break;case"optional":if(g==="proto3")J(se,"proto3_optional");else{if(g!=="proto2")throw S(Ee);J(se,"optional")}break;case"oneof":K(se,Ee);break;case"extensions":M(se.extensions||(se.extensions=[]));break;case"reserved":M(se.reserved||(se.reserved=[]),!0);break;default:if(g==="proto2"||!Ri.test(Ee))throw S(Ee);o(Ee),J(se,"optional");break}}),te.add(se),te===m&&E.push(se)}function J(te,ee,se){var Ae=s();if(Ae==="group"){L(te,ee);return}for(;Ae.endsWith(".")||a().startsWith(".");)Ae+=s();if(!Ri.test(Ae))throw S(Ae,"type");var Ee=s();if(!Ti.test(Ee))throw S(Ee,"name");Ee=w(Ee),l("=");var j=new YO(Ee,I(s()),Ae,ee,se);if(O(j,function(we){if(we==="option")ue(j,we),l(";");else throw S(we)},function(){Gr(j)}),ee==="proto3_optional"){var ae=new VO("_"+Ee);j.setOption("proto3_optional",!0),ae.add(j),te.add(ae)}else te.add(j);te===m&&E.push(j)}function L(te,ee){if(g>=2023)throw S("group");var se=s();if(!Ti.test(se))throw S(se,"name");var Ae=ov.lcFirst(se);se===Ae&&(se=ov.ucFirst(se)),l("=");var Ee=I(s()),j=new zO(se);j.group=!0;var ae=new YO(Ae,Ee,se,ee);ae.filename=us.filename,O(j,function(we){switch(we){case"option":ue(j,we),l(";");break;case"required":case"repeated":J(j,we);break;case"optional":g==="proto3"?J(j,"proto3_optional"):J(j,"optional");break;case"message":z(j,we);break;case"enum":Z(j,we);break;case"reserved":M(j.reserved||(j.reserved=[]),!0);break;default:throw S(we)}}),te.add(j).add(ae)}function $(te){l("<");var ee=s();if(z$.mapKey[ee]===void 0)throw S(ee,"type");l(",");var se=s();if(!Ri.test(se))throw S(se,"type");l(">");var Ae=s();if(!Ti.test(Ae))throw S(Ae,"name");l("=");var Ee=new Q$(w(Ae),I(s()),ee,se);O(Ee,function(ae){if(ae==="option")ue(Ee,ae),l(";");else throw S(ae)},function(){Gr(Ee)}),te.add(Ee)}function K(te,ee){if(!Ti.test(ee=s()))throw S(ee,"name");var se=new VO(w(ee));O(se,function(Ee){Ee==="option"?(ue(se,Ee),l(";")):(o(Ee),J(se,"optional"))}),te.add(se)}function Z(te,ee){if(!Ti.test(ee=s()))throw S(ee,"name");var se=new G$(ee);O(se,function(Ee){switch(Ee){case"option":ue(se,Ee),l(";");break;case"reserved":M(se.reserved||(se.reserved=[]),!0),se.reserved===void 0&&(se.reserved=[]);break;default:fe(se,Ee)}}),te.add(se),te===m&&E.push(se)}function fe(te,ee){if(!Ti.test(ee))throw S(ee,"name");l("=");var se=I(s(),!0),Ae={options:void 0};Ae.getOption=function(Ee){return this.options[Ee]},Ae.setOption=function(Ee,j){K$.prototype.setOption.call(Ae,Ee,j)},Ae.setParsedOption=function(){},O(Ae,function(j){if(j==="option")ue(Ae,j),l(";");else throw S(j)},function(){Gr(Ae)}),te.add(ee,se,Ae.comment,Ae.parsedOptions||Ae.options)}function ue(te,ee){var se,Ae,Ee=!0;for(ee==="option"&&(ee=s());ee!=="=";){if(ee==="("){var j=s();l(")"),ee="("+j+")"}if(Ee){if(Ee=!1,ee.includes(".")&&!ee.includes("(")){var ae=ee.split(".");se=ae[0]+".",ee=ae[1];continue}se=ee}else Ae=Ae?Ae+=ee:ee;ee=s()}var pe=Ae?se.concat(Ae):se,we=he(te,pe);Ae=Ae&&Ae[0]==="."?Ae.slice(1):Ae,se=se&&se[se.length-1]==="."?se.slice(0,-1):se,bt(te,se,we,Ae)}function he(te,ee){if(l("{",!0)){for(var se={};!l("}",!0);){if(!Ti.test(Ut=s()))throw S(Ut,"name");if(Ut===null)throw S(Ut,"end of input");var Ae,Ee=Ut;if(l(":",!0),a()==="{")Ae=he(te,ee+"."+Ut);else if(a()==="["){Ae=[];var j;if(l("[",!0)){do j=F(!0),Ae.push(j);while(l(",",!0));l("]"),typeof j<"u"&&qe(te,ee+"."+Ut,j)}}else Ae=F(!0),qe(te,ee+"."+Ut,Ae);var ae=se[Ee];ae&&(Ae=[].concat(ae).concat(Ae)),se[Ee]=Ae,l(",",!0),l(";",!0)}return se}var pe=F(!0);return qe(te,ee,pe),pe}function qe(te,ee,se){if(m===te&&/^features\./.test(ee)){A[ee]=se;return}te.setOption&&te.setOption(ee,se)}function bt(te,ee,se,Ae){te.setParsedOption&&te.setParsedOption(ee,se,Ae)}function Gr(te){if(l("[",!0)){do ue(te,"option");while(l(",",!0));l("]")}return te}function ys(te,ee){if(!Ti.test(ee=s()))throw S(ee,"service name");var se=new j$(ee);O(se,function(Ee){if(!y(se,Ee))if(Ee==="rpc")As(se,Ee);else throw S(Ee)}),te.add(se),te===m&&E.push(se)}function As(te,ee){var se=u(),Ae=ee;if(!Ti.test(ee=s()))throw S(ee,"name");var Ee=ee,j,ae,pe,we;if(l("("),l("stream",!0)&&(ae=!0),!Ri.test(ee=s())||(j=ee,l(")"),l("returns"),l("("),l("stream",!0)&&(we=!0),!Ri.test(ee=s())))throw S(ee);pe=ee,l(")");var Ve=new $$(Ee,Ae,j,pe,ae,we);Ve.comment=se,O(Ve,function(Xr){if(Xr==="option")ue(Ve,Xr),l(";");else throw S(Xr)}),te.add(Ve)}function Qn(te,ee){if(!Ri.test(ee=s()))throw S(ee,"reference");var se=ee;O(null,function(Ee){switch(Ee){case"required":case"repeated":J(te,Ee,se);break;case"optional":g==="proto3"?J(te,"proto3_optional",se):J(te,"optional",se);break;default:if(g==="proto2"||!Ri.test(Ee))throw S(Ee);o(Ee),J(te,"optional",se);break}})}for(var Ut;(Ut=s())!==null;)switch(Ut){case"package":if(!c)throw S(Ut);N();break;case"import":if(!c)throw S(Ut);T();break;case"syntax":if(!c)throw S(Ut);Q();break;case"edition":if(!c)throw S(Ut);P();break;case"option":ue(m,Ut),l(";",!0);break;default:if(y(m,Ut)){c=!1;continue}throw S(Ut)}return k(),us.filename=null,{package:f,imports:h,weakImports:p,root:e}}});var t3=x((Soe,e3)=>{"use strict";e3.exports=ai;var rK=/\/|\./;function ai(t,e){rK.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),ai[t]=e}ai("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var ZO;ai("duration",{Duration:ZO={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});ai("timestamp",{Timestamp:ZO});ai("empty",{Empty:{fields:{}}});ai("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});ai("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});ai("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});ai.get=function(e){return ai[e]||null}});var n3=x((Coe,r3)=>{"use strict";var ro=r3.exports=QO();ro.build="full";ro.tokenize=sv();ro.parse=JO();ro.common=t3();ro.Root._configure(ro.Type,ro.parse,ro.common)});var Dl=x((woe,i3)=>{"use strict";i3.exports=n3()});var Gp=x((xoe,nK)=>{nK.exports={nested:{google:{nested:{protobuf:{options:{go_package:"google.golang.org/protobuf/types/descriptorpb",java_package:"com.google.protobuf",java_outer_classname:"DescriptorProtos",csharp_namespace:"Google.Protobuf.Reflection",objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{FileDescriptorSet:{edition:"proto2",fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}},extensions:[[536e6,536e6]]},Edition:{edition:"proto2",values:{EDITION_UNKNOWN:0,EDITION_LEGACY:900,EDITION_PROTO2:998,EDITION_PROTO3:999,EDITION_2023:1e3,EDITION_2024:1001,EDITION_1_TEST_ONLY:1,EDITION_2_TEST_ONLY:2,EDITION_99997_TEST_ONLY:99997,EDITION_99998_TEST_ONLY:99998,EDITION_99999_TEST_ONLY:99999,EDITION_MAX:2147483647}},FileDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10},weakDependency:{rule:"repeated",type:"int32",id:11},optionDependency:{rule:"repeated",type:"string",id:15},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12},edition:{type:"Edition",id:14}}},DescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10},visibility:{type:"SymbolVisibility",id:11}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2},options:{type:"ExtensionRangeOptions",id:3}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},ExtensionRangeOptions:{edition:"proto2",fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999},declaration:{rule:"repeated",type:"Declaration",id:2,options:{retention:"RETENTION_SOURCE"}},features:{type:"FeatureSet",id:50},verification:{type:"VerificationState",id:3,options:{default:"UNVERIFIED",retention:"RETENTION_SOURCE"}}},extensions:[[1e3,536870911]],nested:{Declaration:{fields:{number:{type:"int32",id:1},fullName:{type:"string",id:2},type:{type:"string",id:3},reserved:{type:"bool",id:5},repeated:{type:"bool",id:6}},reserved:[[4,4]]},VerificationState:{values:{DECLARATION:0,UNVERIFIED:1}}}},FieldDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8},proto3Optional:{type:"bool",id:17}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REPEATED:3,LABEL_REQUIRED:2}}}},OneofDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3},reservedRange:{rule:"repeated",type:"EnumReservedRange",id:4},reservedName:{rule:"repeated",type:"string",id:5},visibility:{type:"SymbolVisibility",id:6}},nested:{EnumReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},EnumValueDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{edition:"proto2",fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31,options:{default:!0}},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},swiftPrefix:{type:"string",id:39},phpClassPrefix:{type:"string",id:40},phpNamespace:{type:"string",id:41},phpMetadataNamespace:{type:"string",id:44},rubyPackage:{type:"string",id:45},features:{type:"FeatureSet",id:50},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[42,42],[38,38],"php_generic_services"],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{edition:"proto2",fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},deprecatedLegacyJsonFieldConflicts:{type:"bool",id:11,options:{deprecated:!0}},features:{type:"FeatureSet",id:12},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4],[5,5],[6,6],[8,8],[9,9]]},FieldOptions:{edition:"proto2",fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},unverifiedLazy:{type:"bool",id:15},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10,options:{deprecated:!0}},debugRedact:{type:"bool",id:16},retention:{type:"OptionRetention",id:17},targets:{rule:"repeated",type:"OptionTargetType",id:19},editionDefaults:{rule:"repeated",type:"EditionDefault",id:20},features:{type:"FeatureSet",id:21},featureSupport:{type:"FeatureSupport",id:22},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4],[18,18]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}},OptionRetention:{values:{RETENTION_UNKNOWN:0,RETENTION_RUNTIME:1,RETENTION_SOURCE:2}},OptionTargetType:{values:{TARGET_TYPE_UNKNOWN:0,TARGET_TYPE_FILE:1,TARGET_TYPE_EXTENSION_RANGE:2,TARGET_TYPE_MESSAGE:3,TARGET_TYPE_FIELD:4,TARGET_TYPE_ONEOF:5,TARGET_TYPE_ENUM:6,TARGET_TYPE_ENUM_ENTRY:7,TARGET_TYPE_SERVICE:8,TARGET_TYPE_METHOD:9}},EditionDefault:{fields:{edition:{type:"Edition",id:3},value:{type:"string",id:2}}},FeatureSupport:{fields:{editionIntroduced:{type:"Edition",id:1},editionDeprecated:{type:"Edition",id:2},deprecationWarning:{type:"string",id:3},editionRemoved:{type:"Edition",id:4}}}}},OneofOptions:{edition:"proto2",fields:{features:{type:"FeatureSet",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{edition:"proto2",fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},deprecatedLegacyJsonFieldConflicts:{type:"bool",id:6,options:{deprecated:!0}},features:{type:"FeatureSet",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[5,5]]},EnumValueOptions:{edition:"proto2",fields:{deprecated:{type:"bool",id:1},features:{type:"FeatureSet",id:2},debugRedact:{type:"bool",id:3},featureSupport:{type:"FieldOptions.FeatureSupport",id:4},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{edition:"proto2",fields:{features:{type:"FeatureSet",id:34},deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{edition:"proto2",fields:{deprecated:{type:"bool",id:33},idempotencyLevel:{type:"IdempotencyLevel",id:34,options:{default:"IDEMPOTENCY_UNKNOWN"}},features:{type:"FeatureSet",id:35},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],nested:{IdempotencyLevel:{values:{IDEMPOTENCY_UNKNOWN:0,NO_SIDE_EFFECTS:1,IDEMPOTENT:2}}}},UninterpretedOption:{edition:"proto2",fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},FeatureSet:{edition:"proto2",fields:{fieldPresence:{type:"FieldPresence",id:1,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},enumType:{type:"EnumType",id:2,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},repeatedFieldEncoding:{type:"RepeatedFieldEncoding",id:3,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},utf8Validation:{type:"Utf8Validation",id:4,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},messageEncoding:{type:"MessageEncoding",id:5,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},jsonFormat:{type:"JsonFormat",id:6,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},enforceNamingStyle:{type:"EnforceNamingStyle",id:7,options:{retention:"RETENTION_SOURCE",targets:"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},defaultSymbolVisibility:{type:"VisibilityFeature.DefaultSymbolVisibility",id:8,options:{retention:"RETENTION_SOURCE",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},extensions:[[1e3,9994],[9995,9999],[1e4,1e4]],reserved:[[999,999]],nested:{FieldPresence:{values:{FIELD_PRESENCE_UNKNOWN:0,EXPLICIT:1,IMPLICIT:2,LEGACY_REQUIRED:3}},EnumType:{values:{ENUM_TYPE_UNKNOWN:0,OPEN:1,CLOSED:2}},RepeatedFieldEncoding:{values:{REPEATED_FIELD_ENCODING_UNKNOWN:0,PACKED:1,EXPANDED:2}},Utf8Validation:{values:{UTF8_VALIDATION_UNKNOWN:0,VERIFY:2,NONE:3}},MessageEncoding:{values:{MESSAGE_ENCODING_UNKNOWN:0,LENGTH_PREFIXED:1,DELIMITED:2}},JsonFormat:{values:{JSON_FORMAT_UNKNOWN:0,ALLOW:1,LEGACY_BEST_EFFORT:2}},EnforceNamingStyle:{values:{ENFORCE_NAMING_STYLE_UNKNOWN:0,STYLE2024:1,STYLE_LEGACY:2}},VisibilityFeature:{fields:{},reserved:[[1,536870911]],nested:{DefaultSymbolVisibility:{values:{DEFAULT_SYMBOL_VISIBILITY_UNKNOWN:0,EXPORT_ALL:1,EXPORT_TOP_LEVEL:2,LOCAL_ALL:3,STRICT:4}}}}}},FeatureSetDefaults:{edition:"proto2",fields:{defaults:{rule:"repeated",type:"FeatureSetEditionDefault",id:1},minimumEdition:{type:"Edition",id:4},maximumEdition:{type:"Edition",id:5}},nested:{FeatureSetEditionDefault:{fields:{edition:{type:"Edition",id:3},overridableFeatures:{type:"FeatureSet",id:4},fixedFeatures:{type:"FeatureSet",id:5}},reserved:[[1,1],[2,2],"features"]}}},SourceCodeInfo:{edition:"proto2",fields:{location:{rule:"repeated",type:"Location",id:1}},extensions:[[536e6,536e6]],nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1,options:{packed:!0}},span:{rule:"repeated",type:"int32",id:2,options:{packed:!0}},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{edition:"proto2",fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1,options:{packed:!0}},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4},semantic:{type:"Semantic",id:5}},nested:{Semantic:{values:{NONE:0,SET:1,ALIAS:2}}}}}},SymbolVisibility:{edition:"proto2",values:{VISIBILITY_UNSET:0,VISIBILITY_LOCAL:1,VISIBILITY_EXPORT:2}}}}}}}}});var lv=x((et,c3)=>{"use strict";var vn=Dl();c3.exports=et=vn.descriptor=vn.Root.fromJSON(Gp()).lookup(".google.protobuf");var s3=vn.Namespace,Kc=vn.Root,cs=vn.Enum,ki=vn.Type,no=vn.Field,iK=vn.MapField,jp=vn.OneOf,zc=vn.Service,$p=vn.Method;Kc.fromDescriptor=function(e){typeof e.length=="number"&&(e=et.FileDescriptorSet.decode(e));var r=new Kc;if(e.file)for(var n,i,s=0,o;s<e.file.length;++s){i=r,(n=e.file[s]).package&&n.package.length&&(i=r.define(n.package));var a=pK(n);if(n.name&&n.name.length&&r.files.push(i.filename=n.name),n.messageType)for(o=0;o<n.messageType.length;++o)i.add(ki.fromDescriptor(n.messageType[o],a));if(n.enumType)for(o=0;o<n.enumType.length;++o)i.add(cs.fromDescriptor(n.enumType[o],a));if(n.extension)for(o=0;o<n.extension.length;++o)i.add(no.fromDescriptor(n.extension[o],a));if(n.service)for(o=0;o<n.service.length;++o)i.add(zc.fromDescriptor(n.service[o],a));var l=Il(n.options,et.FileOptions);if(l){var u=Object.keys(l);for(o=0;o<u.length;++o)i.setOption(u[o],l[u[o]])}}return r.resolveAll()};Kc.prototype.toDescriptor=function(e){var r=et.FileDescriptorSet.create();return o3(this,r.file,e),r};function o3(t,e,r){var n=et.FileDescriptorProto.create({name:t.filename||(t.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});gK(r,n),t instanceof Kc||(n.package=t.fullName.substring(1));for(var i=0,s;i<t.nestedArray.length;++i)(s=t._nestedArray[i])instanceof ki?n.messageType.push(s.toDescriptor(r)):s instanceof cs?n.enumType.push(s.toDescriptor()):s instanceof no?n.extension.push(s.toDescriptor(r)):s instanceof zc?n.service.push(s.toDescriptor()):s instanceof s3&&o3(s,e,r);n.options=Tl(t.options,et.FileOptions),n.messageType.length+n.enumType.length+n.extension.length+n.service.length&&e.push(n)}var sK=0;ki.fromDescriptor=function(e,r,n){typeof e.length=="number"&&(e=et.DescriptorProto.decode(e));var i=new ki(e.name.length?e.name:"Type"+sK++,Il(e.options,et.MessageOptions)),s;if(n||(i._edition=r),e.oneofDecl)for(s=0;s<e.oneofDecl.length;++s)i.add(jp.fromDescriptor(e.oneofDecl[s]));if(e.field)for(s=0;s<e.field.length;++s){var o=no.fromDescriptor(e.field[s],r,!0);i.add(o),e.field[s].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[s].oneofIndex].add(o)}if(e.extension)for(s=0;s<e.extension.length;++s)i.add(no.fromDescriptor(e.extension[s],r,!0));if(e.nestedType)for(s=0;s<e.nestedType.length;++s)i.add(ki.fromDescriptor(e.nestedType[s],r,!0)),e.nestedType[s].options&&e.nestedType[s].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(s=0;s<e.enumType.length;++s)i.add(cs.fromDescriptor(e.enumType[s],r,!0));if(e.extensionRange&&e.extensionRange.length)for(i.extensions=[],s=0;s<e.extensionRange.length;++s)i.extensions.push([e.extensionRange[s].start,e.extensionRange[s].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(s=0;s<e.reservedRange.length;++s)i.reserved.push([e.reservedRange[s].start,e.reservedRange[s].end]);if(e.reservedName)for(s=0;s<e.reservedName.length;++s)i.reserved.push(e.reservedName[s])}return i};ki.prototype.toDescriptor=function(e){var r=et.DescriptorProto.create({name:this.name}),n;for(n=0;n<this.fieldsArray.length;++n){var i;if(r.field.push(i=this._fieldsArray[n].toDescriptor(e)),this._fieldsArray[n]instanceof iK){var s=av(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType,!1),o=av(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType,!1),a=o===11||o===14?this._fieldsArray[n].resolvedType&&u3(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;r.nestedType.push(et.DescriptorProto.create({name:i.typeName,field:[et.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),et.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:a})],options:et.MessageOptions.create({mapEntry:!0})}))}}for(n=0;n<this.oneofsArray.length;++n)r.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof no?r.field.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof ki?r.nestedType.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof cs&&r.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)r.extensionRange.push(et.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)typeof this.reserved[n]=="string"?r.reservedName.push(this.reserved[n]):r.reservedRange.push(et.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return r.options=Tl(this.options,et.MessageOptions),r};var oK=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;no.fromDescriptor=function(e,r,n){if(typeof e.length=="number"&&(e=et.DescriptorProto.decode(e)),typeof e.number!="number")throw Error("missing field id");var i;e.typeName&&e.typeName.length?i=e.typeName:i=fK(e.type);var s;switch(e.label){case 1:s=void 0;break;case 2:s="required";break;case 3:s="repeated";break;default:throw Error("illegal label: "+e.label)}var o=e.extendee;e.extendee!==void 0&&(o=o.length?o:void 0);var a=new no(e.name.length?e.name:"field"+e.number,e.number,i,s,o);if(n||(a._edition=r),a.options=Il(e.options,et.FieldOptions),e.proto3_optional&&(a.options.proto3_optional=!0),e.defaultValue&&e.defaultValue.length){var l=e.defaultValue;switch(l){case"true":case"TRUE":l=!0;break;case"false":case"FALSE":l=!1;break;default:var u=oK.exec(l);u&&(l=parseInt(l));break}a.setOption("default",l)}return hK(e.type)&&(r==="proto3"?e.options&&!e.options.packed&&a.setOption("packed",!1):(!r||r==="proto2")&&e.options&&e.options.packed&&a.setOption("packed",!0)),a};no.prototype.toDescriptor=function(e){var r=et.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=vn.util.ucFirst(this.name),r.label=3;else{switch(r.type=av(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:r.typeName=this.resolvedType?u3(this.parent,this.resolvedType):this.type;break}this.rule==="repeated"?r.label=3:this.required&&e==="proto2"?r.label=2:r.label=1}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=Tl(this.options,et.FieldOptions),this.options.default!=null&&(r.defaultValue=String(this.options.default)),this.options.proto3_optional&&(r.proto3_optional=!0)),e==="proto3"?this.packed||((r.options||(r.options=et.FieldOptions.create())).packed=!1):(!e||e==="proto2")&&this.packed&&((r.options||(r.options=et.FieldOptions.create())).packed=!0),r};var aK=0;cs.fromDescriptor=function(e,r,n){typeof e.length=="number"&&(e=et.EnumDescriptorProto.decode(e));var i={};if(e.value)for(var s=0;s<e.value.length;++s){var o=e.value[s].name,a=e.value[s].number||0;i[o&&o.length?o:"NAME"+a]=a}var l=new cs(e.name&&e.name.length?e.name:"Enum"+aK++,i,Il(e.options,et.EnumOptions));return n||(l._edition=r),l};cs.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(et.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return et.EnumDescriptorProto.create({name:this.name,value:e,options:Tl(this.options,et.EnumOptions)})};var lK=0;jp.fromDescriptor=function(e){return typeof e.length=="number"&&(e=et.OneofDescriptorProto.decode(e)),new jp(e.name&&e.name.length?e.name:"oneof"+lK++)};jp.prototype.toDescriptor=function(){return et.OneofDescriptorProto.create({name:this.name})};var uK=0;zc.fromDescriptor=function(e,r,n){typeof e.length=="number"&&(e=et.ServiceDescriptorProto.decode(e));var i=new zc(e.name&&e.name.length?e.name:"Service"+uK++,Il(e.options,et.ServiceOptions));if(n||(i._edition=r),e.method)for(var s=0;s<e.method.length;++s)i.add($p.fromDescriptor(e.method[s]));return i};zc.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return et.ServiceDescriptorProto.create({name:this.name,method:e,options:Tl(this.options,et.ServiceOptions)})};var cK=0;$p.fromDescriptor=function(e){return typeof e.length=="number"&&(e=et.MethodDescriptorProto.decode(e)),new $p(e.name&&e.name.length?e.name:"Method"+cK++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,Il(e.options,et.MethodOptions))};$p.prototype.toDescriptor=function(){return et.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:Tl(this.options,et.MethodOptions)})};function fK(t){switch(t){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+t)}function hK(t){switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function av(t,e,r){switch(t){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(e instanceof cs)return 14;if(e instanceof ki)return r?10:11;throw Error("illegal type: "+t)}function a3(t,e){for(var r={},n=0,i,s;n<e.fieldsArray.length;++n)if((s=(i=e._fieldsArray[n]).name)!=="uninterpretedOption"&&Object.prototype.hasOwnProperty.call(t,s)){var o=dK(s);i.resolvedType instanceof ki?r[o]=a3(t[s],i.resolvedType):i.resolvedType instanceof cs?r[o]=i.resolvedType.valuesById[t[s]]:r[o]=t[s]}return r}function Il(t,e){if(t)return a3(e.toObject(t),e)}function l3(t,e){for(var r={},n=Object.keys(t),i=0;i<n.length;++i){var s=n[i],o=vn.util.camelCase(s);if(Object.prototype.hasOwnProperty.call(e.fields,o)){var a=e.fields[o];a.resolvedType instanceof ki?r[o]=l3(t[s],a.resolvedType):r[o]=t[s],a.repeated&&!Array.isArray(r[o])&&(r[o]=[r[o]])}}return r}function Tl(t,e){if(t)return e.fromObject(l3(t,e))}function u3(t,e){var r=t.fullName.split("."),n=e.fullName.split("."),i=0,s=0,o=n.length-1;if(!(t instanceof Kc)&&e instanceof s3)for(;i<r.length&&s<o&&r[i]===n[s];){var a=e.lookup(r[i++],!0);if(a!==null&&a!==e)break;++s}else for(;i<r.length&&s<o&&r[i]===n[s];++i,++s);return n.slice(s).join(".")}function dK(t){return t.substring(0,1)+t.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,r){return"_"+r.toLowerCase()})}function pK(t){if(t.syntax==="editions")switch(t.edition){case et.Edition.EDITION_2023:return"2023";default:throw new Error("Unsupported edition "+t.edition)}return t.syntax==="proto3"?"proto3":"proto2"}function gK(t,e){if(t)if(t==="proto2"||t==="proto3")e.syntax=t;else switch(e.syntax="editions",t){case"2023":e.edition=et.Edition.EDITION_2023;break;default:throw new Error("Unsupported edition "+t)}}});var uv=x((Doe,mK)=>{mK.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}}});var cv=x((Ioe,_K)=>{_K.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var fv=x((Toe,EK)=>{EK.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var p3=x(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.addCommonProtos=io.loadProtosWithOptionsSync=io.loadProtosWithOptions=void 0;var f3=require("fs"),h3=require("path"),Rl=Dl();function d3(t,e){let r=t.resolvePath;t.resolvePath=(n,i)=>{if(h3.isAbsolute(i))return i;for(let s of e){let o=h3.join(s,i);try{return f3.accessSync(o,f3.constants.R_OK),o}catch{continue}}return process.emitWarning(`${i} not found in any of the include paths ${e}`),r(n,i)}}async function yK(t,e){let r=new Rl.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));d3(r,e.includeDirs)}let n=await r.load(t,e);return n.resolveAll(),n}io.loadProtosWithOptions=yK;function AK(t,e){let r=new Rl.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");d3(r,e.includeDirs)}let n=r.loadSync(t,e);return n.resolveAll(),n}io.loadProtosWithOptionsSync=AK;function vK(){let t=uv(),e=Gp(),r=cv(),n=fv();Rl.common("api",t.nested.google.nested.protobuf.nested),Rl.common("descriptor",e.nested.google.nested.protobuf.nested),Rl.common("source_context",r.nested.google.nested.protobuf.nested),Rl.common("type",n.nested.google.nested.protobuf.nested)}io.addCommonProtos=vK});var dv=x((Yc,hv)=>{(function(t,e){function r(n){return n.default||n}typeof define=="function"&&define.amd?define([],function(){var n={};return e(n),r(n)}):typeof Yc=="object"?(e(Yc),typeof hv=="object"&&(hv.exports=r(Yc))):(function(){var n={};e(n),t.Long=r(n)})()})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Yc,function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(P,y,O){this.low=P|0,this.high=y|0,this.unsigned=!!O}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0});function n(P){return(P&&P.__isLong__)===!0}function i(P){var y=Math.clz32(P&-P);return P?31-y:y}r.isLong=n;var s={},o={};function a(P,y){var O,z,J;return y?(P>>>=0,(J=0<=P&&P<256)&&(z=o[P],z)?z:(O=u(P,0,!0),J&&(o[P]=O),O)):(P|=0,(J=-128<=P&&P<128)&&(z=s[P],z)?z:(O=u(P,P<0?-1:0,!1),J&&(s[P]=O),O))}r.fromInt=a;function l(P,y){if(isNaN(P))return y?S:k;if(y){if(P<0)return S;if(P>=E)return I}else{if(P<=-A)return N;if(P+1>=A)return D}return P<0?l(-P,y).neg():u(P%m|0,P/m|0,y)}r.fromNumber=l;function u(P,y,O){return new r(P,y,O)}r.fromBits=u;var c=Math.pow;function f(P,y,O){if(P.length===0)throw Error("empty string");if(typeof y=="number"?(O=y,y=!1):y=!!y,P==="NaN"||P==="Infinity"||P==="+Infinity"||P==="-Infinity")return y?S:k;if(O=O||10,O<2||36<O)throw RangeError("radix");var z;if((z=P.indexOf("-"))>0)throw Error("interior hyphen");if(z===0)return f(P.substring(1),y,O).neg();for(var J=l(c(O,8)),L=k,$=0;$<P.length;$+=8){var K=Math.min(8,P.length-$),Z=parseInt(P.substring($,$+K),O);if(K<8){var fe=l(c(O,K));L=L.mul(fe).add(l(Z))}else L=L.mul(J),L=L.add(l(Z))}return L.unsigned=y,L}r.fromString=f;function h(P,y){return typeof P=="number"?l(P,y):typeof P=="string"?f(P,y):u(P.low,P.high,typeof y=="boolean"?y:P.unsigned)}r.fromValue=h;var p=65536,g=1<<24,m=p*p,E=m*m,A=E/2,w=a(g),k=a(0);r.ZERO=k;var S=a(0,!0);r.UZERO=S;var B=a(1);r.ONE=B;var F=a(1,!0);r.UONE=F;var M=a(-1);r.NEG_ONE=M;var D=u(-1,2147483647,!1);r.MAX_VALUE=D;var I=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=I;var N=u(0,-2147483648,!1);r.MIN_VALUE=N;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},T.toString=function(y){if(y=y||10,y<2||36<y)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(N)){var O=l(y),z=this.div(O),J=z.mul(O).sub(this);return z.toString(y)+J.toInt().toString(y)}else return"-"+this.neg().toString(y);for(var L=l(c(y,6),this.unsigned),$=this,K="";;){var Z=$.div(L),fe=$.sub(Z.mul(L)).toInt()>>>0,ue=fe.toString(y);if($=Z,$.isZero())return ue+K;for(;ue.length<6;)ue="0"+ue;K=""+ue+K}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var y=this.high!=0?this.high:this.low,O=31;O>0&&(y&1<<O)==0;O--);return this.high!=0?O+33:O+1},T.isSafeInteger=function(){var y=this.high>>21;return y?this.unsigned?!1:y===-1&&!(this.low===0&&this.high===-2097152):!0},T.isZero=function(){return this.high===0&&this.low===0},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return(this.low&1)===1},T.isEven=function(){return(this.low&1)===0},T.equals=function(y){return n(y)||(y=h(y)),this.unsigned!==y.unsigned&&this.high>>>31===1&&y.high>>>31===1?!1:this.high===y.high&&this.low===y.low},T.eq=T.equals,T.notEquals=function(y){return!this.eq(y)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(y){return this.comp(y)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(y){return this.comp(y)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(y){return this.comp(y)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(y){return this.comp(y)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(y){if(n(y)||(y=h(y)),this.eq(y))return 0;var O=this.isNegative(),z=y.isNegative();return O&&!z?-1:!O&&z?1:this.unsigned?y.high>>>0>this.high>>>0||y.high===this.high&&y.low>>>0>this.low>>>0?-1:1:this.sub(y).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(B)},T.neg=T.negate,T.add=function(y){n(y)||(y=h(y));var O=this.high>>>16,z=this.high&65535,J=this.low>>>16,L=this.low&65535,$=y.high>>>16,K=y.high&65535,Z=y.low>>>16,fe=y.low&65535,ue=0,he=0,qe=0,bt=0;return bt+=L+fe,qe+=bt>>>16,bt&=65535,qe+=J+Z,he+=qe>>>16,qe&=65535,he+=z+K,ue+=he>>>16,he&=65535,ue+=O+$,ue&=65535,u(qe<<16|bt,ue<<16|he,this.unsigned)},T.subtract=function(y){return n(y)||(y=h(y)),this.add(y.neg())},T.sub=T.subtract,T.multiply=function(y){if(this.isZero())return this;if(n(y)||(y=h(y)),e){var O=e.mul(this.low,this.high,y.low,y.high);return u(O,e.get_high(),this.unsigned)}if(y.isZero())return this.unsigned?S:k;if(this.eq(N))return y.isOdd()?N:k;if(y.eq(N))return this.isOdd()?N:k;if(this.isNegative())return y.isNegative()?this.neg().mul(y.neg()):this.neg().mul(y).neg();if(y.isNegative())return this.mul(y.neg()).neg();if(this.lt(w)&&y.lt(w))return l(this.toNumber()*y.toNumber(),this.unsigned);var z=this.high>>>16,J=this.high&65535,L=this.low>>>16,$=this.low&65535,K=y.high>>>16,Z=y.high&65535,fe=y.low>>>16,ue=y.low&65535,he=0,qe=0,bt=0,Gr=0;return Gr+=$*ue,bt+=Gr>>>16,Gr&=65535,bt+=L*ue,qe+=bt>>>16,bt&=65535,bt+=$*fe,qe+=bt>>>16,bt&=65535,qe+=J*ue,he+=qe>>>16,qe&=65535,qe+=L*fe,he+=qe>>>16,qe&=65535,qe+=$*Z,he+=qe>>>16,qe&=65535,he+=z*ue+J*fe+L*Z+$*K,he&=65535,u(bt<<16|Gr,he<<16|qe,this.unsigned)},T.mul=T.multiply,T.divide=function(y){if(n(y)||(y=h(y)),y.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&y.low===-1&&y.high===-1)return this;var O=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,y.low,y.high);return u(O,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?S:k;var z,J,L;if(this.unsigned){if(y.unsigned||(y=y.toUnsigned()),y.gt(this))return S;if(y.gt(this.shru(1)))return F;L=S}else{if(this.eq(N)){if(y.eq(B)||y.eq(M))return N;if(y.eq(N))return B;var $=this.shr(1);return z=$.div(y).shl(1),z.eq(k)?y.isNegative()?B:M:(J=this.sub(y.mul(z)),L=z.add(J.div(y)),L)}else if(y.eq(N))return this.unsigned?S:k;if(this.isNegative())return y.isNegative()?this.neg().div(y.neg()):this.neg().div(y).neg();if(y.isNegative())return this.div(y.neg()).neg();L=k}for(J=this;J.gte(y);){z=Math.max(1,Math.floor(J.toNumber()/y.toNumber()));for(var K=Math.ceil(Math.log(z)/Math.LN2),Z=K<=48?1:c(2,K-48),fe=l(z),ue=fe.mul(y);ue.isNegative()||ue.gt(J);)z-=Z,fe=l(z,this.unsigned),ue=fe.mul(y);fe.isZero()&&(fe=B),L=L.add(fe),J=J.sub(ue)}return L},T.div=T.divide,T.modulo=function(y){if(n(y)||(y=h(y)),e){var O=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,y.low,y.high);return u(O,e.get_high(),this.unsigned)}return this.sub(this.div(y).mul(y))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return u(~this.low,~this.high,this.unsigned)},T.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},T.clz=T.countLeadingZeros,T.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},T.ctz=T.countTrailingZeros,T.and=function(y){return n(y)||(y=h(y)),u(this.low&y.low,this.high&y.high,this.unsigned)},T.or=function(y){return n(y)||(y=h(y)),u(this.low|y.low,this.high|y.high,this.unsigned)},T.xor=function(y){return n(y)||(y=h(y)),u(this.low^y.low,this.high^y.high,this.unsigned)},T.shiftLeft=function(y){return n(y)&&(y=y.toInt()),(y&=63)===0?this:y<32?u(this.low<<y,this.high<<y|this.low>>>32-y,this.unsigned):u(0,this.low<<y-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(y){return n(y)&&(y=y.toInt()),(y&=63)===0?this:y<32?u(this.low>>>y|this.high<<32-y,this.high>>y,this.unsigned):u(this.high>>y-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(y){return n(y)&&(y=y.toInt()),(y&=63)===0?this:y<32?u(this.low>>>y|this.high<<32-y,this.high>>>y,this.unsigned):y===32?u(this.high,0,this.unsigned):u(this.high>>>y-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.rotateLeft=function(y){var O;return n(y)&&(y=y.toInt()),(y&=63)===0?this:y===32?u(this.high,this.low,this.unsigned):y<32?(O=32-y,u(this.low<<y|this.high>>>O,this.high<<y|this.low>>>O,this.unsigned)):(y-=32,O=32-y,u(this.high<<y|this.low>>>O,this.low<<y|this.high>>>O,this.unsigned))},T.rotl=T.rotateLeft,T.rotateRight=function(y){var O;return n(y)&&(y=y.toInt()),(y&=63)===0?this:y===32?u(this.high,this.low,this.unsigned):y<32?(O=32-y,u(this.high<<O|this.low>>>y,this.low<<O|this.high>>>y,this.unsigned)):(y-=32,O=32-y,u(this.low<<O|this.high>>>y,this.high<<O|this.low>>>y,this.unsigned))},T.rotr=T.rotateRight,T.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},T.toBytes=function(y){return y?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var y=this.high,O=this.low;return[O&255,O>>>8&255,O>>>16&255,O>>>24,y&255,y>>>8&255,y>>>16&255,y>>>24]},T.toBytesBE=function(){var y=this.high,O=this.low;return[y>>>24,y>>>16&255,y>>>8&255,y&255,O>>>24,O>>>16&255,O>>>8&255,O&255]},r.fromBytes=function(y,O,z){return z?r.fromBytesLE(y,O):r.fromBytesBE(y,O)},r.fromBytesLE=function(y,O){return new r(y[0]|y[1]<<8|y[2]<<16|y[3]<<24,y[4]|y[5]<<8|y[6]<<16|y[7]<<24,O)},r.fromBytesBE=function(y,O){return new r(y[4]<<24|y[5]<<16|y[6]<<8|y[7],y[0]<<24|y[1]<<16|y[2]<<8|y[3],O)},typeof BigInt=="function"&&(r.fromBigInt=function(y,O){var z=Number(BigInt.asIntN(32,y)),J=Number(BigInt.asIntN(32,y>>BigInt(32)));return u(z,J,O)},r.fromValue=function(y,O){return typeof y=="bigint"?r.fromBigInt(y,O):h(y,O)},T.toBigInt=function(){var y=BigInt(this.low>>>0),O=BigInt(this.unsigned?this.high>>>0:this.high);return O<<BigInt(32)|y});var Q=t.default=r})});var yv=x(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.loadFileDescriptorSetFromObject=dr.loadFileDescriptorSetFromBuffer=dr.fromJSON=dr.loadSync=dr.load=dr.IdempotencyLevel=dr.isAnyExtension=dr.Long=void 0;var bK=dA(),Oi=Dl(),_v=lv(),Ev=p3(),SK=dv();dr.Long=SK;function CK(t){return"@type"in t&&typeof t["@type"]=="string"}dr.isAnyExtension=CK;var g3;(function(t){t.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",t.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",t.IDEMPOTENT="IDEMPOTENT"})(g3=dr.IdempotencyLevel||(dr.IdempotencyLevel={}));var m3={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function wK(t,e){return t===""?e:t+"."+e}function xK(t){return t instanceof Oi.Service||t instanceof Oi.Type||t instanceof Oi.Enum}function DK(t){return t instanceof Oi.Namespace||t instanceof Oi.Root}function _3(t,e){let r=wK(e,t.name);return xK(t)?[[r,t]]:DK(t)&&typeof t.nested<"u"?Object.keys(t.nested).map(n=>_3(t.nested[n],r)).reduce((n,i)=>n.concat(i),[]):[]}function pv(t,e){return function(n){return t.toObject(t.decode(n),e)}}function gv(t){return function(r){if(Array.isArray(r))throw new Error(`Failed to serialize message: expected object with ${t.name} structure, got array instead`);let n=t.fromObject(r);return t.encode(n).finish()}}function IK(t){return(t||[]).reduce((e,r)=>{for(let[n,i]of Object.entries(r))switch(n){case"uninterpreted_option":e.uninterpreted_option.push(r.uninterpreted_option);break;default:e[n]=i}return e},{deprecated:!1,idempotency_level:g3.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function TK(t,e,r,n){let i=t.resolvedRequestType,s=t.resolvedResponseType;return{path:"/"+e+"/"+t.name,requestStream:!!t.requestStream,responseStream:!!t.responseStream,requestSerialize:gv(i),requestDeserialize:pv(i,r),responseSerialize:gv(s),responseDeserialize:pv(s,r),originalName:bK(t.name),requestType:mv(i,r,n),responseType:mv(s,r,n),options:IK(t.parsedOptions)}}function RK(t,e,r,n){let i={};for(let s of t.methodsArray)i[s.name]=TK(s,e,r,n);return i}function mv(t,e,r){let n=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:n.$type.toObject(n,m3),fileDescriptorProtos:r,serialize:gv(t),deserialize:pv(t,e)}}function kK(t,e){let r=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,m3),fileDescriptorProtos:e}}function OK(t,e,r,n){if(t instanceof Oi.Service)return RK(t,e,r,n);if(t instanceof Oi.Type)return mv(t,r,n);if(t instanceof Oi.Enum)return kK(t,n);throw new Error("Type mismatch in reflection object handling")}function Kp(t,e){let r={};t.resolveAll();let i=t.toDescriptor("proto3").file.map(s=>Buffer.from(_v.FileDescriptorProto.encode(s).finish()));for(let[s,o]of _3(t,""))r[s]=OK(o,s,e,i);return r}function E3(t,e){e=e||{};let r=Oi.Root.fromDescriptor(t);return r.resolveAll(),Kp(r,e)}function NK(t,e){return(0,Ev.loadProtosWithOptions)(t,e).then(r=>Kp(r,e))}dr.load=NK;function BK(t,e){let r=(0,Ev.loadProtosWithOptionsSync)(t,e);return Kp(r,e)}dr.loadSync=BK;function PK(t,e){e=e||{};let r=Oi.Root.fromJSON(t);return r.resolveAll(),Kp(r,e)}dr.fromJSON=PK;function FK(t,e){let r=_v.FileDescriptorSet.decode(t);return E3(r,e)}dr.loadFileDescriptorSetFromBuffer=FK;function LK(t,e){let r=_v.FileDescriptorSet.fromObject(t);return E3(r,e)}dr.loadFileDescriptorSetFromObject=LK;(0,Ev.addCommonProtos)()});var so=x(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.registerChannelzSocket=Lt.registerChannelzServer=Lt.registerChannelzSubchannel=Lt.registerChannelzChannel=Lt.ChannelzCallTrackerStub=Lt.ChannelzCallTracker=Lt.ChannelzChildrenTrackerStub=Lt.ChannelzChildrenTracker=Lt.ChannelzTrace=Lt.ChannelzTraceStub=void 0;Lt.unregisterChannelzRef=WK;Lt.getChannelzHandlers=x3;Lt.getChannelzServiceDefinition=D3;Lt.setup=ZK;var Yp=require("net"),Xo=PR(),Vc=zr(),Xc=nt(),MK=un(),UK=hp(),qK=_p();function Av(t){return{channel_id:t.id,name:t.name}}function wv(t){return{subchannel_id:t.id,name:t.name}}function HK(t){return{server_id:t.id}}function Jp(t){return{socket_id:t.id,name:t.name}}var y3=32,xv=100,vv=class{constructor(){this.events=[],this.creationTimestamp=new Date,this.eventsLogged=0}addTrace(){}getTraceMessage(){return{creation_timestamp:Ni(this.creationTimestamp),num_events_logged:this.eventsLogged,events:[]}}};Lt.ChannelzTraceStub=vv;var bv=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,r,n){let i=new Date;this.events.push({description:r,severity:e,timestamp:i,childChannel:n?.kind==="channel"?n:void 0,childSubchannel:n?.kind==="subchannel"?n:void 0}),this.events.length>=y3*2&&(this.events=this.events.slice(y3)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:Ni(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:Ni(e.timestamp),channel_ref:e.childChannel?Av(e.childChannel):null,subchannel_ref:e.childSubchannel?wv(e.childSubchannel):null}))}}};Lt.ChannelzTrace=bv;var Vp=class{constructor(){this.channelChildren=new Xo.OrderedMap,this.subchannelChildren=new Xo.OrderedMap,this.socketChildren=new Xo.OrderedMap,this.trackerMap={channel:this.channelChildren,subchannel:this.subchannelChildren,socket:this.socketChildren}}refChild(e){let r=this.trackerMap[e.kind],n=r.find(e.id);n.equals(r.end())?r.setElement(e.id,{ref:e,count:1},n):n.pointer[1].count+=1}unrefChild(e){let r=this.trackerMap[e.kind],n=r.getElementByKey(e.id);n!==void 0&&(n.count-=1,n.count===0&&r.eraseElementByKey(e.id))}getChildLists(){return{channels:this.channelChildren,subchannels:this.subchannelChildren,sockets:this.socketChildren}}};Lt.ChannelzChildrenTracker=Vp;var Sv=class extends Vp{refChild(){}unrefChild(){}};Lt.ChannelzChildrenTrackerStub=Sv;var Xp=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};Lt.ChannelzCallTracker=Xp;var Cv=class extends Xp{addCallStarted(){}addCallSucceeded(){}addCallFailed(){}};Lt.ChannelzCallTrackerStub=Cv;var fs={channel:new Xo.OrderedMap,subchannel:new Xo.OrderedMap,server:new Xo.OrderedMap,socket:new Xo.OrderedMap},Zp=t=>{let e=1;function r(){return e++}let n=fs[t];return(i,s,o)=>{let a=r(),l={id:a,name:i,kind:t};return o&&n.setElement(a,{ref:l,getInfo:s}),l}};Lt.registerChannelzChannel=Zp("channel");Lt.registerChannelzSubchannel=Zp("subchannel");Lt.registerChannelzServer=Zp("server");Lt.registerChannelzSocket=Zp("socket");function WK(t){fs[t.kind].eraseElementByKey(t.id)}function QK(t){let e=Number.parseInt(t,16);return[e/256|0,e%256]}function A3(t){if(t==="")return[];let e=t.split(":").map(n=>QK(n));return[].concat(...e)}function GK(t){return(0,Yp.isIPv6)(t)&&t.toLowerCase().startsWith("::ffff:")&&(0,Yp.isIPv4)(t.substring(7))}function v3(t){return Buffer.from(Uint8Array.from(t.split(".").map(e=>Number.parseInt(e))))}function jK(t){if((0,Yp.isIPv4)(t))return v3(t);if(GK(t))return v3(t.substring(7));if((0,Yp.isIPv6)(t)){let e,r,n=t.indexOf("::");n===-1?(e=t,r=""):(e=t.substring(0,n),r=t.substring(n+2));let i=Buffer.from(A3(e)),s=Buffer.from(A3(r)),o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}else return null}function S3(t){switch(t){case Vc.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case Vc.ConnectivityState.IDLE:return{state:"IDLE"};case Vc.ConnectivityState.READY:return{state:"READY"};case Vc.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case Vc.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function Ni(t){if(!t)return null;let e=t.getTime();return{seconds:e/1e3|0,nanos:e%1e3*1e6}}function C3(t){let e=t.getInfo(),r=[],n=[];return e.children.channels.forEach(i=>{r.push(Av(i[1].ref))}),e.children.subchannels.forEach(i=>{n.push(wv(i[1].ref))}),{ref:Av(t.ref),data:{target:e.target,state:S3(e.state),calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:Ni(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},channel_ref:r,subchannel_ref:n}}function $K(t,e){let r=parseInt(t.request.channel_id,10),n=fs.channel.getElementByKey(r);if(n===void 0){e({code:Xc.Status.NOT_FOUND,details:"No channel data found for id "+r});return}e(null,{channel:C3(n)})}function KK(t,e){let r=parseInt(t.request.max_results,10)||xv,n=[],i=parseInt(t.request.start_channel_id,10),s=fs.channel,o;for(o=s.lowerBound(i);!o.equals(s.end())&&n.length<r;o=o.next())n.push(C3(o.pointer[1]));e(null,{channel:n,end:o.equals(s.end())})}function w3(t){let e=t.getInfo(),r=[];return e.listenerChildren.sockets.forEach(n=>{r.push(Jp(n[1].ref))}),{ref:HK(t.ref),data:{calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:Ni(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},listen_socket:r}}function zK(t,e){let r=parseInt(t.request.server_id,10),i=fs.server.getElementByKey(r);if(i===void 0){e({code:Xc.Status.NOT_FOUND,details:"No server data found for id "+r});return}e(null,{server:w3(i)})}function YK(t,e){let r=parseInt(t.request.max_results,10)||xv,n=parseInt(t.request.start_server_id,10),i=fs.server,s=[],o;for(o=i.lowerBound(n);!o.equals(i.end())&&s.length<r;o=o.next())s.push(w3(o.pointer[1]));e(null,{server:s,end:o.equals(i.end())})}function VK(t,e){let r=parseInt(t.request.subchannel_id,10),n=fs.subchannel.getElementByKey(r);if(n===void 0){e({code:Xc.Status.NOT_FOUND,details:"No subchannel data found for id "+r});return}let i=n.getInfo(),s=[];i.children.sockets.forEach(a=>{s.push(Jp(a[1].ref))});let o={ref:wv(n.ref),data:{target:i.target,state:S3(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:Ni(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:s};e(null,{subchannel:o})}function b3(t){var e;return(0,MK.isTcpSubchannelAddress)(t)?{address:"tcpip_address",tcpip_address:{ip_address:(e=jK(t.host))!==null&&e!==void 0?e:void 0,port:t.port}}:{address:"uds_address",uds_address:{filename:t.path}}}function XK(t,e){var r,n,i,s,o;let a=parseInt(t.request.socket_id,10),l=fs.socket.getElementByKey(a);if(l===void 0){e({code:Xc.Status.NOT_FOUND,details:"No socket data found for id "+a});return}let u=l.getInfo(),c=u.security?{model:"tls",tls:{cipher_suite:u.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(r=u.security.cipherSuiteStandardName)!==null&&r!==void 0?r:void 0,other_name:(n=u.security.cipherSuiteOtherName)!==null&&n!==void 0?n:void 0,local_certificate:(i=u.security.localCertificate)!==null&&i!==void 0?i:void 0,remote_certificate:(s=u.security.remoteCertificate)!==null&&s!==void 0?s:void 0}}:null,f={ref:Jp(l.ref),local:u.localAddress?b3(u.localAddress):null,remote:u.remoteAddress?b3(u.remoteAddress):null,remote_name:(o=u.remoteName)!==null&&o!==void 0?o:void 0,security:c,data:{keep_alives_sent:u.keepAlivesSent,streams_started:u.streamsStarted,streams_succeeded:u.streamsSucceeded,streams_failed:u.streamsFailed,last_local_stream_created_timestamp:Ni(u.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:Ni(u.lastRemoteStreamCreatedTimestamp),messages_received:u.messagesReceived,messages_sent:u.messagesSent,last_message_received_timestamp:Ni(u.lastMessageReceivedTimestamp),last_message_sent_timestamp:Ni(u.lastMessageSentTimestamp),local_flow_control_window:u.localFlowControlWindow?{value:u.localFlowControlWindow}:null,remote_flow_control_window:u.remoteFlowControlWindow?{value:u.remoteFlowControlWindow}:null}};e(null,{socket:f})}function JK(t,e){let r=parseInt(t.request.server_id,10),n=fs.server.getElementByKey(r);if(n===void 0){e({code:Xc.Status.NOT_FOUND,details:"No server data found for id "+r});return}let i=parseInt(t.request.start_socket_id,10),s=parseInt(t.request.max_results,10)||xv,a=n.getInfo().sessionChildren.sockets,l=[],u;for(u=a.lowerBound(i);!u.equals(a.end())&&l.length<s;u=u.next())l.push(Jp(u.pointer[1].ref));e(null,{socket_ref:l,end:u.equals(a.end())})}function x3(){return{GetChannel:$K,GetTopChannels:KK,GetServer:zK,GetServers:YK,GetSubchannel:VK,GetSocket:XK,GetServerSockets:JK}}var zp=null;function D3(){if(zp)return zp;let t=yv().loadSync,e=t("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return zp=(0,qK.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service,zp}function ZK(){(0,UK.registerAdminService)(D3,x3)}});var e0=x(Dv=>{"use strict";Object.defineProperty(Dv,"__esModule",{value:!0});Dv.getNextCallNumber=tz;var ez=0;function tz(){return ez++}});var Iv=x(t0=>{"use strict";Object.defineProperty(t0,"__esModule",{value:!0});t0.CompressionAlgorithms=void 0;var I3;(function(t){t[t.identity=0]="identity",t[t.deflate=1]="deflate",t[t.gzip=2]="gzip"})(I3||(t0.CompressionAlgorithms=I3={}))});var Rv=x(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});r0.BaseFilter=void 0;var Tv=class{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}};r0.BaseFilter=Tv});var Pv=x(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.CompressionFilterFactory=Nl.CompressionFilter=void 0;var n0=require("zlib"),R3=Iv(),kl=nt(),rz=Rv(),nz=Ot(),iz=t=>typeof t=="number"&&typeof R3.CompressionAlgorithms[t]=="string",Ol=class{async writeMessage(e,r){let n=e;r&&(n=await this.compressMessage(n));let i=Buffer.allocUnsafe(n.length+5);return i.writeUInt8(r?1:0,0),i.writeUInt32BE(n.length,1),n.copy(i,5),i}async readMessage(e){let r=e.readUInt8(0)===1,n=e.slice(5);return r&&(n=await this.decompressMessage(n)),n}},Jo=class extends Ol{async compressMessage(e){return e}async writeMessage(e,r){let n=Buffer.allocUnsafe(e.length+5);return n.writeUInt8(0,0),n.writeUInt32BE(e.length,1),e.copy(n,5),n}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},kv=class extends Ol{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((r,n)=>{n0.deflate(e,(i,s)=>{i?n(i):r(s)})})}decompressMessage(e){return new Promise((r,n)=>{let i=0,s=[],o=n0.createInflate();o.on("data",a=>{s.push(a),i+=a.byteLength,this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength&&(o.destroy(),n({code:kl.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{r(Buffer.concat(s))}),o.write(e),o.end()})}},Ov=class extends Ol{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((r,n)=>{n0.gzip(e,(i,s)=>{i?n(i):r(s)})})}decompressMessage(e){return new Promise((r,n)=>{let i=0,s=[],o=n0.createGunzip();o.on("data",a=>{s.push(a),i+=a.byteLength,this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength&&(o.destroy(),n({code:kl.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{r(Buffer.concat(s))}),o.write(e),o.end()})}},Nv=class extends Ol{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function T3(t,e){switch(t){case"identity":return new Jo;case"deflate":return new kv(e);case"gzip":return new Ov(e);default:return new Nv(t)}}var i0=class extends rz.BaseFilter{constructor(e,r){var n,i,s;super(),this.sharedFilterConfig=r,this.sendCompression=new Jo,this.receiveCompression=new Jo,this.currentCompressionAlgorithm="identity";let o=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=(n=e["grpc.max_receive_message_length"])!==null&&n!==void 0?n:kl.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.maxSendMessageLength=(i=e["grpc.max_send_message_length"])!==null&&i!==void 0?i:kl.DEFAULT_MAX_SEND_MESSAGE_LENGTH,o!==void 0)if(iz(o)){let a=R3.CompressionAlgorithms[o],l=(s=r.serverSupportedEncodingHeader)===null||s===void 0?void 0:s.split(",");(!l||l.includes(a))&&(this.currentCompressionAlgorithm=a,this.sendCompression=T3(this.currentCompressionAlgorithm,-1))}else nz.log(kl.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${o}`)}async sendMetadata(e){let r=await e;return r.set("grpc-accept-encoding","identity,deflate,gzip"),r.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?r.remove("grpc-encoding"):r.set("grpc-encoding",this.currentCompressionAlgorithm),r}receiveMetadata(e){let r=e.get("grpc-encoding");if(r.length>0){let i=r[0];typeof i=="string"&&(this.receiveCompression=T3(i,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let n=e.get("grpc-accept-encoding")[0];return n&&(this.sharedFilterConfig.serverSupportedEncodingHeader=n,n.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new Jo,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var r;let n=await e;if(this.maxSendMessageLength!==-1&&n.message.length>this.maxSendMessageLength)throw{code:kl.Status.RESOURCE_EXHAUSTED,details:`Attempted to send message with a size larger than ${this.maxSendMessageLength}`};let i;return this.sendCompression instanceof Jo?i=!1:i=(((r=n.flags)!==null&&r!==void 0?r:0)&2)===0,{message:await this.sendCompression.writeMessage(n.message,i),flags:n.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}};Nl.CompressionFilter=i0;var Bv=class{constructor(e,r){this.options=r,this.sharedFilterConfig={}}createFilter(){return new i0(this.options,this.sharedFilterConfig)}};Nl.CompressionFilterFactory=Bv});var Jc=x(Fv=>{"use strict";Object.defineProperty(Fv,"__esModule",{value:!0});Fv.restrictControlPlaneStatusCode=oz;var Bi=nt(),sz=[Bi.Status.OK,Bi.Status.INVALID_ARGUMENT,Bi.Status.NOT_FOUND,Bi.Status.ALREADY_EXISTS,Bi.Status.FAILED_PRECONDITION,Bi.Status.ABORTED,Bi.Status.OUT_OF_RANGE,Bi.Status.DATA_LOSS];function oz(t,e){return sz.includes(t)?{code:Bi.Status.INTERNAL,details:`Invalid status from control plane: ${t} ${Bi.Status[t]} ${e}`}:{code:t,details:e}}});var Bl=x(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.minDeadline=az;Zo.getDeadlineTimeoutString=uz;Zo.getRelativeTimeout=fz;Zo.deadlineToString=hz;Zo.formatDateDifference=dz;function az(...t){let e=1/0;for(let r of t){let n=r instanceof Date?r.getTime():r;n<e&&(e=n)}return e}var lz=[["m",1],["S",1e3],["M",60*1e3],["H",3600*1e3]];function uz(t){let e=new Date().getTime();t instanceof Date&&(t=t.getTime());let r=Math.max(t-e,0);for(let[n,i]of lz){let s=r/i;if(s<1e8)return String(Math.ceil(s))+n}throw new Error("Deadline is too far in the future")}var cz=2147483647;function fz(t){let e=t instanceof Date?t.getTime():t,r=new Date().getTime(),n=e-r;return n<0?0:n>cz?1/0:n}function hz(t){if(t instanceof Date)return t.toISOString();{let e=new Date(t);return Number.isNaN(e.getTime())?""+t:e.toISOString()}}function dz(t,e){return((e.getTime()-t.getTime())/1e3).toFixed(3)+"s"}});var o0=x(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.FilterStackFactory=Pl.FilterStack=void 0;var s0=class{constructor(e){this.filters=e}sendMetadata(e){let r=e;for(let n=0;n<this.filters.length;n++)r=this.filters[n].sendMetadata(r);return r}receiveMetadata(e){let r=e;for(let n=this.filters.length-1;n>=0;n--)r=this.filters[n].receiveMetadata(r);return r}sendMessage(e){let r=e;for(let n=0;n<this.filters.length;n++)r=this.filters[n].sendMessage(r);return r}receiveMessage(e){let r=e;for(let n=this.filters.length-1;n>=0;n--)r=this.filters[n].receiveMessage(r);return r}receiveTrailers(e){let r=e;for(let n=this.filters.length-1;n>=0;n--)r=this.filters[n].receiveTrailers(r);return r}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}};Pl.FilterStack=s0;var Lv=class t{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new t([...this.factories])}createFilter(){return new s0(this.factories.map(e=>e.createFilter()))}};Pl.FilterStackFactory=Lv});var k3=x(l0=>{"use strict";Object.defineProperty(l0,"__esModule",{value:!0});l0.SingleSubchannelChannel=void 0;var pz=e0(),Zc=so(),gz=Pv(),mz=zr(),ef=nt(),_z=Jc(),Ez=Bl(),yz=o0(),Mv=br(),Az=Vn(),a0=Kr(),Uv=class{constructor(e,r,n,i,s){var o,a;this.subchannel=e,this.method=r,this.options=i,this.callNumber=s,this.childCall=null,this.pendingMessage=null,this.readPending=!1,this.halfClosePending=!1,this.pendingStatus=null,this.readFilterPending=!1,this.writeFilterPending=!1;let l=this.method.split("/"),u="";l.length>=2&&(u=l[1]);let c=(a=(o=(0,a0.splitHostPort)(this.options.host))===null||o===void 0?void 0:o.host)!==null&&a!==void 0?a:"localhost";this.serviceUrl=`https://${c}/${u}`;let f=(0,Ez.getRelativeTimeout)(i.deadline);f!==1/0&&(f<=0?this.cancelWithStatus(ef.Status.DEADLINE_EXCEEDED,"Deadline exceeded"):setTimeout(()=>{this.cancelWithStatus(ef.Status.DEADLINE_EXCEEDED,"Deadline exceeded")},f)),this.filterStack=n.createFilter()}cancelWithStatus(e,r){this.childCall?this.childCall.cancelWithStatus(e,r):this.pendingStatus={code:e,details:r,metadata:new Mv.Metadata}}getPeer(){var e,r;return(r=(e=this.childCall)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:this.subchannel.getAddress()}async start(e,r){if(this.pendingStatus){r.onReceiveStatus(this.pendingStatus);return}if(this.subchannel.getConnectivityState()!==mz.ConnectivityState.READY){r.onReceiveStatus({code:ef.Status.UNAVAILABLE,details:"Subchannel not ready",metadata:new Mv.Metadata});return}let n=await this.filterStack.sendMetadata(Promise.resolve(e)),i;try{i=await this.subchannel.getCallCredentials().generateMetadata({method_name:this.method,service_url:this.serviceUrl})}catch(o){let a=o,{code:l,details:u}=(0,_z.restrictControlPlaneStatusCode)(typeof a.code=="number"?a.code:ef.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${a.message}`);r.onReceiveStatus({code:l,details:u,metadata:new Mv.Metadata});return}i.merge(n);let s={onReceiveMetadata:async o=>{r.onReceiveMetadata(await this.filterStack.receiveMetadata(o))},onReceiveMessage:async o=>{this.readFilterPending=!0;let a=await this.filterStack.receiveMessage(o);this.readFilterPending=!1,r.onReceiveMessage(a),this.pendingStatus&&r.onReceiveStatus(this.pendingStatus)},onReceiveStatus:async o=>{let a=await this.filterStack.receiveTrailers(o);this.readFilterPending?this.pendingStatus=a:r.onReceiveStatus(a)}};this.childCall=this.subchannel.createCall(i,this.options.host,this.method,s),this.readPending&&this.childCall.startRead(),this.pendingMessage&&this.childCall.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.halfClosePending&&!this.writeFilterPending&&this.childCall.halfClose()}async sendMessageWithContext(e,r){this.writeFilterPending=!0;let n=await this.filterStack.sendMessage(Promise.resolve({message:r,flags:e.flags}));this.writeFilterPending=!1,this.childCall?(this.childCall.sendMessageWithContext(e,n.message),this.halfClosePending&&this.childCall.halfClose()):this.pendingMessage={context:e,message:n.message}}startRead(){this.childCall?this.childCall.startRead():this.readPending=!0}halfClose(){this.childCall&&!this.writeFilterPending?this.childCall.halfClose():this.halfClosePending=!0}getCallNumber(){return this.callNumber}setCredentials(e){throw new Error("Method not implemented.")}getAuthContext(){return this.childCall?this.childCall.getAuthContext():null}},qv=class{constructor(e,r,n){this.subchannel=e,this.target=r,this.channelzEnabled=!1,this.channelzTrace=new Zc.ChannelzTrace,this.callTracker=new Zc.ChannelzCallTracker,this.childrenTracker=new Zc.ChannelzChildrenTracker,this.channelzEnabled=n["grpc.enable_channelz"]!==0,this.channelzRef=(0,Zc.registerChannelzChannel)((0,a0.uriToString)(r),()=>({target:`${(0,a0.uriToString)(r)} (${e.getAddress()})`,state:this.subchannel.getConnectivityState(),trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}),this.channelzEnabled),this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),this.filterStackFactory=new yz.FilterStackFactory([new gz.CompressionFilterFactory(this,n)])}close(){this.channelzEnabled&&this.childrenTracker.unrefChild(this.subchannel.getChannelzRef()),(0,Zc.unregisterChannelzRef)(this.channelzRef)}getTarget(){return(0,a0.uriToString)(this.target)}getConnectivityState(e){throw new Error("Method not implemented.")}watchConnectivityState(e,r,n){throw new Error("Method not implemented.")}getChannelzRef(){return this.channelzRef}createCall(e,r){let n={deadline:r,host:(0,Az.getDefaultAuthority)(this.target),flags:ef.Propagate.DEFAULTS,parentCall:null};return new Uv(this.subchannel,e,this.filterStackFactory,n,(0,pz.getNextCallNumber)())}};l0.SingleSubchannelChannel=qv});var O3=x(c0=>{"use strict";Object.defineProperty(c0,"__esModule",{value:!0});c0.Subchannel=void 0;var It=zr(),vz=_l(),Hv=Ot(),u0=nt(),bz=Kr(),Sz=un(),Pi=so(),Cz=k3(),wz="subchannel",xz=~(1<<31),Wv=class{constructor(e,r,n,i,s){var o;this.channelTarget=e,this.subchannelAddress=r,this.options=n,this.connector=s,this.connectivityState=It.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.dataProducers=new Map,this.subchannelChannel=null;let a={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new vz.BackoffTimeout(()=>{this.handleBackoffTimer()},a),this.backoffTimeout.unref(),this.subchannelAddressString=(0,Sz.subchannelAddressToString)(r),this.keepaliveTime=(o=n["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,n["grpc.enable_channelz"]===0?(this.channelzEnabled=!1,this.channelzTrace=new Pi.ChannelzTraceStub,this.callTracker=new Pi.ChannelzCallTrackerStub,this.childrenTracker=new Pi.ChannelzChildrenTrackerStub,this.streamTracker=new Pi.ChannelzCallTrackerStub):(this.channelzTrace=new Pi.ChannelzTrace,this.callTracker=new Pi.ChannelzCallTracker,this.childrenTracker=new Pi.ChannelzChildrenTracker,this.streamTracker=new Pi.ChannelzCallTracker),this.channelzRef=(0,Pi.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(n,void 0,2)),this.secureConnector=i._createSecureConnector(e,n)}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){Hv.trace(u0.LogVerbosity.DEBUG,wz,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){Hv.trace(u0.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([It.ConnectivityState.TRANSIENT_FAILURE],It.ConnectivityState.CONNECTING):this.transitionToState([It.ConnectivityState.TRANSIENT_FAILURE],It.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let r=Math.min(this.keepaliveTime,xz);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":r})}this.connector.connect(this.subchannelAddress,this.secureConnector,e).then(r=>{this.transitionToState([It.ConnectivityState.CONNECTING],It.ConnectivityState.READY)?(this.transport=r,this.channelzEnabled&&this.childrenTracker.refChild(r.getChannelzRef()),r.addDisconnectListener(n=>{this.transitionToState([It.ConnectivityState.READY],It.ConnectivityState.IDLE),n&&this.keepaliveTime>0&&(this.keepaliveTime*=2,Hv.log(u0.LogVerbosity.ERROR,`Connection to ${(0,bz.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):r.shutdown()},r=>{this.transitionToState([It.ConnectivityState.CONNECTING],It.ConnectivityState.TRANSIENT_FAILURE,`${r}`)})}transitionToState(e,r,n){var i,s;if(e.indexOf(this.connectivityState)===-1)return!1;n?this.trace(It.ConnectivityState[this.connectivityState]+" -> "+It.ConnectivityState[r]+' with error "'+n+'"'):this.trace(It.ConnectivityState[this.connectivityState]+" -> "+It.ConnectivityState[r]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+It.ConnectivityState[r]);let o=this.connectivityState;switch(this.connectivityState=r,r){case It.ConnectivityState.READY:this.stopBackoff();break;case It.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case It.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(i=this.transport)===null||i===void 0||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case It.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${r}`)}for(let a of this.stateListeners)a(this,o,r,this.keepaliveTime,n);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzTrace.addTrace("CT_INFO","Shutting down"),(0,Pi.unregisterChannelzRef)(this.channelzRef),this.secureConnector.destroy(),process.nextTick(()=>{this.transitionToState([It.ConnectivityState.CONNECTING,It.ConnectivityState.READY],It.ConnectivityState.IDLE)}))}unrefIfOneRef(){return this.refcount===1?(this.unref(),!0):!1}createCall(e,r,n,i){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:o=>{o.code===u0.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,r,n,i,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([It.ConnectivityState.IDLE],It.ConnectivityState.CONNECTING)||this.connectivityState===It.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([It.ConnectivityState.TRANSIENT_FAILURE],It.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}isHealthy(){return!0}addHealthStateWatcher(e){}removeHealthStateWatcher(e){}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}getCallCredentials(){return this.secureConnector.getCallCredentials()}getChannel(){return this.subchannelChannel||(this.subchannelChannel=new Cz.SingleSubchannelChannel(this,this.channelTarget,this.options)),this.subchannelChannel}addDataWatcher(e){throw new Error("Not implemented")}getOrCreateDataProducer(e,r){let n=this.dataProducers.get(e);if(n)return n;let i=r(this);return this.dataProducers.set(e,i),i}removeDataProducer(e){this.dataProducers.delete(e)}};c0.Subchannel=Wv});var N3=x(f0=>{"use strict";var Qv;Object.defineProperty(f0,"__esModule",{value:!0});f0.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=void 0;f0.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=((Qv=process.env.GRPC_NODE_USE_ALTERNATIVE_RESOLVER)!==null&&Qv!==void 0?Qv:"false")==="true"});var Kv=x(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.DEFAULT_PORT=void 0;ea.setup=Bz;var B3=Vn(),Gv=require("dns"),Dz=Ry(),jv=nt(),Fl=Qo(),Iz=br(),Tz=Ot(),Rz=nt(),oo=Kr(),P3=require("net"),kz=_l(),F3=N3(),Oz="dns_resolver";function Fi(t){Tz.trace(Rz.LogVerbosity.DEBUG,Oz,t)}ea.DEFAULT_PORT=443;var Nz=3e4,$v=class{constructor(e,r,n){var i,s,o;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfigResult=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,this.alternativeResolver=new Gv.promises.Resolver,Fi("Resolver constructed for target "+(0,oo.uriToString)(e)),e.authority&&this.alternativeResolver.setServers([e.authority]);let a=(0,oo.splitHostPort)(e.path);a===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,P3.isIPv4)(a.host)||(0,P3.isIPv6)(a.host)?(this.ipResult=[{addresses:[{host:a.host,port:(i=a.port)!==null&&i!==void 0?i:ea.DEFAULT_PORT}]}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=a.host,this.port=(s=a.port)!==null&&s!==void 0?s:ea.DEFAULT_PORT),this.percentage=Math.random()*100,n["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:jv.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,oo.uriToString)(this.target)}`,metadata:new Iz.Metadata};let l={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new kz.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},l),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=n["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:Nz,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(Fi("Returning IP address for target "+(0,oo.uriToString)(this.target)),setImmediate(()=>{this.listener((0,Fl.statusOrFromValue)(this.ipResult),{},null,"")}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)Fi("Failed to parse DNS address "+(0,oo.uriToString)(this.target)),setImmediate(()=>{this.listener((0,Fl.statusOrFromError)({code:jv.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,oo.uriToString)(this.target)}`}),{},null,"")}),this.stopNextResolutionTimer();else{if(this.pendingLookupPromise!==null)return;Fi("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=this.lookup(e),this.pendingLookupPromise.then(r=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.latestLookupResult=(0,Fl.statusOrFromValue)(r.map(s=>({addresses:[s]})));let n="["+r.map(s=>s.host+":"+s.port).join(",")+"]";Fi("Resolved addresses for target "+(0,oo.uriToString)(this.target)+": "+n);let i=this.listener(this.latestLookupResult,{},this.latestServiceConfigResult,"");this.handleHealthStatus(i)},r=>{this.pendingLookupPromise!==null&&(Fi("Resolution error for target "+(0,oo.uriToString)(this.target)+": "+r.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener((0,Fl.statusOrFromError)(this.defaultResolutionError),{},this.latestServiceConfigResult,""))}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=this.resolveTxt(e),this.pendingTxtPromise.then(r=>{if(this.pendingTxtPromise===null)return;this.pendingTxtPromise=null;let n;try{n=(0,Dz.extractAndSelectServiceConfig)(r,this.percentage),n?this.latestServiceConfigResult=(0,Fl.statusOrFromValue)(n):this.latestServiceConfigResult=null}catch(i){this.latestServiceConfigResult=(0,Fl.statusOrFromError)({code:jv.Status.UNAVAILABLE,details:`Parsing service config failed with error ${i.message}`})}this.latestLookupResult!==null&&this.listener(this.latestLookupResult,{},this.latestServiceConfigResult,"")},r=>{}))}}handleHealthStatus(e){e?(this.backoff.stop(),this.backoff.reset()):this.continueResolving=!0}async lookup(e){if(F3.GRPC_NODE_USE_ALTERNATIVE_RESOLVER){Fi("Using alternative DNS resolver.");let n=await Promise.allSettled([this.alternativeResolver.resolve4(e),this.alternativeResolver.resolve6(e)]);if(n.every(i=>i.status==="rejected"))throw new Error(n[0].reason);return n.reduce((i,s)=>s.status==="fulfilled"?[...i,...s.value]:i,[]).map(i=>({host:i,port:+this.port}))}return(await Gv.promises.lookup(e,{all:!0})).map(n=>({host:n.address,port:+this.port}))}async resolveTxt(e){return F3.GRPC_NODE_USE_ALTERNATIVE_RESOLVER?(Fi("Using alternative DNS resolver."),this.alternativeResolver.resolveTxt(e)):Gv.promises.resolveTxt(e)}startNextResolutionTimer(){var e,r;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs),(r=(e=this.nextResolutionTimer).unref)===null||r===void 0||r.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?Fi('resolution update delayed by "min time between resolutions" rate limit'):Fi("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfigResult=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}};function Bz(){(0,B3.registerResolver)("dns",$v),(0,B3.registerDefaultScheme)("dns")}});var zv=x(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.parseCIDR=U3;nf.mapProxyName=Gz;nf.getProxiedConnection=jz;var tf=Ot(),Ll=nt(),M3=require("net"),Pz=require("http"),Fz=Ot(),L3=un(),rf=Kr(),Lz=require("url"),Mz=Kv(),Uz="proxy";function Ml(t){Fz.trace(Ll.LogVerbosity.DEBUG,Uz,t)}function qz(){let t="",e="";if(process.env.grpc_proxy)e="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)e="https_proxy",t=process.env.https_proxy;else if(process.env.http_proxy)e="http_proxy",t=process.env.http_proxy;else return{};let r;try{r=new Lz.URL(t)}catch{return(0,tf.log)(Ll.LogVerbosity.ERROR,`cannot parse value of "${e}" env var`),{}}if(r.protocol!=="http:")return(0,tf.log)(Ll.LogVerbosity.ERROR,`"${r.protocol}" scheme not supported in proxy URI`),{};let n=null;r.username&&(r.password?((0,tf.log)(Ll.LogVerbosity.INFO,"userinfo found in proxy URI"),n=decodeURIComponent(`${r.username}:${r.password}`)):n=r.username);let i=r.hostname,s=r.port;s===""&&(s="80");let o={address:`${i}:${s}`};return n&&(o.creds=n),Ml("Proxy server "+o.address+" set by environment variable "+e),o}function Hz(){let t=process.env.no_grpc_proxy,e="no_grpc_proxy";return t||(t=process.env.no_proxy,e="no_proxy"),t?(Ml("No proxy server list set by environment variable "+e),t.split(",")):[]}function U3(t){let e=t.split("/");if(e.length!==2)return null;let r=parseInt(e[1],10);return!(0,M3.isIPv4)(e[0])||Number.isNaN(r)||r<0||r>32?null:{ip:q3(e[0]),prefixLength:r}}function q3(t){return t.split(".").reduce((e,r)=>(e<<8)+parseInt(r,10),0)}function Wz(t,e){let r=t.ip,n=-1<<32-t.prefixLength;return(q3(e)&n)===(r&n)}function Qz(t){for(let e of Hz()){let r=U3(e);if((0,M3.isIPv4)(t)&&r&&Wz(r,t))return!0;if(t.endsWith(e))return!0}return!1}function Gz(t,e){var r;let n={target:t,extraOptions:{}};if(((r=e["grpc.enable_http_proxy"])!==null&&r!==void 0?r:1)===0||t.scheme==="unix")return n;let i=qz();if(!i.address)return n;let s=(0,rf.splitHostPort)(t.path);if(!s)return n;let o=s.host;if(Qz(o))return Ml("Not using proxy for target in no_proxy list: "+(0,rf.uriToString)(t)),n;let a={"grpc.http_connect_target":(0,rf.uriToString)(t)};return i.creds&&(a["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:a}}function jz(t,e){var r;if(!("grpc.http_connect_target"in e))return Promise.resolve(null);let n=e["grpc.http_connect_target"],i=(0,rf.parseUri)(n);if(i===null)return Promise.resolve(null);let s=(0,rf.splitHostPort)(i.path);if(s===null)return Promise.resolve(null);let o=`${s.host}:${(r=s.port)!==null&&r!==void 0?r:Mz.DEFAULT_PORT}`,a={method:"CONNECT",path:o},l={Host:o};(0,L3.isTcpSubchannelAddress)(t)?(a.host=t.host,a.port=t.port):a.socketPath=t.path,"grpc.http_connect_creds"in e&&(l["Proxy-Authorization"]="Basic "+Buffer.from(e["grpc.http_connect_creds"]).toString("base64")),a.headers=l;let u=(0,L3.subchannelAddressToString)(t);return Ml("Using proxy "+u+" to connect to "+a.path),new Promise((c,f)=>{let h=Pz.request(a);h.once("connect",(p,g,m)=>{h.removeAllListeners(),g.removeAllListeners(),p.statusCode===200?(Ml("Successfully connected to "+a.path+" through proxy "+u),m.length>0&&g.unshift(m),Ml("Successfully established a plaintext connection to "+a.path+" through proxy "+u),c(g)):((0,tf.log)(Ll.LogVerbosity.ERROR,"Failed to connect to "+a.path+" through proxy "+u+" with status "+p.statusCode),f())}),h.once("error",p=>{h.removeAllListeners(),(0,tf.log)(Ll.LogVerbosity.ERROR,"Failed to connect to proxy "+u+" with error "+p.message),f()}),h.end()})}});var Vv=x(h0=>{"use strict";Object.defineProperty(h0,"__esModule",{value:!0});h0.StreamDecoder=void 0;var Li;(function(t){t[t.NO_DATA=0]="NO_DATA",t[t.READING_SIZE=1]="READING_SIZE",t[t.READING_MESSAGE=2]="READING_MESSAGE"})(Li||(Li={}));var Yv=class{constructor(e){this.maxReadMessageLength=e,this.readState=Li.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let r=0,n,i=[];for(;r<e.length;)switch(this.readState){case Li.NO_DATA:this.readCompressFlag=e.slice(r,r+1),r+=1,this.readState=Li.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case Li.READING_SIZE:if(n=Math.min(e.length-r,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,r,r+n),this.readSizeRemaining-=n,r+=n,this.readSizeRemaining===0){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.maxReadMessageLength!==-1&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=Li.READING_MESSAGE;else{let s=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=Li.NO_DATA,i.push(s)}}break;case Li.READING_MESSAGE:if(n=Math.min(e.length-r,this.readMessageRemaining),this.readPartialMessage.push(e.slice(r,r+n)),this.readMessageRemaining-=n,r+=n,this.readMessageRemaining===0){let s=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(s,this.readMessageSize+5);this.readState=Li.NO_DATA,i.push(o)}break;default:throw new Error("Unexpected read state")}return i}};h0.StreamDecoder=Yv});var H3=x(d0=>{"use strict";Object.defineProperty(d0,"__esModule",{value:!0});d0.Http2SubchannelCall=void 0;var hs=require("http2"),$z=require("os"),Tt=nt(),ds=br(),Kz=Vv(),zz=Ot(),Yz=nt(),Vz="subchannel_call";function Xz(t){for(let[e,r]of Object.entries($z.constants.errno))if(r===t)return e;return"Unknown system error "+t}function Xv(t){let e=`Received HTTP status code ${t}`,r;switch(t){case 400:r=Tt.Status.INTERNAL;break;case 401:r=Tt.Status.UNAUTHENTICATED;break;case 403:r=Tt.Status.PERMISSION_DENIED;break;case 404:r=Tt.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:r=Tt.Status.UNAVAILABLE;break;default:r=Tt.Status.UNKNOWN}return{code:r,details:e,metadata:new ds.Metadata}}var Jv=class{constructor(e,r,n,i,s){var o;this.http2Stream=e,this.callEventTracker=r,this.listener=n,this.transport=i,this.callId=s,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.finalStatus=null,this.internalError=null,this.serverEndedCall=!1,this.connectionDropped=!1;let a=(o=i.getOptions()["grpc.max_receive_message_length"])!==null&&o!==void 0?o:Tt.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new Kz.StreamDecoder(a),e.on("response",(l,u)=>{let c="";for(let f of Object.keys(l))c+="		"+f+": "+l[f]+`
`;if(this.trace(`Received server headers:
`+c),this.httpStatusCode=l[":status"],u&hs.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(l);else{let f;try{f=ds.Metadata.fromHttp2Headers(l)}catch(h){this.endCall({code:Tt.Status.UNKNOWN,details:h.message,metadata:new ds.Metadata});return}this.listener.onReceiveMetadata(f)}}),e.on("trailers",l=>{this.handleTrailers(l)}),e.on("data",l=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+l.length);let u;try{u=this.decoder.write(l)}catch(c){if(this.httpStatusCode!==void 0&&this.httpStatusCode!==200){let f=Xv(this.httpStatusCode);this.cancelWithStatus(f.code,f.details)}else this.cancelWithStatus(Tt.Status.RESOURCE_EXHAUSTED,c.message);return}for(let c of u)this.trace("parsed message of length "+c.length),this.callEventTracker.addMessageReceived(),this.tryPush(c)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{this.serverEndedCall=!0,process.nextTick(()=>{var l;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),((l=this.finalStatus)===null||l===void 0?void 0:l.code)===Tt.Status.OK)return;let u,c="";switch(e.rstCode){case hs.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;if(this.httpStatusCode&&this.httpStatusCode!==200){let f=Xv(this.httpStatusCode);u=f.code,c=f.details}else u=Tt.Status.INTERNAL,c=`Received RST_STREAM with code ${e.rstCode} (Call ended without gRPC status)`;break;case hs.constants.NGHTTP2_REFUSED_STREAM:u=Tt.Status.UNAVAILABLE,c="Stream refused by server";break;case hs.constants.NGHTTP2_CANCEL:this.connectionDropped?(u=Tt.Status.UNAVAILABLE,c="Connection dropped"):(u=Tt.Status.CANCELLED,c="Call cancelled");break;case hs.constants.NGHTTP2_ENHANCE_YOUR_CALM:u=Tt.Status.RESOURCE_EXHAUSTED,c="Bandwidth exhausted or memory limit exceeded";break;case hs.constants.NGHTTP2_INADEQUATE_SECURITY:u=Tt.Status.PERMISSION_DENIED,c="Protocol not secure enough";break;case hs.constants.NGHTTP2_INTERNAL_ERROR:u=Tt.Status.INTERNAL,this.internalError===null?c=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(u=Tt.Status.UNAVAILABLE,c=this.internalError.message):c=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:u=Tt.Status.INTERNAL,c=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:u,details:c,metadata:new ds.Metadata,rstCode:e.rstCode})})}),e.on("error",l=>{l.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+l.message+" code="+l.code+" errno="+Xz(l.errno)+" syscall="+l.syscall),this.internalError=l),this.callEventTracker.onStreamEnd(!1)})}getDeadlineInfo(){return[`remote_addr=${this.getPeer()}`]}onDisconnect(){this.connectionDropped=!0,setImmediate(()=>{this.endCall({code:Tt.Status.UNAVAILABLE,details:"Connection dropped",metadata:new ds.Metadata})})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){zz.trace(Yz.LogVerbosity.DEBUG,Vz,"["+this.callId+"] "+e)}endCall(e){(this.finalStatus===null||this.finalStatus.code===Tt.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==Tt.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,!this.statusOutput&&(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.serverEndedCall=!0,this.callEventTracker.onStreamEnd(!0);let r="";for(let o of Object.keys(e))r+="		"+o+": "+e[o]+`
`;this.trace(`Received server trailers:
`+r);let n;try{n=ds.Metadata.fromHttp2Headers(e)}catch{n=new ds.Metadata}let i=n.getMap(),s;if(typeof i["grpc-status"]=="string"){let o=Number(i["grpc-status"]);this.trace("received status code "+o+" from server"),n.remove("grpc-status");let a="";if(typeof i["grpc-message"]=="string"){try{a=decodeURI(i["grpc-message"])}catch{a=i["grpc-message"]}n.remove("grpc-message"),this.trace('received status details string "'+a+'" from server')}s={code:o,details:a,metadata:n}}else this.httpStatusCode?(s=Xv(this.httpStatusCode),s.metadata=n):s={code:Tt.Status.UNKNOWN,details:"No status information received",metadata:n};this.endCall(s)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed)if(this.serverEndedCall)this.http2Stream.end();else{let r;((e=this.finalStatus)===null||e===void 0?void 0:e.code)===Tt.Status.OK?r=hs.constants.NGHTTP2_NO_ERROR:r=hs.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+r),this.http2Stream.close(r)}}cancelWithStatus(e,r){this.trace("cancelWithStatus code: "+e+' details: "'+r+'"'),this.endCall({code:e,details:r,metadata:new ds.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}getAuthContext(){return this.transport.getAuthContext()}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==Tt.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,r){this.trace("write() called with message of length "+r.length);let n=i=>{process.nextTick(()=>{var s;let o=Tt.Status.UNAVAILABLE;i?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=Tt.Status.INTERNAL),i&&this.cancelWithStatus(o,`Write error: ${i.message}`),(s=e.callback)===null||s===void 0||s.call(e)})};this.trace("sending data chunk of length "+r.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(r,n)}catch(i){this.endCall({code:Tt.Status.UNAVAILABLE,details:`Write failed with error ${i.message}`,metadata:new ds.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}};d0.Http2SubchannelCall=Jv});var W3=x(m0=>{"use strict";Object.defineProperty(m0,"__esModule",{value:!0});m0.Http2SubchannelConnector=void 0;var ta=require("http2"),Jz=require("tls"),p0=so(),sf=nt(),Zz=zv(),Ul=Ot(),eY=Vn(),g0=un(),Zv=Kr(),tY=require("net"),rY=H3(),nY=e0(),eb="transport",iY="transport_flowctrl",sY=cy().version,{HTTP2_HEADER_AUTHORITY:oY,HTTP2_HEADER_CONTENT_TYPE:aY,HTTP2_HEADER_METHOD:lY,HTTP2_HEADER_PATH:uY,HTTP2_HEADER_TE:cY,HTTP2_HEADER_USER_AGENT:fY}=ta.constants,hY=2e4,dY=Buffer.from("too_many_pings","ascii"),tb=class{constructor(e,r,n,i){this.session=e,this.options=n,this.remoteName=i,this.keepaliveTimer=null,this.pendingSendKeepalivePing=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,g0.subchannelAddressToString)(r),n["grpc.enable_channelz"]===0?(this.channelzEnabled=!1,this.streamTracker=new p0.ChannelzCallTrackerStub):this.streamTracker=new p0.ChannelzCallTracker,this.channelzRef=(0,p0.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[n["grpc.primary_user_agent"],`grpc-node-js/${sY}`,n["grpc.secondary_user_agent"]].filter(s=>s).join(" "),"grpc.keepalive_time_ms"in n?this.keepaliveTimeMs=n["grpc.keepalive_time_ms"]:this.keepaliveTimeMs=-1,"grpc.keepalive_timeout_ms"in n?this.keepaliveTimeoutMs=n["grpc.keepalive_timeout_ms"]:this.keepaliveTimeoutMs=hY,"grpc.keepalive_permit_without_calls"in n?this.keepaliveWithoutCalls=n["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.handleDisconnect()}),e.once("goaway",(s,o,a)=>{let l=!1;s===ta.constants.NGHTTP2_ENHANCE_YOUR_CALM&&a&&a.equals(dY)&&(l=!0),this.trace("connection closed by GOAWAY with code "+s+" and data "+a?.toString()),this.reportDisconnectToOwner(l)}),e.once("error",s=>{this.trace("connection closed with error "+s.message),this.handleDisconnect()}),e.socket.once("close",s=>{this.trace("connection closed. hadError="+s),this.handleDisconnect()}),Ul.isTracerEnabled(eb)&&(e.on("remoteSettings",s=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))}),e.on("localSettings",s=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer(),e.socket instanceof Jz.TLSSocket?this.authContext={transportSecurityType:"ssl",sslPeerCertificate:e.socket.getPeerCertificate()}:this.authContext={}}getChannelzInfo(){var e,r,n;let i=this.session.socket,s=i.remoteAddress?(0,g0.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,o=i.localAddress?(0,g0.stringToSubchannelAddress)(i.localAddress,i.localPort):null,a;if(this.session.encrypted){let u=i,c=u.getCipher(),f=u.getCertificate(),h=u.getPeerCertificate();a={cipherSuiteStandardName:(e=c.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:c.standardName?null:c.name,localCertificate:f&&"raw"in f?f.raw:null,remoteCertificate:h&&"raw"in h?h.raw:null}}else a=null;return{remoteAddress:s,localAddress:o,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(r=this.session.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(n=this.session.state.remoteWindowSize)!==null&&n!==void 0?n:null}}trace(e){Ul.trace(sf.LogVerbosity.DEBUG,eb,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){Ul.trace(sf.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){Ul.trace(sf.LogVerbosity.DEBUG,iY,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){Ul.trace(sf.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(r=>r(e)))}handleDisconnect(){this.clearKeepaliveTimeout(),this.reportDisconnectToOwner(!1);for(let e of this.activeCalls)e.onDisconnect();setImmediate(()=>{this.session.destroy()})}addDisconnectListener(e){this.disconnectListeners.push(e)}canSendPing(){return!this.session.destroyed&&this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,r;if(!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}if(this.keepaliveTimer){console.error("keepaliveTimeout is not null");return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),(r=(e=this.keepaliveTimer).unref)===null||r===void 0||r.call(e);let n="";try{this.session.ping((s,o,a)=>{this.clearKeepaliveTimeout(),s?(this.keepaliveTrace("Ping failed with error "+s.message),this.handleDisconnect()):(this.keepaliveTrace("Received ping response"),this.maybeStartKeepalivePingTimer())})||(n="Ping returned false")}catch(i){n=(i instanceof Error?i.message:"")||"Unknown error"}n&&(this.keepaliveTrace("Ping send failed: "+n),this.handleDisconnect())}maybeStartKeepalivePingTimer(){var e,r;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimer||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.maybeSendPing()},this.keepaliveTimeMs),(r=(e=this.keepaliveTimer).unref)===null||r===void 0||r.call(e)))}clearKeepaliveTimeout(){this.keepaliveTimer&&(clearTimeout(this.keepaliveTimer),this.keepaliveTimer=null)}removeActiveCall(e){this.activeCalls.delete(e),this.activeCalls.size===0&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,r,n,i,s){let o=e.toHttp2Headers();o[oY]=r,o[fY]=this.userAgent,o[aY]="application/grpc",o[lY]="POST",o[uY]=n,o[cY]="trailers";let a;try{a=this.session.request(o)}catch(c){throw this.handleDisconnect(),c}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let l,u;return this.channelzEnabled?(this.streamTracker.addCallStarted(),l={addMessageSent:()=>{var c;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(c=s.addMessageSent)===null||c===void 0||c.call(s)},addMessageReceived:()=>{var c;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(c=s.addMessageReceived)===null||c===void 0||c.call(s)},onCallEnd:c=>{var f;(f=s.onCallEnd)===null||f===void 0||f.call(s,c),this.removeActiveCall(u)},onStreamEnd:c=>{var f;c?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(f=s.onStreamEnd)===null||f===void 0||f.call(s,c)}}):l={addMessageSent:()=>{var c;(c=s.addMessageSent)===null||c===void 0||c.call(s)},addMessageReceived:()=>{var c;(c=s.addMessageReceived)===null||c===void 0||c.call(s)},onCallEnd:c=>{var f;(f=s.onCallEnd)===null||f===void 0||f.call(s,c),this.removeActiveCall(u)},onStreamEnd:c=>{var f;(f=s.onStreamEnd)===null||f===void 0||f.call(s,c)}},u=new rY.Http2SubchannelCall(a,l,i,this,(0,nY.getNextCallNumber)()),this.addActiveCall(u),u}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}getAuthContext(){return this.authContext}shutdown(){this.session.close(),(0,p0.unregisterChannelzRef)(this.channelzRef)}},rb=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){Ul.trace(sf.LogVerbosity.DEBUG,eb,(0,Zv.uriToString)(this.channelTarget)+" "+e)}createSession(e,r,n){return this.isShutdown?Promise.reject():e.socket.closed?Promise.reject("Connection closed before starting HTTP/2 handshake"):new Promise((i,s)=>{var o,a,l,u,c,f,h;let p=null,g=this.channelTarget;if("grpc.http_connect_target"in n){let I=(0,Zv.parseUri)(n["grpc.http_connect_target"]);I&&(g=I,p=(0,Zv.uriToString)(I))}let m=e.secure?"https":"http",E=(0,eY.getDefaultAuthority)(g),A=()=>{var I;(I=this.session)===null||I===void 0||I.destroy(),this.session=null,setImmediate(()=>{D||(D=!0,s(`${M.trim()} (${new Date().toISOString()})`))})},w=I=>{var N;(N=this.session)===null||N===void 0||N.destroy(),M=I.message,this.trace("connection failed with error "+M),D||(D=!0,s(`${M} (${new Date().toISOString()})`))},k={createConnection:(I,N)=>e.socket,settings:{initialWindowSize:(u=(o=n["grpc-node.flow_control_window"])!==null&&o!==void 0?o:(l=(a=ta.getDefaultSettings)===null||a===void 0?void 0:a.call(ta))===null||l===void 0?void 0:l.initialWindowSize)!==null&&u!==void 0?u:65535}},S=ta.connect(`${m}://${E}`,k),B=(h=(f=(c=ta.getDefaultSettings)===null||c===void 0?void 0:c.call(ta))===null||f===void 0?void 0:f.initialWindowSize)!==null&&h!==void 0?h:65535,F=n["grpc-node.flow_control_window"];this.session=S;let M="Failed to connect",D=!1;S.unref(),S.once("remoteSettings",()=>{var I;if(F&&F>B)try{S.setLocalWindowSize(F)}catch{let T=F-((I=S.state.localWindowSize)!==null&&I!==void 0?I:B);T>0&&S.incrementWindowSize(T)}S.removeAllListeners(),e.socket.removeListener("close",A),e.socket.removeListener("error",w),i(new tb(S,r,n,p)),this.session=null}),S.once("close",A),S.once("error",w),e.socket.once("close",A),e.socket.once("error",w)})}tcpConnect(e,r){return(0,Zz.getProxiedConnection)(e,r).then(n=>n||new Promise((i,s)=>{let o=()=>{s(new Error("Socket closed"))},a=u=>{s(u)},l=tY.connect(e,()=>{l.removeListener("close",o),l.removeListener("error",a),i(l)});l.once("close",o),l.once("error",a)}))}async connect(e,r,n){if(this.isShutdown)return Promise.reject();let i=null,s=null,o=(0,g0.subchannelAddressToString)(e);try{return this.trace(o+" Waiting for secureConnector to be ready"),await r.waitForReady(),this.trace(o+" secureConnector is ready"),i=await this.tcpConnect(e,n),i.setNoDelay(),this.trace(o+" Established TCP connection"),s=await r.connect(i),this.trace(o+" Established secure connection"),this.createSession(s,e,n)}catch(a){throw i?.destroy(),s?.socket.destroy(),a}}shutdown(){var e;this.isShutdown=!0,(e=this.session)===null||e===void 0||e.close(),this.session=null}};m0.Http2SubchannelConnector=rb});var Q3=x(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.SubchannelPool=void 0;af.getSubchannelPool=vY;var pY=kR(),gY=O3(),mY=un(),_Y=Kr(),EY=W3(),yY=1e4,of=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let r in this.pool){let i=this.pool[r].filter(s=>!s.subchannel.unrefIfOneRef());i.length>0&&(e=!1),this.pool[r]=i}e&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,r;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},yY),(r=(e=this.cleanupTimer).unref)===null||r===void 0||r.call(e))}getOrCreateSubchannel(e,r,n,i){this.ensureCleanupTask();let s=(0,_Y.uriToString)(e);if(s in this.pool){let a=this.pool[s];for(let l of a)if((0,mY.subchannelAddressEqual)(r,l.subchannelAddress)&&(0,pY.channelOptionsEqual)(n,l.channelArguments)&&i._equals(l.channelCredentials))return l.subchannel}let o=new gY.Subchannel(e,r,n,i,new EY.Http2SubchannelConnector(e));return s in this.pool||(this.pool[s]=[]),this.pool[s].push({subchannelAddress:r,channelArguments:n,channelCredentials:i,subchannel:o}),o.ref(),o}};af.SubchannelPool=of;var AY=new of;function vY(t){return t?AY:new of}});var $3=x(y0=>{"use strict";Object.defineProperty(y0,"__esModule",{value:!0});y0.LoadBalancingCall=void 0;var G3=zr(),_0=nt(),j3=Bl(),E0=br(),lf=is(),bY=Kr(),SY=Ot(),nb=Jc(),CY=require("http2"),wY="load_balancing_call",ib=class{constructor(e,r,n,i,s,o,a){var l,u;this.channel=e,this.callConfig=r,this.methodName=n,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null,this.childStartTime=null;let c=this.methodName.split("/"),f="";c.length>=2&&(f=c[1]);let h=(u=(l=(0,bY.splitHostPort)(this.host))===null||l===void 0?void 0:l.host)!==null&&u!==void 0?u:"localhost";this.serviceUrl=`https://${h}/${f}`,this.startTime=new Date}getDeadlineInfo(){var e,r;let n=[];return this.childStartTime?(this.childStartTime>this.startTime&&(!((e=this.metadata)===null||e===void 0)&&e.getOptions().waitForReady&&n.push("wait_for_ready"),n.push(`LB pick: ${(0,j3.formatDateDifference)(this.startTime,this.childStartTime)}`)),n.push(...this.child.getDeadlineInfo()),n):(!((r=this.metadata)===null||r===void 0)&&r.getOptions().waitForReady&&n.push("wait_for_ready"),n.push("Waiting for LB pick"),n)}trace(e){SY.trace(_0.LogVerbosity.DEBUG,wY,"["+this.callNumber+"] "+e)}outputStatus(e,r){var n,i;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString());let s=Object.assign(Object.assign({},e),{progress:r});(n=this.listener)===null||n===void 0||n.onReceiveStatus(s),(i=this.onCallEnded)===null||i===void 0||i.call(this,s.code,s.details,s.metadata)}}doPick(){var e,r;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let n=this.metadata.clone(),i=this.channel.doPick(n,this.callConfig.pickInformation),s=i.subchannel?"("+i.subchannel.getChannelzRef().id+") "+i.subchannel.getAddress():""+i.subchannel;switch(this.trace("Pick result: "+lf.PickResultType[i.pickResultType]+" subchannel: "+s+" status: "+((e=i.status)===null||e===void 0?void 0:e.code)+" "+((r=i.status)===null||r===void 0?void 0:r.details)),i.pickResultType){case lf.PickResultType.COMPLETE:this.credentials.compose(i.subchannel.getCallCredentials()).generateMetadata({method_name:this.methodName,service_url:this.serviceUrl}).then(u=>{var c;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}if(n.merge(u),n.get("authorization").length>1&&this.outputStatus({code:_0.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new E0.Metadata},"PROCESSED"),i.subchannel.getConnectivityState()!==G3.ConnectivityState.READY){this.trace("Picked subchannel "+s+" has state "+G3.ConnectivityState[i.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&n.set("grpc-timeout",(0,j3.getDeadlineTimeoutString)(this.deadline));try{this.child=i.subchannel.getRealSubchannel().createCall(n,this.host,this.methodName,{onReceiveMetadata:f=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(f)},onReceiveMessage:f=>{this.trace("Received message"),this.listener.onReceiveMessage(f)},onReceiveStatus:f=>{this.trace("Received status"),f.rstCode===CY.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(f,"REFUSED"):this.outputStatus(f,"PROCESSED")}}),this.childStartTime=new Date}catch(f){this.trace("Failed to start call on picked subchannel "+s+" with error "+f.message),this.outputStatus({code:_0.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+f.message,metadata:new E0.Metadata},"NOT_STARTED");return}(c=i.onCallStarted)===null||c===void 0||c.call(i),this.onCallEnded=i.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},u=>{let{code:c,details:f}=(0,nb.restrictControlPlaneStatusCode)(typeof u.code=="number"?u.code:_0.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${u.message}`);this.outputStatus({code:c,details:f,metadata:new E0.Metadata},"PROCESSED")});break;case lf.PickResultType.DROP:let{code:a,details:l}=(0,nb.restrictControlPlaneStatusCode)(i.status.code,i.status.details);setImmediate(()=>{this.outputStatus({code:a,details:l,metadata:i.status.metadata},"DROP")});break;case lf.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:u,details:c}=(0,nb.restrictControlPlaneStatusCode)(i.status.code,i.status.details);setImmediate(()=>{this.outputStatus({code:u,details:c,metadata:i.status.metadata},"PROCESSED")})}break;case lf.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,r){var n;this.trace("cancelWithStatus code: "+e+' details: "'+r+'"'),(n=this.child)===null||n===void 0||n.cancelWithStatus(e,r),this.outputStatus({code:e,details:r,metadata:new E0.Metadata},"PROCESSED")}getPeer(){var e,r;return(r=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:this.channel.getTarget()}start(e,r){this.trace("start called"),this.listener=r,this.metadata=e,this.doPick()}sendMessageWithContext(e,r){this.trace("write() called with message of length "+r.length),this.child?this.child.sendMessageWithContext(e,r):this.pendingMessage={context:e,message:r}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}getAuthContext(){return this.child?this.child.getAuthContext():null}};y0.LoadBalancingCall=ib});var z3=x(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});A0.ResolvingCall=void 0;var xY=Vd(),ra=nt(),na=Bl(),K3=br(),DY=Ot(),IY=Jc(),TY="resolving_call",sb=class{constructor(e,r,n,i,s){this.channel=e,this.method=r,this.filterStackFactory=i,this.callNumber=s,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadlineStartTime=null,this.configReceivedTime=null,this.childStartTime=null,this.credentials=xY.CallCredentials.createEmpty(),this.deadline=n.deadline,this.host=n.host,n.parentCall&&(n.flags&ra.Propagate.CANCELLATION&&n.parentCall.on("cancelled",()=>{this.cancelWithStatus(ra.Status.CANCELLED,"Cancelled by parent call")}),n.flags&ra.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+n.parentCall.getDeadline()),this.deadline=(0,na.minDeadline)(this.deadline,n.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){DY.trace(ra.LogVerbosity.DEBUG,TY,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.deadlineStartTime=new Date,this.trace("Deadline: "+(0,na.deadlineToString)(this.deadline));let e=(0,na.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let r=()=>{if(!this.deadlineStartTime){this.cancelWithStatus(ra.Status.DEADLINE_EXCEEDED,"Deadline exceeded");return}let n=[],i=new Date;n.push(`Deadline exceeded after ${(0,na.formatDateDifference)(this.deadlineStartTime,i)}`),this.configReceivedTime?(this.configReceivedTime>this.deadlineStartTime&&n.push(`name resolution: ${(0,na.formatDateDifference)(this.deadlineStartTime,this.configReceivedTime)}`),this.childStartTime?this.childStartTime>this.configReceivedTime&&n.push(`metadata filters: ${(0,na.formatDateDifference)(this.configReceivedTime,this.childStartTime)}`):n.push("waiting for metadata filters")):n.push("waiting for name resolution"),this.child&&n.push(...this.child.getDeadlineInfo()),this.cancelWithStatus(ra.Status.DEADLINE_EXCEEDED,n.join(","))};e<=0?process.nextTick(r):this.deadlineTimer=setTimeout(r,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let r=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+r.code+' details="'+r.details+'"'),this.statusWatchers.forEach(n=>n(r)),process.nextTick(()=>{var n;(n=this.listener)===null||n===void 0||n.onReceiveStatus(r)})}}sendMessageOnChild(e,r){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let n=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:r,flags:e.flags})).then(i=>{this.writeFilterPending=!1,n.sendMessageWithContext(e,i.message),this.pendingHalfClose&&n.halfClose()},i=>{this.cancelWithStatus(i.code,i.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}this.configReceivedTime=new Date;let r=e.config;if(r.status!==ra.Status.OK){let{code:n,details:i}=(0,IY.restrictControlPlaneStatusCode)(r.status,"Failed to route call to method "+this.method);this.outputStatus({code:n,details:i,metadata:new K3.Metadata});return}if(r.methodConfig.timeout){let n=new Date;n.setSeconds(n.getSeconds()+r.methodConfig.timeout.seconds),n.setMilliseconds(n.getMilliseconds()+r.methodConfig.timeout.nanos/1e6),this.deadline=(0,na.minDeadline)(this.deadline,n),this.runDeadlineTimer()}this.filterStackFactory.push(r.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(n=>{this.child=this.channel.createRetryingCall(r,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.childStartTime=new Date,this.child.start(n,{onReceiveMetadata:i=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(i))},onReceiveMessage:i=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(i).then(s=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(s),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},s=>{this.cancelWithStatus(s.code,s.details)})},onReceiveStatus:i=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=i:this.outputStatus(i)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},n=>{this.outputStatus(n)})}reportResolverError(e){var r;!((r=this.metadata)===null||r===void 0)&&r.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,r){var n;this.trace("cancelWithStatus code: "+e+' details: "'+r+'"'),(n=this.child)===null||n===void 0||n.cancelWithStatus(e,r),this.outputStatus({code:e,details:r,metadata:new K3.Metadata})}getPeer(){var e,r;return(r=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:this.channel.getTarget()}start(e,r){this.trace("start called"),this.metadata=e.clone(),this.listener=r,this.getConfig()}sendMessageWithContext(e,r){this.trace("write() called with message of length "+r.length),this.child?this.sendMessageOnChild(e,r):this.pendingMessage={context:e,message:r}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=e}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}getAuthContext(){return this.child?this.child.getAuthContext():null}};A0.ResolvingCall=sb});var Y3=x(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.RetryingCall=ao.MessageBufferTracker=ao.RetryThrottler=void 0;var v0=nt(),RY=Bl(),kY=br(),OY=Ot(),NY="retrying_call",ab=class{constructor(e,r,n){this.maxTokens=e,this.tokenRatio=r,n?this.tokens=n.tokens*(e/n.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.min(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.max(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}};ao.RetryThrottler=ab;var lb=class{constructor(e,r){this.totalLimit=e,this.limitPerCall=r,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,r){var n;let i=(n=this.allocatedPerCall.get(r))!==null&&n!==void 0?n:0;return this.limitPerCall-i<e||this.totalLimit-this.totalAllocated<e?!1:(this.allocatedPerCall.set(r,i+e),this.totalAllocated+=e,!0)}free(e,r){var n;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${r} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let i=(n=this.allocatedPerCall.get(r))!==null&&n!==void 0?n:0;if(i<e)throw new Error(`Invalid buffer allocation state: call ${r} freed ${e} > allocated for call ${i}`);this.allocatedPerCall.set(r,i-e)}freeAll(e){var r;let n=(r=this.allocatedPerCall.get(e))!==null&&r!==void 0?r:0;if(this.totalAllocated<n)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${n} > total allocated ${this.totalAllocated}`);this.totalAllocated-=n,this.allocatedPerCall.delete(e)}};ao.MessageBufferTracker=lb;var ob="grpc-previous-rpc-attempts",BY=5,ub=class{constructor(e,r,n,i,s,o,a,l,u){var c;this.channel=e,this.callConfig=r,this.methodName=n,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.bufferTracker=l,this.retryThrottler=u,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0;let f=(c=e.getOptions()["grpc-node.retry_max_attempts_limit"])!==null&&c!==void 0?c:BY;if(e.getOptions()["grpc.enable_retries"]===0)this.state="NO_RETRY",this.maxAttempts=1;else if(r.methodConfig.retryPolicy){this.state="RETRY";let h=r.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(h.initialBackoff.substring(0,h.initialBackoff.length-1)),this.maxAttempts=Math.min(h.maxAttempts,f)}else r.methodConfig.hedgingPolicy?(this.state="HEDGING",this.maxAttempts=Math.min(r.methodConfig.hedgingPolicy.maxAttempts,f)):(this.state="TRANSPARENT_ONLY",this.maxAttempts=1);this.startTime=new Date}getDeadlineInfo(){if(this.underlyingCalls.length===0)return[];let e=[],r=this.underlyingCalls[this.underlyingCalls.length-1];return this.underlyingCalls.length>1&&e.push(`previous attempts: ${this.underlyingCalls.length-1}`),r.startTime>this.startTime&&e.push(`time to current attempt start: ${(0,RY.formatDateDifference)(this.startTime,r.startTime)}`),e.push(...r.call.getDeadlineInfo()),e}getCallNumber(){return this.callNumber}trace(e){OY.trace(v0.LogVerbosity.DEBUG,NY,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString()),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var r;(r=this.listener)===null||r===void 0||r.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,r){this.trace("cancelWithStatus code: "+e+' details: "'+r+'"'),this.reportStatus({code:e,details:r,metadata:new kY.Metadata});for(let{call:n}of this.underlyingCalls)n.cancelWithStatus(e,r)}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var r;return(r=this.writeBuffer[e-this.writeBufferOffset])!==null&&r!==void 0?r:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let e;this.underlyingCalls[this.committedCallIndex].state==="COMPLETED"?e=this.getNextBufferIndex():e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let r=this.writeBufferOffset;r<e;r++){let n=this.getBufferEntry(r);n.allocated&&this.bufferTracker.free(n.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){var r,n;if(this.state!=="COMMITTED"){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",(n=(r=this.callConfig).onCommitted)===null||n===void 0||n.call(r),this.committedCallIndex=e;for(let i=0;i<this.underlyingCalls.length;i++)i!==e&&this.underlyingCalls[i].state!=="COMPLETED"&&(this.underlyingCalls[i].state="COMPLETED",this.underlyingCalls[i].call.cancelWithStatus(v0.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let e=-1,r=-1;for(let[n,i]of this.underlyingCalls.entries())i.state==="ACTIVE"&&i.nextMessageToSend>e&&(e=i.nextMessageToSend,r=n);r===-1?this.state="TRANSPARENT_ONLY":this.commitCall(r)}isStatusCodeInList(e,r){return e.some(n=>{var i;return n===r||n.toString().toLowerCase()===((i=v0.Status[r])===null||i===void 0?void 0:i.toLowerCase())})}getNextRetryJitter(){return Math.random()*(1.2-.8)+.8}getNextRetryBackoffMs(){var e;let r=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!r)return 0;let i=this.getNextRetryJitter()*this.nextRetryBackoffSec*1e3,s=Number(r.maxBackoff.substring(0,r.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*r.backoffMultiplier,s),i}maybeRetryCall(e,r){if(this.state!=="RETRY"){r(!1);return}if(this.attempts>=this.maxAttempts){r(!1);return}let n;if(e===null)n=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",r(!1);return}else n=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var i,s;if(this.state!=="RETRY"){r(!1);return}!((s=(i=this.retryThrottler)===null||i===void 0?void 0:i.canRetryCall())!==null&&s!==void 0)||s?(r(!0),this.attempts+=1,this.startNewAttempt()):(this.trace("Retry attempt denied by throttling policy"),r(!1))},n)}countActiveCalls(){let e=0;for(let r of this.underlyingCalls)r?.state==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,r,n){var i,s,o;switch(this.state){case"COMMITTED":case"NO_RETRY":case"TRANSPARENT_ONLY":this.commitCall(r),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList((i=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&i!==void 0?i:[],e.code)){(s=this.retryThrottler)===null||s===void 0||s.addCallFailed();let a;if(n===null)a=0;else if(n<0){this.state="TRANSPARENT_ONLY",this.commitCall(r),this.reportStatus(e);return}else a=n;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(r),this.reportStatus(e))},a)}else this.commitCall(r),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(n,a=>{a||(this.commitCall(r),this.reportStatus(e))})):(this.commitCall(r),this.reportStatus(e));break}}getPushback(e){let r=e.get("grpc-retry-pushback-ms");if(r.length===0)return null;try{return parseInt(r[0])}catch{return-1}}handleChildStatus(e,r){var n;if(this.underlyingCalls[r].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[r].call.getCallNumber()+"] in state "+this.underlyingCalls[r].state),this.underlyingCalls[r].state="COMPLETED",e.code===v0.Status.OK){(n=this.retryThrottler)===null||n===void 0||n.addCallSucceeded(),this.commitCall(r),this.reportStatus(e);return}if(this.state==="NO_RETRY"){this.commitCall(r),this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,r,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(r),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,r,i);break}}maybeStartHedgingAttempt(){this.state==="HEDGING"&&this.callConfig.methodConfig.hedgingPolicy&&(this.attempts>=this.maxAttempts||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()))}maybeStartHedgingTimer(){var e,r,n;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let i=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=this.maxAttempts)return;let s=(e=i.hedgingDelay)!==null&&e!==void 0?e:"0s",o=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},o*1e3),(n=(r=this.hedgingTimer).unref)===null||n===void 0||n.call(r)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let r=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0,startTime:new Date});let n=this.attempts-1,i=this.initialMetadata.clone();n>0&&i.set(ob,`${n}`);let s=!1;e.start(i,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(r),s=!0,n>0&&o.set(ob,`${n}`),this.underlyingCalls[r].state==="ACTIVE"&&this.listener.onReceiveMetadata(o)},onReceiveMessage:o=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(r),this.underlyingCalls[r].state==="ACTIVE"&&this.listener.onReceiveMessage(o)},onReceiveStatus:o=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&n>0&&o.metadata.set(ob,`${n}`),this.handleChildStatus(o,r)}}),this.sendNextChildMessage(r),this.readStarted&&e.startRead()}start(e,r){this.trace("start called"),this.listener=r,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var r,n;let i=this.underlyingCalls[e],s=i.nextMessageToSend;(n=(r=this.getBufferEntry(s)).callback)===null||n===void 0||n.call(r),this.clearSentMessages(),i.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let r=this.underlyingCalls[e];if(r.state!=="COMPLETED"&&this.getBufferEntry(r.nextMessageToSend)){let n=this.getBufferEntry(r.nextMessageToSend);switch(n.entryType){case"MESSAGE":r.call.sendMessageWithContext({callback:i=>{this.handleChildWriteCompleted(e)}},n.message.message);break;case"HALF_CLOSE":r.nextMessageToSend+=1,r.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(e,r){var n;this.trace("write() called with message of length "+r.length);let i={message:r,flags:e.flags},s=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:i,allocated:this.bufferTracker.allocate(r.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(n=e.callback)===null||n===void 0||n.call(e);for(let[a,l]of this.underlyingCalls.entries())l.state==="ACTIVE"&&l.nextMessageToSend===s&&l.call.sendMessageWithContext({callback:u=>{this.handleChildWriteCompleted(a)}},r)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let a=this.underlyingCalls[this.committedCallIndex];o.callback=e.callback,a.state==="ACTIVE"&&a.nextMessageToSend===s&&a.call.sendMessageWithContext({callback:l=>{this.handleChildWriteCompleted(this.committedCallIndex)}},r)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let r of this.underlyingCalls)r?.state==="ACTIVE"&&r.nextMessageToSend===e&&(r.nextMessageToSend+=1,r.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}getAuthContext(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getAuthContext():null}};ao.RetryingCall=ub});var uf=x(b0=>{"use strict";Object.defineProperty(b0,"__esModule",{value:!0});b0.BaseSubchannelWrapper=void 0;var cb=class{constructor(e){this.child=e,this.healthy=!0,this.healthListeners=new Set,this.refcount=0,this.dataWatchers=new Set,e.addHealthStateWatcher(r=>{this.healthy&&this.updateHealthListeners()})}updateHealthListeners(){for(let e of this.healthListeners)e(this.isHealthy())}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref(),this.refcount+=1}unref(){this.child.unref(),this.refcount-=1,this.refcount===0&&this.destroy()}destroy(){for(let e of this.dataWatchers)e.destroy()}getChannelzRef(){return this.child.getChannelzRef()}isHealthy(){return this.healthy&&this.child.isHealthy()}addHealthStateWatcher(e){this.healthListeners.add(e)}removeHealthStateWatcher(e){this.healthListeners.delete(e)}addDataWatcher(e){e.setSubchannel(this.getRealSubchannel()),this.dataWatchers.add(e)}setHealthy(e){e!==this.healthy&&(this.healthy=e,this.child.isHealthy()&&this.updateHealthListeners())}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}getCallCredentials(){return this.child.getCallCredentials()}getChannel(){return this.child.getChannel()}};b0.BaseSubchannelWrapper=cb});var Eb=x(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.InternalChannel=ia.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=void 0;var PY=ml(),FY=RR(),LY=Q3(),db=is(),MY=br(),lo=nt(),UY=o0(),qY=Pv(),V3=Vn(),S0=Ot(),HY=zv(),C0=Kr(),qn=zr(),cf=so(),WY=$3(),QY=Bl(),GY=z3(),fb=e0(),jY=Jc(),hb=Y3(),$Y=uf(),KY=2147483647,zY=1e3,YY=1800*1e3,w0=new Map,VY=1<<24,XY=1<<20,pb=class extends $Y.BaseSubchannelWrapper{constructor(e,r){super(e),this.channel=r,this.refCount=0,this.subchannelStateListener=(n,i,s,o)=>{r.throttleKeepalive(o)}}ref(){this.refCount===0&&(this.child.addConnectivityStateListener(this.subchannelStateListener),this.channel.addWrappedSubchannel(this)),this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}},gb=class{pick(e){return{pickResultType:db.PickResultType.DROP,status:{code:lo.Status.UNAVAILABLE,details:"Channel closed before call started",metadata:new MY.Metadata},subchannel:null,onCallStarted:null,onCallEnded:null}}};ia.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX="grpc.internal.no_subchannel";var mb=class{constructor(e){this.target=e,this.trace=new cf.ChannelzTrace,this.callTracker=new cf.ChannelzCallTracker,this.childrenTracker=new cf.ChannelzChildrenTracker,this.state=qn.ConnectivityState.IDLE}getChannelzInfoCallback(){return()=>({target:this.target,state:this.state,trace:this.trace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()})}},_b=class{constructor(e,r,n){var i,s,o,a,l,u;if(this.credentials=r,this.options=n,this.connectivityState=qn.ConnectivityState.IDLE,this.currentPicker=new db.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.callRefTimer=null,this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.randomChannelId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),typeof e!="string")throw new TypeError("Channel target must be a string");if(!(r instanceof PY.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(n&&typeof n!="object")throw new TypeError("Channel options must be an object");this.channelzInfoTracker=new mb(e);let c=(0,C0.parseUri)(e);if(c===null)throw new Error(`Could not parse target name "${e}"`);let f=(0,V3.mapUriDefaultScheme)(c);if(f===null)throw new Error(`Could not find a default scheme for target name "${e}"`);this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,cf.registerChannelzChannel)(e,this.channelzInfoTracker.getChannelzInfoCallback(),this.channelzEnabled),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,V3.getDefaultAuthority)(f);let h=(0,HY.mapProxyName)(f,n);this.target=h.target,this.options=Object.assign({},this.options,h.extraOptions),this.subchannelPool=(0,LY.getSubchannelPool)(((i=this.options["grpc.use_local_subchannel_pool"])!==null&&i!==void 0?i:0)===0),this.retryBufferTracker=new hb.MessageBufferTracker((s=this.options["grpc.retry_buffer_size"])!==null&&s!==void 0?s:VY,(o=this.options["grpc.per_rpc_retry_buffer_size"])!==null&&o!==void 0?o:XY),this.keepaliveTime=(a=this.options["grpc.keepalive_time_ms"])!==null&&a!==void 0?a:-1,this.idleTimeoutMs=Math.max((l=this.options["grpc.client_idle_timeout_ms"])!==null&&l!==void 0?l:YY,zY);let p={createSubchannel:(m,E)=>{let A={};for(let[S,B]of Object.entries(E))S.startsWith(ia.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX)||(A[S]=B);let w=this.subchannelPool.getOrCreateSubchannel(this.target,m,A,this.credentials);return w.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Created subchannel or used existing subchannel",w.getChannelzRef()),new pb(w,this)},updateState:(m,E)=>{this.currentPicker=E;let A=this.pickQueue.slice();this.pickQueue=[],A.length>0&&this.callRefTimerUnref();for(let w of A)w.doPick();this.updateState(m)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:m=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.refChild(m)},removeChannelzChild:m=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.unrefChild(m)}};this.resolvingLoadBalancer=new FY.ResolvingLoadBalancer(this.target,p,this.options,(m,E)=>{var A;m.retryThrottling?w0.set(this.getTarget(),new hb.RetryThrottler(m.retryThrottling.maxTokens,m.retryThrottling.tokenRatio,w0.get(this.getTarget()))):w0.delete(this.getTarget()),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Address resolution succeeded"),(A=this.configSelector)===null||A===void 0||A.unref(),this.configSelector=E,this.currentResolutionError=null,process.nextTick(()=>{let w=this.configSelectionQueue;this.configSelectionQueue=[],w.length>0&&this.callRefTimerUnref();for(let k of w)k.getConfig()})},m=>{this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_WARNING","Address resolution failed with code "+m.code+' and details "'+m.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0,jY.restrictControlPlaneStatusCode)(m.code,m.details)),{metadata:m.metadata}));let E=this.configSelectionQueue;this.configSelectionQueue=[],E.length>0&&this.callRefTimerUnref();for(let A of E)A.reportResolverError(m)}),this.filterStackFactory=new UY.FilterStackFactory([new qY.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(n,void 0,2));let g=new Error;(0,S0.isTracerEnabled)("channel_stacktrace")&&(0,S0.trace)(lo.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((u=g.stack)===null||u===void 0?void 0:u.substring(g.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date}trace(e,r){(0,S0.trace)(r??lo.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,C0.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,r,n,i;this.callRefTimer||(this.callRefTimer=setInterval(()=>{},KY)),!((r=(e=this.callRefTimer).hasRef)===null||r===void 0)&&r.call(e)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(i=(n=this.callRefTimer).ref)===null||i===void 0||i.call(n))}callRefTimerUnref(){var e,r,n;(!(!((e=this.callRefTimer)===null||e===void 0)&&e.hasRef)||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(n=(r=this.callRefTimer)===null||r===void 0?void 0:r.unref)===null||n===void 0||n.call(r))}removeConnectivityStateWatcher(e){let r=this.connectivityStateWatchers.findIndex(n=>n===e);r>=0&&this.connectivityStateWatchers.splice(r,1)}updateState(e){(0,S0.trace)(lo.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,C0.uriToString)(this.target)+" "+qn.ConnectivityState[this.connectivityState]+" -> "+qn.ConnectivityState[e]),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Connectivity state change to "+qn.ConnectivityState[e]),this.connectivityState=e,this.channelzInfoTracker.state=e;let r=this.connectivityStateWatchers.slice();for(let n of r)e!==n.currentState&&(n.timer&&clearTimeout(n.timer),this.removeConnectivityStateWatcher(n),n.callback());e!==qn.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(let r of this.wrappedSubchannels)r.throttleKeepalive(e)}}addWrappedSubchannel(e){this.wrappedSubchannels.add(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,r){return this.currentPicker.pick({metadata:e,extraPickInfo:r})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,r){return this.connectivityState!==qn.ConnectivityState.SHUTDOWN&&this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector.invoke(e,r,this.randomChannelId)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(qn.ConnectivityState.IDLE),this.currentPicker=new db.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.callRefTimer&&(clearInterval(this.callRefTimer),this.callRefTimer=null)}startIdleTimeout(e){var r,n;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let s=new Date().valueOf()-this.lastActivityTimestamp.valueOf();s>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-s)},e),(n=(r=this.idleTimer).unref)===null||n===void 0||n.call(r)}maybeStartIdleTimer(){this.connectivityState!==qn.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.channelzInfoTracker.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===lo.Status.OK?this.channelzInfoTracker.callTracker.addCallSucceeded():this.channelzInfoTracker.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,r,n,i,s){let o=(0,fb.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+r+'"'),new WY.LoadBalancingCall(this,e,r,n,i,s,o)}createRetryingCall(e,r,n,i,s){let o=(0,fb.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+r+'"'),new hb.RetryingCall(this,e,r,n,i,s,o,this.retryBufferTracker,w0.get(this.getTarget()))}createResolvingCall(e,r,n,i,s){let o=(0,fb.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+e+'", deadline='+(0,QY.deadlineToString)(r));let a={deadline:r,flags:s??lo.Propagate.DEFAULTS,host:n??this.defaultAuthority,parentCall:i},l=new GY.ResolvingCall(this,e,a,this.filterStackFactory.clone(),o);return this.onCallStart(),l.addStatusWatcher(u=>{this.onCallEnd(u)}),l}close(){var e;this.resolvingLoadBalancer.destroy(),this.updateState(qn.ConnectivityState.SHUTDOWN),this.currentPicker=new gb;for(let r of this.configSelectionQueue)r.cancelWithStatus(lo.Status.UNAVAILABLE,"Channel closed before call started");this.configSelectionQueue=[];for(let r of this.pickQueue)r.cancelWithStatus(lo.Status.UNAVAILABLE,"Channel closed before call started");this.pickQueue=[],this.callRefTimer&&clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,cf.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels(),(e=this.configSelector)===null||e===void 0||e.unref(),this.configSelector=null}getTarget(){return(0,C0.uriToString)(this.target)}getConnectivityState(e){let r=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),r}watchConnectivityState(e,r,n){if(this.connectivityState===qn.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let i=null;if(r!==1/0){let o=r instanceof Date?r:new Date(r),a=new Date;if(r===-1/0||o<=a){process.nextTick(n,new Error("Deadline passed without connectivity state change"));return}i=setTimeout(()=>{this.removeConnectivityStateWatcher(s),n(new Error("Deadline passed without connectivity state change"))},o.getTime()-a.getTime())}let s={currentState:e,callback:n,timer:i};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,r,n,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof r=="number"||r instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===qn.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,r,n,i,s)}getOptions(){return this.options}};ia.InternalChannel=_b});var aA=x(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});x0.ChannelImplementation=void 0;var JY=ml(),ZY=Eb(),yb=class{constructor(e,r,n){if(typeof e!="string")throw new TypeError("Channel target must be a string");if(!(r instanceof JY.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(n&&typeof n!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new ZY.InternalChannel(e,r,n)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,r,n){this.internalChannel.watchConnectivityState(e,r,n)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,r,n,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof r=="number"||r instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,r,n,i,s)}};x0.ChannelImplementation=yb});var J3=x(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.ServerDuplexStreamImpl=li.ServerWritableStreamImpl=li.ServerReadableStreamImpl=li.ServerUnaryCallImpl=void 0;li.serverErrorToStatus=xb;var eV=require("events"),Cb=require("stream"),wb=nt(),X3=br();function xb(t,e){var r;let n={code:wb.Status.UNKNOWN,details:"message"in t?t.message:"Unknown Error",metadata:(r=e??t.metadata)!==null&&r!==void 0?r:null};return"code"in t&&typeof t.code=="number"&&Number.isInteger(t.code)&&(n.code=t.code,"details"in t&&typeof t.details=="string"&&(n.details=t.details)),n}var Ab=class extends eV.EventEmitter{constructor(e,r,n,i){super(),this.path=e,this.call=r,this.metadata=n,this.request=i,this.cancelled=!1}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}};li.ServerUnaryCallImpl=Ab;var vb=class extends Cb.Readable{constructor(e,r,n){super({objectMode:!0}),this.path=e,this.call=r,this.metadata=n,this.cancelled=!1}_read(e){this.call.startRead()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}};li.ServerReadableStreamImpl=vb;var bb=class extends Cb.Writable{constructor(e,r,n,i){super({objectMode:!0}),this.path=e,this.call=r,this.metadata=n,this.request=i,this.pendingStatus={code:wb.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new X3.Metadata,this.on("error",s=>{this.pendingStatus=xb(s),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}_write(e,r,n){this.call.sendMessage(e,n)}_final(e){var r;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:(r=this.pendingStatus.metadata)!==null&&r!==void 0?r:this.trailingMetadata}))}end(e){return e&&(this.trailingMetadata=e),super.end()}};li.ServerWritableStreamImpl=bb;var Sb=class extends Cb.Duplex{constructor(e,r,n){super({objectMode:!0}),this.path=e,this.call=r,this.metadata=n,this.pendingStatus={code:wb.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new X3.Metadata,this.on("error",i=>{this.pendingStatus=xb(i),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}_read(e){this.call.startRead()}_write(e,r,n){this.call.sendMessage(e,n)}_final(e){var r;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:(r=this.pendingStatus.metadata)!==null&&r!==void 0?r:this.trailingMetadata}))}end(e){return e&&(this.trailingMetadata=e),super.end()}};li.ServerDuplexStreamImpl=Sb});var D0=x(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.ServerCredentials=void 0;ql.createCertificateProviderServerCredentials=tV;ql.createServerCredentialsWithInterceptors=rV;var Db=by(),sa=class{constructor(e,r){this.serverConstructorOptions=e,this.watchers=new Set,this.latestContextOptions=null,this.latestContextOptions=r??null}_addWatcher(e){this.watchers.add(e)}_removeWatcher(e){this.watchers.delete(e)}getWatcherCount(){return this.watchers.size}updateSecureContextOptions(e){this.latestContextOptions=e;for(let r of this.watchers)r(this.latestContextOptions)}_isSecure(){return this.serverConstructorOptions!==null}_getSecureContextOptions(){return this.latestContextOptions}_getConstructorOptions(){return this.serverConstructorOptions}_getInterceptors(){return[]}static createInsecure(){return new Ib}static createSsl(e,r,n=!1){var i;if(e!==null&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(r))throw new TypeError("keyCertPairs must be an array");if(typeof n!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let s=[],o=[];for(let a=0;a<r.length;a++){let l=r[a];if(l===null||typeof l!="object")throw new TypeError(`keyCertPair[${a}] must be an object`);if(!Buffer.isBuffer(l.private_key))throw new TypeError(`keyCertPair[${a}].private_key must be a Buffer`);if(!Buffer.isBuffer(l.cert_chain))throw new TypeError(`keyCertPair[${a}].cert_chain must be a Buffer`);s.push(l.cert_chain),o.push(l.private_key)}return new Tb({requestCert:n,ciphers:Db.CIPHER_SUITES},{ca:(i=e??(0,Db.getDefaultRootsData)())!==null&&i!==void 0?i:void 0,cert:s,key:o})}};ql.ServerCredentials=sa;var Ib=class t extends sa{constructor(){super(null)}_getSettings(){return null}_equals(e){return e instanceof t}},Tb=class t extends sa{constructor(e,r){super(e,r),this.options=Object.assign(Object.assign({},e),r)}_equals(e){if(this===e)return!0;if(!(e instanceof t))return!1;if(Buffer.isBuffer(this.options.ca)&&Buffer.isBuffer(e.options.ca)){if(!this.options.ca.equals(e.options.ca))return!1}else if(this.options.ca!==e.options.ca)return!1;if(Array.isArray(this.options.cert)&&Array.isArray(e.options.cert)){if(this.options.cert.length!==e.options.cert.length)return!1;for(let r=0;r<this.options.cert.length;r++){let n=this.options.cert[r],i=e.options.cert[r];if(Buffer.isBuffer(n)&&Buffer.isBuffer(i)){if(!n.equals(i))return!1}else if(n!==i)return!1}}else if(this.options.cert!==e.options.cert)return!1;if(Array.isArray(this.options.key)&&Array.isArray(e.options.key)){if(this.options.key.length!==e.options.key.length)return!1;for(let r=0;r<this.options.key.length;r++){let n=this.options.key[r],i=e.options.key[r];if(Buffer.isBuffer(n)&&Buffer.isBuffer(i)){if(!n.equals(i))return!1}else if(n!==i)return!1}}else if(this.options.key!==e.options.key)return!1;return this.options.requestCert===e.options.requestCert}},Rb=class t extends sa{constructor(e,r,n){super({requestCert:r!==null,rejectUnauthorized:n,ciphers:Db.CIPHER_SUITES}),this.identityCertificateProvider=e,this.caCertificateProvider=r,this.requireClientCertificate=n,this.latestCaUpdate=null,this.latestIdentityUpdate=null,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this)}_addWatcher(e){var r;this.getWatcherCount()===0&&((r=this.caCertificateProvider)===null||r===void 0||r.addCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.addIdentityCertificateListener(this.identityCertificateUpdateListener)),super._addWatcher(e)}_removeWatcher(e){var r;super._removeWatcher(e),this.getWatcherCount()===0&&((r=this.caCertificateProvider)===null||r===void 0||r.removeCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.removeIdentityCertificateListener(this.identityCertificateUpdateListener))}_equals(e){return this===e?!0:e instanceof t?this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&this.requireClientCertificate===e.requireClientCertificate:!1}calculateSecureContextOptions(){var e;return this.latestIdentityUpdate===null||this.caCertificateProvider!==null&&this.latestCaUpdate===null?null:{ca:(e=this.latestCaUpdate)===null||e===void 0?void 0:e.caCertificate,cert:[this.latestIdentityUpdate.certificate],key:[this.latestIdentityUpdate.privateKey]}}finalizeUpdate(){let e=this.calculateSecureContextOptions();this.updateSecureContextOptions(e)}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.finalizeUpdate()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.finalizeUpdate()}};function tV(t,e,r){return new Rb(t,e,r)}var kb=class t extends sa{constructor(e,r){super({}),this.childCredentials=e,this.interceptors=r}_isSecure(){return this.childCredentials._isSecure()}_equals(e){if(!(e instanceof t)||!this.childCredentials._equals(e.childCredentials)||this.interceptors.length!==e.interceptors.length)return!1;for(let r=0;r<this.interceptors.length;r++)if(this.interceptors[r]!==e.interceptors[r])return!1;return!0}_getInterceptors(){return this.interceptors}_addWatcher(e){this.childCredentials._addWatcher(e)}_removeWatcher(e){this.childCredentials._removeWatcher(e)}_getConstructorOptions(){return this.childCredentials._getConstructorOptions()}_getSecureContextOptions(){return this.childCredentials._getSecureContextOptions()}};function rV(t,e){return new kb(t,e)}});var ff=x(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.durationMessageToDuration=nV;ps.msToDuration=iV;ps.durationToMs=sV;ps.isDuration=oV;ps.isDurationMessage=aV;ps.parseDuration=uV;ps.durationToString=cV;function nV(t){return{seconds:Number.parseInt(t.seconds),nanos:t.nanos}}function iV(t){return{seconds:t/1e3|0,nanos:t%1e3*1e6|0}}function sV(t){return t.seconds*1e3+t.nanos/1e6|0}function oV(t){return typeof t.seconds=="number"&&typeof t.nanos=="number"}function aV(t){return typeof t.seconds=="string"&&typeof t.nanos=="number"}var lV=/^(\d+)(?:\.(\d+))?s$/;function uV(t){let e=t.match(lV);return e?{seconds:Number.parseInt(e[1],10),nanos:e[2]?Number.parseInt(e[2].padEnd(9,"0"),10):0}:null}function cV(t){if(t.nanos===0)return`${t.seconds}s`;let e;return t.nanos%1e6===0?e=1e6:t.nanos%1e3===0?e=1e3:e=1,`${t.seconds}.${t.nanos/e}s`}});var T0=x(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.OrcaOobMetricsSubchannelWrapper=bn.GRPC_METRICS_HEADER=bn.ServerMetricRecorder=bn.PerRequestMetricRecorder=void 0;bn.createOrcaClient=r4;bn.createMetricsReader=_V;var fV=_p(),Ob=ff(),hV=ml(),dV=uf(),Z3=nt(),pV=_l(),gV=zr(),e4=null;function I0(){if(e4)return e4;let t=yv().loadSync,e=t("xds/service/orca/v3/orca.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto/xds`,`${__dirname}/../../proto/protoc-gen-validate`]});return(0,fV.loadPackageDefinition)(e)}var Nb=class{constructor(){this.message={}}recordRequestCostMetric(e,r){this.message.request_cost||(this.message.request_cost={}),this.message.request_cost[e]=r}recordUtilizationMetric(e,r){this.message.utilization||(this.message.utilization={}),this.message.utilization[e]=r}recordNamedMetric(e,r){this.message.named_metrics||(this.message.named_metrics={}),this.message.named_metrics[e]=r}recordCPUUtilizationMetric(e){this.message.cpu_utilization=e}recordMemoryUtilizationMetric(e){this.message.mem_utilization=e}recordApplicationUtilizationMetric(e){this.message.application_utilization=e}recordQpsMetric(e){this.message.rps_fractional=e}recordEpsMetric(e){this.message.eps=e}serialize(){return I0().xds.data.orca.v3.OrcaLoadReport.serialize(this.message)}};bn.PerRequestMetricRecorder=Nb;var mV=3e4,Bb=class{constructor(){this.message={},this.serviceImplementation={StreamCoreMetrics:e=>{let r=e.request.report_interval?(0,Ob.durationToMs)((0,Ob.durationMessageToDuration)(e.request.report_interval)):mV,n=setInterval(()=>{e.write(this.message)},r);e.on("cancelled",()=>{clearInterval(n)})}}}putUtilizationMetric(e,r){this.message.utilization||(this.message.utilization={}),this.message.utilization[e]=r}setAllUtilizationMetrics(e){this.message.utilization=Object.assign({},e)}deleteUtilizationMetric(e){var r;(r=this.message.utilization)===null||r===void 0||delete r[e]}setCpuUtilizationMetric(e){this.message.cpu_utilization=e}deleteCpuUtilizationMetric(){delete this.message.cpu_utilization}setApplicationUtilizationMetric(e){this.message.application_utilization=e}deleteApplicationUtilizationMetric(){delete this.message.application_utilization}setQpsMetric(e){this.message.rps_fractional=e}deleteQpsMetric(){delete this.message.rps_fractional}setEpsMetric(e){this.message.eps=e}deleteEpsMetric(){delete this.message.eps}addToServer(e){let r=I0().xds.service.orca.v3.OpenRcaService.service;e.addService(r,this.serviceImplementation)}};bn.ServerMetricRecorder=Bb;function r4(t){let e=I0().xds.service.orca.v3.OpenRcaService;return new e("unused",hV.ChannelCredentials.createInsecure(),{channelOverride:t})}bn.GRPC_METRICS_HEADER="endpoint-load-metrics-bin";var t4="grpc_orca_load_report";function _V(t,e){return(r,n,i)=>{let s=i.getOpaque(t4);if(s)t(s);else{let o=i.get(bn.GRPC_METRICS_HEADER);o.length>0&&(s=I0().xds.data.orca.v3.OrcaLoadReport.deserialize(o[0]),t(s),i.setOpaque(t4,s))}e&&e(r,n,i)}}var n4="orca_oob_metrics",Pb=class{constructor(e,r){this.metricsListener=e,this.intervalMs=r,this.dataProducer=null}setSubchannel(e){let r=e.getOrCreateDataProducer(n4,EV);this.dataProducer=r,r.addDataWatcher(this)}destroy(){var e;(e=this.dataProducer)===null||e===void 0||e.removeDataWatcher(this)}getInterval(){return this.intervalMs}onMetricsUpdate(e){this.metricsListener(e)}},Fb=class{constructor(e){this.subchannel=e,this.dataWatchers=new Set,this.orcaSupported=!0,this.metricsCall=null,this.currentInterval=1/0,this.backoffTimer=new pV.BackoffTimeout(()=>this.updateMetricsSubscription()),this.subchannelStateListener=()=>this.updateMetricsSubscription();let r=e.getChannel();this.client=r4(r),e.addConnectivityStateListener(this.subchannelStateListener)}addDataWatcher(e){this.dataWatchers.add(e),this.updateMetricsSubscription()}removeDataWatcher(e){var r;this.dataWatchers.delete(e),this.dataWatchers.size===0?(this.subchannel.removeDataProducer(n4),(r=this.metricsCall)===null||r===void 0||r.cancel(),this.metricsCall=null,this.client.close(),this.subchannel.removeConnectivityStateListener(this.subchannelStateListener)):this.updateMetricsSubscription()}updateMetricsSubscription(){var e;if(this.dataWatchers.size===0||!this.orcaSupported||this.subchannel.getConnectivityState()!==gV.ConnectivityState.READY)return;let r=Math.min(...Array.from(this.dataWatchers).map(n=>n.getInterval()));if(!this.metricsCall||r!==this.currentInterval){(e=this.metricsCall)===null||e===void 0||e.cancel(),this.currentInterval=r;let n=this.client.streamCoreMetrics({report_interval:(0,Ob.msToDuration)(r)});this.metricsCall=n,n.on("data",i=>{this.dataWatchers.forEach(s=>{s.onMetricsUpdate(i)})}),n.on("error",i=>{if(this.metricsCall=null,i.code===Z3.Status.UNIMPLEMENTED){this.orcaSupported=!1;return}i.code!==Z3.Status.CANCELLED&&this.backoffTimer.runOnce()})}}},Lb=class extends dV.BaseSubchannelWrapper{constructor(e,r,n){super(e),this.addDataWatcher(new Pb(r,n))}getWrappedSubchannel(){return this.child}};bn.OrcaOobMetricsSubchannelWrapper=Lb;function EV(t){return new Fb(t)}});var Gb=x(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.BaseServerInterceptingCall=Hn.ServerInterceptingCall=Hn.ResponderBuilder=Hn.ServerListenerBuilder=void 0;Hn.isInterceptingServerListener=vV;Hn.getServerInterceptingCall=xV;var O0=br(),fn=nt(),Hl=require("http2"),i4=$d(),s4=require("zlib"),yV=Vv(),c4=Ot(),AV=require("tls"),o4=T0(),f4="server_call";function oa(t){c4.trace(fn.LogVerbosity.DEBUG,f4,t)}var Ub=class{constructor(){this.metadata=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveHalfClose(e){return this.halfClose=e,this}withOnCancel(e){return this.cancel=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveHalfClose:this.halfClose,onCancel:this.cancel}}};Hn.ServerListenerBuilder=Ub;function vV(t){return t.onReceiveMetadata!==void 0&&t.onReceiveMetadata.length===1}var qb=class{constructor(e,r){this.listener=e,this.nextListener=r,this.cancelled=!1,this.processingMetadata=!1,this.hasPendingMessage=!1,this.pendingMessage=null,this.processingMessage=!1,this.hasPendingHalfClose=!1}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingHalfClose(){this.hasPendingHalfClose&&(this.nextListener.onReceiveHalfClose(),this.hasPendingHalfClose=!1)}onReceiveMetadata(e){this.cancelled||(this.processingMetadata=!0,this.listener.onReceiveMetadata(e,r=>{this.processingMetadata=!1,!this.cancelled&&(this.nextListener.onReceiveMetadata(r),this.processPendingMessage(),this.processPendingHalfClose())}))}onReceiveMessage(e){this.cancelled||(this.processingMessage=!0,this.listener.onReceiveMessage(e,r=>{this.processingMessage=!1,!this.cancelled&&(this.processingMetadata?(this.pendingMessage=r,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(r),this.processPendingHalfClose()))}))}onReceiveHalfClose(){this.cancelled||this.listener.onReceiveHalfClose(()=>{this.cancelled||(this.processingMetadata||this.processingMessage?this.hasPendingHalfClose=!0:this.nextListener.onReceiveHalfClose())})}onCancel(){this.cancelled=!0,this.listener.onCancel(),this.nextListener.onCancel()}},Hb=class{constructor(){this.start=void 0,this.metadata=void 0,this.message=void 0,this.status=void 0}withStart(e){return this.start=e,this}withSendMetadata(e){return this.metadata=e,this}withSendMessage(e){return this.message=e,this}withSendStatus(e){return this.status=e,this}build(){return{start:this.start,sendMetadata:this.metadata,sendMessage:this.message,sendStatus:this.status}}};Hn.ResponderBuilder=Hb;var R0={onReceiveMetadata:(t,e)=>{e(t)},onReceiveMessage:(t,e)=>{e(t)},onReceiveHalfClose:t=>{t()},onCancel:()=>{}},k0={start:t=>{t()},sendMetadata:(t,e)=>{e(t)},sendMessage:(t,e)=>{e(t)},sendStatus:(t,e)=>{e(t)}},Wb=class{constructor(e,r){var n,i,s,o;this.nextCall=e,this.processingMetadata=!1,this.sentMetadata=!1,this.processingMessage=!1,this.pendingMessage=null,this.pendingMessageCallback=null,this.pendingStatus=null,this.responder={start:(n=r?.start)!==null&&n!==void 0?n:k0.start,sendMetadata:(i=r?.sendMetadata)!==null&&i!==void 0?i:k0.sendMetadata,sendMessage:(s=r?.sendMessage)!==null&&s!==void 0?s:k0.sendMessage,sendStatus:(o=r?.sendStatus)!==null&&o!==void 0?o:k0.sendStatus}}processPendingMessage(){this.pendingMessageCallback&&(this.nextCall.sendMessage(this.pendingMessage,this.pendingMessageCallback),this.pendingMessage=null,this.pendingMessageCallback=null)}processPendingStatus(){this.pendingStatus&&(this.nextCall.sendStatus(this.pendingStatus),this.pendingStatus=null)}start(e){this.responder.start(r=>{var n,i,s,o;let a={onReceiveMetadata:(n=r?.onReceiveMetadata)!==null&&n!==void 0?n:R0.onReceiveMetadata,onReceiveMessage:(i=r?.onReceiveMessage)!==null&&i!==void 0?i:R0.onReceiveMessage,onReceiveHalfClose:(s=r?.onReceiveHalfClose)!==null&&s!==void 0?s:R0.onReceiveHalfClose,onCancel:(o=r?.onCancel)!==null&&o!==void 0?o:R0.onCancel},l=new qb(a,e);this.nextCall.start(l)})}sendMetadata(e){this.processingMetadata=!0,this.sentMetadata=!0,this.responder.sendMetadata(e,r=>{this.processingMetadata=!1,this.nextCall.sendMetadata(r),this.processPendingMessage(),this.processPendingStatus()})}sendMessage(e,r){this.processingMessage=!0,this.sentMetadata||this.sendMetadata(new O0.Metadata),this.responder.sendMessage(e,n=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=n,this.pendingMessageCallback=r):this.nextCall.sendMessage(n,r)})}sendStatus(e){this.responder.sendStatus(e,r=>{this.processingMetadata||this.processingMessage?this.pendingStatus=r:this.nextCall.sendStatus(r)})}startRead(){this.nextCall.startRead()}getPeer(){return this.nextCall.getPeer()}getDeadline(){return this.nextCall.getDeadline()}getHost(){return this.nextCall.getHost()}getAuthContext(){return this.nextCall.getAuthContext()}getConnectionInfo(){return this.nextCall.getConnectionInfo()}getMetricsRecorder(){return this.nextCall.getMetricsRecorder()}};Hn.ServerInterceptingCall=Wb;var h4="grpc-accept-encoding",Qb="grpc-encoding",a4="grpc-message",l4="grpc-status",Mb="grpc-timeout",bV=/(\d{1,8})\s*([HMSmun])/,SV={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},CV={[h4]:"identity,deflate,gzip",[Qb]:"identity"},u4={[Hl.constants.HTTP2_HEADER_STATUS]:Hl.constants.HTTP_STATUS_OK,[Hl.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},wV={waitForTrailers:!0},N0=class{constructor(e,r,n,i,s){var o,a;this.stream=e,this.callEventTracker=n,this.handler=i,this.listener=null,this.deadlineTimer=null,this.deadline=1/0,this.maxSendMessageSize=fn.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=fn.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.cancelled=!1,this.metadataSent=!1,this.wantTrailers=!1,this.cancelNotified=!1,this.incomingEncoding="identity",this.readQueue=[],this.isReadPending=!1,this.receivedHalfClose=!1,this.streamEnded=!1,this.metricsRecorder=new o4.PerRequestMetricRecorder,this.stream.once("error",h=>{}),this.stream.once("close",()=>{var h;oa("Request to method "+((h=this.handler)===null||h===void 0?void 0:h.path)+" stream closed with rstCode "+this.stream.rstCode),this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!1),this.callEventTracker.onCallEnd({code:fn.Status.CANCELLED,details:"Stream closed before sending status",metadata:null})),this.notifyOnCancel()}),this.stream.on("data",h=>{this.handleDataFrame(h)}),this.stream.pause(),this.stream.on("end",()=>{this.handleEndEvent()}),"grpc.max_send_message_length"in s&&(this.maxSendMessageSize=s["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in s&&(this.maxReceiveMessageSize=s["grpc.max_receive_message_length"]),this.host=(o=r[":authority"])!==null&&o!==void 0?o:r.host,this.decoder=new yV.StreamDecoder(this.maxReceiveMessageSize);let l=O0.Metadata.fromHttp2Headers(r);c4.isTracerEnabled(f4)&&oa("Request to "+this.handler.path+" received headers "+JSON.stringify(l.toJSON()));let u=l.get(Mb);u.length>0&&this.handleTimeoutHeader(u[0]);let c=l.get(Qb);c.length>0&&(this.incomingEncoding=c[0]),l.remove(Mb),l.remove(Qb),l.remove(h4),l.remove(Hl.constants.HTTP2_HEADER_ACCEPT_ENCODING),l.remove(Hl.constants.HTTP2_HEADER_TE),l.remove(Hl.constants.HTTP2_HEADER_CONTENT_TYPE),this.metadata=l;let f=(a=e.session)===null||a===void 0?void 0:a.socket;this.connectionInfo={localAddress:f?.localAddress,localPort:f?.localPort,remoteAddress:f?.remoteAddress,remotePort:f?.remotePort},this.shouldSendMetrics=!!s["grpc.server_call_metric_recording"]}handleTimeoutHeader(e){let r=e.toString().match(bV);if(r===null){let s={code:fn.Status.INTERNAL,details:`Invalid ${Mb} value "${e}"`,metadata:null};process.nextTick(()=>{this.sendStatus(s)});return}let n=+r[1]*SV[r[2]]|0,i=new Date;this.deadline=i.setMilliseconds(i.getMilliseconds()+n),this.deadlineTimer=setTimeout(()=>{let s={code:fn.Status.DEADLINE_EXCEEDED,details:"Deadline exceeded",metadata:null};this.sendStatus(s)},n)}checkCancelled(){return!this.cancelled&&(this.stream.destroyed||this.stream.closed)&&(this.notifyOnCancel(),this.cancelled=!0),this.cancelled}notifyOnCancel(){this.cancelNotified||(this.cancelNotified=!0,this.cancelled=!0,process.nextTick(()=>{var e;(e=this.listener)===null||e===void 0||e.onCancel()}),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.resume())}maybeSendMetadata(){this.metadataSent||this.sendMetadata(new O0.Metadata)}serializeMessage(e){let r=this.handler.serialize(e),n=r.byteLength,i=Buffer.allocUnsafe(n+5);return i.writeUInt8(0,0),i.writeUInt32BE(n,1),r.copy(i,5),i}decompressMessage(e,r){let n=e.subarray(5);if(r==="identity")return n;if(r==="deflate"||r==="gzip"){let i;return r==="deflate"?i=s4.createInflate():i=s4.createGunzip(),new Promise((s,o)=>{let a=0,l=[];i.on("data",u=>{l.push(u),a+=u.byteLength,this.maxReceiveMessageSize!==-1&&a>this.maxReceiveMessageSize&&(i.destroy(),o({code:fn.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),i.on("end",()=>{s(Buffer.concat(l))}),i.write(n),i.end()})}else return Promise.reject({code:fn.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${r}"`})}async decompressAndMaybePush(e){if(e.type!=="COMPRESSED")throw new Error(`Invalid queue entry type: ${e.type}`);let n=e.compressedMessage.readUInt8(0)===1?this.incomingEncoding:"identity",i;try{i=await this.decompressMessage(e.compressedMessage,n)}catch(s){this.sendStatus(s);return}try{e.parsedMessage=this.handler.deserialize(i)}catch(s){this.sendStatus({code:fn.Status.INTERNAL,details:`Error deserializing request: ${s.message}`});return}e.type="READABLE",this.maybePushNextMessage()}maybePushNextMessage(){if(this.listener&&this.isReadPending&&this.readQueue.length>0&&this.readQueue[0].type!=="COMPRESSED"){this.isReadPending=!1;let e=this.readQueue.shift();e.type==="READABLE"?this.listener.onReceiveMessage(e.parsedMessage):this.listener.onReceiveHalfClose()}}handleDataFrame(e){var r;if(this.checkCancelled())return;oa("Request to "+this.handler.path+" received data frame of size "+e.length);let n;try{n=this.decoder.write(e)}catch(i){this.sendStatus({code:fn.Status.RESOURCE_EXHAUSTED,details:i.message});return}for(let i of n){this.stream.pause();let s={type:"COMPRESSED",compressedMessage:i,parsedMessage:null};this.readQueue.push(s),this.decompressAndMaybePush(s),(r=this.callEventTracker)===null||r===void 0||r.addMessageReceived()}}handleEndEvent(){this.readQueue.push({type:"HALF_CLOSE",compressedMessage:null,parsedMessage:null}),this.receivedHalfClose=!0,this.maybePushNextMessage()}start(e){oa("Request to "+this.handler.path+" start called"),!this.checkCancelled()&&(this.listener=e,e.onReceiveMetadata(this.metadata))}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let r=e?e.toHttp2Headers():null,n=Object.assign(Object.assign(Object.assign({},u4),CV),r);this.stream.respond(n,wV)}sendMessage(e,r){if(this.checkCancelled())return;let n;try{n=this.serializeMessage(e)}catch(i){this.sendStatus({code:fn.Status.INTERNAL,details:`Error serializing response: ${(0,i4.getErrorMessage)(i)}`,metadata:null});return}if(this.maxSendMessageSize!==-1&&n.length-5>this.maxSendMessageSize){this.sendStatus({code:fn.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${n.length} vs. ${this.maxSendMessageSize})`,metadata:null});return}this.maybeSendMetadata(),oa("Request to "+this.handler.path+" sent data frame of size "+n.length),this.stream.write(n,i=>{var s;if(i){this.sendStatus({code:fn.Status.INTERNAL,details:`Error writing message: ${(0,i4.getErrorMessage)(i)}`,metadata:null});return}(s=this.callEventTracker)===null||s===void 0||s.addMessageSent(),r()})}sendStatus(e){var r,n,i;if(this.checkCancelled())return;oa("Request to method "+((r=this.handler)===null||r===void 0?void 0:r.path)+" ended with status code: "+fn.Status[e.code]+" details: "+e.details);let s=(i=(n=e.metadata)===null||n===void 0?void 0:n.clone())!==null&&i!==void 0?i:new O0.Metadata;if(this.shouldSendMetrics&&s.set(o4.GRPC_METRICS_HEADER,this.metricsRecorder.serialize()),this.metadataSent)this.wantTrailers?this.notifyOnCancel():(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(e));let o=Object.assign({[l4]:e.code,[a4]:encodeURI(e.details)},s.toHttp2Headers());this.stream.sendTrailers(o),this.notifyOnCancel()}),this.stream.end());else{this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(e));let o=Object.assign(Object.assign({[l4]:e.code,[a4]:encodeURI(e.details)},u4),s.toHttp2Headers());this.stream.respond(o,{endStream:!0}),this.notifyOnCancel()}}startRead(){oa("Request to "+this.handler.path+" startRead called"),!this.checkCancelled()&&(this.isReadPending=!0,this.readQueue.length===0?this.receivedHalfClose||this.stream.resume():this.maybePushNextMessage())}getPeer(){var e;let r=(e=this.stream.session)===null||e===void 0?void 0:e.socket;return r?.remoteAddress?r.remotePort?`${r.remoteAddress}:${r.remotePort}`:r.remoteAddress:"unknown"}getDeadline(){return this.deadline}getHost(){return this.host}getAuthContext(){var e;if(((e=this.stream.session)===null||e===void 0?void 0:e.socket)instanceof AV.TLSSocket){let r=this.stream.session.socket.getPeerCertificate();return{transportSecurityType:"ssl",sslPeerCertificate:r.raw?r:void 0}}else return{}}getConnectionInfo(){return this.connectionInfo}getMetricsRecorder(){return this.metricsRecorder}};Hn.BaseServerInterceptingCall=N0;function xV(t,e,r,n,i,s){let o={path:i.path,requestStream:i.type==="clientStream"||i.type==="bidi",responseStream:i.type==="serverStream"||i.type==="bidi",requestDeserialize:i.deserialize,responseSerialize:i.serialize},a=new N0(e,r,n,i,s);return t.reduce((l,u)=>u(o,l),a)}});var y4=x(co=>{"use strict";var DV=co&&co.__runInitializers||function(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0},IV=co&&co.__esDecorate||function(t,e,r,n,i,s){function o(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,p=r.length-1;p>=0;p--){var g={};for(var m in n)g[m]=m==="access"?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(A){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(A||null))};var E=(0,r[p])(a==="accessor"?{get:c.get,set:c.set}:c[l],g);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(f=o(E.get))&&(c.get=f),(f=o(E.set))&&(c.set=f),(f=o(E.init))&&i.unshift(f)}else(f=o(E))&&(a==="field"?i.unshift(f):c[l]=f)}u&&Object.defineProperty(u,n.name,c),h=!0};Object.defineProperty(co,"__esModule",{value:!0});co.Server=void 0;var hn=require("http2"),TV=require("util"),ir=nt(),Gl=J3(),jb=D0(),d4=Vn(),Ql=Ot(),uo=un(),ui=Kr(),pr=so(),p4=Gb(),Wl=~(1<<31),$b=~(1<<31),RV=2e4,g4=~(1<<31),{HTTP2_HEADER_PATH:m4}=hn.constants,kV="server",_4=Buffer.from("max_age");function E4(t){Ql.trace(ir.LogVerbosity.DEBUG,"server_call",t)}function OV(){}function NV(t){return function(e,r){return TV.deprecate(e,t)}}function Kb(t){return{code:ir.Status.UNIMPLEMENTED,details:`The server does not implement the method ${t}`}}function BV(t,e){let r=Kb(e);switch(t){case"unary":return(n,i)=>{i(r,null)};case"clientStream":return(n,i)=>{i(r,null)};case"serverStream":return n=>{n.emit("error",r)};case"bidi":return n=>{n.emit("error",r)};default:throw new Error(`Invalid handlerType ${t}`)}}var PV=(()=>{var t;let e=[],r;return t=class{constructor(i){var s,o,a,l,u,c;this.boundPorts=(DV(this,e),new Map),this.http2Servers=new Map,this.sessionIdleTimeouts=new Map,this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.options=i??{},this.options["grpc.enable_channelz"]===0?(this.channelzEnabled=!1,this.channelzTrace=new pr.ChannelzTraceStub,this.callTracker=new pr.ChannelzCallTrackerStub,this.listenerChildrenTracker=new pr.ChannelzChildrenTrackerStub,this.sessionChildrenTracker=new pr.ChannelzChildrenTrackerStub):(this.channelzTrace=new pr.ChannelzTrace,this.callTracker=new pr.ChannelzCallTracker,this.listenerChildrenTracker=new pr.ChannelzChildrenTracker,this.sessionChildrenTracker=new pr.ChannelzChildrenTracker),this.channelzRef=(0,pr.registerChannelzServer)("server",()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(s=this.options["grpc.max_connection_age_ms"])!==null&&s!==void 0?s:Wl,this.maxConnectionAgeGraceMs=(o=this.options["grpc.max_connection_age_grace_ms"])!==null&&o!==void 0?o:Wl,this.keepaliveTimeMs=(a=this.options["grpc.keepalive_time_ms"])!==null&&a!==void 0?a:$b,this.keepaliveTimeoutMs=(l=this.options["grpc.keepalive_timeout_ms"])!==null&&l!==void 0?l:RV,this.sessionIdleTimeout=(u=this.options["grpc.max_connection_idle_ms"])!==null&&u!==void 0?u:g4,this.commonServerOptions={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER},"grpc-node.max_session_memory"in this.options?this.commonServerOptions.maxSessionMemory=this.options["grpc-node.max_session_memory"]:this.commonServerOptions.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(this.commonServerOptions.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]}),this.interceptors=(c=this.options.interceptors)!==null&&c!==void 0?c:[],this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfo(i){var s,o,a;let l=this.sessions.get(i),u=i.socket,c=u.remoteAddress?(0,uo.stringToSubchannelAddress)(u.remoteAddress,u.remotePort):null,f=u.localAddress?(0,uo.stringToSubchannelAddress)(u.localAddress,u.localPort):null,h;if(i.encrypted){let g=u,m=g.getCipher(),E=g.getCertificate(),A=g.getPeerCertificate();h={cipherSuiteStandardName:(s=m.standardName)!==null&&s!==void 0?s:null,cipherSuiteOtherName:m.standardName?null:m.name,localCertificate:E&&"raw"in E?E.raw:null,remoteCertificate:A&&"raw"in A?A.raw:null}}else h=null;return{remoteAddress:c,localAddress:f,security:h,remoteName:null,streamsStarted:l.streamTracker.callsStarted,streamsSucceeded:l.streamTracker.callsSucceeded,streamsFailed:l.streamTracker.callsFailed,messagesSent:l.messagesSent,messagesReceived:l.messagesReceived,keepAlivesSent:l.keepAlivesSent,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:l.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:l.lastMessageSentTimestamp,lastMessageReceivedTimestamp:l.lastMessageReceivedTimestamp,localFlowControlWindow:(o=i.state.localWindowSize)!==null&&o!==void 0?o:null,remoteFlowControlWindow:(a=i.state.remoteWindowSize)!==null&&a!==void 0?a:null}}trace(i){Ql.trace(ir.LogVerbosity.DEBUG,kV,"("+this.channelzRef.id+") "+i)}keepaliveTrace(i){Ql.trace(ir.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+i)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(i,s){if(i===null||typeof i!="object"||s===null||typeof s!="object")throw new Error("addService() requires two objects as arguments");let o=Object.keys(i);if(o.length===0)throw new Error("Cannot add an empty service to a server");o.forEach(a=>{let l=i[a],u;l.requestStream?l.responseStream?u="bidi":u="clientStream":l.responseStream?u="serverStream":u="unary";let c=s[a],f;if(c===void 0&&typeof l.originalName=="string"&&(c=s[l.originalName]),c!==void 0?f=c.bind(s):f=BV(u,a),this.register(l.path,f,l.responseSerialize,l.requestDeserialize,u)===!1)throw new Error(`Method handler for ${l.path} already provided.`)})}removeService(i){if(i===null||typeof i!="object")throw new Error("removeService() requires object as argument");Object.keys(i).forEach(o=>{let a=i[o];this.unregister(a.path)})}bind(i,s){throw new Error("Not implemented. Use bindAsync() instead")}experimentalRegisterListenerToChannelz(i){return(0,pr.registerChannelzSocket)((0,uo.subchannelAddressToString)(i),()=>({localAddress:i,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled)}experimentalUnregisterListenerFromChannelz(i){(0,pr.unregisterChannelzRef)(i)}createHttp2Server(i){let s;if(i._isSecure()){let o=i._getConstructorOptions(),a=i._getSecureContextOptions(),l=Object.assign(Object.assign(Object.assign(Object.assign({},this.commonServerOptions),o),a),{enableTrace:this.options["grpc-node.tls_enable_trace"]===1}),u=a!==null;this.trace("Initial credentials valid: "+u),s=hn.createSecureServer(l),s.prependListener("connection",f=>{u||(this.trace("Dropped connection from "+JSON.stringify(f.address())+" due to unloaded credentials"),f.destroy())}),s.on("secureConnection",f=>{f.on("error",h=>{this.trace("An incoming TLS connection closed with error: "+h.message)})});let c=f=>{if(f){let h=s;try{h.setSecureContext(f)}catch(p){Ql.log(ir.LogVerbosity.ERROR,"Failed to set secure context with error "+p.message),f=null}}u=f!==null,this.trace("Post-update credentials valid: "+u)};i._addWatcher(c),s.on("close",()=>{i._removeWatcher(c)})}else s=hn.createServer(this.commonServerOptions);return s.setTimeout(0,OV),this._setupHandlers(s,i._getInterceptors()),s}bindOneAddress(i,s){this.trace("Attempting to bind "+(0,uo.subchannelAddressToString)(i));let o=this.createHttp2Server(s.credentials);return new Promise((a,l)=>{let u=c=>{this.trace("Failed to bind "+(0,uo.subchannelAddressToString)(i)+" with error "+c.message),a({port:"port"in i?i.port:1,error:c.message})};o.once("error",u),o.listen(i,()=>{let c=o.address(),f;typeof c=="string"?f={path:c}:f={host:c.address,port:c.port};let h=this.experimentalRegisterListenerToChannelz(f);this.listenerChildrenTracker.refChild(h),this.http2Servers.set(o,{channelzRef:h,sessions:new Set,ownsChannelzRef:!0}),s.listeningServers.add(o),this.trace("Successfully bound "+(0,uo.subchannelAddressToString)(f)),a({port:"port"in f?f.port:1}),o.removeListener("error",u)})})}async bindManyPorts(i,s){if(i.length===0)return{count:0,port:0,errors:[]};if((0,uo.isTcpSubchannelAddress)(i[0])&&i[0].port===0){let o=await this.bindOneAddress(i[0],s);if(o.error){let a=await this.bindManyPorts(i.slice(1),s);return Object.assign(Object.assign({},a),{errors:[o.error,...a.errors]})}else{let a=i.slice(1).map(c=>(0,uo.isTcpSubchannelAddress)(c)?{host:c.host,port:o.port}:c),l=await Promise.all(a.map(c=>this.bindOneAddress(c,s))),u=[o,...l];return{count:u.filter(c=>c.error===void 0).length,port:o.port,errors:u.filter(c=>c.error).map(c=>c.error)}}}else{let o=await Promise.all(i.map(a=>this.bindOneAddress(a,s)));return{count:o.filter(a=>a.error===void 0).length,port:o[0].port,errors:o.filter(a=>a.error).map(a=>a.error)}}}async bindAddressList(i,s){let o=await this.bindManyPorts(i,s);if(o.count>0)return o.count<i.length&&Ql.log(ir.LogVerbosity.INFO,`WARNING Only ${o.count} addresses added out of total ${i.length} resolved`),o.port;{let a=`No address added out of total ${i.length} resolved`;throw Ql.log(ir.LogVerbosity.ERROR,a),new Error(`${a} errors: [${o.errors.join(",")}]`)}}resolvePort(i){return new Promise((s,o)=>{let a=!1,l=(c,f,h,p)=>{if(a)return!0;if(a=!0,!c.ok)return o(new Error(c.error.details)),!0;let g=[].concat(...c.value.map(m=>m.addresses));return g.length===0?(o(new Error(`No addresses resolved for port ${i}`)),!0):(s(g),!0)};(0,d4.createResolver)(i,l,this.options).updateResolution()})}async bindPort(i,s){let o=await this.resolvePort(i);if(s.cancelled)throw this.completeUnbind(s),new Error("bindAsync operation cancelled by unbind call");let a=await this.bindAddressList(o,s);if(s.cancelled)throw this.completeUnbind(s),new Error("bindAsync operation cancelled by unbind call");return a}normalizePort(i){let s=(0,ui.parseUri)(i);if(s===null)throw new Error(`Could not parse port "${i}"`);let o=(0,d4.mapUriDefaultScheme)(s);if(o===null)throw new Error(`Could not get a default scheme for port "${i}"`);return o}bindAsync(i,s,o){if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof i!="string")throw new TypeError("port must be a string");if(s===null||!(s instanceof jb.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof o!="function")throw new TypeError("callback must be a function");this.trace("bindAsync port="+i);let a=this.normalizePort(i),l=(h,p)=>{process.nextTick(()=>o(h,p))},u=this.boundPorts.get((0,ui.uriToString)(a));if(u){if(!s._equals(u.credentials)){l(new Error(`${i} already bound with incompatible credentials`),0);return}u.cancelled=!1,u.completionPromise?u.completionPromise.then(h=>o(null,h),h=>o(h,0)):l(null,u.portNumber);return}u={mapKey:(0,ui.uriToString)(a),originalUri:a,completionPromise:null,cancelled:!1,portNumber:0,credentials:s,listeningServers:new Set};let c=(0,ui.splitHostPort)(a.path),f=this.bindPort(a,u);u.completionPromise=f,c?.port===0?f.then(h=>{let p={scheme:a.scheme,authority:a.authority,path:(0,ui.combineHostPort)({host:c.host,port:h})};u.mapKey=(0,ui.uriToString)(p),u.completionPromise=null,u.portNumber=h,this.boundPorts.set(u.mapKey,u),o(null,h)},h=>{o(h,0)}):(this.boundPorts.set(u.mapKey,u),f.then(h=>{u.completionPromise=null,u.portNumber=h,o(null,h)},h=>{o(h,0)}))}registerInjectorToChannelz(){return(0,pr.registerChannelzSocket)("injector",()=>({localAddress:null,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled)}experimentalCreateConnectionInjectorWithChannelzRef(i,s,o=!1){if(i===null||!(i instanceof jb.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");this.channelzEnabled&&this.listenerChildrenTracker.refChild(s);let a=this.createHttp2Server(i),l=new Set;return this.http2Servers.set(a,{channelzRef:s,sessions:l,ownsChannelzRef:o}),{injectConnection:u=>{a.emit("connection",u)},drain:u=>{var c,f;for(let h of l)this.closeSession(h);(f=(c=setTimeout(()=>{for(let h of l)h.destroy(hn.constants.NGHTTP2_CANCEL)},u)).unref)===null||f===void 0||f.call(c)},destroy:()=>{this.closeServer(a);for(let u of l)this.closeSession(u)}}}createConnectionInjector(i){if(i===null||!(i instanceof jb.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");let s=this.registerInjectorToChannelz();return this.experimentalCreateConnectionInjectorWithChannelzRef(i,s,!0)}closeServer(i,s){this.trace("Closing server with address "+JSON.stringify(i.address()));let o=this.http2Servers.get(i);i.close(()=>{o&&o.ownsChannelzRef&&(this.listenerChildrenTracker.unrefChild(o.channelzRef),(0,pr.unregisterChannelzRef)(o.channelzRef)),this.http2Servers.delete(i),s?.()})}closeSession(i,s){var o;this.trace("Closing session initiated by "+((o=i.socket)===null||o===void 0?void 0:o.remoteAddress));let a=this.sessions.get(i),l=()=>{a&&(this.sessionChildrenTracker.unrefChild(a.ref),(0,pr.unregisterChannelzRef)(a.ref)),s?.()};i.closed?queueMicrotask(l):i.close(l)}completeUnbind(i){for(let s of i.listeningServers){let o=this.http2Servers.get(s);if(this.closeServer(s,()=>{i.listeningServers.delete(s)}),o)for(let a of o.sessions)this.closeSession(a)}this.boundPorts.delete(i.mapKey)}unbind(i){this.trace("unbind port="+i);let s=this.normalizePort(i),o=(0,ui.splitHostPort)(s.path);if(o?.port===0)throw new Error("Cannot unbind port 0");let a=this.boundPorts.get((0,ui.uriToString)(s));a&&(this.trace("unbinding "+a.mapKey+" originally bound as "+(0,ui.uriToString)(a.originalUri)),a.completionPromise?a.cancelled=!0:this.completeUnbind(a))}drain(i,s){var o,a;this.trace("drain port="+i+" graceTimeMs="+s);let l=this.normalizePort(i),u=(0,ui.splitHostPort)(l.path);if(u?.port===0)throw new Error("Cannot drain port 0");let c=this.boundPorts.get((0,ui.uriToString)(l));if(!c)return;let f=new Set;for(let h of c.listeningServers){let p=this.http2Servers.get(h);if(p)for(let g of p.sessions)f.add(g),this.closeSession(g,()=>{f.delete(g)})}(a=(o=setTimeout(()=>{for(let h of f)h.destroy(hn.constants.NGHTTP2_CANCEL)},s)).unref)===null||a===void 0||a.call(o)}forceShutdown(){for(let i of this.boundPorts.values())i.cancelled=!0;this.boundPorts.clear();for(let i of this.http2Servers.keys())this.closeServer(i);this.sessions.forEach((i,s)=>{this.closeSession(s),s.destroy(hn.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),(0,pr.unregisterChannelzRef)(this.channelzRef),this.shutdown=!0}register(i,s,o,a,l){return this.handlers.has(i)?!1:(this.handlers.set(i,{func:s,serialize:o,deserialize:a,type:l,path:i}),!0)}unregister(i){return this.handlers.delete(i)}start(){if(this.http2Servers.size===0||[...this.http2Servers.keys()].every(i=>!i.listening))throw new Error("server must be bound in order to start");if(this.started===!0)throw new Error("server is already started");this.started=!0}tryShutdown(i){var s;let o=u=>{(0,pr.unregisterChannelzRef)(this.channelzRef),i(u)},a=0;function l(){a--,a===0&&o()}this.shutdown=!0;for(let[u,c]of this.http2Servers.entries()){a++;let f=c.channelzRef.name;this.trace("Waiting for server "+f+" to close"),this.closeServer(u,()=>{this.trace("Server "+f+" finished closing"),l()});for(let h of c.sessions.keys()){a++;let p=(s=h.socket)===null||s===void 0?void 0:s.remoteAddress;this.trace("Waiting for session "+p+" to close"),this.closeSession(h,()=>{this.trace("Session "+p+" finished closing"),l()})}}a===0&&o()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(i,s){let o=s[hn.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof o!="string"||!o.startsWith("application/grpc")?(i.respond({[hn.constants.HTTP2_HEADER_STATUS]:hn.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1):!0}_retrieveHandler(i){E4("Received call to method "+i+" at address "+this.serverAddressString);let s=this.handlers.get(i);return s===void 0?(E4("No handler registered for method "+i+". Sending UNIMPLEMENTED status."),null):s}_respondWithError(i,s,o=null){var a,l;let u=Object.assign({"grpc-status":(a=i.code)!==null&&a!==void 0?a:ir.Status.INTERNAL,"grpc-message":i.details,[hn.constants.HTTP2_HEADER_STATUS]:hn.constants.HTTP_STATUS_OK,[hn.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},(l=i.metadata)===null||l===void 0?void 0:l.toHttp2Headers());s.respond(u,{endStream:!0}),this.callTracker.addCallFailed(),o?.streamTracker.addCallFailed()}_channelzHandler(i,s,o){this.onStreamOpened(s);let a=this.sessions.get(s.session);if(this.callTracker.addCallStarted(),a?.streamTracker.addCallStarted(),!this._verifyContentType(s,o)){this.callTracker.addCallFailed(),a?.streamTracker.addCallFailed();return}let l=o[m4],u=this._retrieveHandler(l);if(!u){this._respondWithError(Kb(l),s,a);return}let c={addMessageSent:()=>{a&&(a.messagesSent+=1,a.lastMessageSentTimestamp=new Date)},addMessageReceived:()=>{a&&(a.messagesReceived+=1,a.lastMessageReceivedTimestamp=new Date)},onCallEnd:h=>{h.code===ir.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()},onStreamEnd:h=>{a&&(h?a.streamTracker.addCallSucceeded():a.streamTracker.addCallFailed())}},f=(0,p4.getServerInterceptingCall)([...i,...this.interceptors],s,o,c,u,this.options);this._runHandlerForCall(f,u)||(this.callTracker.addCallFailed(),a?.streamTracker.addCallFailed(),f.sendStatus({code:ir.Status.INTERNAL,details:`Unknown handler type: ${u.type}`}))}_streamHandler(i,s,o){if(this.onStreamOpened(s),this._verifyContentType(s,o)!==!0)return;let a=o[m4],l=this._retrieveHandler(a);if(!l){this._respondWithError(Kb(a),s,null);return}let u=(0,p4.getServerInterceptingCall)([...i,...this.interceptors],s,o,null,l,this.options);this._runHandlerForCall(u,l)||u.sendStatus({code:ir.Status.INTERNAL,details:`Unknown handler type: ${l.type}`})}_runHandlerForCall(i,s){let{type:o}=s;if(o==="unary")FV(i,s);else if(o==="clientStream")LV(i,s);else if(o==="serverStream")MV(i,s);else if(o==="bidi")UV(i,s);else return!1;return!0}_setupHandlers(i,s){if(i===null)return;let o=i.address(),a="null";o&&(typeof o=="string"?a=o:a=o.address+":"+o.port),this.serverAddressString=a;let l=this.channelzEnabled?this._channelzHandler:this._streamHandler,u=this.channelzEnabled?this._channelzSessionHandler(i):this._sessionHandler(i);i.on("stream",l.bind(this,s)),i.on("session",u)}_sessionHandler(i){return s=>{var o,a;(o=this.http2Servers.get(i))===null||o===void 0||o.sessions.add(s);let l=null,u=null,c=null,f=!1,h=this.enableIdleTimeout(s);if(this.maxConnectionAgeMs!==Wl){let A=this.maxConnectionAgeMs/10,w=Math.random()*A*2-A;l=setTimeout(()=>{var k,S;f=!0,this.trace("Connection dropped by max connection age: "+((k=s.socket)===null||k===void 0?void 0:k.remoteAddress));try{s.goaway(hn.constants.NGHTTP2_NO_ERROR,~(1<<31),_4)}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==Wl&&(u=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs),(S=u.unref)===null||S===void 0||S.call(u))},this.maxConnectionAgeMs+w),(a=l.unref)===null||a===void 0||a.call(l)}let p=()=>{c&&(clearTimeout(c),c=null)},g=()=>!s.destroyed&&this.keepaliveTimeMs<$b&&this.keepaliveTimeMs>0,m,E=()=>{var A;g()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),c=setTimeout(()=>{p(),m()},this.keepaliveTimeMs),(A=c.unref)===null||A===void 0||A.call(c))};m=()=>{var A;if(!g())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let w="";try{s.ping((S,B,F)=>{p(),S?(this.keepaliveTrace("Ping failed with error: "+S.message),f=!0,s.close()):(this.keepaliveTrace("Received ping response"),E())})||(w="Ping returned false")}catch(k){w=(k instanceof Error?k.message:"")||"Unknown error"}if(w){this.keepaliveTrace("Ping send failed: "+w),this.trace("Connection dropped due to ping send error: "+w),f=!0,s.close();return}c=setTimeout(()=>{p(),this.keepaliveTrace("Ping timeout passed without response"),this.trace("Connection dropped by keepalive timeout"),f=!0,s.close()},this.keepaliveTimeoutMs),(A=c.unref)===null||A===void 0||A.call(c)},E(),s.on("close",()=>{var A,w;f||this.trace(`Connection dropped by client ${(A=s.socket)===null||A===void 0?void 0:A.remoteAddress}`),l&&clearTimeout(l),u&&clearTimeout(u),p(),h!==null&&(clearTimeout(h.timeout),this.sessionIdleTimeouts.delete(s)),(w=this.http2Servers.get(i))===null||w===void 0||w.sessions.delete(s)})}}_channelzSessionHandler(i){return s=>{var o,a,l,u;let c=(0,pr.registerChannelzSocket)((a=(o=s.socket)===null||o===void 0?void 0:o.remoteAddress)!==null&&a!==void 0?a:"unknown",this.getChannelzSessionInfo.bind(this,s),this.channelzEnabled),f={ref:c,streamTracker:new pr.ChannelzCallTracker,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};(l=this.http2Servers.get(i))===null||l===void 0||l.sessions.add(s),this.sessions.set(s,f);let h=`${s.socket.remoteAddress}:${s.socket.remotePort}`;this.channelzTrace.addTrace("CT_INFO","Connection established by client "+h),this.trace("Connection established by client "+h),this.sessionChildrenTracker.refChild(c);let p=null,g=null,m=null,E=!1,A=this.enableIdleTimeout(s);if(this.maxConnectionAgeMs!==Wl){let F=this.maxConnectionAgeMs/10,M=Math.random()*F*2-F;p=setTimeout(()=>{var D;E=!0,this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+h);try{s.goaway(hn.constants.NGHTTP2_NO_ERROR,~(1<<31),_4)}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==Wl&&(g=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs),(D=g.unref)===null||D===void 0||D.call(g))},this.maxConnectionAgeMs+M),(u=p.unref)===null||u===void 0||u.call(p)}let w=()=>{m&&(clearTimeout(m),m=null)},k=()=>!s.destroyed&&this.keepaliveTimeMs<$b&&this.keepaliveTimeMs>0,S,B=()=>{var F;k()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),m=setTimeout(()=>{w(),S()},this.keepaliveTimeMs),(F=m.unref)===null||F===void 0||F.call(m))};S=()=>{var F;if(!k())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let M="";try{s.ping((I,N,T)=>{w(),I?(this.keepaliveTrace("Ping failed with error: "+I.message),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to error of a ping frame "+I.message+" return in "+N),E=!0,s.close()):(this.keepaliveTrace("Received ping response"),B())})||(M="Ping returned false")}catch(D){M=(D instanceof Error?D.message:"")||"Unknown error"}if(M){this.keepaliveTrace("Ping send failed: "+M),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to ping send error: "+M),E=!0,s.close();return}f.keepAlivesSent+=1,m=setTimeout(()=>{w(),this.keepaliveTrace("Ping timeout passed without response"),this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+h),E=!0,s.close()},this.keepaliveTimeoutMs),(F=m.unref)===null||F===void 0||F.call(m)},B(),s.on("close",()=>{var F;E||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+h),this.sessionChildrenTracker.unrefChild(c),(0,pr.unregisterChannelzRef)(c),p&&clearTimeout(p),g&&clearTimeout(g),w(),A!==null&&(clearTimeout(A.timeout),this.sessionIdleTimeouts.delete(s)),(F=this.http2Servers.get(i))===null||F===void 0||F.sessions.delete(s),this.sessions.delete(s)})}}enableIdleTimeout(i){var s,o;if(this.sessionIdleTimeout>=g4)return null;let a={activeStreams:0,lastIdle:Date.now(),onClose:this.onStreamClose.bind(this,i),timeout:setTimeout(this.onIdleTimeout,this.sessionIdleTimeout,this,i)};(o=(s=a.timeout).unref)===null||o===void 0||o.call(s),this.sessionIdleTimeouts.set(i,a);let{socket:l}=i;return this.trace("Enable idle timeout for "+l.remoteAddress+":"+l.remotePort),a}onIdleTimeout(i,s){let{socket:o}=s,a=i.sessionIdleTimeouts.get(s);a!==void 0&&a.activeStreams===0&&(Date.now()-a.lastIdle>=i.sessionIdleTimeout?(i.trace("Session idle timeout triggered for "+o?.remoteAddress+":"+o?.remotePort+" last idle at "+a.lastIdle),i.closeSession(s)):a.timeout.refresh())}onStreamOpened(i){let s=i.session,o=this.sessionIdleTimeouts.get(s);o&&(o.activeStreams+=1,i.once("close",o.onClose))}onStreamClose(i){var s,o;let a=this.sessionIdleTimeouts.get(i);a&&(a.activeStreams-=1,a.activeStreams===0&&(a.lastIdle=Date.now(),a.timeout.refresh(),this.trace("Session onStreamClose"+((s=i.socket)===null||s===void 0?void 0:s.remoteAddress)+":"+((o=i.socket)===null||o===void 0?void 0:o.remotePort)+" at "+a.lastIdle)))}},(()=>{let n=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;r=[NV("Calling start() is no longer necessary. It can be safely omitted.")],IV(t,null,r,{kind:"method",name:"start",static:!1,private:!1,access:{has:i=>"start"in i,get:i=>i.start},metadata:n},null,e),n&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})})(),t})();co.Server=PV;async function FV(t,e){let r;function n(o,a,l,u){if(o){t.sendStatus((0,Gl.serverErrorToStatus)(o,l));return}t.sendMessage(a,()=>{t.sendStatus({code:ir.Status.OK,details:"OK",metadata:l??null})})}let i,s=null;t.start({onReceiveMetadata(o){i=o,t.startRead()},onReceiveMessage(o){if(s){t.sendStatus({code:ir.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${e.path}`,metadata:null});return}s=o,t.startRead()},onReceiveHalfClose(){if(!s){t.sendStatus({code:ir.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${e.path}`,metadata:null});return}r=new Gl.ServerWritableStreamImpl(e.path,t,i,s);try{e.func(r,n)}catch(o){t.sendStatus({code:ir.Status.UNKNOWN,details:`Server method handler threw error ${o.message}`,metadata:null})}},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"))}})}function LV(t,e){let r;function n(i,s,o,a){if(i){t.sendStatus((0,Gl.serverErrorToStatus)(i,o));return}t.sendMessage(s,()=>{t.sendStatus({code:ir.Status.OK,details:"OK",metadata:o??null})})}t.start({onReceiveMetadata(i){r=new Gl.ServerDuplexStreamImpl(e.path,t,i);try{e.func(r,n)}catch(s){t.sendStatus({code:ir.Status.UNKNOWN,details:`Server method handler threw error ${s.message}`,metadata:null})}},onReceiveMessage(i){r.push(i)},onReceiveHalfClose(){r.push(null)},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}function MV(t,e){let r,n,i=null;t.start({onReceiveMetadata(s){n=s,t.startRead()},onReceiveMessage(s){if(i){t.sendStatus({code:ir.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${e.path}`,metadata:null});return}i=s,t.startRead()},onReceiveHalfClose(){if(!i){t.sendStatus({code:ir.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${e.path}`,metadata:null});return}r=new Gl.ServerWritableStreamImpl(e.path,t,n,i);try{e.func(r)}catch(s){t.sendStatus({code:ir.Status.UNKNOWN,details:`Server method handler threw error ${s.message}`,metadata:null})}},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}function UV(t,e){let r;t.start({onReceiveMetadata(n){r=new Gl.ServerDuplexStreamImpl(e.path,t,n);try{e.func(r)}catch(i){t.sendStatus({code:ir.Status.UNKNOWN,details:`Server method handler threw error ${i.message}`,metadata:null})}},onReceiveMessage(n){r.push(n)},onReceiveHalfClose(){r.push(null)},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}});var A4=x(B0=>{"use strict";Object.defineProperty(B0,"__esModule",{value:!0});B0.StatusBuilder=void 0;var zb=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return this.code!==null&&(e.code=this.code),this.details!==null&&(e.details=this.details),this.metadata!==null&&(e.metadata=this.metadata),e}};B0.StatusBuilder=zb});var gf=x(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.LeafLoadBalancer=Mi.PickFirstLoadBalancer=Mi.PickFirstLoadBalancingConfig=void 0;Mi.shuffled=C4;Mi.setup=KV;var Yb=zs(),sr=zr(),fo=is(),v4=un(),qV=Ot(),HV=nt(),b4=un(),S4=require("net"),WV=Qo(),QV="pick_first";function hf(t){qV.trace(HV.LogVerbosity.DEBUG,QV,t)}var df="pick_first",GV=250,jl=class t{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return df}toJsonObject(){return{[df]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&typeof e.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new t(e.shuffleAddressList===!0)}};Mi.PickFirstLoadBalancingConfig=jl;var Vb=class{constructor(e){this.subchannel=e}pick(e){return{pickResultType:fo.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function C4(t){let e=t.slice();for(let r=e.length-1;r>1;r--){let n=Math.floor(Math.random()*(r+1)),i=e[r];e[r]=e[n],e[n]=i}return e}function jV(t){if(t.length===0)return[];let e=[],r=[],n=[],i=(0,b4.isTcpSubchannelAddress)(t[0])&&(0,S4.isIPv6)(t[0].host);for(let a of t)(0,b4.isTcpSubchannelAddress)(a)&&(0,S4.isIPv6)(a.host)?r.push(a):n.push(a);let s=i?r:n,o=i?n:r;for(let a=0;a<Math.max(s.length,o.length);a++)a<s.length&&e.push(s[a]),a<o.length&&e.push(o[a]);return e}var w4="grpc-node.internal.pick-first.report_health_status",pf=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=sr.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(r,n,i,s,o)=>{this.onSubchannelStateUpdate(r,n,i,o)},this.pickedSubchannelHealthListener=()=>this.calculateAndReportNewState(),this.stickyTransientFailureMode=!1,this.reportHealthStatus=!1,this.lastError=null,this.latestAddressList=null,this.latestOptions={},this.latestResolutionNote="",this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}resetChildrenReportedTF(){this.children.every(e=>e.hasReportedTransientFailure=!1)}calculateAndReportNewState(){var e;if(this.currentPick)if(this.reportHealthStatus&&!this.currentPick.isHealthy()){let r=`Picked subchannel ${this.currentPick.getAddress()} is unhealthy`;this.updateState(sr.ConnectivityState.TRANSIENT_FAILURE,new fo.UnavailablePicker({details:r}),r)}else this.updateState(sr.ConnectivityState.READY,new Vb(this.currentPick),null);else if(((e=this.latestAddressList)===null||e===void 0?void 0:e.length)===0){let r=`No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;this.updateState(sr.ConnectivityState.TRANSIENT_FAILURE,new fo.UnavailablePicker({details:r}),r)}else if(this.children.length===0)this.updateState(sr.ConnectivityState.IDLE,new fo.QueuePicker(this),null);else if(this.stickyTransientFailureMode){let r=`No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;this.updateState(sr.ConnectivityState.TRANSIENT_FAILURE,new fo.UnavailablePicker({details:r}),r)}else this.updateState(sr.ConnectivityState.CONNECTING,new fo.QueuePicker(this),null)}requestReresolution(){this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()){if(this.requestReresolution(),this.resetChildrenReportedTF(),this.stickyTransientFailureMode){this.calculateAndReportNewState();return}this.stickyTransientFailureMode=!0;for(let{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){this.currentPick!==null&&(this.currentPick.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick.unref(),this.currentPick=null)}onSubchannelStateUpdate(e,r,n,i){var s;if(!((s=this.currentPick)===null||s===void 0)&&s.realSubchannelEquals(e)){n!==sr.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState());return}for(let[o,a]of this.children.entries())if(e.realSubchannelEquals(a.subchannel)){n===sr.ConnectivityState.READY&&this.pickSubchannel(a.subchannel),n===sr.ConnectivityState.TRANSIENT_FAILURE&&(a.hasReportedTransientFailure=!0,i&&(this.lastError=i),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),a.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){clearTimeout(this.connectionDelayTimeout);for(let[r,n]of this.children.entries())if(r>=e){let i=n.subchannel.getConnectivityState();if(i===sr.ConnectivityState.IDLE||i===sr.ConnectivityState.CONNECTING){this.startConnecting(r);return}}this.maybeEnterStickyTransientFailureMode()}startConnecting(e){var r,n;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===sr.ConnectivityState.IDLE&&(hf("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var i;(i=this.children[e])===null||i===void 0||i.subchannel.startConnecting()})),this.connectionDelayTimeout=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},GV),(n=(r=this.connectionDelayTimeout).unref)===null||n===void 0||n.call(r)}pickSubchannel(e){hf("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.removeCurrentPick(),this.resetSubchannelList(),e.addConnectivityStateListener(this.subchannelStateListener),e.addHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick=e,clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState()}updateState(e,r,n){hf(sr.ConnectivityState[this.currentState]+" -> "+sr.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,r,n)}resetSubchannelList(){for(let e of this.children)e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[]}connectToAddressList(e,r){hf("connectToAddressList(["+e.map(i=>(0,v4.subchannelAddressToString)(i))+"])");let n=e.map(i=>({subchannel:this.channelControlHelper.createSubchannel(i,r),hasReportedTransientFailure:!1}));for(let{subchannel:i}of n)if(i.getConnectivityState()===sr.ConnectivityState.READY){this.pickSubchannel(i);return}for(let{subchannel:i}of n)i.ref(),this.channelControlHelper.addChannelzChild(i.getChannelzRef());this.resetSubchannelList(),this.children=n;for(let{subchannel:i}of this.children)i.addConnectivityStateListener(this.subchannelStateListener);for(let i of this.children)i.subchannel.getConnectivityState()===sr.ConnectivityState.TRANSIENT_FAILURE&&(i.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,r,n,i){if(!(r instanceof jl))return!1;if(!e.ok)return this.children.length===0&&this.currentPick===null&&this.channelControlHelper.updateState(sr.ConnectivityState.TRANSIENT_FAILURE,new fo.UnavailablePicker(e.error),e.error.details),!0;let s=e.value;this.reportHealthStatus=n[w4],r.getShuffleAddressList()&&(s=C4(s));let o=[].concat(...s.map(l=>l.addresses));hf("updateAddressList(["+o.map(l=>(0,v4.subchannelAddressToString)(l))+"])");let a=jV(o);return this.latestAddressList=a,this.latestOptions=n,this.connectToAddressList(a,n),this.latestResolutionNote=i,o.length>0?!0:(this.lastError="No addresses resolved",!1)}exitIdle(){this.currentState===sr.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList,this.latestOptions)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return df}};Mi.PickFirstLoadBalancer=pf;var $V=new jl(!1),Xb=class{constructor(e,r,n,i){this.endpoint=e,this.options=n,this.resolutionNote=i,this.latestState=sr.ConnectivityState.IDLE;let s=(0,Yb.createChildChannelControlHelper)(r,{updateState:(o,a,l)=>{this.latestState=o,this.latestPicker=a,r.updateState(o,a,l)}});this.pickFirstBalancer=new pf(s),this.latestPicker=new fo.QueuePicker(this.pickFirstBalancer)}startConnecting(){this.pickFirstBalancer.updateAddressList((0,WV.statusOrFromValue)([this.endpoint]),$V,Object.assign(Object.assign({},this.options),{[w4]:!0}),this.resolutionNote)}updateEndpoint(e,r){this.options=r,this.endpoint=e,this.latestState!==sr.ConnectivityState.IDLE&&this.startConnecting()}getConnectivityState(){return this.latestState}getPicker(){return this.latestPicker}getEndpoint(){return this.endpoint}exitIdle(){this.pickFirstBalancer.exitIdle()}destroy(){this.pickFirstBalancer.destroy()}};Mi.LeafLoadBalancer=Xb;function KV(){(0,Yb.registerLoadBalancerType)(df,pf,jl),(0,Yb.registerDefaultLoadBalancerType)(df)}});var x4=x(F0=>{"use strict";Object.defineProperty(F0,"__esModule",{value:!0});F0.FileWatcherCertificateProvider=void 0;var zV=require("fs"),YV=Ot(),VV=nt(),XV=require("util"),JV="certificate_provider";function P0(t){YV.trace(VV.LogVerbosity.DEBUG,JV,t)}var Jb=(0,XV.promisify)(zV.readFile),Zb=class{constructor(e){if(this.config=e,this.refreshTimer=null,this.fileResultPromise=null,this.latestCaUpdate=void 0,this.caListeners=new Set,this.latestIdentityUpdate=void 0,this.identityListeners=new Set,this.lastUpdateTime=null,e.certificateFile===void 0!=(e.privateKeyFile===void 0))throw new Error("certificateFile and privateKeyFile must be set or unset together");if(e.certificateFile===void 0&&e.caCertificateFile===void 0)throw new Error("At least one of certificateFile and caCertificateFile must be set");P0("File watcher constructed with config "+JSON.stringify(e))}updateCertificates(){this.fileResultPromise||(this.fileResultPromise=Promise.allSettled([this.config.certificateFile?Jb(this.config.certificateFile):Promise.reject(),this.config.privateKeyFile?Jb(this.config.privateKeyFile):Promise.reject(),this.config.caCertificateFile?Jb(this.config.caCertificateFile):Promise.reject()]),this.fileResultPromise.then(([e,r,n])=>{if(this.refreshTimer){P0("File watcher read certificates certificate "+e.status+", privateKey "+r.status+", CA certificate "+n.status),this.lastUpdateTime=new Date,this.fileResultPromise=null,e.status==="fulfilled"&&r.status==="fulfilled"?this.latestIdentityUpdate={certificate:e.value,privateKey:r.value}:this.latestIdentityUpdate=null,n.status==="fulfilled"?this.latestCaUpdate={caCertificate:n.value}:this.latestCaUpdate=null;for(let i of this.identityListeners)i(this.latestIdentityUpdate);for(let i of this.caListeners)i(this.latestCaUpdate)}}),P0("File watcher initiated certificate update"))}maybeStartWatchingFiles(){if(!this.refreshTimer){let e=this.lastUpdateTime?new Date().getTime()-this.lastUpdateTime.getTime():1/0;e>this.config.refreshIntervalMs&&this.updateCertificates(),e>this.config.refreshIntervalMs*2&&(this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0),this.refreshTimer=setInterval(()=>this.updateCertificates(),this.config.refreshIntervalMs),P0("File watcher started watching")}}maybeStopWatchingFiles(){this.caListeners.size===0&&this.identityListeners.size===0&&(this.fileResultPromise=null,this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null))}addCaCertificateListener(e){this.caListeners.add(e),this.maybeStartWatchingFiles(),this.latestCaUpdate!==void 0&&process.nextTick(e,this.latestCaUpdate)}removeCaCertificateListener(e){this.caListeners.delete(e),this.maybeStopWatchingFiles()}addIdentityCertificateListener(e){this.identityListeners.add(e),this.maybeStartWatchingFiles(),this.latestIdentityUpdate!==void 0&&process.nextTick(e,this.latestIdentityUpdate)}removeIdentityCertificateListener(e){this.identityListeners.delete(e),this.maybeStopWatchingFiles()}};F0.FileWatcherCertificateProvider=Zb});var r1=x(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=_e.createCertificateProviderChannelCredentials=_e.FileWatcherCertificateProvider=_e.createCertificateProviderServerCredentials=_e.createServerCredentialsWithInterceptors=_e.BaseSubchannelWrapper=_e.registerAdminService=_e.FilterStackFactory=_e.BaseFilter=_e.statusOrFromError=_e.statusOrFromValue=_e.PickResultType=_e.QueuePicker=_e.UnavailablePicker=_e.ChildLoadBalancerHandler=_e.EndpointMap=_e.endpointHasAddress=_e.endpointToString=_e.subchannelAddressToString=_e.LeafLoadBalancer=_e.isLoadBalancerNameRegistered=_e.parseLoadBalancingConfig=_e.selectLbConfigFromList=_e.registerLoadBalancerType=_e.createChildChannelControlHelper=_e.BackoffTimeout=_e.parseDuration=_e.durationToMs=_e.splitHostPort=_e.uriToString=_e.CHANNEL_ARGS_CONFIG_SELECTOR_KEY=_e.createResolver=_e.registerResolver=_e.log=_e.trace=void 0;var D4=Ot();Object.defineProperty(_e,"trace",{enumerable:!0,get:function(){return D4.trace}});Object.defineProperty(_e,"log",{enumerable:!0,get:function(){return D4.log}});var e1=Vn();Object.defineProperty(_e,"registerResolver",{enumerable:!0,get:function(){return e1.registerResolver}});Object.defineProperty(_e,"createResolver",{enumerable:!0,get:function(){return e1.createResolver}});Object.defineProperty(_e,"CHANNEL_ARGS_CONFIG_SELECTOR_KEY",{enumerable:!0,get:function(){return e1.CHANNEL_ARGS_CONFIG_SELECTOR_KEY}});var I4=Kr();Object.defineProperty(_e,"uriToString",{enumerable:!0,get:function(){return I4.uriToString}});Object.defineProperty(_e,"splitHostPort",{enumerable:!0,get:function(){return I4.splitHostPort}});var T4=ff();Object.defineProperty(_e,"durationToMs",{enumerable:!0,get:function(){return T4.durationToMs}});Object.defineProperty(_e,"parseDuration",{enumerable:!0,get:function(){return T4.parseDuration}});var ZV=_l();Object.defineProperty(_e,"BackoffTimeout",{enumerable:!0,get:function(){return ZV.BackoffTimeout}});var mf=zs();Object.defineProperty(_e,"createChildChannelControlHelper",{enumerable:!0,get:function(){return mf.createChildChannelControlHelper}});Object.defineProperty(_e,"registerLoadBalancerType",{enumerable:!0,get:function(){return mf.registerLoadBalancerType}});Object.defineProperty(_e,"selectLbConfigFromList",{enumerable:!0,get:function(){return mf.selectLbConfigFromList}});Object.defineProperty(_e,"parseLoadBalancingConfig",{enumerable:!0,get:function(){return mf.parseLoadBalancingConfig}});Object.defineProperty(_e,"isLoadBalancerNameRegistered",{enumerable:!0,get:function(){return mf.isLoadBalancerNameRegistered}});var eX=gf();Object.defineProperty(_e,"LeafLoadBalancer",{enumerable:!0,get:function(){return eX.LeafLoadBalancer}});var L0=un();Object.defineProperty(_e,"subchannelAddressToString",{enumerable:!0,get:function(){return L0.subchannelAddressToString}});Object.defineProperty(_e,"endpointToString",{enumerable:!0,get:function(){return L0.endpointToString}});Object.defineProperty(_e,"endpointHasAddress",{enumerable:!0,get:function(){return L0.endpointHasAddress}});Object.defineProperty(_e,"EndpointMap",{enumerable:!0,get:function(){return L0.EndpointMap}});var tX=ap();Object.defineProperty(_e,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return tX.ChildLoadBalancerHandler}});var t1=is();Object.defineProperty(_e,"UnavailablePicker",{enumerable:!0,get:function(){return t1.UnavailablePicker}});Object.defineProperty(_e,"QueuePicker",{enumerable:!0,get:function(){return t1.QueuePicker}});Object.defineProperty(_e,"PickResultType",{enumerable:!0,get:function(){return t1.PickResultType}});var R4=Qo();Object.defineProperty(_e,"statusOrFromValue",{enumerable:!0,get:function(){return R4.statusOrFromValue}});Object.defineProperty(_e,"statusOrFromError",{enumerable:!0,get:function(){return R4.statusOrFromError}});var rX=Rv();Object.defineProperty(_e,"BaseFilter",{enumerable:!0,get:function(){return rX.BaseFilter}});var nX=o0();Object.defineProperty(_e,"FilterStackFactory",{enumerable:!0,get:function(){return nX.FilterStackFactory}});var iX=hp();Object.defineProperty(_e,"registerAdminService",{enumerable:!0,get:function(){return iX.registerAdminService}});var sX=uf();Object.defineProperty(_e,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return sX.BaseSubchannelWrapper}});var k4=D0();Object.defineProperty(_e,"createServerCredentialsWithInterceptors",{enumerable:!0,get:function(){return k4.createServerCredentialsWithInterceptors}});Object.defineProperty(_e,"createCertificateProviderServerCredentials",{enumerable:!0,get:function(){return k4.createCertificateProviderServerCredentials}});var oX=x4();Object.defineProperty(_e,"FileWatcherCertificateProvider",{enumerable:!0,get:function(){return oX.FileWatcherCertificateProvider}});var aX=ml();Object.defineProperty(_e,"createCertificateProviderChannelCredentials",{enumerable:!0,get:function(){return aX.createCertificateProviderChannelCredentials}});var lX=Eb();Object.defineProperty(_e,"SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX",{enumerable:!0,get:function(){return lX.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX}})});var O4=x(i1=>{"use strict";Object.defineProperty(i1,"__esModule",{value:!0});i1.setup=fX;var uX=Vn(),cX=Qo(),n1=class{constructor(e,r,n){this.listener=r,this.hasReturnedResult=!1,this.endpoints=[];let i;e.authority===""?i="/"+e.path:i=e.path,this.endpoints=[{addresses:[{path:i}]}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener,(0,cX.statusOrFromValue)(this.endpoints),{},null,""))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return"localhost"}};function fX(){(0,uX.registerResolver)("unix",n1)}});var M4=x(l1=>{"use strict";Object.defineProperty(l1,"__esModule",{value:!0});l1.setup=mX;var N4=require("net"),B4=Qo(),M0=nt(),s1=br(),P4=Vn(),hX=un(),F4=Kr(),dX=Ot(),pX="ip_resolver";function L4(t){dX.trace(M0.LogVerbosity.DEBUG,pX,t)}var o1="ipv4",a1="ipv6",gX=443,U0=class{constructor(e,r,n){var i;this.listener=r,this.endpoints=[],this.error=null,this.hasReturnedResult=!1,L4("Resolver constructed for target "+(0,F4.uriToString)(e));let s=[];if(!(e.scheme===o1||e.scheme===a1)){this.error={code:M0.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s1.Metadata};return}let o=e.path.split(",");for(let a of o){let l=(0,F4.splitHostPort)(a);if(l===null){this.error={code:M0.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new s1.Metadata};return}if(e.scheme===o1&&!(0,N4.isIPv4)(l.host)||e.scheme===a1&&!(0,N4.isIPv6)(l.host)){this.error={code:M0.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new s1.Metadata};return}s.push({host:l.host,port:(i=l.port)!==null&&i!==void 0?i:gX})}this.endpoints=s.map(a=>({addresses:[a]})),L4("Parsed "+e.scheme+" address list "+s.map(hX.subchannelAddressToString))}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener((0,B4.statusOrFromError)(this.error),{},null,""):this.listener((0,B4.statusOrFromValue)(this.endpoints),{},null,"")}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}};function mX(){(0,P4.registerResolver)(o1,U0),(0,P4.registerResolver)(a1,U0)}});var W4=x(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.RoundRobinLoadBalancer=void 0;Ef.setup=bX;var H4=zs(),kr=zr(),_f=is(),_X=Ot(),EX=nt(),U4=un(),yX=gf(),AX="round_robin";function q4(t){_X.trace(EX.LogVerbosity.DEBUG,AX,t)}var q0="round_robin",H0=class t{getLoadBalancerName(){return q0}constructor(){}toJsonObject(){return{[q0]:{}}}static createFromJson(e){return new t}},u1=class{constructor(e,r=0){this.children=e,this.nextIndex=r}pick(e){let r=this.children[this.nextIndex].picker;return this.nextIndex=(this.nextIndex+1)%this.children.length,r.pick(e)}peekNextEndpoint(){return this.children[this.nextIndex].endpoint}};function vX(t,e){return[...t.slice(e),...t.slice(0,e)]}var W0=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=kr.ConnectivityState.IDLE,this.currentReadyPicker=null,this.updatesPaused=!1,this.lastError=null,this.childChannelControlHelper=(0,H4.createChildChannelControlHelper)(e,{updateState:(r,n,i)=>{this.currentState===kr.ConnectivityState.READY&&r!==kr.ConnectivityState.READY&&this.channelControlHelper.requestReresolution(),i&&(this.lastError=i),this.calculateAndUpdateState()}})}countChildrenWithState(e){return this.children.filter(r=>r.getConnectivityState()===e).length}calculateAndUpdateState(){if(!this.updatesPaused){if(this.countChildrenWithState(kr.ConnectivityState.READY)>0){let e=this.children.filter(n=>n.getConnectivityState()===kr.ConnectivityState.READY),r=0;if(this.currentReadyPicker!==null){let n=this.currentReadyPicker.peekNextEndpoint();r=e.findIndex(i=>(0,U4.endpointEqual)(i.getEndpoint(),n)),r<0&&(r=0)}this.updateState(kr.ConnectivityState.READY,new u1(e.map(n=>({endpoint:n.getEndpoint(),picker:n.getPicker()})),r),null)}else if(this.countChildrenWithState(kr.ConnectivityState.CONNECTING)>0)this.updateState(kr.ConnectivityState.CONNECTING,new _f.QueuePicker(this),null);else if(this.countChildrenWithState(kr.ConnectivityState.TRANSIENT_FAILURE)>0){let e=`round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(kr.ConnectivityState.TRANSIENT_FAILURE,new _f.UnavailablePicker({details:e}),e)}else this.updateState(kr.ConnectivityState.IDLE,new _f.QueuePicker(this),null);for(let e of this.children)e.getConnectivityState()===kr.ConnectivityState.IDLE&&e.exitIdle()}}updateState(e,r,n){q4(kr.ConnectivityState[this.currentState]+" -> "+kr.ConnectivityState[e]),e===kr.ConnectivityState.READY?this.currentReadyPicker=r:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,r,n)}resetSubchannelList(){for(let e of this.children)e.destroy();this.children=[]}updateAddressList(e,r,n,i){if(!(r instanceof H0))return!1;if(!e.ok)return this.children.length===0&&this.updateState(kr.ConnectivityState.TRANSIENT_FAILURE,new _f.UnavailablePicker(e.error),e.error.details),!0;let s=Math.random()*e.value.length|0,o=vX(e.value,s);if(this.resetSubchannelList(),o.length===0){let a=`No addresses resolved. Resolution note: ${i}`;this.updateState(kr.ConnectivityState.TRANSIENT_FAILURE,new _f.UnavailablePicker({details:a}),a)}q4("Connect to endpoint list "+o.map(U4.endpointToString)),this.updatesPaused=!0,this.children=o.map(a=>new yX.LeafLoadBalancer(a,this.childChannelControlHelper,n,i));for(let a of this.children)a.startConnecting();return this.updatesPaused=!1,this.calculateAndUpdateState(),!0}exitIdle(){}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return q0}};Ef.RoundRobinLoadBalancer=W0;function bX(){(0,H4.registerLoadBalancerType)(q0,W0,H0)}});var j4=x(la=>{"use strict";var c1;Object.defineProperty(la,"__esModule",{value:!0});la.OutlierDetectionLoadBalancer=la.OutlierDetectionLoadBalancingConfig=void 0;la.setup=NX;var SX=zr(),Q4=nt(),aa=ff(),G4=r1(),CX=zs(),wX=ap(),xX=is(),f1=un(),DX=uf(),IX=Ot(),TX="outlier_detection";function xr(t){IX.trace(Q4.LogVerbosity.DEBUG,TX,t)}var _1="outlier_detection",RX=((c1=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&c1!==void 0?c1:"true")==="true",kX={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},OX={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function $l(t,e,r,n){if(e in t&&t[e]!==void 0&&typeof t[e]!==r){let i=n?`${n}.${e}`:e;throw new Error(`outlier detection config ${i} parse error: expected ${r}, got ${typeof t[e]}`)}}function h1(t,e,r){let n=r?`${r}.${e}`:e;if(e in t&&t[e]!==void 0){if(!(0,aa.isDuration)(t[e]))throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof t[e]}`);if(!(t[e].seconds>=0&&t[e].seconds<=315576e6&&t[e].nanos>=0&&t[e].nanos<=999999999))throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function Q0(t,e,r){let n=r?`${r}.${e}`:e;if($l(t,e,"number",r),e in t&&t[e]!==void 0&&!(t[e]>=0&&t[e]<=100))throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}var yf=class t{constructor(e,r,n,i,s,o,a){if(this.childPolicy=a,a.getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=e??1e4,this.baseEjectionTimeMs=r??3e4,this.maxEjectionTimeMs=n??3e5,this.maxEjectionPercent=i??10,this.successRateEjection=s?Object.assign(Object.assign({},kX),s):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},OX),o):null}getLoadBalancerName(){return _1}toJsonObject(){var e,r;return{outlier_detection:{interval:(0,aa.msToDuration)(this.intervalMs),base_ejection_time:(0,aa.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,aa.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:(e=this.successRateEjection)!==null&&e!==void 0?e:void 0,failure_percentage_ejection:(r=this.failurePercentageEjection)!==null&&r!==void 0?r:void 0,child_policy:[this.childPolicy.toJsonObject()]}}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}static createFromJson(e){var r;if(h1(e,"interval"),h1(e,"base_ejection_time"),h1(e,"max_ejection_time"),Q0(e,"max_ejection_percent"),"success_rate_ejection"in e&&e.success_rate_ejection!==void 0){if(typeof e.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");$l(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),Q0(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),$l(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),$l(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e&&e.failure_percentage_ejection!==void 0){if(typeof e.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");Q0(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),Q0(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),$l(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),$l(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}if(!("child_policy"in e)||!Array.isArray(e.child_policy))throw new Error("outlier detection config child_policy must be an array");let n=(0,CX.selectLbConfigFromList)(e.child_policy);if(!n)throw new Error("outlier detection config child_policy: no valid recognized policy found");return new t(e.interval?(0,aa.durationToMs)(e.interval):null,e.base_ejection_time?(0,aa.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,aa.durationToMs)(e.max_ejection_time):null,(r=e.max_ejection_percent)!==null&&r!==void 0?r:null,e.success_rate_ejection,e.failure_percentage_ejection,n)}};la.OutlierDetectionLoadBalancingConfig=yf;var p1=class extends DX.BaseSubchannelWrapper{constructor(e,r){super(e),this.mapEntry=r,this.refCount=0}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.setHealthy(!1)}uneject(){this.setHealthy(!0)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function d1(){return{success:0,failure:0}}var g1=class{constructor(){this.activeBucket=d1(),this.inactiveBucket=d1()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=d1()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},m1=class{constructor(e,r){this.wrappedPicker=e,this.countCalls=r}pick(e){let r=this.wrappedPicker.pick(e);if(r.pickResultType===xX.PickResultType.COMPLETE){let n=r.subchannel,i=n.getMapEntry();if(i){let s=r.onCallEnded;return this.countCalls&&(s=(o,a,l)=>{var u;o===Q4.Status.OK?i.counter.addSuccess():i.counter.addFailure(),(u=r.onCallEnded)===null||u===void 0||u.call(r,o,a,l)}),Object.assign(Object.assign({},r),{subchannel:n.getWrappedSubchannel(),onCallEnded:s})}else return Object.assign(Object.assign({},r),{subchannel:n.getWrappedSubchannel()})}else return r}},G0=class{constructor(e){this.entryMap=new f1.EndpointMap,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new wX.ChildLoadBalancerHandler((0,G4.createChildChannelControlHelper)(e,{createSubchannel:(r,n)=>{let i=e.createSubchannel(r,n),s=this.entryMap.getForSubchannelAddress(r),o=new p1(i,s);return s?.currentEjectionTimestamp!==null&&o.eject(),s?.subchannelWrappers.push(o),o},updateState:(r,n,i)=>{r===SX.ConnectivityState.READY?e.updateState(r,new m1(n,this.isCountingEnabled()),i):e.updateState(r,n,i)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(let r of this.entryMap.values())r.currentEjectionTimestamp!==null&&(e+=1);return e*100/this.entryMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let r=this.latestConfig.getSuccessRateEjectionConfig();if(!r)return;xr("Running success rate check");let n=r.request_volume,i=0,s=[];for(let[f,h]of this.entryMap.entries()){let p=h.counter.getLastSuccesses(),g=h.counter.getLastFailures();xr("Stats for "+(0,f1.endpointToString)(f)+": successes="+p+" failures="+g+" targetRequestVolume="+n),p+g>=n&&(i+=1,s.push(p/(p+g)))}if(xr("Found "+i+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),i<r.minimum_hosts)return;let o=s.reduce((f,h)=>f+h)/s.length,a=0;for(let f of s){let h=f-o;a+=h*h}let l=a/s.length,u=Math.sqrt(l),c=o-u*(r.stdev_factor/1e3);xr("stdev="+u+" ejectionThreshold="+c);for(let[f,h]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let p=h.counter.getLastSuccesses(),g=h.counter.getLastFailures();if(p+g<n)continue;let m=p/(p+g);if(xr("Checking candidate "+f+" successRate="+m),m<c){let E=Math.random()*100;xr("Candidate "+f+" randomNumber="+E+" enforcement_percentage="+r.enforcement_percentage),E<r.enforcement_percentage&&(xr("Ejecting candidate "+f),this.eject(h,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let r=this.latestConfig.getFailurePercentageEjectionConfig();if(!r)return;xr("Running failure percentage check. threshold="+r.threshold+" request volume threshold="+r.request_volume);let n=0;for(let i of this.entryMap.values()){let s=i.counter.getLastSuccesses(),o=i.counter.getLastFailures();s+o>=r.request_volume&&(n+=1)}if(!(n<r.minimum_hosts))for(let[i,s]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(xr("Candidate successes="+o+" failures="+a),o+a<r.request_volume)continue;if(a*100/(a+o)>r.threshold){let u=Math.random()*100;xr("Candidate "+i+" randomNumber="+u+" enforcement_percentage="+r.enforcement_percentage),u<r.enforcement_percentage&&(xr("Ejecting candidate "+i),this.eject(s,e))}}}eject(e,r){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(let n of e.subchannelWrappers)n.eject()}uneject(e){e.currentEjectionTimestamp=null;for(let r of e.subchannelWrappers)r.uneject()}switchAllBuckets(){for(let e of this.entryMap.values())e.counter.switchBuckets()}startTimer(e){var r,n;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),(n=(r=this.ejectionTimer).unref)===null||n===void 0||n.call(r)}runChecks(){let e=new Date;if(xr("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(let[r,n]of this.entryMap.entries())if(n.currentEjectionTimestamp===null)n.ejectionTimeMultiplier>0&&(n.ejectionTimeMultiplier-=1);else{let i=this.latestConfig.getBaseEjectionTimeMs(),s=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(n.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(i*n.ejectionTimeMultiplier,Math.max(i,s))),o<new Date&&(xr("Unejecting "+r),this.uneject(n))}}}updateAddressList(e,r,n,i){if(!(r instanceof yf))return!1;if(xr("Received update with config: "+JSON.stringify(r.toJsonObject(),void 0,2)),e.ok){for(let o of e.value)this.entryMap.has(o)||(xr("Adding map entry for "+(0,f1.endpointToString)(o)),this.entryMap.set(o,{counter:new g1,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));this.entryMap.deleteMissing(e.value)}let s=r.getChildPolicy();if(this.childBalancer.updateAddressList(e,s,n,i),r.getSuccessRateEjectionConfig()||r.getFailurePercentageEjectionConfig())if(this.timerStartTime){xr("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let o=r.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(o)}else xr("Starting new timer"),this.timerStartTime=new Date,this.startTimer(r.getIntervalMs()),this.switchAllBuckets();else{xr("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let o of this.entryMap.values())this.uneject(o),o.ejectionTimeMultiplier=0}return this.latestConfig=r,!0}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return _1}};la.OutlierDetectionLoadBalancer=G0;function NX(){RX&&(0,G4.registerLoadBalancerType)(_1,G0,yf)}});var $4=x($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});$0.PriorityQueue=void 0;var Kl=0,E1=t=>Math.floor(t/2),j0=t=>t*2+1,Af=t=>t*2+2,y1=class{constructor(e=(r,n)=>r>n){this.comparator=e,this.heap=[]}size(){return this.heap.length}isEmpty(){return this.size()==0}peek(){return this.heap[Kl]}push(...e){return e.forEach(r=>{this.heap.push(r),this.siftUp()}),this.size()}pop(){let e=this.peek(),r=this.size()-1;return r>Kl&&this.swap(Kl,r),this.heap.pop(),this.siftDown(),e}replace(e){let r=this.peek();return this.heap[Kl]=e,this.siftDown(),r}greater(e,r){return this.comparator(this.heap[e],this.heap[r])}swap(e,r){[this.heap[e],this.heap[r]]=[this.heap[r],this.heap[e]]}siftUp(){let e=this.size()-1;for(;e>Kl&&this.greater(e,E1(e));)this.swap(e,E1(e)),e=E1(e)}siftDown(){let e=Kl;for(;j0(e)<this.size()&&this.greater(j0(e),e)||Af(e)<this.size()&&this.greater(Af(e),e);){let r=Af(e)<this.size()&&this.greater(Af(e),j0(e))?Af(e):j0(e);this.swap(e,r),e=r}}};$0.PriorityQueue=y1});var X4=x(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.WeightedRoundRobinLoadBalancingConfig=void 0;bf.setup=GX;var Dr=zr(),BX=nt(),Sn=ff(),Y4=zs(),PX=gf(),FX=Ot(),V4=T0(),zl=is(),LX=$4(),K4=un(),MX="weighted_round_robin";function A1(t){FX.trace(BX.LogVerbosity.DEBUG,MX,t)}var S1="weighted_round_robin",UX=1e4,qX=1e4,HX=3*6e4,WX=1e3,QX=1;function z4(t,e,r){if(e in t&&t[e]!==void 0&&typeof t[e]!==r)throw new Error(`weighted round robin config ${e} parse error: expected ${r}, got ${typeof t[e]}`)}function K0(t,e){if(e in t&&t[e]!==void 0&&t[e]!==null){let r;if((0,Sn.isDuration)(t[e]))r=t[e];else if((0,Sn.isDurationMessage)(t[e]))r=(0,Sn.durationMessageToDuration)(t[e]);else if(typeof t[e]=="string"){let n=(0,Sn.parseDuration)(t[e]);if(!n)throw new Error(`weighted round robin config ${e}: failed to parse duration string ${t[e]}`);r=n}else throw new Error(`weighted round robin config ${e}: expected duration, got ${typeof t[e]}`);return(0,Sn.durationToMs)(r)}return null}var vf=class t{constructor(e,r,n,i,s,o){this.enableOobLoadReport=e??!1,this.oobLoadReportingPeriodMs=r??UX,this.blackoutPeriodMs=n??qX,this.weightExpirationPeriodMs=i??HX,this.weightUpdatePeriodMs=Math.max(s??WX,100),this.errorUtilizationPenalty=o??QX}getLoadBalancerName(){return S1}toJsonObject(){return{enable_oob_load_report:this.enableOobLoadReport,oob_load_reporting_period:(0,Sn.durationToString)((0,Sn.msToDuration)(this.oobLoadReportingPeriodMs)),blackout_period:(0,Sn.durationToString)((0,Sn.msToDuration)(this.blackoutPeriodMs)),weight_expiration_period:(0,Sn.durationToString)((0,Sn.msToDuration)(this.weightExpirationPeriodMs)),weight_update_period:(0,Sn.durationToString)((0,Sn.msToDuration)(this.weightUpdatePeriodMs)),error_utilization_penalty:this.errorUtilizationPenalty}}static createFromJson(e){if(z4(e,"enable_oob_load_report","boolean"),z4(e,"error_utilization_penalty","number"),e.error_utilization_penalty<0)throw new Error("weighted round robin config error_utilization_penalty < 0");return new t(e.enable_oob_load_report,K0(e,"oob_load_reporting_period"),K0(e,"blackout_period"),K0(e,"weight_expiration_period"),K0(e,"weight_update_period"),e.error_utilization_penalty)}getEnableOobLoadReport(){return this.enableOobLoadReport}getOobLoadReportingPeriodMs(){return this.oobLoadReportingPeriodMs}getBlackoutPeriodMs(){return this.blackoutPeriodMs}getWeightExpirationPeriodMs(){return this.weightExpirationPeriodMs}getWeightUpdatePeriodMs(){return this.weightUpdatePeriodMs}getErrorUtilizationPenalty(){return this.errorUtilizationPenalty}};bf.WeightedRoundRobinLoadBalancingConfig=vf;var v1=class{constructor(e,r){this.metricsHandler=r,this.queue=new LX.PriorityQueue((s,o)=>s.deadline<o.deadline);let n=e.filter(s=>s.weight>0),i;if(n.length<2)i=1;else{let s=0;for(let{weight:o}of n)s+=o;i=s/n.length}for(let s of e){let o=s.weight>0?1/s.weight:i;this.queue.push({endpointName:s.endpointName,picker:s.picker,period:o,deadline:Math.random()*o})}}pick(e){let r=this.queue.pop();this.queue.push(Object.assign(Object.assign({},r),{deadline:r.deadline+r.period}));let n=r.picker.pick(e);if(n.pickResultType===zl.PickResultType.COMPLETE){if(this.metricsHandler)return Object.assign(Object.assign({},n),{onCallEnded:(0,V4.createMetricsReader)(i=>this.metricsHandler(i,r.endpointName),n.onCallEnded)});{let i=n.subchannel;return Object.assign(Object.assign({},n),{subchannel:i.getWrappedSubchannel()})}}else return n}},b1=class{constructor(e){this.channelControlHelper=e,this.latestConfig=null,this.children=new Map,this.currentState=Dr.ConnectivityState.IDLE,this.updatesPaused=!1,this.lastError=null,this.weightUpdateTimer=null}countChildrenWithState(e){let r=0;for(let n of this.children.values())n.child.getConnectivityState()===e&&(r+=1);return r}updateWeight(e,r){var n,i;let s=r.rps_fractional,o=r.application_utilization;o>0&&s>0&&(o+=r.eps/s*((i=(n=this.latestConfig)===null||n===void 0?void 0:n.getErrorUtilizationPenalty())!==null&&i!==void 0?i:0));let a=o===0?0:s/o;if(a===0)return;let l=new Date;e.nonEmptySince===null&&(e.nonEmptySince=l),e.lastUpdated=l,e.weight=a}getWeight(e){if(!this.latestConfig)return 0;let r=new Date().getTime();if(r-e.lastUpdated.getTime()>=this.latestConfig.getWeightExpirationPeriodMs())return e.nonEmptySince=null,0;let n=this.latestConfig.getBlackoutPeriodMs();return n>0&&(e.nonEmptySince===null||r-e.nonEmptySince.getTime()<n)?0:e.weight}calculateAndUpdateState(){if(!(this.updatesPaused||!this.latestConfig)){if(this.countChildrenWithState(Dr.ConnectivityState.READY)>0){let e=[];for(let[n,i]of this.children)i.child.getConnectivityState()===Dr.ConnectivityState.READY&&e.push({endpointName:n,picker:i.child.getPicker(),weight:this.getWeight(i)});A1("Created picker with weights: "+e.map(n=>n.endpointName+":"+n.weight).join(","));let r;this.latestConfig.getEnableOobLoadReport()?r=null:r=(n,i)=>{let s=this.children.get(i);s&&this.updateWeight(s,n)},this.updateState(Dr.ConnectivityState.READY,new v1(e,r),null)}else if(this.countChildrenWithState(Dr.ConnectivityState.CONNECTING)>0)this.updateState(Dr.ConnectivityState.CONNECTING,new zl.QueuePicker(this),null);else if(this.countChildrenWithState(Dr.ConnectivityState.TRANSIENT_FAILURE)>0){let e=`weighted_round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(Dr.ConnectivityState.TRANSIENT_FAILURE,new zl.UnavailablePicker({details:e}),e)}else this.updateState(Dr.ConnectivityState.IDLE,new zl.QueuePicker(this),null);for(let{child:e}of this.children.values())e.getConnectivityState()===Dr.ConnectivityState.IDLE&&e.exitIdle()}}updateState(e,r,n){A1(Dr.ConnectivityState[this.currentState]+" -> "+Dr.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,r,n)}updateAddressList(e,r,n,i){var s,o;if(!(r instanceof vf))return!1;if(!e.ok)return this.children.size===0&&this.updateState(Dr.ConnectivityState.TRANSIENT_FAILURE,new zl.UnavailablePicker(e.error),e.error.details),!0;if(e.value.length===0){let u=`No addresses resolved. Resolution note: ${i}`;return this.updateState(Dr.ConnectivityState.TRANSIENT_FAILURE,new zl.UnavailablePicker({details:u}),u),!1}A1("Connect to endpoint list "+e.value.map(K4.endpointToString));let a=new Date,l=new Set;this.updatesPaused=!0,this.latestConfig=r;for(let u of e.value){let c=(0,K4.endpointToString)(u);l.add(c);let f=this.children.get(c);f||(f={child:new PX.LeafLoadBalancer(u,(0,Y4.createChildChannelControlHelper)(this.channelControlHelper,{updateState:(h,p,g)=>{this.currentState===Dr.ConnectivityState.READY&&h!==Dr.ConnectivityState.READY&&this.channelControlHelper.requestReresolution(),h===Dr.ConnectivityState.READY&&(f.nonEmptySince=null),g&&(this.lastError=g),this.calculateAndUpdateState()},createSubchannel:(h,p)=>{let g=this.channelControlHelper.createSubchannel(h,p);return f?.oobMetricsListener?new V4.OrcaOobMetricsSubchannelWrapper(g,f.oobMetricsListener,this.latestConfig.getOobLoadReportingPeriodMs()):g}}),n,i),lastUpdated:a,nonEmptySince:null,weight:0,oobMetricsListener:null},this.children.set(c,f)),r.getEnableOobLoadReport()?f.oobMetricsListener=h=>{this.updateWeight(f,h)}:f.oobMetricsListener=null}for(let[u,c]of this.children)l.has(u)?c.child.startConnecting():(c.child.destroy(),this.children.delete(u));return this.updatesPaused=!1,this.calculateAndUpdateState(),this.weightUpdateTimer&&clearInterval(this.weightUpdateTimer),this.weightUpdateTimer=(o=(s=setInterval(()=>{this.currentState===Dr.ConnectivityState.READY&&this.calculateAndUpdateState()},r.getWeightUpdatePeriodMs())).unref)===null||o===void 0?void 0:o.call(s),!0}exitIdle(){}resetBackoff(){}destroy(){for(let e of this.children.values())e.child.destroy();this.children.clear(),this.weightUpdateTimer&&clearInterval(this.weightUpdateTimer)}getTypeName(){return S1}};function GX(){(0,Y4.registerLoadBalancerType)(S1,b1,vf)}});var tN=x(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.experimental=de.ServerMetricRecorder=de.ServerInterceptingCall=de.ResponderBuilder=de.ServerListenerBuilder=de.addAdminServicesToServer=de.getChannelzHandlers=de.getChannelzServiceDefinition=de.InterceptorConfigurationError=de.InterceptingCall=de.RequesterBuilder=de.ListenerBuilder=de.StatusBuilder=de.getClientChannel=de.ServerCredentials=de.Server=de.setLogVerbosity=de.setLogger=de.load=de.loadObject=de.CallCredentials=de.ChannelCredentials=de.waitForClientReady=de.closeClient=de.Channel=de.makeGenericClientConstructor=de.makeClientConstructor=de.loadPackageDefinition=de.Client=de.compressionAlgorithms=de.propagate=de.connectivityState=de.status=de.logVerbosity=de.Metadata=de.credentials=void 0;var z0=Vd();Object.defineProperty(de,"CallCredentials",{enumerable:!0,get:function(){return z0.CallCredentials}});var jX=aA();Object.defineProperty(de,"Channel",{enumerable:!0,get:function(){return jX.ChannelImplementation}});var $X=Iv();Object.defineProperty(de,"compressionAlgorithms",{enumerable:!0,get:function(){return $X.CompressionAlgorithms}});var KX=zr();Object.defineProperty(de,"connectivityState",{enumerable:!0,get:function(){return KX.ConnectivityState}});var Y0=ml();Object.defineProperty(de,"ChannelCredentials",{enumerable:!0,get:function(){return Y0.ChannelCredentials}});var J4=oA();Object.defineProperty(de,"Client",{enumerable:!0,get:function(){return J4.Client}});var C1=nt();Object.defineProperty(de,"logVerbosity",{enumerable:!0,get:function(){return C1.LogVerbosity}});Object.defineProperty(de,"status",{enumerable:!0,get:function(){return C1.Status}});Object.defineProperty(de,"propagate",{enumerable:!0,get:function(){return C1.Propagate}});var Z4=Ot(),w1=_p();Object.defineProperty(de,"loadPackageDefinition",{enumerable:!0,get:function(){return w1.loadPackageDefinition}});Object.defineProperty(de,"makeClientConstructor",{enumerable:!0,get:function(){return w1.makeClientConstructor}});Object.defineProperty(de,"makeGenericClientConstructor",{enumerable:!0,get:function(){return w1.makeClientConstructor}});var zX=br();Object.defineProperty(de,"Metadata",{enumerable:!0,get:function(){return zX.Metadata}});var YX=y4();Object.defineProperty(de,"Server",{enumerable:!0,get:function(){return YX.Server}});var VX=D0();Object.defineProperty(de,"ServerCredentials",{enumerable:!0,get:function(){return VX.ServerCredentials}});var XX=A4();Object.defineProperty(de,"StatusBuilder",{enumerable:!0,get:function(){return XX.StatusBuilder}});de.credentials={combineChannelCredentials:(t,...e)=>e.reduce((r,n)=>r.compose(n),t),combineCallCredentials:(t,...e)=>e.reduce((r,n)=>r.compose(n),t),createInsecure:Y0.ChannelCredentials.createInsecure,createSsl:Y0.ChannelCredentials.createSsl,createFromSecureContext:Y0.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:z0.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:z0.CallCredentials.createFromGoogleCredential,createEmpty:z0.CallCredentials.createEmpty};var JX=t=>t.close();de.closeClient=JX;var ZX=(t,e,r)=>t.waitForReady(e,r);de.waitForClientReady=ZX;var eJ=(t,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};de.loadObject=eJ;var tJ=(t,e,r)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};de.load=tJ;var rJ=t=>{Z4.setLogger(t)};de.setLogger=rJ;var nJ=t=>{Z4.setLoggerVerbosity(t)};de.setLogVerbosity=nJ;var iJ=t=>J4.Client.prototype.getChannel.call(t);de.getClientChannel=iJ;var V0=nA();Object.defineProperty(de,"ListenerBuilder",{enumerable:!0,get:function(){return V0.ListenerBuilder}});Object.defineProperty(de,"RequesterBuilder",{enumerable:!0,get:function(){return V0.RequesterBuilder}});Object.defineProperty(de,"InterceptingCall",{enumerable:!0,get:function(){return V0.InterceptingCall}});Object.defineProperty(de,"InterceptorConfigurationError",{enumerable:!0,get:function(){return V0.InterceptorConfigurationError}});var eN=so();Object.defineProperty(de,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return eN.getChannelzServiceDefinition}});Object.defineProperty(de,"getChannelzHandlers",{enumerable:!0,get:function(){return eN.getChannelzHandlers}});var sJ=hp();Object.defineProperty(de,"addAdminServicesToServer",{enumerable:!0,get:function(){return sJ.addAdminServicesToServer}});var x1=Gb();Object.defineProperty(de,"ServerListenerBuilder",{enumerable:!0,get:function(){return x1.ServerListenerBuilder}});Object.defineProperty(de,"ResponderBuilder",{enumerable:!0,get:function(){return x1.ResponderBuilder}});Object.defineProperty(de,"ServerInterceptingCall",{enumerable:!0,get:function(){return x1.ServerInterceptingCall}});var oJ=T0();Object.defineProperty(de,"ServerMetricRecorder",{enumerable:!0,get:function(){return oJ.ServerMetricRecorder}});var aJ=r1();de.experimental=aJ;var lJ=Kv(),uJ=O4(),cJ=M4(),fJ=gf(),hJ=W4(),dJ=j4(),pJ=X4(),gJ=so();lJ.setup(),uJ.setup(),cJ.setup(),fJ.setup(),hJ.setup(),dJ.setup(),pJ.setup(),gJ.setup()});var sN=x(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.addCommonProtos=ho.loadProtosWithOptionsSync=ho.loadProtosWithOptions=void 0;var rN=require("fs"),nN=require("path"),Yl=Dl();function iN(t,e){let r=t.resolvePath;t.resolvePath=(n,i)=>{if(nN.isAbsolute(i))return i;for(let s of e){let o=nN.join(s,i);try{return rN.accessSync(o,rN.constants.R_OK),o}catch{continue}}return process.emitWarning(`${i} not found in any of the include paths ${e}`),r(n,i)}}async function mJ(t,e){let r=new Yl.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));iN(r,e.includeDirs)}let n=await r.load(t,e);return n.resolveAll(),n}ho.loadProtosWithOptions=mJ;function _J(t,e){let r=new Yl.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");iN(r,e.includeDirs)}let n=r.loadSync(t,e);return n.resolveAll(),n}ho.loadProtosWithOptionsSync=_J;function EJ(){let t=uv(),e=Gp(),r=cv(),n=fv();Yl.common("api",t.nested.google.nested.protobuf.nested),Yl.common("descriptor",e.nested.google.nested.protobuf.nested),Yl.common("source_context",r.nested.google.nested.protobuf.nested),Yl.common("type",n.nested.google.nested.protobuf.nested)}ho.addCommonProtos=EJ});var hN=x(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.loadFileDescriptorSetFromObject=gr.loadFileDescriptorSetFromBuffer=gr.fromJSON=gr.loadSync=gr.load=gr.IdempotencyLevel=gr.isAnyExtension=gr.Long=void 0;var yJ=dA(),Ui=Dl(),I1=lv(),T1=sN(),AJ=dv();gr.Long=AJ;function vJ(t){return"@type"in t&&typeof t["@type"]=="string"}gr.isAnyExtension=vJ;var lN;(function(t){t.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",t.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",t.IDEMPOTENT="IDEMPOTENT"})(lN=gr.IdempotencyLevel||(gr.IdempotencyLevel={}));var uN={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function bJ(t,e){return t===""?e:t+"."+e}function SJ(t){return t instanceof Ui.Service||t instanceof Ui.Type||t instanceof Ui.Enum}function CJ(t){return t instanceof Ui.Namespace||t instanceof Ui.Root}function cN(t,e){let r=bJ(e,t.name);return SJ(t)?[[r,t]]:CJ(t)&&typeof t.nested<"u"?Object.keys(t.nested).map(n=>cN(t.nested[n],r)).reduce((n,i)=>n.concat(i),[]):[]}function oN(t,e){return function(n){return t.toObject(t.decode(n),e)}}function aN(t){return function(r){if(Array.isArray(r))throw new Error(`Failed to serialize message: expected object with ${t.name} structure, got array instead`);let n=t.fromObject(r);return t.encode(n).finish()}}function wJ(t){return(t||[]).reduce((e,r)=>{for(let[n,i]of Object.entries(r))switch(n){case"uninterpreted_option":e.uninterpreted_option.push(r.uninterpreted_option);break;default:e[n]=i}return e},{deprecated:!1,idempotency_level:lN.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function xJ(t,e,r,n){let i=t.resolvedRequestType,s=t.resolvedResponseType;return{path:"/"+e+"/"+t.name,requestStream:!!t.requestStream,responseStream:!!t.responseStream,requestSerialize:aN(i),requestDeserialize:oN(i,r),responseSerialize:aN(s),responseDeserialize:oN(s,r),originalName:yJ(t.name),requestType:D1(i,n),responseType:D1(s,n),options:wJ(t.parsedOptions)}}function DJ(t,e,r,n){let i={};for(let s of t.methodsArray)i[s.name]=xJ(s,e,r,n);return i}function D1(t,e){let r=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,uN),fileDescriptorProtos:e}}function IJ(t,e){let r=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,uN),fileDescriptorProtos:e}}function TJ(t,e,r,n){if(t instanceof Ui.Service)return DJ(t,e,r,n);if(t instanceof Ui.Type)return D1(t,n);if(t instanceof Ui.Enum)return IJ(t,n);throw new Error("Type mismatch in reflection object handling")}function X0(t,e){let r={};t.resolveAll();let i=t.toDescriptor("proto3").file.map(s=>Buffer.from(I1.FileDescriptorProto.encode(s).finish()));for(let[s,o]of cN(t,""))r[s]=TJ(o,s,e,i);return r}function fN(t,e){e=e||{};let r=Ui.Root.fromDescriptor(t);return r.resolveAll(),X0(r,e)}function RJ(t,e){return(0,T1.loadProtosWithOptions)(t,e).then(r=>X0(r,e))}gr.load=RJ;function kJ(t,e){let r=(0,T1.loadProtosWithOptionsSync)(t,e);return X0(r,e)}gr.loadSync=kJ;function OJ(t,e){e=e||{};let r=Ui.Root.fromJSON(t);return r.resolveAll(),X0(r,e)}gr.fromJSON=OJ;function NJ(t,e){let r=I1.FileDescriptorSet.decode(t);return fN(r,e)}gr.loadFileDescriptorSetFromBuffer=NJ;function BJ(t,e){let r=I1.FileDescriptorSet.fromObject(t);return fN(r,e)}gr.loadFileDescriptorSetFromObject=BJ;(0,T1.addCommonProtos)()});var dN,pN=tr(()=>{dN="ffffffff-ffff-ffff-ffff-ffffffffffff"});var gN,mN=tr(()=>{gN="00000000-0000-0000-0000-000000000000"});var _N,EN=tr(()=>{_N=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});function PJ(t){return typeof t=="string"&&_N.test(t)}var po,Sf=tr(()=>{EN();po=PJ});function FJ(t){if(!po(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var go,Cf=tr(()=>{Sf();go=FJ});function Yr(t,e=0){return(Or[t[e+0]]+Or[t[e+1]]+Or[t[e+2]]+Or[t[e+3]]+"-"+Or[t[e+4]]+Or[t[e+5]]+"-"+Or[t[e+6]]+Or[t[e+7]]+"-"+Or[t[e+8]]+Or[t[e+9]]+"-"+Or[t[e+10]]+Or[t[e+11]]+Or[t[e+12]]+Or[t[e+13]]+Or[t[e+14]]+Or[t[e+15]]).toLowerCase()}function LJ(t,e=0){let r=Yr(t,e);if(!po(r))throw TypeError("Stringified UUID is invalid");return r}var Or,yN,gs=tr(()=>{Sf();Or=[];for(let t=0;t<256;++t)Or.push((t+256).toString(16).slice(1));yN=LJ});function ua(){return J0>Z0.length-16&&(AN.default.randomFillSync(Z0),J0=0),Z0.slice(J0,J0+=16)}var AN,Z0,J0,eg=tr(()=>{AN=Vt(require("node:crypto")),Z0=new Uint8Array(256),J0=Z0.length});function MJ(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let s=t.node,o=t.clockseq;if(t._v6||(s||(s=R1),o==null&&(o=tg)),s==null||o==null){let h=t.random||(t.rng||ua)();s==null&&(s=[h[0],h[1],h[2],h[3],h[4],h[5]],!R1&&!t._v6&&(s[0]|=1,R1=s)),o==null&&(o=(h[6]<<8|h[7])&16383,tg===void 0&&!t._v6&&(tg=o))}let a=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:O1+1,u=a-k1+(l-O1)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||a>k1)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");k1=a,O1=l,tg=o,a+=122192928e5;let c=((a&268435455)*1e4+l)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=c&255;let f=a/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(let h=0;h<6;++h)i[n+h]=s[h];return e||Yr(i)}var R1,tg,k1,O1,rg,N1=tr(()=>{eg();gs();k1=0,O1=0;rg=MJ});function wf(t){let e=typeof t=="string"?go(t):t,r=UJ(e);return typeof t=="string"?Yr(r):r}function UJ(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}var B1=tr(()=>{Cf();gs()});function qJ(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function xf(t,e,r){function n(i,s,o,a){var l;if(typeof i=="string"&&(i=qJ(i)),typeof s=="string"&&(s=go(s)),((l=s)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(let c=0;c<16;++c)o[a+c]=u[c];return o}return Yr(u)}try{n.name=t}catch{}return n.DNS=HJ,n.URL=WJ,n}var HJ,WJ,P1=tr(()=>{gs();Cf();HJ="6ba7b810-9dad-11d1-80b4-00c04fd430c8",WJ="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function QJ(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),vN.default.createHash("md5").update(t).digest()}var vN,bN,SN=tr(()=>{vN=Vt(require("node:crypto"));bN=QJ});var GJ,CN,wN=tr(()=>{P1();SN();GJ=xf("v3",48,bN),CN=GJ});var xN,F1,DN=tr(()=>{xN=Vt(require("node:crypto")),F1={randomUUID:xN.default.randomUUID}});function jJ(t,e,r){if(F1.randomUUID&&!e&&!t)return F1.randomUUID();t=t||{};let n=t.random||(t.rng||ua)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Yr(n)}var IN,TN=tr(()=>{DN();eg();gs();IN=jJ});function $J(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),RN.default.createHash("sha1").update(t).digest()}var RN,kN,ON=tr(()=>{RN=Vt(require("node:crypto"));kN=$J});var KJ,NN,BN=tr(()=>{P1();ON();KJ=xf("v5",80,kN),NN=KJ});function L1(t={},e,r=0){let n=rg({...t,_v6:!0},new Uint8Array(16));if(n=wf(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return Yr(n)}var PN=tr(()=>{gs();N1();B1()});function M1(t){let e=typeof t=="string"?go(t):t,r=zJ(e);return typeof t=="string"?Yr(r):r}function zJ(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}var FN=tr(()=>{Cf();gs()});function YJ(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),s=t.random||(t.rng||ua)(),o=t.msecs!==void 0?t.msecs:Date.now(),a=t.seq!==void 0?t.seq:null,l=MN,u=LN;return o>ci&&t.msecs===void 0&&(ci=o,a!==null&&(l=null,u=null)),a!==null&&(a>2147483647&&(a=2147483647),l=a>>>19&4095,u=a&524287),(l===null||u===null)&&(l=s[6]&127,l=l<<8|s[7],u=s[8]&63,u=u<<8|s[9],u=u<<5|s[10]>>>3),o+1e4>ci&&a===null?++u>524287&&(u=0,++l>4095&&(l=0,ci++)):ci=o,MN=l,LN=u,i[n++]=ci/1099511627776&255,i[n++]=ci/4294967296&255,i[n++]=ci/16777216&255,i[n++]=ci/65536&255,i[n++]=ci/256&255,i[n++]=ci&255,i[n++]=l>>>4&15|112,i[n++]=l&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|s[10]&7,i[n++]=s[11],i[n++]=s[12],i[n++]=s[13],i[n++]=s[14],i[n++]=s[15],e||Yr(i)}var LN,MN,ci,UN,qN=tr(()=>{eg();gs();LN=null,MN=null,ci=0;UN=YJ});function VJ(t){if(!po(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var HN,WN=tr(()=>{Sf();HN=VJ});var QN={};eC(QN,{MAX:()=>dN,NIL:()=>gN,parse:()=>go,stringify:()=>yN,v1:()=>rg,v1ToV6:()=>wf,v3:()=>CN,v4:()=>IN,v5:()=>NN,v6:()=>L1,v6ToV1:()=>M1,v7:()=>UN,validate:()=>po,version:()=>HN});var GN=tr(()=>{pN();mN();Cf();gs();N1();B1();wN();TN();BN();PN();FN();qN();Sf();WN()});var $N=x((wle,jN)=>{var U1=tN(),XJ=hN(),JJ=require("path"),ZJ=(GN(),ZP(QN)).v4;function eZ(t,e,r){let n=ZJ(),i={method:"POST",path:"/session",hijack:!0,headers:{Upgrade:"h2c","X-Docker-Expose-Session-Uuid":n,"X-Docker-Expose-Session-Name":"testcontainers"},statusCodes:{200:!0,500:"server error"}};t.modem.dial(i,function(s,o){if(s)return r(s,null,()=>{});let a=new U1.Server,l=U1.ServerCredentials.createInsecure();a.createConnectionInjector(l).injectConnection(o);let c=XJ.loadSync(JJ.resolve(__dirname,"proto","auth.proto")),f=U1.loadPackageDefinition(c);a.addService(f.moby.filesync.v1.Auth.service,{Credentials({request:p},g){e?g(null,{Username:e.username,Secret:e.password}):g(null,{})}});function h(){a.forceShutdown(),o.end()}r(null,n,h)})}jN.exports=eZ});var sB=x((xle,iB)=>{var tZ=require("events").EventEmitter,rZ=LI(),KN=GT(),zN=$T(),YN=YT(),VN=XT(),XN=ZT(),JN=tR(),ZN=iR(),nZ=oR(),eB=uR(),tB=hR(),rB=ay(),at=an(),iZ=$N(),nB=at.extend,ve=function(t){if(!(this instanceof ve))return new ve(t);var e=global.Promise;t&&t.Promise&&(e=t.Promise,Object.keys(t).length===1&&(t=void 0)),t&&t.modem?this.modem=t.modem:this.modem=new rZ(t),this.modem.Promise=e};ve.prototype.createContainer=function(t,e){var r=this,n={path:"/containers/create?",method:"POST",options:t,authconfig:t.authconfig,abortSignal:t.abortSignal,statusCodes:{200:!0,201:!0,400:"bad parameter",404:"no such container",406:"impossible to attach",500:"server error"}};if(delete t.authconfig,e===void 0)return new this.modem.Promise(function(i,s){r.modem.dial(n,function(o,a){if(o)return s(o);i(r.getContainer(a.Id))})});this.modem.dial(n,function(i,s){if(i)return e(i,s);e(i,r.getContainer(s.Id))})};ve.prototype.createImage=function(t,e,r){var n=this;!r&&typeof e=="function"?(r=e,e=t,t=e.authconfig||void 0):!r&&!e&&(e=t,t=e.authconfig);var i={path:"/images/create?",method:"POST",options:e,authconfig:t,abortSignal:e.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(r===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){r(s,o)})};ve.prototype.loadImage=function(t,e,r){var n=this;!r&&typeof e=="function"&&(r=e,e=null);var i={path:"/images/load?",method:"POST",options:e,file:t,abortSignal:e&&e.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(r===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){r(s,o)})};ve.prototype.importImage=function(t,e,r){var n=this;!r&&typeof e=="function"&&(r=e,e=void 0),e||(e={}),e.fromSrc="-";var i={path:"/images/create?",method:"POST",options:e,file:t,abortSignal:e.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(r===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){r(s,o)})};ve.prototype.checkAuth=function(t,e){var r=this,n={path:"/auth",method:"POST",options:t,abortSignal:t.abortSignal,statusCodes:{200:!0,204:!0,500:"server error"}};if(e===void 0)return new this.modem.Promise(function(i,s){r.modem.dial(n,function(o,a){if(o)return s(o);i(a)})});this.modem.dial(n,function(i,s){e(i,s)})};ve.prototype.buildImage=function(t,e,r){var n=this;!r&&typeof e=="function"&&(r=e,e=null);var i={path:"/build?",method:"POST",file:void 0,options:e,abortSignal:e&&e.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};e&&(e.registryconfig&&(i.registryconfig=i.options.registryconfig,delete i.options.registryconfig),e.authconfig&&(i.authconfig=i.options.authconfig,delete i.options.authconfig),e.cachefrom&&Array.isArray(e.cachefrom)&&(i.options.cachefrom=JSON.stringify(e.cachefrom)));function s(a){at.prepareBuildContext(t,l=>{i.file=l,n.modem.dial(i,a)})}function o(a){e?.version==="2"?iZ(n,i.authconfig,(l,u,c)=>{if(l)return a(l);i.options.session=u,s((f,h)=>{a(f,h),h&&h.on("end",c)})}):s(a)}if(r===void 0)return new n.modem.Promise(function(a,l){o(function(u,c){if(u)return l(u);a(c)})});o(r)};ve.prototype.getContainer=function(t){return new KN(this.modem,t)};ve.prototype.getImage=function(t){return new zN(this.modem,t)};ve.prototype.getVolume=function(t){return new YN(this.modem,t)};ve.prototype.getPlugin=function(t,e){return new JN(this.modem,t,e)};ve.prototype.getService=function(t){return new XN(this.modem,t)};ve.prototype.getTask=function(t){return new eB(this.modem,t)};ve.prototype.getNode=function(t){return new tB(this.modem,t)};ve.prototype.getNetwork=function(t){return new VN(this.modem,t)};ve.prototype.getSecret=function(t){return new ZN(this.modem,t)};ve.prototype.getConfig=function(t){return new nZ(this.modem,t)};ve.prototype.getExec=function(t){return new rB(this.modem,t)};ve.prototype.listContainers=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/containers/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.listImages=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/images/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.getImages=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/images/get?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.listServices=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/services?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.listNodes=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/nodes?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",404:"no such node",500:"server error",503:"node is not part of a swarm"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.listTasks=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/tasks?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.createSecret=function(t,e){var r=at.processArgs(t,e),n=this,i={path:"/secrets/create?",method:"POST",options:r.opts,abortSignal:r.opts.abortSignal,statusCodes:{200:!0,201:!0,406:"server error or node is not part of a swarm",409:"name conflicts with an existing object",500:"server error"}};if(r.callback===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(n.getSecret(l.ID))})});this.modem.dial(i,function(s,o){if(s)return r.callback(s,o);r.callback(s,n.getSecret(o.ID))})};ve.prototype.createConfig=function(t,e){var r=at.processArgs(t,e),n=this,i={path:"/configs/create?",method:"POST",options:r.opts,abortSignal:r.opts.abortSignal,statusCodes:{200:!0,201:!0,406:"server error or node is not part of a swarm",409:"name conflicts with an existing object",500:"server error"}};if(r.callback===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(n.getConfig(l.ID))})});this.modem.dial(i,function(s,o){if(s)return r.callback(s,o);r.callback(s,n.getConfig(o.ID))})};ve.prototype.listSecrets=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/secrets?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.listConfigs=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/configs?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.createPlugin=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/plugins/create?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(r.getPlugin(n.opts.name))})});this.modem.dial(i,function(s,o){if(s)return n.callback(s,o);n.callback(s,r.getPlugin(n.opts.name))})};ve.prototype.listPlugins=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/plugins?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.pruneImages=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/images/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.pruneBuilder=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/build/prune",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.pruneContainers=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/containers/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.pruneVolumes=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/volumes/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.pruneNetworks=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/networks/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.createVolume=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/volumes/create?",method:"POST",allowEmpty:!0,options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(r.getVolume(l.Name))})});this.modem.dial(i,function(s,o){if(s)return n.callback(s,o);n.callback(s,r.getVolume(o.Name))})};ve.prototype.createService=function(t,e,r){!r&&typeof e=="function"?(r=e,e=t,t=e.authconfig||void 0):!e&&!r&&(e=t);var n=this,i={path:"/services/create",method:"POST",options:e,authconfig:t,abortSignal:e&&e.abortSignal,statusCodes:{200:!0,201:!0,500:"server error"}};if(r===void 0)return new this.modem.Promise(function(s,o){n.modem.dial(i,function(a,l){if(a)return o(a);s(n.getService(l.ID||l.Id))})});this.modem.dial(i,function(s,o){if(s)return r(s,o);r(s,n.getService(o.ID||o.Id))})};ve.prototype.listVolumes=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/volumes?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.createNetwork=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/networks/create?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"driver not found",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(r.getNetwork(l.Id))})});this.modem.dial(i,function(s,o){if(s)return n.callback(s,o);n.callback(s,r.getNetwork(o.Id))})};ve.prototype.listNetworks=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/networks?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.searchImages=function(t,e){var r=this,n={path:"/images/search?",method:"GET",options:t,authconfig:t.authconfig,abortSignal:t.abortSignal,statusCodes:{200:!0,500:"server error"}};if(e===void 0)return new this.modem.Promise(function(i,s){r.modem.dial(n,function(o,a){if(o)return s(o);i(a)})});this.modem.dial(n,function(i,s){e(i,s)})};ve.prototype.info=function(i,e){var r=this,n=at.processArgs(i,e),i={path:"/info",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.version=function(i,e){var r=this,n=at.processArgs(i,e),i={path:"/version",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.ping=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/_ping",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.df=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/system/df",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.getEvents=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/events?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.pull=function(t,e,r,n){var i=at.processArgs(e,r),s=at.parseRepositoryTag(t);i.opts.fromImage=s.repository,i.opts.tag=s.tag||"latest";var o=[i.opts,i.callback];return n&&(o=[n,i.opts,i.callback]),this.createImage.apply(this,o)};ve.prototype.pullAll=function(t,e,r,n){var i=at.processArgs(e,r),s=at.parseRepositoryTag(t);i.opts.fromImage=s.repository;var o=[i.opts,i.callback];return n&&(o=[n,i.opts,i.callback]),this.createImage.apply(this,o)};ve.prototype.run=function(t,e,r,n,i,s){return typeof arguments[arguments.length-1]=="function"?this.runCallback(t,e,r,n,i,s):this.runPromise(t,e,r,n,i)};ve.prototype.runCallback=function(t,e,r,n,i,s){!s&&typeof n=="function"?(s=n,n={},i={}):!s&&typeof i=="function"&&(s=i,i={});var o=new tZ;function a(u,c){if(u)return s(u,null,c);o.emit("container",c),c.attach({stream:!0,stdout:!0,stderr:!0},function(h,p){if(h)return s(h,null,c);o.emit("stream",p),r&&(r instanceof Array?(p.on("end",function(){try{r[0].end()}catch{}try{r[1].end()}catch{}}),c.modem.demuxStream(p,r[0],r[1])):(p.setEncoding("utf8"),p.pipe(r,{end:!0}))),c.start(i,function(g,m){if(g)return s(g,m,c);o.emit("start",c),c.wait(function(E,A){o.emit("data",A),s(E,A,c)})})})}var l={Hostname:"",User:"",AttachStdin:!1,AttachStdout:!0,AttachStderr:!0,Tty:!0,OpenStdin:!1,StdinOnce:!1,Env:null,Cmd:e,Image:t,Volumes:{},VolumesFrom:[]};return nB(l,n),this.createContainer(l,a),o};ve.prototype.runPromise=function(t,e,r,n,i){var s=this;n=n||{},i=i||{};var o={Hostname:"",User:"",AttachStdin:!1,AttachStdout:!0,AttachStderr:!0,Tty:!0,OpenStdin:!1,StdinOnce:!1,Env:null,Cmd:e,Image:t,Volumes:{},VolumesFrom:[]};nB(o,n);var a;return new this.modem.Promise(function(l,u){s.createContainer(o).then(function(c){return a=c,c.attach({stream:!0,stdout:!0,stderr:!0})}).then(function(c){return r&&(r instanceof Array?(c.on("end",function(){try{r[0].end()}catch{}try{r[1].end()}catch{}}),a.modem.demuxStream(c,r[0],r[1])):(c.setEncoding("utf8"),c.pipe(r,{end:!0}))),a.start(i)}).then(function(c){return a.wait()}).then(function(c){l([c,a])}).catch(function(c){u(c)})})};ve.prototype.swarmInit=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/swarm/init",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.swarmJoin=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/swarm/join",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.swarmLeave=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/swarm/leave?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,406:"node is not part of a Swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.swarmUpdate=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/swarm/update?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.prototype.swarmInspect=function(t,e){var r=this,n=at.processArgs(t,e),i={path:"/swarm",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,406:"This node is not a swarm manager",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(s,o){r.modem.dial(i,function(a,l){if(a)return o(a);s(l)})});this.modem.dial(i,function(s,o){n.callback(s,o)})};ve.Container=KN;ve.Image=zN;ve.Volume=YN;ve.Network=VN;ve.Service=XN;ve.Plugin=JN;ve.Secret=ZN;ve.Task=eB;ve.Node=tB;ve.Exec=rB;iB.exports=ve});var ng=x((Dle,aB)=>{var q1=[],oB=0,Qr=(t,e)=>{oB>=e&&q1.push(t)};Qr.WARN=1;Qr.INFO=2;Qr.DEBUG=3;Qr.reset=()=>{q1=[]};Qr.setDebugLevel=t=>{oB=t};Qr.warn=t=>Qr(t,Qr.WARN);Qr.info=t=>Qr(t,Qr.INFO);Qr.debug=t=>Qr(t,Qr.DEBUG);Qr.debugMessages=()=>q1;aB.exports=Qr});var uB=x((Ile,lB)=>{"use strict";lB.exports=({onlyFirst:t=!1}={})=>{let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")}});var fB=x((Tle,cB)=>{"use strict";var sZ=uB();cB.exports=t=>typeof t=="string"?t.replace(sZ(),""):t});var dB=x((Rle,H1)=>{"use strict";var hB=t=>Number.isNaN(t)?!1:t>=4352&&(t<=4447||t===9001||t===9002||11904<=t&&t<=12871&&t!==12351||12880<=t&&t<=19903||19968<=t&&t<=42182||43360<=t&&t<=43388||44032<=t&&t<=55203||63744<=t&&t<=64255||65040<=t&&t<=65049||65072<=t&&t<=65131||65281<=t&&t<=65376||65504<=t&&t<=65510||110592<=t&&t<=110593||127488<=t&&t<=127569||131072<=t&&t<=262141);H1.exports=hB;H1.exports.default=hB});var gB=x((kle,pB)=>{"use strict";pB.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var _B=x((Ole,W1)=>{"use strict";var oZ=fB(),aZ=dB(),lZ=gB(),mB=t=>{if(typeof t!="string"||t.length===0||(t=oZ(t),t.length===0))return 0;t=t.replace(lZ(),"  ");let e=0;for(let r=0;r<t.length;r++){let n=t.codePointAt(r);n<=31||n>=127&&n<=159||n>=768&&n<=879||(n>65535&&r++,e+=aZ(n)?2:1)}return e};W1.exports=mB;W1.exports.default=mB});var Q1=x((Nle,vB)=>{var EB=_B();function ig(t){return t?/\u001b\[((?:\d*;){0,5}\d*)m/g:/\u001b\[(?:\d*;){0,5}\d*m/g}function qi(t){let e=ig();return(""+t).replace(e,"").split(`
`).reduce(function(i,s){return EB(s)>i?EB(s):i},0)}function Df(t,e){return Array(e+1).join(t)}function uZ(t,e,r,n){let i=qi(t);if(e+1>=i){let s=e-i;switch(n){case"right":{t=Df(r,s)+t;break}case"center":{let o=Math.ceil(s/2),a=s-o;t=Df(r,a)+t+Df(r,o);break}default:{t=t+Df(r,s);break}}}return t}var Vl={};function If(t,e,r){e="\x1B["+e+"m",r="\x1B["+r+"m",Vl[e]={set:t,to:!0},Vl[r]={set:t,to:!1},Vl[t]={on:e,off:r}}If("bold",1,22);If("italics",3,23);If("underline",4,24);If("inverse",7,27);If("strikethrough",9,29);function yB(t,e){let r=e[1]?parseInt(e[1].split(";")[0]):0;if(r>=30&&r<=39||r>=90&&r<=97){t.lastForegroundAdded=e[0];return}if(r>=40&&r<=49||r>=100&&r<=107){t.lastBackgroundAdded=e[0];return}if(r===0){for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&delete t[i];return}let n=Vl[e[0]];n&&(t[n.set]=n.to)}function cZ(t){let e=ig(!0),r=e.exec(t),n={};for(;r!==null;)yB(n,r),r=e.exec(t);return n}function AB(t,e){let r=t.lastBackgroundAdded,n=t.lastForegroundAdded;return delete t.lastBackgroundAdded,delete t.lastForegroundAdded,Object.keys(t).forEach(function(i){t[i]&&(e+=Vl[i].off)}),r&&r!="\x1B[49m"&&(e+="\x1B[49m"),n&&n!="\x1B[39m"&&(e+="\x1B[39m"),e}function fZ(t,e){let r=t.lastBackgroundAdded,n=t.lastForegroundAdded;return delete t.lastBackgroundAdded,delete t.lastForegroundAdded,Object.keys(t).forEach(function(i){t[i]&&(e=Vl[i].on+e)}),r&&r!="\x1B[49m"&&(e=r+e),n&&n!="\x1B[39m"&&(e=n+e),e}function hZ(t,e){if(t.length===qi(t))return t.substr(0,e);for(;qi(t)>e;)t=t.slice(0,-1);return t}function dZ(t,e){let r=ig(!0),n=t.split(ig()),i=0,s=0,o="",a,l={};for(;s<e;){a=r.exec(t);let u=n[i];if(i++,s+qi(u)>e&&(u=hZ(u,e-s)),o+=u,s+=qi(u),s<e){if(!a)break;o+=a[0],yB(l,a)}}return AB(l,o)}function pZ(t,e,r){if(r=r||"\u2026",qi(t)<=e)return t;e-=qi(r);let i=dZ(t,e);i+=r;let s="\x1B]8;;\x07";return t.includes(s)&&!i.includes(s)&&(i+=s),i}function gZ(){return{chars:{top:"\u2500","top-mid":"\u252C","top-left":"\u250C","top-right":"\u2510",bottom:"\u2500","bottom-mid":"\u2534","bottom-left":"\u2514","bottom-right":"\u2518",left:"\u2502","left-mid":"\u251C",mid:"\u2500","mid-mid":"\u253C",right:"\u2502","right-mid":"\u2524",middle:"\u2502"},truncate:"\u2026",colWidths:[],rowHeights:[],colAligns:[],rowAligns:[],style:{"padding-left":1,"padding-right":1,head:["red"],border:["grey"],compact:!1},head:[]}}function mZ(t,e){t=t||{},e=e||gZ();let r=Object.assign({},e,t);return r.chars=Object.assign({},e.chars,t.chars),r.style=Object.assign({},e.style,t.style),r}function _Z(t,e){let r=[],n=e.split(/(\s+)/g),i=[],s=0,o;for(let a=0;a<n.length;a+=2){let l=n[a],u=s+qi(l);s>0&&o&&(u+=o.length),u>t?(s!==0&&r.push(i.join("")),i=[l],s=qi(l)):(i.push(o||"",l),s=u),o=n[a+1]}return s&&r.push(i.join("")),r}function EZ(t,e){let r=[],n="";function i(o,a){for(n.length&&a&&(n+=a),n+=o;n.length>t;)r.push(n.slice(0,t)),n=n.slice(t)}let s=e.split(/(\s+)/g);for(let o=0;o<s.length;o+=2)i(s[o],o&&s[o-1]);return n.length&&r.push(n),r}function yZ(t,e,r=!0){let n=[];e=e.split(`
`);let i=r?_Z:EZ;for(let s=0;s<e.length;s++)n.push.apply(n,i(t,e[s]));return n}function AZ(t){let e={},r=[];for(let n=0;n<t.length;n++){let i=fZ(e,t[n]);e=cZ(i);let s=Object.assign({},e);r.push(AB(s,i))}return r}function vZ(t,e){return["\x1B]","8",";",";",t||e,"\x07",e,"\x1B]","8",";",";","\x07"].join("")}vB.exports={strlen:qi,repeat:Df,pad:uZ,truncate:pZ,mergeOptions:mZ,wordWrap:yZ,colorizeLines:AZ,hyperlink:vZ}});var wB=x((Ble,CB)=>{var SB={};CB.exports=SB;var bB={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(bB).forEach(function(t){var e=bB[t],r=SB[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var DB=x((Ple,xB)=>{"use strict";xB.exports=function(t,e){e=e||process.argv;var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var TB=x((Fle,IB)=>{"use strict";var bZ=require("os"),fi=DB(),Vr=process.env,Xl=void 0;fi("no-color")||fi("no-colors")||fi("color=false")?Xl=!1:(fi("color")||fi("colors")||fi("color=true")||fi("color=always"))&&(Xl=!0);"FORCE_COLOR"in Vr&&(Xl=Vr.FORCE_COLOR.length===0||parseInt(Vr.FORCE_COLOR,10)!==0);function SZ(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function CZ(t){if(Xl===!1)return 0;if(fi("color=16m")||fi("color=full")||fi("color=truecolor"))return 3;if(fi("color=256"))return 2;if(t&&!t.isTTY&&Xl!==!0)return 0;var e=Xl?1:0;if(process.platform==="win32"){var r=bZ.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Vr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in Vr})||Vr.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Vr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Vr.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Vr){var n=parseInt((Vr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Vr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Vr.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Vr.TERM)||"COLORTERM"in Vr?1:(Vr.TERM==="dumb",e)}function G1(t){var e=CZ(t);return SZ(e)}IB.exports={supportsColor:G1,stdout:G1(process.stdout),stderr:G1(process.stderr)}});var kB=x((Lle,RB)=>{RB.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var NB=x((Mle,OB)=>{OB.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(l){var u=Math.floor(Math.random()*l);return u}function o(l){var u=!1;return i.filter(function(c){u=c===l}),u}function a(l,u){var c="",f,h;u=u||{},u.up=typeof u.up<"u"?u.up:!0,u.mid=typeof u.mid<"u"?u.mid:!0,u.down=typeof u.down<"u"?u.down:!0,u.size=typeof u.size<"u"?u.size:"maxi",l=l.split("");for(h in l)if(!o(h)){switch(c=c+l[h],f={up:0,down:0,mid:0},u.size){case"mini":f.up=s(8),f.mid=s(2),f.down=s(8);break;case"maxi":f.up=s(16)+3,f.mid=s(4)+1,f.down=s(64)+3;break;default:f.up=s(8)+1,f.mid=s(6)/2,f.down=s(8)+1;break}var p=["up","mid","down"];for(var g in p)for(var m=p[g],E=0;E<=f[m];E++)u[m]&&(c=c+n[m][s(n[m].length)])}return c}return a(e,r)}});var PB=x((Ule,BB)=>{BB.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var LB=x((qle,FB)=>{FB.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var UB=x((Hle,MB)=>{MB.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var HB=x((Wle,qB)=>{qB.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var KB=x((Gle,$B)=>{var lt={};$B.exports=lt;lt.themes={};var wZ=require("util"),ca=lt.styles=wB(),QB=Object.defineProperties,xZ=new RegExp(/[\r\n]+/g);lt.supportsColor=TB().supportsColor;typeof lt.enabled>"u"&&(lt.enabled=lt.supportsColor()!==!1);lt.enable=function(){lt.enabled=!0};lt.disable=function(){lt.enabled=!1};lt.stripColors=lt.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var Qle=lt.stylize=function(e,r){if(!lt.enabled)return e+"";var n=ca[r];return!n&&r in lt?lt[r](e):n.open+e+n.close},DZ=/[|\\{}()[\]^$+*?.]/g,IZ=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(DZ,"\\$&")};function GB(t){var e=function r(){return RZ.apply(r,arguments)};return e._styles=t,e.__proto__=TZ,e}var jB=(function(){var t={};return ca.grey=ca.gray,Object.keys(ca).forEach(function(e){ca[e].closeRe=new RegExp(IZ(ca[e].close),"g"),t[e]={get:function(){return GB(this._styles.concat(e))}}}),t})(),TZ=QB(function(){},jB);function RZ(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:wZ.inspect(o)}).join(" ");if(!lt.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=ca[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(xZ,function(o){return s.close+o+s.open}))}return e}lt.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){lt[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=lt[t[r][s]](i);return i}return lt[t[r]](n)}})(e)};function kZ(){var t={};return Object.keys(jB).forEach(function(e){t[e]={get:function(){return GB([e])}}}),t}var OZ=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};lt.trap=kB();lt.zalgo=NB();lt.maps={};lt.maps.america=PB()(lt);lt.maps.zebra=LB()(lt);lt.maps.rainbow=UB()(lt);lt.maps.random=HB()(lt);for(WB in lt.maps)(function(t){lt[t]=function(e){return OZ(lt.maps[t],e)}})(WB);var WB;QB(lt,kZ())});var YB=x((jle,zB)=>{var NZ=KB();zB.exports=NZ});var ZB=x(($le,sg)=>{var{info:BZ,debug:JB}=ng(),Cn=Q1(),$1=class t{constructor(e){this.setOptions(e),this.x=null,this.y=null}setOptions(e){["boolean","number","bigint","string"].indexOf(typeof e)!==-1&&(e={content:""+e}),e=e||{},this.options=e;let r=e.content;if(["boolean","number","bigint","string"].indexOf(typeof r)!==-1)this.content=String(r);else if(!r)this.content=this.options.href||"";else throw new Error("Content needs to be a primitive, got: "+typeof r);this.colSpan=e.colSpan||1,this.rowSpan=e.rowSpan||1,this.options.href&&Object.defineProperty(this,"href",{get(){return this.options.href}})}mergeTableOptions(e,r){this.cells=r;let n=this.options.chars||{},i=e.chars,s=this.chars={};FZ.forEach(function(l){j1(n,i,l,s)}),this.truncate=this.options.truncate||e.truncate;let o=this.options.style=this.options.style||{},a=e.style;j1(o,a,"padding-left",this),j1(o,a,"padding-right",this),this.head=o.head||a.head,this.border=o.border||a.border,this.fixedWidth=e.colWidths[this.x],this.lines=this.computeLines(e),this.desiredWidth=Cn.strlen(this.content)+this.paddingLeft+this.paddingRight,this.desiredHeight=this.lines.length}computeLines(e){let r=e.wordWrap||e.textWrap,{wordWrap:n=r}=this.options;if(this.fixedWidth&&n){if(this.fixedWidth-=this.paddingLeft+this.paddingRight,this.colSpan){let o=1;for(;o<this.colSpan;)this.fixedWidth+=e.colWidths[this.x+o],o++}let{wrapOnWordBoundary:i=!0}=e,{wrapOnWordBoundary:s=i}=this.options;return this.wrapLines(Cn.wordWrap(this.fixedWidth,this.content,s))}return this.wrapLines(this.content.split(`
`))}wrapLines(e){let r=Cn.colorizeLines(e);return this.href?r.map(n=>Cn.hyperlink(this.href,n)):r}init(e){let r=this.x,n=this.y;this.widths=e.colWidths.slice(r,r+this.colSpan),this.heights=e.rowHeights.slice(n,n+this.rowSpan),this.width=this.widths.reduce(XB,-1),this.height=this.heights.reduce(XB,-1),this.hAlign=this.options.hAlign||e.colAligns[r],this.vAlign=this.options.vAlign||e.rowAligns[n],this.drawRight=r+this.colSpan==e.colWidths.length}draw(e,r){if(e=="top")return this.drawTop(this.drawRight);if(e=="bottom")return this.drawBottom(this.drawRight);let n=Cn.truncate(this.content,10,this.truncate);e||BZ(`${this.y}-${this.x}: ${this.rowSpan-e}x${this.colSpan} Cell ${n}`);let i=Math.max(this.height-this.lines.length,0),s;switch(this.vAlign){case"center":s=Math.ceil(i/2);break;case"bottom":s=i;break;default:s=0}if(e<s||e>=s+this.lines.length)return this.drawEmpty(this.drawRight,r);let o=this.lines.length>this.height&&e+1>=this.height;return this.drawLine(e-s,this.drawRight,o,r)}drawTop(e){let r=[];return this.cells?this.widths.forEach(function(n,i){r.push(this._topLeftChar(i)),r.push(Cn.repeat(this.chars[this.y==0?"top":"mid"],n))},this):(r.push(this._topLeftChar(0)),r.push(Cn.repeat(this.chars[this.y==0?"top":"mid"],this.width))),e&&r.push(this.chars[this.y==0?"topRight":"rightMid"]),this.wrapWithStyleColors("border",r.join(""))}_topLeftChar(e){let r=this.x+e,n;if(this.y==0)n=r==0?"topLeft":e==0?"topMid":"top";else if(r==0)n="leftMid";else if(n=e==0?"midMid":"bottomMid",this.cells&&(this.cells[this.y-1][r]instanceof t.ColSpanCell&&(n=e==0?"topMid":"mid"),e==0)){let s=1;for(;this.cells[this.y][r-s]instanceof t.ColSpanCell;)s++;this.cells[this.y][r-s]instanceof t.RowSpanCell&&(n="leftMid")}return this.chars[n]}wrapWithStyleColors(e,r){if(this[e]&&this[e].length)try{let n=YB();for(let i=this[e].length-1;i>=0;i--)n=n[this[e][i]];return n(r)}catch{return r}else return r}drawLine(e,r,n,i){let s=this.chars[this.x==0?"left":"middle"];if(this.x&&i&&this.cells){let h=this.cells[this.y+i][this.x-1];for(;h instanceof Tf;)h=this.cells[h.y][h.x-1];h instanceof Rf||(s=this.chars.rightMid)}let o=Cn.repeat(" ",this.paddingLeft),a=r?this.chars.right:"",l=Cn.repeat(" ",this.paddingRight),u=this.lines[e],c=this.width-(this.paddingLeft+this.paddingRight);n&&(u+=this.truncate||"\u2026");let f=Cn.truncate(u,c,this.truncate);return f=Cn.pad(f,c," ",this.hAlign),f=o+f+l,this.stylizeLine(s,f,a)}stylizeLine(e,r,n){return e=this.wrapWithStyleColors("border",e),n=this.wrapWithStyleColors("border",n),this.y===0&&(r=this.wrapWithStyleColors("head",r)),e+r+n}drawBottom(e){let r=this.chars[this.x==0?"bottomLeft":"bottomMid"],n=Cn.repeat(this.chars.bottom,this.width),i=e?this.chars.bottomRight:"";return this.wrapWithStyleColors("border",r+n+i)}drawEmpty(e,r){let n=this.chars[this.x==0?"left":"middle"];if(this.x&&r&&this.cells){let o=this.cells[this.y+r][this.x-1];for(;o instanceof Tf;)o=this.cells[o.y][o.x-1];o instanceof Rf||(n=this.chars.rightMid)}let i=e?this.chars.right:"",s=Cn.repeat(" ",this.width);return this.stylizeLine(n,s,i)}},Tf=class{constructor(){}draw(e){return typeof e=="number"&&JB(`${this.y}-${this.x}: 1x1 ColSpanCell`),""}init(){}mergeTableOptions(){}},Rf=class{constructor(e){this.originalCell=e}init(e){let r=this.y,n=this.originalCell.y;this.cellOffset=r-n,this.offset=PZ(e.rowHeights,n,this.cellOffset)}draw(e){return e=="top"?this.originalCell.draw(this.offset,this.cellOffset):e=="bottom"?this.originalCell.draw("bottom"):(JB(`${this.y}-${this.x}: 1x${this.colSpan} RowSpanCell for ${this.originalCell.content}`),this.originalCell.draw(this.offset+1+e))}mergeTableOptions(){}};function VB(...t){return t.filter(e=>e!=null).shift()}function j1(t,e,r,n){let i=r.split("-");i.length>1?(i[1]=i[1].charAt(0).toUpperCase()+i[1].substr(1),i=i.join(""),n[i]=VB(t[i],t[r],e[i],e[r])):n[r]=VB(t[r],e[r])}function PZ(t,e,r){let n=t[e];for(let i=1;i<r;i++)n+=1+t[e+i];return n}function XB(t,e){return t+e+1}var FZ=["top","top-mid","top-left","top-right","bottom","bottom-mid","bottom-left","bottom-right","left","left-mid","mid","mid-mid","right","right-mid","middle"];sg.exports=$1;sg.exports.ColSpanCell=Tf;sg.exports.RowSpanCell=Rf});var r6=x((Kle,t6)=>{var{warn:LZ,debug:MZ}=ng(),K1=ZB(),{ColSpanCell:UZ,RowSpanCell:qZ}=K1;(function(){function t(p,g){return p[g]>0?t(p,g+1):g}function e(p){let g={};p.forEach(function(m,E){let A=0;m.forEach(function(w){w.y=E,w.x=E?t(g,A):A;let k=w.rowSpan||1,S=w.colSpan||1;if(k>1)for(let B=0;B<S;B++)g[w.x+B]=k;A=w.x+S}),Object.keys(g).forEach(w=>{g[w]--,g[w]<1&&delete g[w]})})}function r(p){let g=0;return p.forEach(function(m){m.forEach(function(E){g=Math.max(g,E.x+(E.colSpan||1))})}),g}function n(p){return p.length}function i(p,g){let m=p.y,E=p.y-1+(p.rowSpan||1),A=g.y,w=g.y-1+(g.rowSpan||1),k=!(m>w||A>E),S=p.x,B=p.x-1+(p.colSpan||1),F=g.x,M=g.x-1+(g.colSpan||1),D=!(S>M||F>B);return k&&D}function s(p,g,m){let E=Math.min(p.length-1,m),A={x:g,y:m};for(let w=0;w<=E;w++){let k=p[w];for(let S=0;S<k.length;S++)if(i(A,k[S]))return!0}return!1}function o(p,g,m,E){for(let A=m;A<E;A++)if(s(p,A,g))return!1;return!0}function a(p){p.forEach(function(g,m){g.forEach(function(E){for(let A=1;A<E.rowSpan;A++){let w=new qZ(E);w.x=E.x,w.y=E.y+A,w.colSpan=E.colSpan,u(w,p[m+A])}})})}function l(p){for(let g=p.length-1;g>=0;g--){let m=p[g];for(let E=0;E<m.length;E++){let A=m[E];for(let w=1;w<A.colSpan;w++){let k=new UZ;k.x=A.x+w,k.y=A.y,m.splice(E+1,0,k)}}}}function u(p,g){let m=0;for(;m<g.length&&g[m].x<p.x;)m++;g.splice(m,0,p)}function c(p){let g=n(p),m=r(p);MZ(`Max rows: ${g}; Max cols: ${m}`);for(let E=0;E<g;E++)for(let A=0;A<m;A++)if(!s(p,A,E)){let w={x:A,y:E,colSpan:1,rowSpan:1};for(A++;A<m&&!s(p,A,E);)w.colSpan++,A++;let k=E+1;for(;k<g&&o(p,k,w.x,w.x+w.colSpan);)w.rowSpan++,k++;let S=new K1(w);S.x=w.x,S.y=w.y,LZ(`Missing cell at ${S.y}-${S.x}.`),u(S,p[E])}}function f(p){return p.map(function(g){if(!Array.isArray(g)){let m=Object.keys(g)[0];g=g[m],Array.isArray(g)?(g=g.slice(),g.unshift(m)):g=[m,g]}return g.map(function(m){return new K1(m)})})}function h(p){let g=f(p);return e(g),c(g),a(g),l(g),g}t6.exports={makeTableLayout:h,layoutTable:e,addRowSpanCells:a,maxWidth:r,fillInTable:c,computeWidths:e6("colSpan","desiredWidth","x",1),computeHeights:e6("rowSpan","desiredHeight","y",1)}})();function e6(t,e,r,n){return function(i,s){let o=[],a=[],l={};s.forEach(function(u){u.forEach(function(c){(c[t]||1)>1?a.push(c):o[c[r]]=Math.max(o[c[r]]||0,c[e]||0,n)})}),i.forEach(function(u,c){typeof u=="number"&&(o[c]=u)});for(let u=a.length-1;u>=0;u--){let c=a[u],f=c[t],h=c[r],p=o[h],g=typeof i[h]=="number"?0:1;if(typeof p=="number")for(let m=1;m<f;m++)p+=1+o[h+m],typeof i[h+m]!="number"&&g++;else p=e==="desiredWidth"?c.desiredWidth-1:1,(!l[h]||l[h]<p)&&(l[h]=p);if(c[e]>p){let m=0;for(;g>0&&c[e]>p;){if(typeof i[h+m]!="number"){let E=Math.round((c[e]-p)/g);p+=E,o[h+m]+=E,g--}m++}}}Object.assign(i,o,l);for(let u=0;u<i.length;u++)i[u]=Math.max(n,i[u]||0)}}});var i6=x((zle,n6)=>{var ms=ng(),HZ=Q1(),z1=r6(),og=class extends Array{constructor(e){super();let r=HZ.mergeOptions(e);if(Object.defineProperty(this,"options",{value:r,enumerable:r.debug}),r.debug){switch(typeof r.debug){case"boolean":ms.setDebugLevel(ms.WARN);break;case"number":ms.setDebugLevel(r.debug);break;case"string":ms.setDebugLevel(parseInt(r.debug,10));break;default:ms.setDebugLevel(ms.WARN),ms.warn(`Debug option is expected to be boolean, number, or string. Received a ${typeof r.debug}`)}Object.defineProperty(this,"messages",{get(){return ms.debugMessages()}})}}toString(){let e=this,r=this.options.head&&this.options.head.length;r?(e=[this.options.head],this.length&&e.push.apply(e,this)):this.options.style.head=[];let n=z1.makeTableLayout(e);n.forEach(function(s){s.forEach(function(o){o.mergeTableOptions(this.options,n)},this)},this),z1.computeWidths(this.options.colWidths,n),z1.computeHeights(this.options.rowHeights,n),n.forEach(function(s){s.forEach(function(o){o.init(this.options)},this)},this);let i=[];for(let s=0;s<n.length;s++){let o=n[s],a=this.options.rowHeights[s];(s===0||!this.options.style.compact||s==1&&r)&&Y1(o,"top",i);for(let l=0;l<a;l++)Y1(o,l,i);s+1==n.length&&Y1(o,"bottom",i)}return i.join(`
`)}get width(){return this.toString().split(`
`)[0].length}};og.reset=()=>ms.reset();function Y1(t,e,r){let n=[];t.forEach(function(s){n.push(s.draw(e))});let i=n.join("");i.length&&r.push(i)}n6.exports=og});var o6=x((Yle,s6)=>{s6.exports=i6()});var l6=x((Xle,a6)=>{a6.exports=require("events")});var c6=x((Zle,u6)=>{u6.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var X1=x((tue,h6)=>{var f6=c6();h6.exports=class{constructor(e){this.hwm=e||16,this.head=new f6(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let r=this.head;this.head=r.next=new f6(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var Zl=x((rue,d6)=>{function WZ(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function QZ(t){return Buffer.isEncoding(t)}function GZ(t,e,r){return Buffer.alloc(t,e,r)}function jZ(t){return Buffer.allocUnsafe(t)}function $Z(t){return Buffer.allocUnsafeSlow(t)}function KZ(t,e){return Buffer.byteLength(t,e)}function zZ(t,e){return Buffer.compare(t,e)}function YZ(t,e){return Buffer.concat(t,e)}function VZ(t,e,r,n,i){return Rt(t).copy(e,r,n,i)}function XZ(t,e){return Rt(t).equals(e)}function JZ(t,e,r,n,i){return Rt(t).fill(e,r,n,i)}function ZZ(t,e,r){return Buffer.from(t,e,r)}function eee(t,e,r,n){return Rt(t).includes(e,r,n)}function tee(t,e,r,n){return Rt(t).indexOf(e,r,n)}function ree(t,e,r,n){return Rt(t).lastIndexOf(e,r,n)}function nee(t){return Rt(t).swap16()}function iee(t){return Rt(t).swap32()}function see(t){return Rt(t).swap64()}function Rt(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function oee(t,e,r,n){return Rt(t).toString(e,r,n)}function aee(t,e,r,n,i){return Rt(t).write(e,r,n,i)}function lee(t,e){return Rt(t).readDoubleBE(e)}function uee(t,e){return Rt(t).readDoubleLE(e)}function cee(t,e){return Rt(t).readFloatBE(e)}function fee(t,e){return Rt(t).readFloatLE(e)}function hee(t,e){return Rt(t).readInt32BE(e)}function dee(t,e){return Rt(t).readInt32LE(e)}function pee(t,e){return Rt(t).readUInt32BE(e)}function gee(t,e){return Rt(t).readUInt32LE(e)}function mee(t,e,r){return Rt(t).writeDoubleBE(e,r)}function _ee(t,e,r){return Rt(t).writeDoubleLE(e,r)}function Eee(t,e,r){return Rt(t).writeFloatBE(e,r)}function yee(t,e,r){return Rt(t).writeFloatLE(e,r)}function Aee(t,e,r){return Rt(t).writeInt32BE(e,r)}function vee(t,e,r){return Rt(t).writeInt32LE(e,r)}function bee(t,e,r){return Rt(t).writeUInt32BE(e,r)}function See(t,e,r){return Rt(t).writeUInt32LE(e,r)}d6.exports={isBuffer:WZ,isEncoding:QZ,alloc:GZ,allocUnsafe:jZ,allocUnsafeSlow:$Z,byteLength:KZ,compare:zZ,concat:YZ,copy:VZ,equals:XZ,fill:JZ,from:ZZ,includes:eee,indexOf:tee,lastIndexOf:ree,swap16:nee,swap32:iee,swap64:see,toBuffer:Rt,toString:oee,write:aee,readDoubleBE:lee,readDoubleLE:uee,readFloatBE:cee,readFloatLE:fee,readInt32BE:hee,readInt32LE:dee,readUInt32BE:pee,readUInt32LE:gee,writeDoubleBE:mee,writeDoubleLE:_ee,writeFloatBE:Eee,writeFloatLE:yee,writeInt32BE:Aee,writeInt32LE:vee,writeUInt32BE:bee,writeUInt32LE:See}});var g6=x((iue,p6)=>{var Cee=Zl();p6.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return Cee.toString(e,this.encoding)}flush(){return""}}});var _6=x((oue,m6)=>{var wee=Zl();m6.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let n=!0;for(let i=Math.max(0,e.byteLength-4),s=e.byteLength;i<s&&n;i++)n=e[i]<=127;if(n)return wee.toString(e,"utf8")}let r="";for(let n=0,i=e.byteLength;n<i;n++){let s=e[n];if(this.bytesNeeded===0){s<=127?r+=String.fromCharCode(s):(this.bytesSeen=1,s>=194&&s<=223?(this.bytesNeeded=2,this.codePoint=s&31):s>=224&&s<=239?(s===224?this.lowerBoundary=160:s===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=s&15):s>=240&&s<=244?(s===240&&(this.lowerBoundary=144),s===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=s&7):r+="\uFFFD");continue}if(s<this.lowerBoundary||s>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,r+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|s&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(r+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return r}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var y6=x((lue,E6)=>{var xee=g6(),Dee=_6();E6.exports=class{constructor(e="utf8"){switch(this.encoding=Iee(e),this.encoding){case"utf8":this.decoder=new Dee;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new xee(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let r="";return e&&(r=this.push(e)),r+=this.decoder.flush(),r}};function Iee(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var dS=x((uue,W6)=>{var{EventEmitter:Tee}=l6(),hg=new Error("Stream was destroyed"),J1=new Error("Premature close"),w6=X1(),Ree=y6(),Z1=typeof queueMicrotask>"u"?t=>global.process.nextTick(t):queueMicrotask,Gt=(1<<29)-1,Hi=1,oS=2,fa=4,kf=8,x6=Gt^Hi,kee=Gt^oS,Ff=16,eu=32,nu=64,_o=128,Lf=256,aS=512,ha=1024,eS=2048,lS=4096,uS=8192,hi=16384,mo=32768,dg=65536,da=131072,D6=Lf|aS,Oee=Ff|dg,Nee=nu|Ff,Bee=lS|_o,cS=Lf|da,Pee=Gt^Ff,Fee=Gt^nu,Lee=Gt^(nu|dg),A6=Gt^dg,Mee=Gt^Lf,Uee=Gt^(_o|uS),qee=Gt^ha,v6=Gt^D6,I6=Gt^mo,Hee=Gt^eu,T6=Gt^da,Wee=Gt^cS,_s=1<<18,ru=2<<18,Mf=4<<18,pa=8<<18,Uf=16<<18,Eo=32<<18,tS=64<<18,tu=128<<18,fS=256<<18,ga=512<<18,pg=1024<<18,Qee=Gt^(_s|fS),R6=Gt^Mf,Gee=Gt^(_s|ga),jee=Gt^Uf,$ee=Gt^pa,k6=Gt^tu,Kee=Gt^ru,O6=Gt^pg,Of=Ff|_s,N6=Gt^Of,hS=hi|Eo,Wi=fa|kf|oS,wn=Wi|Hi,B6=Wi|hS,zee=R6&Fee,gg=tu|mo,Yee=gg&N6,P6=wn|Yee,Vee=wn|ha|hi,b6=wn|hi|_o,Xee=wn|ha|_o,Jee=wn|lS|_o|uS,Zee=wn|Ff|ha|hi|dg|da,ete=Wi|ha|hi,tte=eu|wn|mo|nu,rte=mo|Hi,nte=wn|ga|Eo,ite=pa|Uf,F6=pa|_s,ste=pa|Uf|wn|_s,S6=wn|_s|pa|pg,ote=Mf|_s,ate=_s|fS,lte=wn|ga|F6|Eo,ute=Uf|Wi|ga|Eo,cte=ru|wn|tu|Mf,fte=ga|Eo|Wi,ag=Symbol.asyncIterator||Symbol("asyncIterator"),lg=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapWritable:i,byteLength:s,byteLengthWritable:o}={}){this.stream=e,this.queue=new w6,this.highWaterMark=r,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||s||H6,this.map=i||n,this.afterWrite=pte.bind(this),this.afterUpdateNextTick=_te.bind(this)}get ended(){return(this.stream._duplexState&Eo)!==0}push(e){return(this.stream._duplexState&fte)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=pa,!0):(this.stream._duplexState|=ite,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=$ee),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|ga)&R6}autoBatch(e,r){let n=[],i=this.stream;for(n.push(e);(i._duplexState&S6)===F6;)n.push(i._writableState.shift());if((i._duplexState&wn)!==0)return r(null);i._writev(n,r)}update(){let e=this.stream;e._duplexState|=ru;do{for(;(e._duplexState&S6)===pa;){let r=this.shift();e._duplexState|=ate,e._write(r,this.afterWrite)}(e._duplexState&ote)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Kee}updateNonPrimary(){let e=this.stream;if((e._duplexState&lte)===ga){e._duplexState=e._duplexState|_s,e._final(dte.bind(this));return}if((e._duplexState&Wi)===fa){(e._duplexState&gg)===0&&(e._duplexState|=Of,e._destroy(L6.bind(this)));return}(e._duplexState&P6)===Hi&&(e._duplexState=(e._duplexState|Of)&x6,e._open(M6.bind(this)))}continueUpdate(){return(this.stream._duplexState&tu)===0?!1:(this.stream._duplexState&=k6,!0)}updateCallback(){(this.stream._duplexState&cte)===Mf?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&tu)===0&&(this.stream._duplexState|=tu,(this.stream._duplexState&ru)===0&&Z1(this.afterUpdateNextTick))}},rS=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapReadable:i,byteLength:s,byteLengthReadable:o}={}){this.stream=e,this.queue=new w6,this.highWaterMark=r===0?1:r,this.buffered=0,this.readAhead=r>0,this.error=null,this.pipeline=null,this.byteLength=o||s||H6,this.map=i||n,this.pipeTo=null,this.afterRead=gte.bind(this),this.afterUpdateNextTick=mte.bind(this)}get ended(){return(this.stream._duplexState&hi)!==0}pipe(e,r){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof r!="function"&&(r=null),this.stream._duplexState|=aS,this.pipeTo=e,this.pipeline=new iS(this.stream,e,r),r&&this.stream.on("error",C6),Pf(e))e._writableState.pipeline=this.pipeline,r&&e.on("error",C6),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let n=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",n),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",hte.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let r=this.stream;return e===null?(this.highWaterMark=0,r._duplexState=(r._duplexState|ha)&Lee,!1):this.map!==null&&(e=this.map(e),e===null)?(r._duplexState&=A6,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),r._duplexState=(r._duplexState|_o)&A6,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Uee),e}unshift(e){let r=[this.map!==null?this.map(e):e];for(;this.buffered>0;)r.push(this.shift());for(let n=0;n<r.length-1;n++){let i=r[n];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(r[r.length-1])}read(){let e=this.stream;if((e._duplexState&b6)===_o){let r=this.shift();return this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=v6),(e._duplexState&eS)!==0&&e.emit("data",r),r}return this.readAhead===!1&&(e._duplexState|=da,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&b6)===_o&&(e._duplexState&D6)!==0;){let r=this.shift();this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=v6),(e._duplexState&eS)!==0&&e.emit("data",r)}}update(){let e=this.stream;e._duplexState|=eu;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&Zee)===da;)e._duplexState|=Oee,e._read(this.afterRead),this.drain();(e._duplexState&Jee)===Bee&&(e._duplexState|=uS,e.emit("readable")),(e._duplexState&Nee)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Hee}updateNonPrimary(){let e=this.stream;if((e._duplexState&Xee)===ha&&(e._duplexState=(e._duplexState|hi)&qee,e.emit("end"),(e._duplexState&B6)===hS&&(e._duplexState|=fa),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&Wi)===fa){(e._duplexState&gg)===0&&(e._duplexState|=Of,e._destroy(L6.bind(this)));return}(e._duplexState&P6)===Hi&&(e._duplexState=(e._duplexState|Of)&x6,e._open(M6.bind(this)))}continueUpdate(){return(this.stream._duplexState&mo)===0?!1:(this.stream._duplexState&=I6,!0)}updateCallback(){(this.stream._duplexState&tte)===nu?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&rte)===0&&(this.stream._duplexState|=mo,(this.stream._duplexState&eu)===0&&Z1(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&mo)===0&&(this.stream._duplexState|=mo,(this.stream._duplexState&eu)===0&&Z1(this.afterUpdateNextTick))}},nS=class{constructor(e){this.data=null,this.afterTransform=yte.bind(e),this.afterFinal=null}},iS=class{constructor(e,r,n){this.from=e,this.to=r,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,r){if(r&&(this.error=r),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&hi)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&hi)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function hte(){this.stream._duplexState|=aS,this.updateCallback()}function dte(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Wi)===0&&(e._duplexState|=Eo,e.emit("finish")),(e._duplexState&B6)===hS&&(e._duplexState|=fa),e._duplexState&=Gee,(e._duplexState&ru)===0?this.update():this.updateNextTick()}function L6(t){let e=this.stream;!t&&this.error!==hg&&(t=this.error),t&&e.emit("error",t),e._duplexState|=kf,e.emit("close");let r=e._readableState,n=e._writableState;if(r!==null&&r.pipeline!==null&&r.pipeline.done(e,t),n!==null){for(;n.drains!==null&&n.drains.length>0;)n.drains.shift().resolve(!1);n.pipeline!==null&&n.pipeline.done(e,t)}}function pte(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=Qee,this.drains!==null&&Ete(this.drains),(e._duplexState&ste)===Uf&&(e._duplexState&=jee,(e._duplexState&tS)===tS&&e.emit("drain")),this.updateCallback()}function gte(t){t&&this.stream.destroy(t),this.stream._duplexState&=Pee,this.readAhead===!1&&(this.stream._duplexState&Lf)===0&&(this.stream._duplexState&=T6),this.updateCallback()}function mte(){(this.stream._duplexState&eu)===0&&(this.stream._duplexState&=I6,this.update())}function _te(){(this.stream._duplexState&ru)===0&&(this.stream._duplexState&=k6,this.update())}function Ete(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function M6(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&fa)===0&&((e._duplexState&Vee)===0&&(e._duplexState|=nu),(e._duplexState&nte)===0&&(e._duplexState|=Mf),e.emit("open")),e._duplexState&=N6,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function yte(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function Ate(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=eS|cS,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=lS,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=tS,this._writableState.updateNextTick())}var Nf=class extends Tee{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",Rte.bind(this))),this.on("newListener",Ate)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&kf)!==0}get destroying(){return(this._duplexState&Wi)!==0}destroy(e){(this._duplexState&Wi)===0&&(e||(e=hg),this._duplexState=(this._duplexState|fa)&zee,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=oS,this._predestroy(),this._duplexState&=kee,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},ug=class t extends Nf{constructor(e){super(e),this._duplexState|=Hi|Eo|da,this._readableState=new rS(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=T6),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let r=new Ree(e),n=this._readableState.map||Ste;return this._readableState.map=i,this;function i(s){let o=r.push(s);return o===""&&(s.byteLength!==0||r.remaining>0)?null:n(o)}}_read(e){e(null)}pipe(e,r){return this._readableState.updateNextTick(),this._readableState.pipe(e,r),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=cS,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?Wee:Mee,this}static _fromAsyncIterator(e,r){let n,i=new t({...r,read(o){e.next().then(s).then(o.bind(null,null)).catch(o)},predestroy(){n=e.return()},destroy(o){if(!n)return o(null);n.then(o.bind(null,null)).catch(o)}});return i;function s(o){o.done?i.push(null):i.push(o.value)}}static from(e,r){if(Dte(e))return e;if(e[ag])return this._fromAsyncIterator(e[ag](),r);Array.isArray(e)||(e=e===void 0?[]:[e]);let n=0;return new t({...r,read(i){this.push(n===e.length?null:e[n++]),i(null)}})}static isBackpressured(e){return(e._duplexState&ete)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&Lf)===0}[ag](){let e=this,r=null,n=null,i=null;return this.on("error",u=>{r=u}),this.on("readable",s),this.on("close",o),{[ag](){return this},next(){return new Promise(function(u,c){n=u,i=c;let f=e.read();f!==null?a(f):(e._duplexState&kf)!==0&&a(null)})},return(){return l(null)},throw(u){return l(u)}};function s(){n!==null&&a(e.read())}function o(){n!==null&&a(null)}function a(u){i!==null&&(r?i(r):u===null&&(e._duplexState&hi)===0?i(hg):n({value:u,done:u===null}),i=n=null)}function l(u){return e.destroy(u),new Promise((c,f)=>{if(e._duplexState&kf)return c({value:void 0,done:!0});e.once("close",function(){u?f(u):c({value:void 0,done:!0})})})}}},cg=class extends Nf{constructor(e){super(e),this._duplexState|=Hi|hi,this._writableState=new lg(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=pg}uncork(){this._duplexState&=O6,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&ute)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let r=e._writableState,i=(kte(e)?Math.min(1,r.queue.length):r.queue.length)+(e._duplexState&fS?1:0);return i===0?Promise.resolve(!0):(r.drains===null&&(r.drains=[]),new Promise(s=>{r.drains.push({writes:i,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Bf=class extends ug{constructor(e){super(e),this._duplexState=Hi|this._duplexState&da,this._writableState=new lg(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=pg}uncork(){this._duplexState&=O6,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},fg=class extends Bf{constructor(e){super(e),this._transformState=new nS(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,r){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let r=this._transformState.data;this._transformState.data=null,e(null),this._transform(r,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,r){r(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(vte.bind(this))}},sS=class extends fg{};function vte(t,e){let r=this._transformState.afterFinal;if(t)return r(t);e!=null&&this.push(e),this.push(null),r(null)}function bte(...t){return new Promise((e,r)=>U6(...t,n=>{if(n)return r(n);e()}))}function U6(t,...e){let r=Array.isArray(t)?[...t,...e]:[t,...e],n=r.length&&typeof r[r.length-1]=="function"?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let i=r[0],s=null,o=null;for(let u=1;u<r.length;u++)s=r[u],Pf(i)?i.pipe(s,l):(a(i,!0,u>1,l),i.pipe(s)),i=s;if(n){let u=!1,c=Pf(s)||!!(s._writableState&&s._writableState.autoDestroy);s.on("error",f=>{o===null&&(o=f)}),s.on("finish",()=>{u=!0,c||n(o)}),c&&s.on("close",()=>n(o||(u?null:J1)))}return s;function a(u,c,f,h){u.on("error",h),u.on("close",p);function p(){if(c&&u._readableState&&!u._readableState.ended||f&&u._writableState&&!u._writableState.ended)return h(J1)}}function l(u){if(!(!u||o)){o=u;for(let c of r)c.destroy(u)}}}function Ste(t){return t}function q6(t){return!!t._readableState||!!t._writableState}function Pf(t){return typeof t._duplexState=="number"&&q6(t)}function Cte(t){return!!t._readableState&&t._readableState.ended}function wte(t){return!!t._writableState&&t._writableState.ended}function xte(t,e={}){let r=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&r===hg?null:r}function Dte(t){return Pf(t)&&t.readable}function Ite(t){return(t._duplexState&Hi)!==Hi||(t._duplexState&gg)!==0}function Tte(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function H6(t){return Tte(t)?t.byteLength:1024}function C6(){}function Rte(){this.destroy(new Error("Stream aborted."))}function kte(t){return t._writev!==cg.prototype._writev&&t._writev!==Bf.prototype._writev}W6.exports={pipeline:U6,pipelinePromise:bte,isStream:q6,isStreamx:Pf,isEnded:Cte,isFinished:wte,isDisturbed:Ite,getStreamError:xte,Stream:Nf,Writable:cg,Readable:ug,Duplex:Bf,Transform:fg,PassThrough:sS}});var mS=x(su=>{var gt=Zl(),Ote="0000000000000000000",Nte="7777777777777777777",mg=48,Q6=gt.from([117,115,116,97,114,0]),Bte=gt.from([mg,mg]),Pte=gt.from([117,115,116,97,114,32]),Fte=gt.from([32,0]),Lte=4095,qf=257,gS=263;su.decodeLongPath=function(e,r){return iu(e,0,e.length,r)};su.encodePax=function(e){let r="";e.name&&(r+=pS(" path="+e.name+`
`)),e.linkname&&(r+=pS(" linkpath="+e.linkname+`
`));let n=e.pax;if(n)for(let i in n)r+=pS(" "+i+"="+n[i]+`
`);return gt.from(r)};su.decodePax=function(e){let r={};for(;e.length;){let n=0;for(;n<e.length&&e[n]!==32;)n++;let i=parseInt(gt.toString(e.subarray(0,n)),10);if(!i)return r;let s=gt.toString(e.subarray(n+1,i-1)),o=s.indexOf("=");if(o===-1)return r;r[s.slice(0,o)]=s.slice(o+1),e=e.subarray(i)}return r};su.encode=function(e){let r=gt.alloc(512),n=e.name,i="";if(e.typeflag===5&&n[n.length-1]!=="/"&&(n+="/"),gt.byteLength(n)!==n.length)return null;for(;gt.byteLength(n)>100;){let s=n.indexOf("/");if(s===-1)return null;i+=i?"/"+n.slice(0,s):n.slice(0,s),n=n.slice(s+1)}return gt.byteLength(n)>100||gt.byteLength(i)>155||e.linkname&&gt.byteLength(e.linkname)>100?null:(gt.write(r,n),gt.write(r,Ao(e.mode&Lte,6),100),gt.write(r,Ao(e.uid,6),108),gt.write(r,Ao(e.gid,6),116),Gte(e.size,r,124),gt.write(r,Ao(e.mtime.getTime()/1e3|0,11),136),r[156]=mg+Wte(e.type),e.linkname&&gt.write(r,e.linkname,157),gt.copy(Q6,r,qf),gt.copy(Bte,r,gS),e.uname&&gt.write(r,e.uname,265),e.gname&&gt.write(r,e.gname,297),gt.write(r,Ao(e.devmajor||0,6),329),gt.write(r,Ao(e.devminor||0,6),337),i&&gt.write(r,i,345),gt.write(r,Ao(j6(r),6),148),r)};su.decode=function(e,r,n){let i=e[156]===0?0:e[156]-mg,s=iu(e,0,100,r),o=yo(e,100,8),a=yo(e,108,8),l=yo(e,116,8),u=yo(e,124,12),c=yo(e,136,12),f=Hte(i),h=e[157]===0?null:iu(e,157,100,r),p=iu(e,265,32),g=iu(e,297,32),m=yo(e,329,8),E=yo(e,337,8),A=j6(e);if(A===256)return null;if(A!==yo(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Mte(e))e[345]&&(s=iu(e,345,155,r)+"/"+s);else if(!Ute(e)){if(!n)throw new Error("Invalid tar header: unknown format.")}return i===0&&s&&s[s.length-1]==="/"&&(i=5),{name:s,mode:o,uid:a,gid:l,size:u,mtime:new Date(1e3*c),type:f,linkname:h,uname:p,gname:g,devmajor:m,devminor:E,pax:null}};function Mte(t){return gt.equals(Q6,t.subarray(qf,qf+6))}function Ute(t){return gt.equals(Pte,t.subarray(qf,qf+6))&&gt.equals(Fte,t.subarray(gS,gS+2))}function qte(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Hte(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function Wte(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function G6(t,e,r,n){for(;r<n;r++)if(t[r]===e)return r;return n}function j6(t){let e=256;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e}function Ao(t,e){return t=t.toString(8),t.length>e?Nte.slice(0,e)+" ":Ote.slice(0,e-t.length)+t+" "}function Qte(t,e,r){e[r]=128;for(let n=11;n>0;n--)e[r+n]=t&255,t=Math.floor(t/256)}function Gte(t,e,r){t.toString(8).length>11?Qte(t,e,r):gt.write(e,Ao(t,11),r)}function jte(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let r=[],n;for(n=t.length-1;n>0;n--){let o=t[n];e?r.push(o):r.push(255-o)}let i=0,s=r.length;for(n=0;n<s;n++)i+=r[n]*Math.pow(256,n);return e?i:-1*i}function yo(t,e,r){if(t=t.subarray(e,e+r),e=0,t[e]&128)return jte(t);{for(;e<t.length&&t[e]===32;)e++;let n=qte(G6(t,32,e,t.length),t.length,t.length);for(;e<n&&t[e]===0;)e++;return n===e?0:parseInt(gt.toString(t.subarray(e,n)),8)}}function iu(t,e,r,n){return gt.toString(t.subarray(e,G6(t,0,e,e+r)),n)}function pS(t){let e=gt.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t}});var V6=x((fue,Y6)=>{var{Writable:$te,Readable:Kte,getStreamError:$6}=dS(),zte=X1(),K6=Zl(),ou=mS(),Yte=K6.alloc(0),ES=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new zte,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return Yte;let r=this._next(e);if(e===r.byteLength)return r;let n=[r];for(;(e-=r.byteLength)>0;)r=this._next(e),n.push(r);return K6.concat(n)}_next(e){let r=this.queue.peek(),n=r.byteLength-this._offset;if(e>=n){let i=this._offset?r.subarray(this._offset,r.byteLength):r;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,i}return this.buffered-=e,this.shifted+=e,r.subarray(this._offset,this._offset+=e)}},yS=class extends Kte{constructor(e,r,n){super(),this.header=r,this.offset=n,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy($6(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=z6(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},AS=class extends $te{constructor(e){super(e),e||(e={}),this._buffer=new ES,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=_S,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=ou.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=ou.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=ou.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=ou.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?ou.decodePax(e):Object.assign({},this._paxGlobal,ou.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=z6(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(r){return this._continueWrite(r),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let r=this._stream.push(e);return this._missing===0?(this._stream.push(null),r&&this._stream._detach(),r&&this._locked===!1):r}_createStream(){return new yS(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let r=this._callback;this._callback=_S,r(e)}_write(e,r){this._callback=r,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy($6(this)),e(null)}[Symbol.asyncIterator](){let e=null,r=null,n=null,i=null,s=null,o=this;return this.on("entry",u),this.on("error",h=>{e=h}),this.on("close",c),{[Symbol.asyncIterator](){return this},next(){return new Promise(l)},return(){return f(null)},throw(h){return f(h)}};function a(h){if(!s)return;let p=s;s=null,p(h)}function l(h,p){if(e)return p(e);if(i){h({value:i,done:!1}),i=null;return}r=h,n=p,a(null),o._finished&&r&&(r({value:void 0,done:!0}),r=n=null)}function u(h,p,g){s=g,p.on("error",_S),r?(r({value:p,done:!1}),r=n=null):i=p}function c(){a(e),r&&(e?n(e):r({value:void 0,done:!0}),r=n=null)}function f(h){return o.destroy(h),a(h),new Promise((p,g)=>{if(o.destroyed)return p({value:void 0,done:!0});o.once("close",function(){h?g(h):p({value:void 0,done:!0})})})}}};Y6.exports=function(e){return new AS(e)};function _S(){}function z6(t){return t&=511,t&&512-t}});var J6=x((hue,vS)=>{var X6={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{vS.exports=require("fs").constants||X6}catch{vS.exports=X6}});var nP=x((due,rP)=>{var{Readable:Vte,Writable:Xte,getStreamError:Z6}=dS(),ma=Zl(),au=J6(),_g=mS(),Jte=493,Zte=420,eP=ma.alloc(1024),SS=class extends Xte{constructor(e,r,n){super({mapWritable:tre,eagerOpen:!0}),this.written=0,this.header=r,this._callback=n,this._linkname=null,this._isLinkname=r.type==="symlink"&&!r.linkname,this._isVoid=r.type!=="file"&&r.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let r=this._callback;this._callback=null,r(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,r){if(this._isLinkname)return this._linkname=this._linkname?ma.concat([this._linkname,e]):e,r(null);if(this._isVoid)return e.byteLength>0?r(new Error("No body allowed for this entry")):r();if(this.written+=e.byteLength,this._pack.push(e))return r();this._pack._drain=r}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?ma.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),tP(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return Z6(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},CS=class extends Vte{constructor(e){super(e),this._drain=bS,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,r,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof r=="function"&&(n=r,r=null),n||(n=bS),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=ere(e.mode)),e.mode||(e.mode=e.type==="directory"?Jte:Zte),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=ma.from(r));let i=new SS(this,e,n);return ma.isBuffer(r)?(e.size=r.byteLength,i.write(r),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(eP),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let r=_g.encode(e);if(r){this.push(r);return}}this._encodePax(e)}_encodePax(e){let r=_g.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:r.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(_g.encode(n)),this.push(r),tP(this,r.byteLength),n.size=e.size,n.type=e.type,this.push(_g.encode(n))}_doDrain(){let e=this._drain;this._drain=bS,e()}_predestroy(){let e=Z6(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let r=this._pending.shift();r.destroy(e),r._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};rP.exports=function(e){return new CS(e)};function ere(t){switch(t&au.S_IFMT){case au.S_IFBLK:return"block-device";case au.S_IFCHR:return"character-device";case au.S_IFDIR:return"directory";case au.S_IFIFO:return"fifo";case au.S_IFLNK:return"symlink"}return"file"}function bS(){}function tP(t,e){e&=511,e&&t.push(eP.subarray(0,512-e))}function tre(t){return ma.isBuffer(t)?t:ma.from(t)}});var iP=x(wS=>{wS.extract=V6();wS.pack=nP()});var fP=x(IS=>{var sP=iP(),oP=ry(),xS=require("fs"),mr=require("path"),Hf=(global.Bare?global.Bare.platform:process.platform)==="win32";IS.pack=function(e,r){e||(e="."),r||(r={});let n=r.fs||xS,i=r.ignore||r.filter||Wf,s=r.mapStream||uP,o=ire(n,r.dereference?n.stat:n.lstat,e,i,r.entries,r.sort),a=r.strict!==!1,l=typeof r.umask=="number"?~r.umask:~aP(),u=r.pack||sP.pack(),c=r.finish||Wf,f=r.map||Wf,h=typeof r.dmode=="number"?r.dmode:0,p=typeof r.fmode=="number"?r.fmode:0;r.strip&&(f=cP(f,r.strip)),r.readable&&(h|=parseInt(555,8),p|=parseInt(444,8)),r.writable&&(h|=parseInt(333,8),p|=parseInt(222,8)),E();function g(A,w){n.readlink(mr.join(e,A),function(k,S){if(k)return u.destroy(k);w.linkname=DS(S),u.entry(w,E)})}function m(A,w,k){if(u.destroyed)return;if(A)return u.destroy(A);if(!w)return r.finalize!==!1&&u.finalize(),c(u);if(k.isSocket())return E();let S={name:DS(w),mode:(k.mode|(k.isDirectory()?h:p))&l,mtime:k.mtime,size:k.size,type:"file",uid:k.uid,gid:k.gid};if(k.isDirectory())return S.size=0,S.type="directory",S=f(S)||S,u.entry(S,E);if(k.isSymbolicLink())return S.size=0,S.type="symlink",S=f(S)||S,g(w,S);if(S=f(S)||S,!k.isFile())return a?u.destroy(new Error("unsupported type for "+w)):E();let B=u.entry(S,E),F=s(n.createReadStream(mr.join(e,w),{start:0,end:S.size>0?S.size-1:S.size}),S);F.on("error",function(M){B.destroy(M)}),oP(F,B)}function E(A){if(A)return u.destroy(A);o(m)}return u};function rre(t){return t.length?t[t.length-1]:null}function nre(){return!global.Bare&&process.getuid?process.getuid():-1}function aP(){return!global.Bare&&process.umask?process.umask():0}IS.extract=function(e,r){e||(e="."),r||(r={}),e=mr.resolve(e);let n=r.fs||xS,i=r.ignore||r.filter||Wf,s=r.mapStream||uP,o=r.chown!==!1&&!Hf&&nre()===0,a=r.extract||sP.extract(),l=[],u=new Date,c=typeof r.umask=="number"?~r.umask:~aP(),f=r.strict!==!1,h=r.validateSymlinks!==!1,p=r.map||Wf,g=typeof r.dmode=="number"?r.dmode:0,m=typeof r.fmode=="number"?r.fmode:0;return r.strip&&(p=cP(p,r.strip)),r.readable&&(g|=parseInt(555,8),m|=parseInt(444,8)),r.writable&&(g|=parseInt(333,8),m|=parseInt(222,8)),a.on("entry",E),r.finish&&a.on("finish",r.finish),a;function E(B,F,M){B=p(B)||B,B.name=DS(B.name);let D=mr.join(e,mr.join("/",B.name));if(i(D,B))return F.resume(),M();let I=mr.join(D,".")===mr.join(e,".")?e:mr.dirname(D);lP(n,I,mr.join(e,"."),function(O,z){if(O)return M(O);if(!z)return M(new Error(I+" is not a valid path"));if(B.type==="directory")return l.push([D,B.mtime]),S(D,{fs:n,own:o,uid:B.uid,gid:B.gid,mode:B.mode},N);S(I,{fs:n,own:o,uid:B.uid,gid:B.gid,mode:493},function(J){if(J)return M(J);switch(B.type){case"file":return y();case"link":return Q();case"symlink":return T()}if(f)return M(new Error("unsupported type for "+D+" ("+B.type+")"));F.resume(),M()})});function N(O){if(O)return M(O);w(D,B,function(z){if(z)return M(z);if(Hf)return M();k(D,B,M)})}function T(){if(Hf)return M();n.unlink(D,function(){let O=mr.resolve(mr.dirname(D),B.linkname);if(!P(O)&&h)return M(new Error(D+" is not a valid symlink"));n.symlink(B.linkname,D,N)})}function Q(){if(Hf)return M();n.unlink(D,function(){let O=mr.join(e,mr.join("/",B.linkname));xS.realpath(O,function(z,J){if(z||!P(J))return M(new Error(D+" is not a valid hardlink"));n.link(J,D,function(L){if(L&&L.code==="EPERM"&&r.hardlinkAsFilesFallback)return F=n.createReadStream(J),y();N(L)})})})}function P(O){return O===e||O.startsWith(e+mr.sep)}function y(){let O=n.createWriteStream(D),z=s(F,B);O.on("error",function(J){z.destroy(J)}),oP(z,O,function(J){if(J)return M(J);O.on("close",N)})}}function A(B,F){let M;for(;(M=rre(l))&&B.slice(0,M[0].length)!==M[0];)l.pop();if(!M)return F();n.utimes(M[0],u,M[1],F)}function w(B,F,M){if(r.utimes===!1)return M();if(F.type==="directory")return n.utimes(B,u,F.mtime,M);if(F.type==="symlink")return A(B,M);n.utimes(B,u,F.mtime,function(D){if(D)return M(D);A(B,M)})}function k(B,F,M){let D=F.type==="symlink",I=D?n.lchmod:n.chmod,N=D?n.lchown:n.chown;if(!I)return M();let T=(F.mode|(F.type==="directory"?g:m))&c;N&&o?N.call(n,B,F.uid,F.gid,Q):Q(null);function Q(P){if(P)return M(P);if(!I)return M();I.call(n,B,T,M)}}function S(B,F,M){n.stat(B,function(D){if(!D)return M(null);if(D.code!=="ENOENT")return M(D);n.mkdir(B,{mode:F.mode,recursive:!0},function(I,N){if(I)return M(I);k(B,F,M)})})}};function lP(t,e,r,n){if(e===r)return n(null,!0);t.lstat(e,function(i,s){if(i&&i.code!=="ENOENT"&&i.code!=="EPERM")return n(i);if(i||s.isDirectory())return lP(t,mr.join(e,".."),r,n);n(null,!1)})}function Wf(){}function uP(t){return t}function DS(t){return Hf?t.replace(/\\/g,"/").replace(/[:?<>|]/g,"_"):t}function ire(t,e,r,n,i,s){i||(i=["."]);let o=i.slice(0);return function(l){if(!o.length)return l(null);let u=o.shift(),c=mr.join(r,u);e.call(t,c,function(f,h){if(f)return l(i.indexOf(u)===-1&&f.code==="ENOENT"?null:f);if(!h.isDirectory())return l(null,u,h);t.readdir(c,function(p,g){if(p)return l(p);s&&g.sort();for(let m=0;m<g.length;m++)n(mr.join(r,u,g[m]))||o.push(mr.join(u,g[m]));l(null,u,h)})})}}function cP(t,e){return function(r){r.name=r.name.split("/").slice(e).join("/");let n=r.linkname;return n&&(r.type==="link"||mr.isAbsolute(n))&&(r.linkname=n.split("/").slice(e).join("/")),t(r)}}});var pC=Vt(dC(),1),{program:ene,createCommand:tne,createArgument:rne,createOption:nne,CommanderError:ine,InvalidArgumentError:sne,InvalidOptionArgumentError:one,Command:gC,Argument:ane,Option:lne,Help:une}=pC.default;var nw=Vt(require("fs"));function kC(t){return typeof t>"u"||t===null}function gF(t){return typeof t=="object"&&t!==null}function mF(t){return Array.isArray(t)?t:kC(t)?[]:[t]}function _F(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function EF(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function yF(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var AF=kC,vF=gF,bF=mF,SF=EF,CF=yF,wF=_F,hr={isNothing:AF,isObject:vF,toArray:bF,repeat:SF,isNegativeZero:CF,extend:wF};function OC(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Eu(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=OC(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Eu.prototype=Object.create(Error.prototype);Eu.prototype.constructor=Eu;Eu.prototype.toString=function(e){return this.name+": "+OC(this,e)};var Jr=Eu;function $g(t,e,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-e>a&&(s=" ... ",e=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+o,pos:n-e+s.length}}function Kg(t,e){return hr.repeat(" ",e-t.length)+t}function xF(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(t.buffer);)i.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",l,u,c=Math.min(t.line+e.linesAfter,i.length).toString().length,f=e.maxLength-(e.indent+c+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)u=$g(t.buffer,n[o-l],i[o-l],t.position-(n[o]-n[o-l]),f),a=hr.repeat(" ",e.indent)+Kg((t.line-l+1).toString(),c)+" | "+u.str+`
`+a;for(u=$g(t.buffer,n[o],i[o],t.position,f),a+=hr.repeat(" ",e.indent)+Kg((t.line+1).toString(),c)+" | "+u.str+`
`,a+=hr.repeat("-",e.indent+c+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=i.length);l++)u=$g(t.buffer,n[o+l],i[o+l],t.position-(n[o]-n[o+l]),f),a+=hr.repeat(" ",e.indent)+Kg((t.line+l+1).toString(),c)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var DF=xF,IF=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],TF=["scalar","sequence","mapping"];function RF(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function kF(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(IF.indexOf(r)===-1)throw new Jr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=RF(e.styleAliases||null),TF.indexOf(this.kind)===-1)throw new Jr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Lr=kF;function mC(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function OF(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function Yg(t){return this.extend(t)}Yg.prototype.extend=function(e){var r=[],n=[];if(e instanceof Lr)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Jr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof Lr))throw new Jr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Jr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Jr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Lr))throw new Jr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Yg.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=mC(i,"implicit"),i.compiledExplicit=mC(i,"explicit"),i.compiledTypeMap=OF(i.compiledImplicit,i.compiledExplicit),i};var NF=Yg,BF=new Lr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),PF=new Lr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),FF=new Lr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),LF=new NF({explicit:[BF,PF,FF]});function MF(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function UF(){return null}function qF(t){return t===null}var HF=new Lr("tag:yaml.org,2002:null",{kind:"scalar",resolve:MF,construct:UF,predicate:qF,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function WF(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function QF(t){return t==="true"||t==="True"||t==="TRUE"}function GF(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var jF=new Lr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:WF,construct:QF,predicate:GF,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function $F(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function KF(t){return 48<=t&&t<=55}function zF(t){return 48<=t&&t<=57}function YF(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!$F(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!KF(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!zF(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function VF(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function XF(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!hr.isNegativeZero(t)}var JF=new Lr("tag:yaml.org,2002:int",{kind:"scalar",resolve:YF,construct:VF,predicate:XF,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ZF=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function eL(t){return!(t===null||!ZF.test(t)||t[t.length-1]==="_")}function tL(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var rL=/^[-+]?[0-9]+e/;function nL(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(hr.isNegativeZero(t))return"-0.0";return r=t.toString(10),rL.test(r)?r.replace("e",".e"):r}function iL(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||hr.isNegativeZero(t))}var sL=new Lr("tag:yaml.org,2002:float",{kind:"scalar",resolve:eL,construct:tL,predicate:iL,represent:nL,defaultStyle:"lowercase"}),oL=LF.extend({implicit:[HF,jF,JF,sL]}),aL=oL,NC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),BC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function lL(t){return t===null?!1:NC.exec(t)!==null||BC.exec(t)!==null}function uL(t){var e,r,n,i,s,o,a,l=0,u=null,c,f,h;if(e=NC.exec(t),e===null&&(e=BC.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=+e[10],f=+(e[11]||0),u=(c*60+f)*6e4,e[9]==="-"&&(u=-u)),h=new Date(Date.UTC(r,n,i,s,o,a,l)),u&&h.setTime(h.getTime()-u),h}function cL(t){return t.toISOString()}var fL=new Lr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:lL,construct:uL,instanceOf:Date,represent:cL});function hL(t){return t==="<<"||t===null}var dL=new Lr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:hL}),em=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function pL(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=em;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function gL(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=em,o=0,a=[];for(e=0;e<i;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function mL(t){var e="",r=0,n,i,s=t.length,o=em;for(n=0;n<s;n++)n%3===0&&n&&(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]):i===2?(e+=o[r>>10&63],e+=o[r>>4&63],e+=o[r<<2&63],e+=o[64]):i===1&&(e+=o[r>>2&63],e+=o[r<<4&63],e+=o[64],e+=o[64]),e}function _L(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var EL=new Lr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:pL,construct:gL,predicate:_L,represent:mL}),yL=Object.prototype.hasOwnProperty,AL=Object.prototype.toString;function vL(t){if(t===null)return!0;var e=[],r,n,i,s,o,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,AL.call(i)!=="[object Object]")return!1;for(s in i)if(yL.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function bL(t){return t!==null?t:[]}var SL=new Lr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:vL,construct:bL}),CL=Object.prototype.toString;function wL(t){if(t===null)return!0;var e,r,n,i,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1){if(n=o[e],CL.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function xL(t){if(t===null)return[];var e,r,n,i,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1)n=o[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var DL=new Lr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:wL,construct:xL}),IL=Object.prototype.hasOwnProperty;function TL(t){if(t===null)return!0;var e,r=t;for(e in r)if(IL.call(r,e)&&r[e]!==null)return!1;return!0}function RL(t){return t!==null?t:{}}var kL=new Lr("tag:yaml.org,2002:set",{kind:"mapping",resolve:TL,construct:RL}),PC=aL.extend({implicit:[fL,dL],explicit:[EL,SL,DL,kL]}),bs=Object.prototype.hasOwnProperty,eh=1,FC=2,LC=3,th=4,zg=1,OL=2,_C=3,NL=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,BL=/[\x85\u2028\u2029]/,PL=/[,\[\]\{\}]/,MC=/^(?:!|!!|![a-z\-]+!)$/i,UC=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function EC(t){return Object.prototype.toString.call(t)}function gi(t){return t===10||t===13}function Co(t){return t===9||t===32}function Zr(t){return t===9||t===32||t===10||t===13}function Ca(t){return t===44||t===91||t===93||t===123||t===125}function FL(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function LL(t){return t===120?2:t===117?4:t===85?8:0}function ML(t){return 48<=t&&t<=57?t-48:-1}function yC(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function UL(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var qC=new Array(256),HC=new Array(256);for(So=0;So<256;So++)qC[So]=yC(So)?1:0,HC[So]=yC(So);var So;function qL(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||PC,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function WC(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=DF(r),new Jr(e,r)}function ke(t,e){throw WC(t,e)}function rh(t,e){t.onWarning&&t.onWarning.call(null,WC(t,e))}var AC={YAML:function(e,r,n){var i,s,o;e.version!==null&&ke(e,"duplication of %YAML directive"),n.length!==1&&ke(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ke(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&ke(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&rh(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,s;n.length!==2&&ke(e,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],MC.test(i)||ke(e,"ill-formed tag handle (first argument) of the TAG directive"),bs.call(e.tagMap,i)&&ke(e,'there is a previously declared suffix for "'+i+'" tag handle'),UC.test(s)||ke(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ke(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function vs(t,e,r,n){var i,s,o,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||ke(t,"expected valid JSON character");else NL.test(a)&&ke(t,"the stream contains non-printable characters");t.result+=a}}function vC(t,e,r,n){var i,s,o,a;for(hr.isObject(r)||ke(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],bs.call(e,s)||(e[s]=r[s],n[s]=!0)}function wa(t,e,r,n,i,s,o,a,l){var u,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,c=i.length;u<c;u+=1)Array.isArray(i[u])&&ke(t,"nested arrays are not supported inside keys"),typeof i=="object"&&EC(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&EC(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,c=s.length;u<c;u+=1)vC(t,e,s[u],r);else vC(t,e,s,r);else!t.json&&!bs.call(r,i)&&bs.call(e,i)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,ke(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete r[i];return e}function tm(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ke(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function or(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Co(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(gi(i))for(tm(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&rh(t,"deficient indentation"),n}function sh(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Zr(r)))}function rm(t,e){e===1?t.result+=" ":e>1&&(t.result+=hr.repeat(`
`,e-1))}function HL(t,e,r){var n,i,s,o,a,l,u,c,f=t.kind,h=t.result,p;if(p=t.input.charCodeAt(t.position),Zr(p)||Ca(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),Zr(i)||r&&Ca(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),Zr(i)||r&&Ca(i))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),Zr(n))break}else{if(t.position===t.lineStart&&sh(t)||r&&Ca(p))break;if(gi(p))if(l=t.line,u=t.lineStart,c=t.lineIndent,or(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=u,t.lineIndent=c;break}}a&&(vs(t,s,o,!1),rm(t,t.line-l),s=o=t.position,a=!1),Co(p)||(o=t.position+1),p=t.input.charCodeAt(++t.position)}return vs(t,s,o,!1),t.result?!0:(t.kind=f,t.result=h,!1)}function WL(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(vs(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else gi(r)?(vs(t,n,i,!0),rm(t,or(t,!1,e)),n=i=t.position):t.position===t.lineStart&&sh(t)?ke(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ke(t,"unexpected end of the stream within a single quoted scalar")}function QL(t,e){var r,n,i,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return vs(t,r,t.position,!0),t.position++,!0;if(a===92){if(vs(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),gi(a))or(t,!1,e);else if(a<256&&qC[a])t.result+=HC[a],t.position++;else if((o=LL(a))>0){for(i=o,s=0;i>0;i--)a=t.input.charCodeAt(++t.position),(o=FL(a))>=0?s=(s<<4)+o:ke(t,"expected hexadecimal character");t.result+=UL(s),t.position++}else ke(t,"unknown escape sequence");r=n=t.position}else gi(a)?(vs(t,r,n,!0),rm(t,or(t,!1,e)),r=n=t.position):t.position===t.lineStart&&sh(t)?ke(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ke(t,"unexpected end of the stream within a double quoted scalar")}function GL(t,e){var r=!0,n,i,s,o=t.tag,a,l=t.anchor,u,c,f,h,p,g=Object.create(null),m,E,A,w;if(w=t.input.charCodeAt(t.position),w===91)c=93,p=!1,a=[];else if(w===123)c=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(or(t,!0,e),w=t.input.charCodeAt(t.position),w===c)return t.position++,t.tag=o,t.anchor=l,t.kind=p?"mapping":"sequence",t.result=a,!0;r?w===44&&ke(t,"expected the node content, but found ','"):ke(t,"missed comma between flow collection entries"),E=m=A=null,f=h=!1,w===63&&(u=t.input.charCodeAt(t.position+1),Zr(u)&&(f=h=!0,t.position++,or(t,!0,e))),n=t.line,i=t.lineStart,s=t.position,xa(t,e,eh,!1,!0),E=t.tag,m=t.result,or(t,!0,e),w=t.input.charCodeAt(t.position),(h||t.line===n)&&w===58&&(f=!0,w=t.input.charCodeAt(++t.position),or(t,!0,e),xa(t,e,eh,!1,!0),A=t.result),p?wa(t,a,g,E,m,A,n,i,s):f?a.push(wa(t,null,g,E,m,A,n,i,s)):a.push(m),or(t,!0,e),w=t.input.charCodeAt(t.position),w===44?(r=!0,w=t.input.charCodeAt(++t.position)):r=!1}ke(t,"unexpected end of the stream within a flow collection")}function jL(t,e){var r,n,i=zg,s=!1,o=!1,a=e,l=0,u=!1,c,f;if(f=t.input.charCodeAt(t.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)zg===i?i=f===43?_C:OL:ke(t,"repeat of a chomping mode identifier");else if((c=ML(f))>=0)c===0?ke(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ke(t,"repeat of an indentation width identifier"):(a=e+c-1,o=!0);else break;if(Co(f)){do f=t.input.charCodeAt(++t.position);while(Co(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!gi(f)&&f!==0)}for(;f!==0;){for(tm(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),gi(f)){l++;continue}if(t.lineIndent<a){i===_C?t.result+=hr.repeat(`
`,s?1+l:l):i===zg&&s&&(t.result+=`
`);break}for(n?Co(f)?(u=!0,t.result+=hr.repeat(`
`,s?1+l:l)):u?(u=!1,t.result+=hr.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=hr.repeat(`
`,l):t.result+=hr.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,r=t.position;!gi(f)&&f!==0;)f=t.input.charCodeAt(++t.position);vs(t,r,t.position,!1)}return!0}function bC(t,e){var r,n=t.tag,i=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ke(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!Zr(o))));){if(a=!0,t.position++,or(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,xa(t,e,LC,!1,!0),s.push(t.result),or(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)ke(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function $L(t,e,r){var n,i,s,o,a,l,u=t.tag,c=t.anchor,f={},h=Object.create(null),p=null,g=null,m=null,E=!1,A=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),w=t.input.charCodeAt(t.position);w!==0;){if(!E&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ke(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(w===63||w===58)&&Zr(n))w===63?(E&&(wa(t,f,h,p,g,null,o,a,l),p=g=m=null),A=!0,E=!0,i=!0):E?(E=!1,i=!0):ke(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=n;else{if(o=t.line,a=t.lineStart,l=t.position,!xa(t,r,FC,!1,!0))break;if(t.line===s){for(w=t.input.charCodeAt(t.position);Co(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),Zr(w)||ke(t,"a whitespace character is expected after the key-value separator within a block mapping"),E&&(wa(t,f,h,p,g,null,o,a,l),p=g=m=null),A=!0,E=!1,i=!1,p=t.tag,g=t.result;else if(A)ke(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=c,!0}else if(A)ke(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=c,!0}if((t.line===s||t.lineIndent>e)&&(E&&(o=t.line,a=t.lineStart,l=t.position),xa(t,e,th,!0,i)&&(E?g=t.result:m=t.result),E||(wa(t,f,h,p,g,m,o,a,l),p=g=m=null),or(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&w!==0)ke(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return E&&wa(t,f,h,p,g,null,o,a,l),A&&(t.tag=u,t.anchor=c,t.kind="mapping",t.result=f),A}function KL(t){var e,r=!1,n=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&ke(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(r=!0,o=t.input.charCodeAt(++t.position)):o===33?(n=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):ke(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Zr(o);)o===33&&(n?ke(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),MC.test(i)||ke(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),PL.test(s)&&ke(t,"tag suffix cannot contain flow indicator characters")}s&&!UC.test(s)&&ke(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ke(t,"tag name is malformed: "+s)}return r?t.tag=s:bs.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:ke(t,'undeclared tag handle "'+i+'"'),!0}function zL(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ke(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Zr(r)&&!Ca(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ke(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function YL(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Zr(n)&&!Ca(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ke(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),bs.call(t.anchorMap,r)||ke(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],or(t,!0,-1),!0}function xa(t,e,r,n,i){var s,o,a,l=1,u=!1,c=!1,f,h,p,g,m,E;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=th===r||LC===r,n&&or(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;KL(t)||zL(t);)or(t,!0,-1)?(u=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=u||i),(l===1||th===r)&&(eh===r||FC===r?m=e:m=e+1,E=t.position-t.lineStart,l===1?a&&(bC(t,E)||$L(t,E,m))||GL(t,m)?c=!0:(o&&jL(t,m)||WL(t,m)||QL(t,m)?c=!0:YL(t)?(c=!0,(t.tag!==null||t.anchor!==null)&&ke(t,"alias node should not have any properties")):HL(t,m,eh===r)&&(c=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(c=a&&bC(t,E))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ke(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,h=t.implicitTypes.length;f<h;f+=1)if(g=t.implicitTypes[f],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(bs.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,p=t.typeMap.multi[t.kind||"fallback"],f=0,h=p.length;f<h;f+=1)if(t.tag.slice(0,p[f].tag.length)===p[f].tag){g=p[f];break}g||ke(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&ke(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ke(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||c}function VL(t){var e=t.position,r,n,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(or(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),r=t.position;o!==0&&!Zr(o);)o=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ke(t,"directive name must not be less than one character in length");o!==0;){for(;Co(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!gi(o));break}if(gi(o))break;for(r=t.position;o!==0&&!Zr(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}o!==0&&tm(t),bs.call(AC,n)?AC[n](t,n,i):rh(t,'unknown document directive "'+n+'"')}if(or(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,or(t,!0,-1)):s&&ke(t,"directives end mark is expected"),xa(t,t.lineIndent-1,th,!1,!0),or(t,!0,-1),t.checkLineBreaks&&BL.test(t.input.slice(e,t.position))&&rh(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&sh(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,or(t,!0,-1));return}if(t.position<t.length-1)ke(t,"end of the stream or a document separator is expected");else return}function QC(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new qL(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ke(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)VL(r);return r.documents}function XL(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=QC(t,r);if(typeof e!="function")return n;for(var i=0,s=n.length;i<s;i+=1)e(n[i])}function JL(t,e){var r=QC(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Jr("expected a single document in the stream, but found more")}}var ZL=XL,e5=JL,GC={loadAll:ZL,load:e5},jC=Object.prototype.toString,$C=Object.prototype.hasOwnProperty,nm=65279,t5=9,yu=10,r5=13,n5=32,i5=33,s5=34,Vg=35,o5=37,a5=38,l5=39,u5=42,KC=44,c5=45,nh=58,f5=61,h5=62,d5=63,p5=64,zC=91,YC=93,g5=96,VC=123,m5=124,XC=125,Mr={};Mr[0]="\\0";Mr[7]="\\a";Mr[8]="\\b";Mr[9]="\\t";Mr[10]="\\n";Mr[11]="\\v";Mr[12]="\\f";Mr[13]="\\r";Mr[27]="\\e";Mr[34]='\\"';Mr[92]="\\\\";Mr[133]="\\N";Mr[160]="\\_";Mr[8232]="\\L";Mr[8233]="\\P";var _5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],E5=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function y5(t,e){var r,n,i,s,o,a,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&$C.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}function A5(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Jr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+hr.repeat("0",n-e.length)+e}var v5=1,Au=2;function b5(t){this.schema=t.schema||PC,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=hr.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=y5(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Au:v5,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function SC(t,e){for(var r=hr.repeat(" ",e),n=0,i=-1,s="",o,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(o=t.slice(n),n=a):(o=t.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function Xg(t,e){return`
`+hr.repeat(" ",t.indent*e)}function S5(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function ih(t){return t===n5||t===t5}function vu(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==nm||65536<=t&&t<=1114111}function CC(t){return vu(t)&&t!==nm&&t!==r5&&t!==yu}function wC(t,e,r){var n=CC(t),i=n&&!ih(t);return(r?n:n&&t!==KC&&t!==zC&&t!==YC&&t!==VC&&t!==XC)&&t!==Vg&&!(e===nh&&!i)||CC(e)&&!ih(e)&&t===Vg||e===nh&&i}function C5(t){return vu(t)&&t!==nm&&!ih(t)&&t!==c5&&t!==d5&&t!==nh&&t!==KC&&t!==zC&&t!==YC&&t!==VC&&t!==XC&&t!==Vg&&t!==a5&&t!==u5&&t!==i5&&t!==m5&&t!==f5&&t!==h5&&t!==l5&&t!==s5&&t!==o5&&t!==p5&&t!==g5}function w5(t){return!ih(t)&&t!==nh}function _u(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function JC(t){var e=/^\n* /;return e.test(t)}var ZC=1,Jg=2,ew=3,tw=4,Sa=5;function x5(t,e,r,n,i,s,o,a){var l,u=0,c=null,f=!1,h=!1,p=n!==-1,g=-1,m=C5(_u(t,0))&&w5(_u(t,t.length-1));if(e||o)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=_u(t,l),!vu(u))return Sa;m=m&&wC(u,c,a),c=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=_u(t,l),u===yu)f=!0,p&&(h=h||l-g-1>n&&t[g+1]!==" ",g=l);else if(!vu(u))return Sa;m=m&&wC(u,c,a),c=u}h=h||p&&l-g-1>n&&t[g+1]!==" "}return!f&&!h?m&&!o&&!i(t)?ZC:s===Au?Sa:Jg:r>9&&JC(t)?Sa:o?s===Au?Sa:Jg:h?tw:ew}function D5(t,e,r,n,i){t.dump=(function(){if(e.length===0)return t.quotingType===Au?'""':"''";if(!t.noCompatMode&&(_5.indexOf(e)!==-1||E5.test(e)))return t.quotingType===Au?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return S5(t,u)}switch(x5(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!n,i)){case ZC:return e;case Jg:return"'"+e.replace(/'/g,"''")+"'";case ew:return"|"+xC(e,t.indent)+DC(SC(e,s));case tw:return">"+xC(e,t.indent)+DC(SC(I5(e,o),s));case Sa:return'"'+T5(e)+'"';default:throw new Jr("impossible error: invalid scalar style")}})()}function xC(t,e){var r=JC(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),s=i?"+":n?"":"-";return r+s+`
`}function DC(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function I5(t,e){for(var r=/(\n+)([^\n]*)/g,n=(function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,IC(t.slice(0,u),e)})(),i=t[0]===`
`||t[0]===" ",s,o;o=r.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",n+=a+(!i&&!s&&l!==""?`
`:"")+IC(l,e),i=s}return n}function IC(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,l="";n=r.exec(t);)a=n.index,a-i>e&&(s=o>i?o:a,l+=`
`+t.slice(i,s),i=s+1),o=a;return l+=`
`,t.length-i>e&&o>i?l+=t.slice(i,o)+`
`+t.slice(o+1):l+=t.slice(i),l.slice(1)}function T5(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=_u(t,i),n=Mr[r],!n&&vu(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||A5(r);return e}function R5(t,e,r){var n="",i=t.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(ji(t,e,a,!1,!1)||typeof a>"u"&&ji(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function TC(t,e,r,n){var i="",s=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(ji(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&ji(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Xg(t,e)),t.dump&&yu===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function k5(t,e,r){var n="",i=t.tag,s=Object.keys(r),o,a,l,u,c;for(o=0,a=s.length;o<a;o+=1)c="",n!==""&&(c+=", "),t.condenseFlow&&(c+='"'),l=s[o],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),ji(t,e,l,!1,!1)&&(t.dump.length>1024&&(c+="? "),c+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ji(t,e,u,!1,!1)&&(c+=t.dump,n+=c));t.tag=i,t.dump="{"+n+"}"}function O5(t,e,r,n){var i="",s=t.tag,o=Object.keys(r),a,l,u,c,f,h;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new Jr("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)h="",(!n||i!=="")&&(h+=Xg(t,e)),u=o[a],c=r[u],t.replacer&&(c=t.replacer.call(r,u,c)),ji(t,e+1,u,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&yu===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,f&&(h+=Xg(t,e)),ji(t,e+1,c,!0,f)&&(t.dump&&yu===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,i+=h));t.tag=s,t.dump=i||"{}"}function RC(t,e,r){var n,i,s,o,a,l;for(i=r?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,jC.call(a.represent)==="[object Function]")n=a.represent(e,l);else if($C.call(a.represent,l))n=a.represent[l](e,l);else throw new Jr("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}function ji(t,e,r,n,i,s,o){t.tag=null,t.dump=r,RC(t,r,!1)||RC(t,r,!0);var a=jC.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var c=a==="[object Object]"||a==="[object Array]",f,h;if(c&&(f=t.duplicates.indexOf(r),h=f!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(i=!1),h&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(c&&h&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(O5(t,e,t.dump,i),h&&(t.dump="&ref_"+f+t.dump)):(k5(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?TC(t,e-1,t.dump,i):TC(t,e,t.dump,i),h&&(t.dump="&ref_"+f+t.dump)):(R5(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&D5(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Jr("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function N5(t,e){var r=[],n=[],i,s;for(Zg(t,r,n),i=0,s=n.length;i<s;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(s)}function Zg(t,e,r){var n,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)Zg(t[i],e,r);else for(n=Object.keys(t),i=0,s=n.length;i<s;i+=1)Zg(t[n[i]],e,r)}function B5(t,e){e=e||{};var r=new b5(e);r.noRefs||N5(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ji(r,0,n,!0,!0)?r.dump+`
`:""}var P5=B5,F5={dump:P5};function im(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var rw=GC.load,fne=GC.loadAll,hne=F5.dump;var dne=im("safeLoad","load"),pne=im("safeLoadAll","loadAll"),gne=im("safeDump","dump");var oh=class{constructor(e){this.getProfile=()=>{try{let e=this.config.profile[this.options.profile];return e.protocol=e.host?"ssh":"local",e}catch(e){console.error(`Error obtener profile: ${this.options.file}`,e),process.exit(1)}};this.getServices=()=>this.config.services;try{console.log("getProfile",e),this.options=e,this.stack=nw.readFileSync(e.file,"utf-8").trim(),this.config=rw(this.stack)}catch(r){console.error(`Error al leer el archivo: ${e.file}`,r),process.exit(1)}}};var Nr=Vt(mm()),MP=Vt(sB()),UP=Vt(o6());var Jl=Vt(mm());function V1(t){t instanceof Error?t.statusCode===404?console.error(Jl.default.red("Error: Contenedor no encontrado.")):t.code==="ECONNREFUSED"||t.errno===-111?(console.error(Jl.default.red("Error: No se pudo conectar a Docker.")),console.log(Jl.default.yellow("\xBFEst\xE1s seguro de que Docker est\xE1 corriendo?"))):console.error(Jl.default.red(`Error: ${t.message}`)):console.error(Jl.default.red("Ocurri\xF3 un error desconocido.")),process.exit(1)}var fu=Vt(require("path")),hu=Vt(require("fs")),qP=Vt(fP());var hP={node22:`
FROM node:22-alpine AS builder
WORKDIR /app
COPY app/package*.json ./
RUN npm install --only=production && npm cache clean --force
COPY app .

FROM node:22-alpine
WORKDIR /app
COPY --from=builder /app/node_modules ./node_modules
COPY --from=builder /app .
EXPOSE 3000
CMD ["node", "{handler}"]
`};var Yf=Vt(require("node:process"),1);var dP=(t=0)=>e=>`\x1B[${e+t}m`,pP=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,gP=(t=0)=>(e,r,n)=>`\x1B[${38+t};2;${e};${r};${n}m`,Ht={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},_ue=Object.keys(Ht.modifier),sre=Object.keys(Ht.color),ore=Object.keys(Ht.bgColor),Eue=[...sre,...ore];function are(){let t=new Map;for(let[e,r]of Object.entries(Ht)){for(let[n,i]of Object.entries(r))Ht[n]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},r[n]=Ht[n],t.set(i[0],i[1]);Object.defineProperty(Ht,e,{value:r,enumerable:!1})}return Object.defineProperty(Ht,"codes",{value:t,enumerable:!1}),Ht.color.close="\x1B[39m",Ht.bgColor.close="\x1B[49m",Ht.color.ansi=dP(),Ht.color.ansi256=pP(),Ht.color.ansi16m=gP(),Ht.bgColor.ansi=dP(10),Ht.bgColor.ansi256=pP(10),Ht.bgColor.ansi16m=gP(10),Object.defineProperties(Ht,{rgbToAnsi256:{value(e,r,n){return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},enumerable:!1},hexToRgb:{value(e){let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(s=>s+s).join(""));let i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:e=>Ht.rgbToAnsi256(...Ht.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let r,n,i;if(e>=232)r=((e-232)*10+8)/255,n=r,i=r;else{e-=16;let a=e%36;r=Math.floor(e/36)/5,n=Math.floor(a/6)/5,i=a%6/5}let s=Math.max(r,n,i)*2;if(s===0)return 30;let o=30+(Math.round(i)<<2|Math.round(n)<<1|Math.round(r));return s===2&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(e,r,n)=>Ht.ansi256ToAnsi(Ht.rgbToAnsi256(e,r,n)),enumerable:!1},hexToAnsi:{value:e=>Ht.ansi256ToAnsi(Ht.hexToAnsi256(e)),enumerable:!1}}),Ht}var lre=are(),di=lre;var yg=Vt(require("node:process"),1),_P=Vt(require("node:os"),1),TS=Vt(require("node:tty"),1);function Wn(t,e=globalThis.Deno?globalThis.Deno.args:yg.default.argv){let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}var{env:Wt}=yg.default,Eg;Wn("no-color")||Wn("no-colors")||Wn("color=false")||Wn("color=never")?Eg=0:(Wn("color")||Wn("colors")||Wn("color=true")||Wn("color=always"))&&(Eg=1);function ure(){if("FORCE_COLOR"in Wt)return Wt.FORCE_COLOR==="true"?1:Wt.FORCE_COLOR==="false"?0:Wt.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Wt.FORCE_COLOR,10),3)}function cre(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function fre(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=ure();n!==void 0&&(Eg=n);let i=r?Eg:n;if(i===0)return 0;if(r){if(Wn("color=16m")||Wn("color=full")||Wn("color=truecolor"))return 3;if(Wn("color=256"))return 2}if("TF_BUILD"in Wt&&"AGENT_NAME"in Wt)return 1;if(t&&!e&&i===void 0)return 0;let s=i||0;if(Wt.TERM==="dumb")return s;if(yg.default.platform==="win32"){let o=_P.default.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in Wt)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(o=>o in Wt)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(o=>o in Wt)||Wt.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in Wt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Wt.TEAMCITY_VERSION)?1:0;if(Wt.COLORTERM==="truecolor"||Wt.TERM==="xterm-kitty"||Wt.TERM==="xterm-ghostty"||Wt.TERM==="wezterm")return 3;if("TERM_PROGRAM"in Wt){let o=Number.parseInt((Wt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Wt.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Wt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Wt.TERM)||"COLORTERM"in Wt?1:s}function mP(t,e={}){let r=fre(t,{streamIsTTY:t&&t.isTTY,...e});return cre(r)}var hre={stdout:mP({isTTY:TS.default.isatty(1)}),stderr:mP({isTTY:TS.default.isatty(2)})},EP=hre;function yP(t,e,r){let n=t.indexOf(e);if(n===-1)return t;let i=e.length,s=0,o="";do o+=t.slice(s,n)+e+r,s=n+i,n=t.indexOf(e,s);while(n!==-1);return o+=t.slice(s),o}function AP(t,e,r,n){let i=0,s="";do{let o=t[n-1]==="\r";s+=t.slice(i,o?n-1:n)+e+(o?`\r
`:`
`)+r,i=n+1,n=t.indexOf(`
`,i)}while(n!==-1);return s+=t.slice(i),s}var{stdout:vP,stderr:bP}=EP,RS=Symbol("GENERATOR"),lu=Symbol("STYLER"),Qf=Symbol("IS_EMPTY"),SP=["ansi","ansi","ansi256","ansi16m"],uu=Object.create(null),dre=(t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=vP?vP.level:0;t.level=e.level===void 0?r:e.level};var pre=t=>{let e=(...r)=>r.join(" ");return dre(e,t),Object.setPrototypeOf(e,Gf.prototype),e};function Gf(t){return pre(t)}Object.setPrototypeOf(Gf.prototype,Function.prototype);for(let[t,e]of Object.entries(di))uu[t]={get(){let r=Ag(this,OS(e.open,e.close,this[lu]),this[Qf]);return Object.defineProperty(this,t,{value:r}),r}};uu.visible={get(){let t=Ag(this,this[lu],!0);return Object.defineProperty(this,"visible",{value:t}),t}};var kS=(t,e,r,...n)=>t==="rgb"?e==="ansi16m"?di[r].ansi16m(...n):e==="ansi256"?di[r].ansi256(di.rgbToAnsi256(...n)):di[r].ansi(di.rgbToAnsi(...n)):t==="hex"?kS("rgb",e,r,...di.hexToRgb(...n)):di[r][t](...n),gre=["rgb","hex","ansi256"];for(let t of gre){uu[t]={get(){let{level:r}=this;return function(...n){let i=OS(kS(t,SP[r],"color",...n),di.color.close,this[lu]);return Ag(this,i,this[Qf])}}};let e="bg"+t[0].toUpperCase()+t.slice(1);uu[e]={get(){let{level:r}=this;return function(...n){let i=OS(kS(t,SP[r],"bgColor",...n),di.bgColor.close,this[lu]);return Ag(this,i,this[Qf])}}}}var mre=Object.defineProperties(()=>{},{...uu,level:{enumerable:!0,get(){return this[RS].level},set(t){this[RS].level=t}}}),OS=(t,e,r)=>{let n,i;return r===void 0?(n=t,i=e):(n=r.openAll+t,i=e+r.closeAll),{open:t,close:e,openAll:n,closeAll:i,parent:r}},Ag=(t,e,r)=>{let n=(...i)=>_re(n,i.length===1?""+i[0]:i.join(" "));return Object.setPrototypeOf(n,mre),n[RS]=t,n[lu]=e,n[Qf]=r,n},_re=(t,e)=>{if(t.level<=0||!e)return t[Qf]?"":e;let r=t[lu];if(r===void 0)return e;let{openAll:n,closeAll:i}=r;if(e.includes("\x1B"))for(;r!==void 0;)e=yP(e,r.close,r.open),r=r.parent;let s=e.indexOf(`
`);return s!==-1&&(e=AP(e,i,n,s)),n+e+i};Object.defineProperties(Gf.prototype,uu);var Ere=Gf(),wue=Gf({level:bP?bP.level:0});var CP=Ere;var qS=Vt(require("node:process"),1);var jf=Vt(require("node:process"),1);var yre=(t,e,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let i=Object.getOwnPropertyDescriptor(t,r),s=Object.getOwnPropertyDescriptor(e,r);!Are(i,s)&&n||Object.defineProperty(t,r,s)},Are=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},vre=(t,e)=>{let r=Object.getPrototypeOf(e);r!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,r)},bre=(t,e)=>`/* Wrapped ${t}*/
${e}`,Sre=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Cre=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),wre=(t,e,r)=>{let n=r===""?"":`with ${r.trim()}() `,i=bre.bind(null,n,e.toString());Object.defineProperty(i,"name",Cre);let{writable:s,enumerable:o,configurable:a}=Sre;Object.defineProperty(t,"toString",{value:i,writable:s,enumerable:o,configurable:a})};function NS(t,e,{ignoreNonConfigurable:r=!1}={}){let{name:n}=t;for(let i of Reflect.ownKeys(e))yre(t,e,i,r);return vre(t,e),wre(t,e,n),t}var vg=new WeakMap,wP=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,n=0,i=t.displayName||t.name||"<anonymous>",s=function(...o){if(vg.set(s,++n),n===1)r=t.apply(this,o),t=void 0;else if(e.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return r};return NS(s,t),vg.set(s,n),s};wP.callCount=t=>{if(!vg.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return vg.get(t)};var xP=wP;var _a=[];_a.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&_a.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&_a.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var bg=t=>!!t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function",BS=Symbol.for("signal-exit emitter"),PS=globalThis,xre=Object.defineProperty.bind(Object),FS=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(PS[BS])return PS[BS];xre(PS,BS,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(e,r){this.listeners[e].push(r)}removeListener(e,r){let n=this.listeners[e],i=n.indexOf(r);i!==-1&&(i===0&&n.length===1?n.length=0:n.splice(i,1))}emit(e,r,n){if(this.emitted[e])return!1;this.emitted[e]=!0;let i=!1;for(let s of this.listeners[e])i=s(r,n)===!0||i;return e==="exit"&&(i=this.emit("afterExit",r,n)||i),i}},Sg=class{},Dre=t=>({onExit(e,r){return t.onExit(e,r)},load(){return t.load()},unload(){return t.unload()}}),LS=class extends Sg{onExit(){return()=>{}}load(){}unload(){}},MS=class extends Sg{#s=US.platform==="win32"?"SIGINT":"SIGHUP";#n=new FS;#e;#i;#d;#f={};#t=!1;constructor(e){super(),this.#e=e,this.#f={};for(let r of _a)this.#f[r]=()=>{let n=this.#e.listeners(r),{count:i}=this.#n,s=e;if(typeof s.__signal_exit_emitter__=="object"&&typeof s.__signal_exit_emitter__.count=="number"&&(i+=s.__signal_exit_emitter__.count),n.length===i){this.unload();let o=this.#n.emit("exit",null,r),a=r==="SIGHUP"?this.#s:r;o||e.kill(e.pid,a)}};this.#d=e.reallyExit,this.#i=e.emit}onExit(e,r){if(!bg(this.#e))return()=>{};this.#t===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#n.on(n,e),()=>{this.#n.removeListener(n,e),this.#n.listeners.exit.length===0&&this.#n.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#t){this.#t=!0,this.#n.count+=1;for(let e of _a)try{let r=this.#f[e];r&&this.#e.on(e,r)}catch{}this.#e.emit=(e,...r)=>this.#r(e,...r),this.#e.reallyExit=e=>this.#o(e)}}unload(){this.#t&&(this.#t=!1,_a.forEach(e=>{let r=this.#f[e];if(!r)throw new Error("Listener not defined for signal: "+e);try{this.#e.removeListener(e,r)}catch{}}),this.#e.emit=this.#i,this.#e.reallyExit=this.#d,this.#n.count-=1)}#o(e){return bg(this.#e)?(this.#e.exitCode=e||0,this.#n.emit("exit",this.#e.exitCode,null),this.#d.call(this.#e,this.#e.exitCode)):0}#r(e,...r){let n=this.#i;if(e==="exit"&&bg(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let i=n.call(this.#e,e,...r);return this.#n.emit("exit",this.#e.exitCode,null),i}else return n.call(this.#e,e,...r)}},US=globalThis.process,{onExit:DP,load:Oue,unload:Nue}=Dre(bg(US)?new MS(US):new LS);var IP=jf.default.stderr.isTTY?jf.default.stderr:jf.default.stdout.isTTY?jf.default.stdout:void 0,Ire=IP?xP(()=>{DP(()=>{IP.write("\x1B[?25h")},{alwaysLast:!0})}):()=>{},TP=Ire;var Cg=!1,cu={};cu.show=(t=qS.default.stderr)=>{t.isTTY&&(Cg=!1,t.write("\x1B[?25h"))};cu.hide=(t=qS.default.stderr)=>{t.isTTY&&(TP(),Cg=!0,t.write("\x1B[?25l"))};cu.toggle=(t,e)=>{t!==void 0&&(Cg=t),Cg?cu.show(e):cu.hide(e)};var HS=cu;var WS={dots:{interval:80,frames:["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"]},dots2:{interval:80,frames:["\u28FE","\u28FD","\u28FB","\u28BF","\u287F","\u28DF","\u28EF","\u28F7"]},dots3:{interval:80,frames:["\u280B","\u2819","\u281A","\u281E","\u2816","\u2826","\u2834","\u2832","\u2833","\u2813"]},dots4:{interval:80,frames:["\u2804","\u2806","\u2807","\u280B","\u2819","\u2838","\u2830","\u2820","\u2830","\u2838","\u2819","\u280B","\u2807","\u2806"]},dots5:{interval:80,frames:["\u280B","\u2819","\u281A","\u2812","\u2802","\u2802","\u2812","\u2832","\u2834","\u2826","\u2816","\u2812","\u2810","\u2810","\u2812","\u2813","\u280B"]},dots6:{interval:80,frames:["\u2801","\u2809","\u2819","\u281A","\u2812","\u2802","\u2802","\u2812","\u2832","\u2834","\u2824","\u2804","\u2804","\u2824","\u2834","\u2832","\u2812","\u2802","\u2802","\u2812","\u281A","\u2819","\u2809","\u2801"]},dots7:{interval:80,frames:["\u2808","\u2809","\u280B","\u2813","\u2812","\u2810","\u2810","\u2812","\u2816","\u2826","\u2824","\u2820","\u2820","\u2824","\u2826","\u2816","\u2812","\u2810","\u2810","\u2812","\u2813","\u280B","\u2809","\u2808"]},dots8:{interval:80,frames:["\u2801","\u2801","\u2809","\u2819","\u281A","\u2812","\u2802","\u2802","\u2812","\u2832","\u2834","\u2824","\u2804","\u2804","\u2824","\u2820","\u2820","\u2824","\u2826","\u2816","\u2812","\u2810","\u2810","\u2812","\u2813","\u280B","\u2809","\u2808","\u2808"]},dots9:{interval:80,frames:["\u28B9","\u28BA","\u28BC","\u28F8","\u28C7","\u2867","\u2857","\u284F"]},dots10:{interval:80,frames:["\u2884","\u2882","\u2881","\u2841","\u2848","\u2850","\u2860"]},dots11:{interval:100,frames:["\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"]},dots12:{interval:80,frames:["\u2880\u2800","\u2840\u2800","\u2804\u2800","\u2882\u2800","\u2842\u2800","\u2805\u2800","\u2883\u2800","\u2843\u2800","\u280D\u2800","\u288B\u2800","\u284B\u2800","\u280D\u2801","\u288B\u2801","\u284B\u2801","\u280D\u2809","\u280B\u2809","\u280B\u2809","\u2809\u2819","\u2809\u2819","\u2809\u2829","\u2808\u2899","\u2808\u2859","\u2888\u2829","\u2840\u2899","\u2804\u2859","\u2882\u2829","\u2842\u2898","\u2805\u2858","\u2883\u2828","\u2843\u2890","\u280D\u2850","\u288B\u2820","\u284B\u2880","\u280D\u2841","\u288B\u2801","\u284B\u2801","\u280D\u2809","\u280B\u2809","\u280B\u2809","\u2809\u2819","\u2809\u2819","\u2809\u2829","\u2808\u2899","\u2808\u2859","\u2808\u2829","\u2800\u2899","\u2800\u2859","\u2800\u2829","\u2800\u2898","\u2800\u2858","\u2800\u2828","\u2800\u2890","\u2800\u2850","\u2800\u2820","\u2800\u2880","\u2800\u2840"]},dots13:{interval:80,frames:["\u28FC","\u28F9","\u28BB","\u283F","\u285F","\u28CF","\u28E7","\u28F6"]},dots14:{interval:80,frames:["\u2809\u2809","\u2808\u2819","\u2800\u2839","\u2800\u28B8","\u2800\u28F0","\u2880\u28E0","\u28C0\u28C0","\u28C4\u2840","\u28C6\u2800","\u2847\u2800","\u280F\u2800","\u280B\u2801"]},dots8Bit:{interval:80,frames:["\u2800","\u2801","\u2802","\u2803","\u2804","\u2805","\u2806","\u2807","\u2840","\u2841","\u2842","\u2843","\u2844","\u2845","\u2846","\u2847","\u2808","\u2809","\u280A","\u280B","\u280C","\u280D","\u280E","\u280F","\u2848","\u2849","\u284A","\u284B","\u284C","\u284D","\u284E","\u284F","\u2810","\u2811","\u2812","\u2813","\u2814","\u2815","\u2816","\u2817","\u2850","\u2851","\u2852","\u2853","\u2854","\u2855","\u2856","\u2857","\u2818","\u2819","\u281A","\u281B","\u281C","\u281D","\u281E","\u281F","\u2858","\u2859","\u285A","\u285B","\u285C","\u285D","\u285E","\u285F","\u2820","\u2821","\u2822","\u2823","\u2824","\u2825","\u2826","\u2827","\u2860","\u2861","\u2862","\u2863","\u2864","\u2865","\u2866","\u2867","\u2828","\u2829","\u282A","\u282B","\u282C","\u282D","\u282E","\u282F","\u2868","\u2869","\u286A","\u286B","\u286C","\u286D","\u286E","\u286F","\u2830","\u2831","\u2832","\u2833","\u2834","\u2835","\u2836","\u2837","\u2870","\u2871","\u2872","\u2873","\u2874","\u2875","\u2876","\u2877","\u2838","\u2839","\u283A","\u283B","\u283C","\u283D","\u283E","\u283F","\u2878","\u2879","\u287A","\u287B","\u287C","\u287D","\u287E","\u287F","\u2880","\u2881","\u2882","\u2883","\u2884","\u2885","\u2886","\u2887","\u28C0","\u28C1","\u28C2","\u28C3","\u28C4","\u28C5","\u28C6","\u28C7","\u2888","\u2889","\u288A","\u288B","\u288C","\u288D","\u288E","\u288F","\u28C8","\u28C9","\u28CA","\u28CB","\u28CC","\u28CD","\u28CE","\u28CF","\u2890","\u2891","\u2892","\u2893","\u2894","\u2895","\u2896","\u2897","\u28D0","\u28D1","\u28D2","\u28D3","\u28D4","\u28D5","\u28D6","\u28D7","\u2898","\u2899","\u289A","\u289B","\u289C","\u289D","\u289E","\u289F","\u28D8","\u28D9","\u28DA","\u28DB","\u28DC","\u28DD","\u28DE","\u28DF","\u28A0","\u28A1","\u28A2","\u28A3","\u28A4","\u28A5","\u28A6","\u28A7","\u28E0","\u28E1","\u28E2","\u28E3","\u28E4","\u28E5","\u28E6","\u28E7","\u28A8","\u28A9","\u28AA","\u28AB","\u28AC","\u28AD","\u28AE","\u28AF","\u28E8","\u28E9","\u28EA","\u28EB","\u28EC","\u28ED","\u28EE","\u28EF","\u28B0","\u28B1","\u28B2","\u28B3","\u28B4","\u28B5","\u28B6","\u28B7","\u28F0","\u28F1","\u28F2","\u28F3","\u28F4","\u28F5","\u28F6","\u28F7","\u28B8","\u28B9","\u28BA","\u28BB","\u28BC","\u28BD","\u28BE","\u28BF","\u28F8","\u28F9","\u28FA","\u28FB","\u28FC","\u28FD","\u28FE","\u28FF"]},dotsCircle:{interval:80,frames:["\u288E ","\u280E\u2801","\u280A\u2811","\u2808\u2831"," \u2871","\u2880\u2870","\u2884\u2860","\u2886\u2840"]},sand:{interval:80,frames:["\u2801","\u2802","\u2804","\u2840","\u2848","\u2850","\u2860","\u28C0","\u28C1","\u28C2","\u28C4","\u28CC","\u28D4","\u28E4","\u28E5","\u28E6","\u28EE","\u28F6","\u28F7","\u28FF","\u287F","\u283F","\u289F","\u281F","\u285B","\u281B","\u282B","\u288B","\u280B","\u280D","\u2849","\u2809","\u2811","\u2821","\u2881"]},line:{interval:130,frames:["-","\\","|","/"]},line2:{interval:100,frames:["\u2802","-","\u2013","\u2014","\u2013","-"]},rollingLine:{interval:80,frames:["/  "," - "," \\ ","  |","  |"," \\ "," - ","/  "]},pipe:{interval:100,frames:["\u2524","\u2518","\u2534","\u2514","\u251C","\u250C","\u252C","\u2510"]},simpleDots:{interval:400,frames:[".  ",".. ","...","   "]},simpleDotsScrolling:{interval:200,frames:[".  ",".. ","..."," ..","  .","   "]},star:{interval:70,frames:["\u2736","\u2738","\u2739","\u273A","\u2739","\u2737"]},star2:{interval:80,frames:["+","x","*"]},flip:{interval:70,frames:["_","_","_","-","`","`","'","\xB4","-","_","_","_"]},hamburger:{interval:100,frames:["\u2631","\u2632","\u2634"]},growVertical:{interval:120,frames:["\u2581","\u2583","\u2584","\u2585","\u2586","\u2587","\u2586","\u2585","\u2584","\u2583"]},growHorizontal:{interval:120,frames:["\u258F","\u258E","\u258D","\u258C","\u258B","\u258A","\u2589","\u258A","\u258B","\u258C","\u258D","\u258E"]},balloon:{interval:140,frames:[" ",".","o","O","@","*"," "]},balloon2:{interval:120,frames:[".","o","O","\xB0","O","o","."]},noise:{interval:100,frames:["\u2593","\u2592","\u2591"]},bounce:{interval:120,frames:["\u2801","\u2802","\u2804","\u2802"]},boxBounce:{interval:120,frames:["\u2596","\u2598","\u259D","\u2597"]},boxBounce2:{interval:100,frames:["\u258C","\u2580","\u2590","\u2584"]},triangle:{interval:50,frames:["\u25E2","\u25E3","\u25E4","\u25E5"]},binary:{interval:80,frames:["010010","001100","100101","111010","111101","010111","101011","111000","110011","110101"]},arc:{interval:100,frames:["\u25DC","\u25E0","\u25DD","\u25DE","\u25E1","\u25DF"]},circle:{interval:120,frames:["\u25E1","\u2299","\u25E0"]},squareCorners:{interval:180,frames:["\u25F0","\u25F3","\u25F2","\u25F1"]},circleQuarters:{interval:120,frames:["\u25F4","\u25F7","\u25F6","\u25F5"]},circleHalves:{interval:50,frames:["\u25D0","\u25D3","\u25D1","\u25D2"]},squish:{interval:100,frames:["\u256B","\u256A"]},toggle:{interval:250,frames:["\u22B6","\u22B7"]},toggle2:{interval:80,frames:["\u25AB","\u25AA"]},toggle3:{interval:120,frames:["\u25A1","\u25A0"]},toggle4:{interval:100,frames:["\u25A0","\u25A1","\u25AA","\u25AB"]},toggle5:{interval:100,frames:["\u25AE","\u25AF"]},toggle6:{interval:300,frames:["\u101D","\u1040"]},toggle7:{interval:80,frames:["\u29BE","\u29BF"]},toggle8:{interval:100,frames:["\u25CD","\u25CC"]},toggle9:{interval:100,frames:["\u25C9","\u25CE"]},toggle10:{interval:100,frames:["\u3282","\u3280","\u3281"]},toggle11:{interval:50,frames:["\u29C7","\u29C6"]},toggle12:{interval:120,frames:["\u2617","\u2616"]},toggle13:{interval:80,frames:["=","*","-"]},arrow:{interval:100,frames:["\u2190","\u2196","\u2191","\u2197","\u2192","\u2198","\u2193","\u2199"]},arrow2:{interval:80,frames:["\u2B06\uFE0F ","\u2197\uFE0F ","\u27A1\uFE0F ","\u2198\uFE0F ","\u2B07\uFE0F ","\u2199\uFE0F ","\u2B05\uFE0F ","\u2196\uFE0F "]},arrow3:{interval:120,frames:["\u25B9\u25B9\u25B9\u25B9\u25B9","\u25B8\u25B9\u25B9\u25B9\u25B9","\u25B9\u25B8\u25B9\u25B9\u25B9","\u25B9\u25B9\u25B8\u25B9\u25B9","\u25B9\u25B9\u25B9\u25B8\u25B9","\u25B9\u25B9\u25B9\u25B9\u25B8"]},bouncingBar:{interval:80,frames:["[    ]","[=   ]","[==  ]","[=== ]","[====]","[ ===]","[  ==]","[   =]","[    ]","[   =]","[  ==]","[ ===]","[====]","[=== ]","[==  ]","[=   ]"]},bouncingBall:{interval:80,frames:["( \u25CF    )","(  \u25CF   )","(   \u25CF  )","(    \u25CF )","(     \u25CF)","(    \u25CF )","(   \u25CF  )","(  \u25CF   )","( \u25CF    )","(\u25CF     )"]},smiley:{interval:200,frames:["\u{1F604} ","\u{1F61D} "]},monkey:{interval:300,frames:["\u{1F648} ","\u{1F648} ","\u{1F649} ","\u{1F64A} "]},hearts:{interval:100,frames:["\u{1F49B} ","\u{1F499} ","\u{1F49C} ","\u{1F49A} ","\u{1F497} "]},clock:{interval:100,frames:["\u{1F55B} ","\u{1F550} ","\u{1F551} ","\u{1F552} ","\u{1F553} ","\u{1F554} ","\u{1F555} ","\u{1F556} ","\u{1F557} ","\u{1F558} ","\u{1F559} ","\u{1F55A} "]},earth:{interval:180,frames:["\u{1F30D} ","\u{1F30E} ","\u{1F30F} "]},material:{interval:17,frames:["\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581","\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581","\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581","\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581","\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581","\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581","\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581","\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581","\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588","\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588","\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588","\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588","\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588","\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588","\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588","\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588","\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581","\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581","\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581","\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581","\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581","\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581"]},moon:{interval:80,frames:["\u{1F311} ","\u{1F312} ","\u{1F313} ","\u{1F314} ","\u{1F315} ","\u{1F316} ","\u{1F317} ","\u{1F318} "]},runner:{interval:140,frames:["\u{1F6B6} ","\u{1F3C3} "]},pong:{interval:80,frames:["\u2590\u2802       \u258C","\u2590\u2808       \u258C","\u2590 \u2802      \u258C","\u2590 \u2820      \u258C","\u2590  \u2840     \u258C","\u2590  \u2820     \u258C","\u2590   \u2802    \u258C","\u2590   \u2808    \u258C","\u2590    \u2802   \u258C","\u2590    \u2820   \u258C","\u2590     \u2840  \u258C","\u2590     \u2820  \u258C","\u2590      \u2802 \u258C","\u2590      \u2808 \u258C","\u2590       \u2802\u258C","\u2590       \u2820\u258C","\u2590       \u2840\u258C","\u2590      \u2820 \u258C","\u2590      \u2802 \u258C","\u2590     \u2808  \u258C","\u2590     \u2802  \u258C","\u2590    \u2820   \u258C","\u2590    \u2840   \u258C","\u2590   \u2820    \u258C","\u2590   \u2802    \u258C","\u2590  \u2808     \u258C","\u2590  \u2802     \u258C","\u2590 \u2820      \u258C","\u2590 \u2840      \u258C","\u2590\u2820       \u258C"]},shark:{interval:120,frames:["\u2590|\\____________\u258C","\u2590_|\\___________\u258C","\u2590__|\\__________\u258C","\u2590___|\\_________\u258C","\u2590____|\\________\u258C","\u2590_____|\\_______\u258C","\u2590______|\\______\u258C","\u2590_______|\\_____\u258C","\u2590________|\\____\u258C","\u2590_________|\\___\u258C","\u2590__________|\\__\u258C","\u2590___________|\\_\u258C","\u2590____________|\\\u258C","\u2590____________/|\u258C","\u2590___________/|_\u258C","\u2590__________/|__\u258C","\u2590_________/|___\u258C","\u2590________/|____\u258C","\u2590_______/|_____\u258C","\u2590______/|______\u258C","\u2590_____/|_______\u258C","\u2590____/|________\u258C","\u2590___/|_________\u258C","\u2590__/|__________\u258C","\u2590_/|___________\u258C","\u2590/|____________\u258C"]},dqpb:{interval:100,frames:["d","q","p","b"]},weather:{interval:100,frames:["\u2600\uFE0F ","\u2600\uFE0F ","\u2600\uFE0F ","\u{1F324} ","\u26C5\uFE0F ","\u{1F325} ","\u2601\uFE0F ","\u{1F327} ","\u{1F328} ","\u{1F327} ","\u{1F328} ","\u{1F327} ","\u{1F328} ","\u26C8 ","\u{1F328} ","\u{1F327} ","\u{1F328} ","\u2601\uFE0F ","\u{1F325} ","\u26C5\uFE0F ","\u{1F324} ","\u2600\uFE0F ","\u2600\uFE0F "]},christmas:{interval:400,frames:["\u{1F332}","\u{1F384}"]},grenade:{interval:80,frames:["\u060C  ","\u2032  "," \xB4 "," \u203E ","  \u2E0C","  \u2E0A","  |","  \u204E","  \u2055"," \u0DF4 ","  \u2053","   ","   ","   "]},point:{interval:125,frames:["\u2219\u2219\u2219","\u25CF\u2219\u2219","\u2219\u25CF\u2219","\u2219\u2219\u25CF","\u2219\u2219\u2219"]},layer:{interval:150,frames:["-","=","\u2261"]},betaWave:{interval:80,frames:["\u03C1\u03B2\u03B2\u03B2\u03B2\u03B2\u03B2","\u03B2\u03C1\u03B2\u03B2\u03B2\u03B2\u03B2","\u03B2\u03B2\u03C1\u03B2\u03B2\u03B2\u03B2","\u03B2\u03B2\u03B2\u03C1\u03B2\u03B2\u03B2","\u03B2\u03B2\u03B2\u03B2\u03C1\u03B2\u03B2","\u03B2\u03B2\u03B2\u03B2\u03B2\u03C1\u03B2","\u03B2\u03B2\u03B2\u03B2\u03B2\u03B2\u03C1"]},fingerDance:{interval:160,frames:["\u{1F918} ","\u{1F91F} ","\u{1F596} ","\u270B ","\u{1F91A} ","\u{1F446} "]},fistBump:{interval:80,frames:["\u{1F91C}\u3000\u3000\u3000\u3000\u{1F91B} ","\u{1F91C}\u3000\u3000\u3000\u3000\u{1F91B} ","\u{1F91C}\u3000\u3000\u3000\u3000\u{1F91B} ","\u3000\u{1F91C}\u3000\u3000\u{1F91B}\u3000 ","\u3000\u3000\u{1F91C}\u{1F91B}\u3000\u3000 ","\u3000\u{1F91C}\u2728\u{1F91B}\u3000\u3000 ","\u{1F91C}\u3000\u2728\u3000\u{1F91B}\u3000 "]},soccerHeader:{interval:80,frames:[" \u{1F9D1}\u26BD\uFE0F       \u{1F9D1} ","\u{1F9D1}  \u26BD\uFE0F      \u{1F9D1} ","\u{1F9D1}   \u26BD\uFE0F     \u{1F9D1} ","\u{1F9D1}    \u26BD\uFE0F    \u{1F9D1} ","\u{1F9D1}     \u26BD\uFE0F   \u{1F9D1} ","\u{1F9D1}      \u26BD\uFE0F  \u{1F9D1} ","\u{1F9D1}       \u26BD\uFE0F\u{1F9D1}  ","\u{1F9D1}      \u26BD\uFE0F  \u{1F9D1} ","\u{1F9D1}     \u26BD\uFE0F   \u{1F9D1} ","\u{1F9D1}    \u26BD\uFE0F    \u{1F9D1} ","\u{1F9D1}   \u26BD\uFE0F     \u{1F9D1} ","\u{1F9D1}  \u26BD\uFE0F      \u{1F9D1} "]},mindblown:{interval:160,frames:["\u{1F610} ","\u{1F610} ","\u{1F62E} ","\u{1F62E} ","\u{1F626} ","\u{1F626} ","\u{1F627} ","\u{1F627} ","\u{1F92F} ","\u{1F4A5} ","\u2728 ","\u3000 ","\u3000 ","\u3000 "]},speaker:{interval:160,frames:["\u{1F508} ","\u{1F509} ","\u{1F50A} ","\u{1F509} "]},orangePulse:{interval:100,frames:["\u{1F538} ","\u{1F536} ","\u{1F7E0} ","\u{1F7E0} ","\u{1F536} "]},bluePulse:{interval:100,frames:["\u{1F539} ","\u{1F537} ","\u{1F535} ","\u{1F535} ","\u{1F537} "]},orangeBluePulse:{interval:100,frames:["\u{1F538} ","\u{1F536} ","\u{1F7E0} ","\u{1F7E0} ","\u{1F536} ","\u{1F539} ","\u{1F537} ","\u{1F535} ","\u{1F535} ","\u{1F537} "]},timeTravel:{interval:100,frames:["\u{1F55B} ","\u{1F55A} ","\u{1F559} ","\u{1F558} ","\u{1F557} ","\u{1F556} ","\u{1F555} ","\u{1F554} ","\u{1F553} ","\u{1F552} ","\u{1F551} ","\u{1F550} "]},aesthetic:{interval:80,frames:["\u25B0\u25B1\u25B1\u25B1\u25B1\u25B1\u25B1","\u25B0\u25B0\u25B1\u25B1\u25B1\u25B1\u25B1","\u25B0\u25B0\u25B0\u25B1\u25B1\u25B1\u25B1","\u25B0\u25B0\u25B0\u25B0\u25B1\u25B1\u25B1","\u25B0\u25B0\u25B0\u25B0\u25B0\u25B1\u25B1","\u25B0\u25B0\u25B0\u25B0\u25B0\u25B0\u25B1","\u25B0\u25B0\u25B0\u25B0\u25B0\u25B0\u25B0","\u25B0\u25B1\u25B1\u25B1\u25B1\u25B1\u25B1"]},dwarfFortress:{interval:80,frames:[" \u2588\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A\u2588\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A\u2588\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A\u2593\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A\u2593\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A\u2592\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A\u2592\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A\u2591\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A\u2591\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","\u263A \u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A\u2593\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A\u2593\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A\u2592\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A\u2592\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A\u2591\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A\u2591\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u263A \u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A\u2593\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A\u2593\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A\u2592\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A\u2592\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A\u2591\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A\u2591\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u263A \u2588\u2588\u2588\xA3\xA3\xA3  ","   \u263A\u2588\u2588\u2588\xA3\xA3\xA3  ","   \u263A\u2588\u2588\u2588\xA3\xA3\xA3  ","   \u263A\u2593\u2588\u2588\xA3\xA3\xA3  ","   \u263A\u2593\u2588\u2588\xA3\xA3\xA3  ","   \u263A\u2592\u2588\u2588\xA3\xA3\xA3  ","   \u263A\u2592\u2588\u2588\xA3\xA3\xA3  ","   \u263A\u2591\u2588\u2588\xA3\xA3\xA3  ","   \u263A\u2591\u2588\u2588\xA3\xA3\xA3  ","   \u263A \u2588\u2588\xA3\xA3\xA3  ","    \u263A\u2588\u2588\xA3\xA3\xA3  ","    \u263A\u2588\u2588\xA3\xA3\xA3  ","    \u263A\u2593\u2588\xA3\xA3\xA3  ","    \u263A\u2593\u2588\xA3\xA3\xA3  ","    \u263A\u2592\u2588\xA3\xA3\xA3  ","    \u263A\u2592\u2588\xA3\xA3\xA3  ","    \u263A\u2591\u2588\xA3\xA3\xA3  ","    \u263A\u2591\u2588\xA3\xA3\xA3  ","    \u263A \u2588\xA3\xA3\xA3  ","     \u263A\u2588\xA3\xA3\xA3  ","     \u263A\u2588\xA3\xA3\xA3  ","     \u263A\u2593\xA3\xA3\xA3  ","     \u263A\u2593\xA3\xA3\xA3  ","     \u263A\u2592\xA3\xA3\xA3  ","     \u263A\u2592\xA3\xA3\xA3  ","     \u263A\u2591\xA3\xA3\xA3  ","     \u263A\u2591\xA3\xA3\xA3  ","     \u263A \xA3\xA3\xA3  ","      \u263A\xA3\xA3\xA3  ","      \u263A\xA3\xA3\xA3  ","      \u263A\u2593\xA3\xA3  ","      \u263A\u2593\xA3\xA3  ","      \u263A\u2592\xA3\xA3  ","      \u263A\u2592\xA3\xA3  ","      \u263A\u2591\xA3\xA3  ","      \u263A\u2591\xA3\xA3  ","      \u263A \xA3\xA3  ","       \u263A\xA3\xA3  ","       \u263A\xA3\xA3  ","       \u263A\u2593\xA3  ","       \u263A\u2593\xA3  ","       \u263A\u2592\xA3  ","       \u263A\u2592\xA3  ","       \u263A\u2591\xA3  ","       \u263A\u2591\xA3  ","       \u263A \xA3  ","        \u263A\xA3  ","        \u263A\xA3  ","        \u263A\u2593  ","        \u263A\u2593  ","        \u263A\u2592  ","        \u263A\u2592  ","        \u263A\u2591  ","        \u263A\u2591  ","        \u263A   ","        \u263A  &","        \u263A \u263C&","       \u263A \u263C &","       \u263A\u263C  &","      \u263A\u263C  & ","      \u203C   & ","     \u263A   &  ","    \u203C    &  ","   \u263A    &   ","  \u203C     &   "," \u263A     &    ","\u203C      &    ","      &     ","      &     ","     &   \u2591  ","     &   \u2592  ","    &    \u2593  ","    &    \xA3  ","   &    \u2591\xA3  ","   &    \u2592\xA3  ","  &     \u2593\xA3  ","  &     \xA3\xA3  "," &     \u2591\xA3\xA3  "," &     \u2592\xA3\xA3  ","&      \u2593\xA3\xA3  ","&      \xA3\xA3\xA3  ","      \u2591\xA3\xA3\xA3  ","      \u2592\xA3\xA3\xA3  ","      \u2593\xA3\xA3\xA3  ","      \u2588\xA3\xA3\xA3  ","     \u2591\u2588\xA3\xA3\xA3  ","     \u2592\u2588\xA3\xA3\xA3  ","     \u2593\u2588\xA3\xA3\xA3  ","     \u2588\u2588\xA3\xA3\xA3  ","    \u2591\u2588\u2588\xA3\xA3\xA3  ","    \u2592\u2588\u2588\xA3\xA3\xA3  ","    \u2593\u2588\u2588\xA3\xA3\xA3  ","    \u2588\u2588\u2588\xA3\xA3\xA3  ","   \u2591\u2588\u2588\u2588\xA3\xA3\xA3  ","   \u2592\u2588\u2588\u2588\xA3\xA3\xA3  ","   \u2593\u2588\u2588\u2588\xA3\xA3\xA3  ","   \u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u2591\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u2592\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u2593\u2588\u2588\u2588\u2588\xA3\xA3\xA3  ","  \u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u2591\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u2592\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u2593\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u2588\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "," \u2588\u2588\u2588\u2588\u2588\u2588\xA3\xA3\xA3  "]}};var $f=WS,Wue=Object.keys(WS);var Ea={};eC(Ea,{error:()=>Bre,info:()=>kre,success:()=>Ore,warning:()=>Nre});var RP=Vt(require("node:tty"),1),Rre=RP.default?.WriteStream?.prototype?.hasColors?.()??!1,Je=(t,e)=>{if(!Rre)return i=>i;let r=`\x1B[${t}m`,n=`\x1B[${e}m`;return i=>{let s=i+"",o=s.indexOf(n);if(o===-1)return r+s+n;let a=r,l=0,c=(e===22?n:"")+r;for(;o!==-1;)a+=s.slice(l,o)+c,l=o+n.length,o=s.indexOf(n,l);return a+=s.slice(l)+n,a}},Gue=Je(0,0),jue=Je(1,22),$ue=Je(2,22),Kue=Je(3,23),zue=Je(4,24),Yue=Je(53,55),Vue=Je(7,27),Xue=Je(8,28),Jue=Je(9,29),Zue=Je(30,39),kP=Je(31,39),OP=Je(32,39),NP=Je(33,39),BP=Je(34,39),ece=Je(35,39),tce=Je(36,39),rce=Je(37,39),nce=Je(90,39),ice=Je(40,49),sce=Je(41,49),oce=Je(42,49),ace=Je(43,49),lce=Je(44,49),uce=Je(45,49),cce=Je(46,49),fce=Je(47,49),hce=Je(100,49),dce=Je(91,39),pce=Je(92,39),gce=Je(93,39),mce=Je(94,39),_ce=Je(95,39),Ece=Je(96,39),yce=Je(97,39),Ace=Je(101,49),vce=Je(102,49),bce=Je(103,49),Sce=Je(104,49),Cce=Je(105,49),wce=Je(106,49),xce=Je(107,49);var QS=Vt(require("node:process"),1);function Kf(){let{env:t}=QS.default,{TERM:e,TERM_PROGRAM:r}=t;return QS.default.platform!=="win32"?e!=="linux":!!t.WT_SESSION||!!t.TERMINUS_SUBLIME||t.ConEmuTask==="{cmd::Cmder}"||r==="Terminus-Sublime"||r==="vscode"||e==="xterm-256color"||e==="alacritty"||e==="rxvt-unicode"||e==="rxvt-unicode-256color"||t.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var wg=Kf(),kre=BP(wg?"\u2139":"i"),Ore=OP(wg?"\u2714":"\u221A"),Nre=NP(wg?"\u26A0":"\u203C"),Bre=kP(wg?"\u2716":"\xD7");function GS({onlyFirst:t=!1}={}){let i="(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]";return new RegExp(i,t?void 0:"g")}var Pre=GS();function zf(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(Pre,"")}function PP(t){return t===161||t===164||t===167||t===168||t===170||t===173||t===174||t>=176&&t<=180||t>=182&&t<=186||t>=188&&t<=191||t===198||t===208||t===215||t===216||t>=222&&t<=225||t===230||t>=232&&t<=234||t===236||t===237||t===240||t===242||t===243||t>=247&&t<=250||t===252||t===254||t===257||t===273||t===275||t===283||t===294||t===295||t===299||t>=305&&t<=307||t===312||t>=319&&t<=322||t===324||t>=328&&t<=331||t===333||t===338||t===339||t===358||t===359||t===363||t===462||t===464||t===466||t===468||t===470||t===472||t===474||t===476||t===593||t===609||t===708||t===711||t>=713&&t<=715||t===717||t===720||t>=728&&t<=731||t===733||t===735||t>=768&&t<=879||t>=913&&t<=929||t>=931&&t<=937||t>=945&&t<=961||t>=963&&t<=969||t===1025||t>=1040&&t<=1103||t===1105||t===8208||t>=8211&&t<=8214||t===8216||t===8217||t===8220||t===8221||t>=8224&&t<=8226||t>=8228&&t<=8231||t===8240||t===8242||t===8243||t===8245||t===8251||t===8254||t===8308||t===8319||t>=8321&&t<=8324||t===8364||t===8451||t===8453||t===8457||t===8467||t===8470||t===8481||t===8482||t===8486||t===8491||t===8531||t===8532||t>=8539&&t<=8542||t>=8544&&t<=8555||t>=8560&&t<=8569||t===8585||t>=8592&&t<=8601||t===8632||t===8633||t===8658||t===8660||t===8679||t===8704||t===8706||t===8707||t===8711||t===8712||t===8715||t===8719||t===8721||t===8725||t===8730||t>=8733&&t<=8736||t===8739||t===8741||t>=8743&&t<=8748||t===8750||t>=8756&&t<=8759||t===8764||t===8765||t===8776||t===8780||t===8786||t===8800||t===8801||t>=8804&&t<=8807||t===8810||t===8811||t===8814||t===8815||t===8834||t===8835||t===8838||t===8839||t===8853||t===8857||t===8869||t===8895||t===8978||t>=9312&&t<=9449||t>=9451&&t<=9547||t>=9552&&t<=9587||t>=9600&&t<=9615||t>=9618&&t<=9621||t===9632||t===9633||t>=9635&&t<=9641||t===9650||t===9651||t===9654||t===9655||t===9660||t===9661||t===9664||t===9665||t>=9670&&t<=9672||t===9675||t>=9678&&t<=9681||t>=9698&&t<=9701||t===9711||t===9733||t===9734||t===9737||t===9742||t===9743||t===9756||t===9758||t===9792||t===9794||t===9824||t===9825||t>=9827&&t<=9829||t>=9831&&t<=9834||t===9836||t===9837||t===9839||t===9886||t===9887||t===9919||t>=9926&&t<=9933||t>=9935&&t<=9939||t>=9941&&t<=9953||t===9955||t===9960||t===9961||t>=9963&&t<=9969||t===9972||t>=9974&&t<=9977||t===9979||t===9980||t===9982||t===9983||t===10045||t>=10102&&t<=10111||t>=11094&&t<=11097||t>=12872&&t<=12879||t>=57344&&t<=63743||t>=65024&&t<=65039||t===65533||t>=127232&&t<=127242||t>=127248&&t<=127277||t>=127280&&t<=127337||t>=127344&&t<=127373||t===127375||t===127376||t>=127387&&t<=127404||t>=917760&&t<=917999||t>=983040&&t<=1048573||t>=1048576&&t<=1114109}function FP(t){return t===12288||t>=65281&&t<=65376||t>=65504&&t<=65510}function LP(t){return t>=4352&&t<=4447||t===8986||t===8987||t===9001||t===9002||t>=9193&&t<=9196||t===9200||t===9203||t===9725||t===9726||t===9748||t===9749||t>=9776&&t<=9783||t>=9800&&t<=9811||t===9855||t>=9866&&t<=9871||t===9875||t===9889||t===9898||t===9899||t===9917||t===9918||t===9924||t===9925||t===9934||t===9940||t===9962||t===9970||t===9971||t===9973||t===9978||t===9981||t===9989||t===9994||t===9995||t===10024||t===10060||t===10062||t>=10067&&t<=10069||t===10071||t>=10133&&t<=10135||t===10160||t===10175||t===11035||t===11036||t===11088||t===11093||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12287||t>=12289&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12591||t>=12593&&t<=12686||t>=12688&&t<=12773||t>=12783&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=94176&&t<=94180||t>=94192&&t<=94198||t>=94208&&t<=101589||t>=101631&&t<=101662||t>=101760&&t<=101874||t>=110576&&t<=110579||t>=110581&&t<=110587||t===110589||t===110590||t>=110592&&t<=110882||t===110898||t>=110928&&t<=110930||t===110933||t>=110948&&t<=110951||t>=110960&&t<=111355||t>=119552&&t<=119638||t>=119648&&t<=119670||t===126980||t===127183||t===127374||t>=127377&&t<=127386||t>=127488&&t<=127490||t>=127504&&t<=127547||t>=127552&&t<=127560||t===127568||t===127569||t>=127584&&t<=127589||t>=127744&&t<=127776||t>=127789&&t<=127797||t>=127799&&t<=127868||t>=127870&&t<=127891||t>=127904&&t<=127946||t>=127951&&t<=127955||t>=127968&&t<=127984||t===127988||t>=127992&&t<=128062||t===128064||t>=128066&&t<=128252||t>=128255&&t<=128317||t>=128331&&t<=128334||t>=128336&&t<=128359||t===128378||t===128405||t===128406||t===128420||t>=128507&&t<=128591||t>=128640&&t<=128709||t===128716||t>=128720&&t<=128722||t>=128725&&t<=128728||t>=128732&&t<=128735||t===128747||t===128748||t>=128756&&t<=128764||t>=128992&&t<=129003||t===129008||t>=129292&&t<=129338||t>=129340&&t<=129349||t>=129351&&t<=129535||t>=129648&&t<=129660||t>=129664&&t<=129674||t>=129678&&t<=129734||t===129736||t>=129741&&t<=129756||t>=129759&&t<=129770||t>=129775&&t<=129784||t>=131072&&t<=196605||t>=196608&&t<=262141}function Fre(t){if(!Number.isSafeInteger(t))throw new TypeError(`Expected a code point, got \`${typeof t}\`.`)}function jS(t,{ambiguousAsWide:e=!1}={}){return Fre(t),FP(t)||LP(t)||e&&PP(t)?2:1}var Lre=new Intl.Segmenter,Mre=/^(?:\p{Default_Ignorable_Code_Point}|\p{Control}|\p{Mark}|\p{Surrogate})+$/v,Ure=/^[\p{Default_Ignorable_Code_Point}\p{Control}\p{Format}\p{Mark}\p{Surrogate}]+/v,qre=/^\p{RGI_Emoji}$/v;function Hre(t){return t.replace(Ure,"")}function Wre(t){return Mre.test(t)}function Qre(t,e){let r=0;if(t.length>1)for(let n of t.slice(1))n>="\uFF00"&&n<="\uFFEF"&&(r+=jS(n.codePointAt(0),e));return r}function $S(t,e={}){if(typeof t!="string"||t.length===0)return 0;let{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:n=!1}=e,i=t;if(n||(i=zf(i)),i.length===0)return 0;let s=0,o={ambiguousAsWide:!r};for(let{segment:a}of Lre.segment(i)){if(Wre(a))continue;if(qre.test(a)){s+=2;continue}let l=Hre(a).codePointAt(0);s+=jS(l,o),s+=Qre(a,o)}return s}function KS({stream:t=process.stdout}={}){return!!(t&&t.isTTY&&process.env.TERM!=="dumb"&&!("CI"in process.env))}var pi=Vt(require("node:process"),1),Gre=3,zS=class{#s=0;start(){this.#s++,this.#s===1&&this.#n()}stop(){if(this.#s<=0)throw new Error("`stop` called more times than `start`");this.#s--,this.#s===0&&this.#e()}#n(){pi.default.platform==="win32"||!pi.default.stdin.isTTY||(pi.default.stdin.setRawMode(!0),pi.default.stdin.on("data",this.#i),pi.default.stdin.resume())}#e(){pi.default.stdin.isTTY&&(pi.default.stdin.off("data",this.#i),pi.default.stdin.pause(),pi.default.stdin.setRawMode(!1))}#i(e){e[0]===Gre&&pi.default.emit("SIGINT")}},jre=new zS,YS=jre;var VS=class{#s=0;#n=!1;#e=0;#i=-1;#d=0;#f=0;#t;#o;#r;#p;#_;#a;#h;#l;#g;#u;#c;color;constructor(e){typeof e=="string"&&(e={text:e}),this.#t={color:"cyan",stream:Yf.default.stderr,discardStdin:!0,hideCursor:!0,...e},this.color=this.#t.color,this.spinner=this.#t.spinner,this.#_=this.#t.interval,this.#r=this.#t.stream,this.#a=typeof this.#t.isEnabled=="boolean"?this.#t.isEnabled:KS({stream:this.#r}),this.#h=typeof this.#t.isSilent=="boolean"?this.#t.isSilent:!1,this.text=this.#t.text,this.prefixText=this.#t.prefixText,this.suffixText=this.#t.suffixText,this.indent=this.#t.indent,Yf.default.env.NODE_ENV==="test"&&(this._stream=this.#r,this._isEnabled=this.#a,Object.defineProperty(this,"_linesToClear",{get(){return this.#s},set(r){this.#s=r}}),Object.defineProperty(this,"_frameIndex",{get(){return this.#i}}),Object.defineProperty(this,"_lineCount",{get(){return this.#e}}))}get indent(){return this.#l}set indent(e=0){if(!(e>=0&&Number.isInteger(e)))throw new Error("The `indent` option must be an integer from 0 and up");this.#l=e,this.#m()}get interval(){return this.#_??this.#o.interval??100}get spinner(){return this.#o}set spinner(e){if(this.#i=-1,this.#_=void 0,typeof e=="object"){if(!Array.isArray(e.frames)||e.frames.length===0||e.frames.some(r=>typeof r!="string"))throw new Error("The given spinner must have a non-empty `frames` array of strings");if(e.interval!==void 0&&!(Number.isInteger(e.interval)&&e.interval>0))throw new Error("`spinner.interval` must be a positive integer if provided");this.#o=e}else if(!Kf())this.#o=$f.line;else if(e===void 0)this.#o=$f.dots;else if(e!=="default"&&$f[e])this.#o=$f[e];else throw new Error(`There is no built-in spinner named '${e}'. See https://github.com/sindresorhus/cli-spinners/blob/main/spinners.json for a full list.`)}get text(){return this.#g}set text(e=""){this.#g=e,this.#m()}get prefixText(){return this.#u}set prefixText(e=""){this.#u=e,this.#m()}get suffixText(){return this.#c}set suffixText(e=""){this.#c=e,this.#m()}get isSpinning(){return this.#p!==void 0}#v(e,r,n=!1){let i=typeof e=="function"?e():e;return typeof i=="string"&&i!==""?n?r+i:i+r:""}#E(e=this.#u,r=" "){return this.#v(e,r,!1)}#y(e=this.#c,r=" "){return this.#v(e,r,!0)}#A(e,r){let n=0;for(let i of zf(e).split(`
`))n+=Math.max(1,Math.ceil($S(i)/r));return n}#m(){let e=this.#r.columns??80,r=typeof this.#u=="function"?"":this.#u,n=typeof this.#c=="function"?"":this.#c,i=typeof r=="string"&&r!==""?r+" ":"",s=typeof n=="string"&&n!==""?" "+n:"",a=" ".repeat(this.#l)+i+"-"+(typeof this.#g=="string"?" "+this.#g:"")+s;this.#e=this.#A(a,e)}get isEnabled(){return this.#a&&!this.#h}set isEnabled(e){if(typeof e!="boolean")throw new TypeError("The `isEnabled` option must be a boolean");this.#a=e}get isSilent(){return this.#h}set isSilent(e){if(typeof e!="boolean")throw new TypeError("The `isSilent` option must be a boolean");this.#h=e}frame(){let e=Date.now();(this.#i===-1||e-this.#d>=this.interval)&&(this.#i=++this.#i%this.#o.frames.length,this.#d=e);let{frames:r}=this.#o,n=r[this.#i];this.color&&(n=CP[this.color](n));let i=this.#E(this.#u," "),s=typeof this.text=="string"?" "+this.text:"",o=this.#y(this.#c," ");return i+n+s+o}clear(){if(!this.#a||!this.#r.isTTY)return this;this.#r.cursorTo(0);for(let e=0;e<this.#s;e++)e>0&&this.#r.moveCursor(0,-1),this.#r.clearLine(1);return(this.#l||this.#f!==this.#l)&&this.#r.cursorTo(this.#l),this.#f=this.#l,this.#s=0,this}render(){if(!this.#a||this.#h)return this;this.clear();let e=this.frame(),r=this.#r.columns??80,n=this.#A(e,r),i=this.#r.rows;if(i&&i>1&&n>i){let s=e.split(`
`),o=i-1;e=[...s.slice(0,o),"... (content truncated to fit terminal)"].join(`
`)}return this.#r.write(e),this.#s=this.#A(e,r),this}start(e){if(e&&(this.text=e),this.#h)return this;if(!this.#a){let r=" ".repeat(this.#l)+this.#E(this.#u," ")+(this.text?`- ${this.text}`:"")+this.#y(this.#c," ");return r.trim()!==""&&this.#r.write(r+`
`),this}return this.isSpinning?this:(this.#t.hideCursor&&HS.hide(this.#r),this.#t.discardStdin&&Yf.default.stdin.isTTY&&(this.#n=!0,YS.start()),this.render(),this.#p=setInterval(this.render.bind(this),this.interval),this)}stop(){return clearInterval(this.#p),this.#p=void 0,this.#i=0,this.#a&&(this.clear(),this.#t.hideCursor&&HS.show(this.#r)),this.#t.discardStdin&&Yf.default.stdin.isTTY&&this.#n&&(YS.stop(),this.#n=!1),this}succeed(e){return this.stopAndPersist({symbol:Ea.success,text:e})}fail(e){return this.stopAndPersist({symbol:Ea.error,text:e})}warn(e){return this.stopAndPersist({symbol:Ea.warning,text:e})}info(e){return this.stopAndPersist({symbol:Ea.info,text:e})}stopAndPersist(e={}){if(this.#h)return this;let r=e.prefixText??this.#u,n=this.#E(r," "),i=e.symbol??" ",s=e.text??this.text,a=typeof s=="string"?(i?" ":"")+s:"",l=e.suffixText??this.#c,u=this.#y(l," "),c=n+i+a+u+`
`;return this.stop(),this.#r.write(c),this}};function ya(t){return new VS(t)}var ur=new class{constructor(){this.start=t=>{this.spinner=ya(t?`${t} ...`:void 0).start()};this.succeed=t=>{this.spinner||(this.spinner=ya().start()),this.spinner.succeed(t)};this.fail=t=>{this.spinner||(this.spinner=ya().start()),this.spinner.fail(t)};this.info=t=>{this.spinner||(this.spinner=ya().start()),this.spinner.info(t)};this.change=t=>{this.spinner||(this.spinner=ya().start()),this.spinner.text=t}}};var xg=class{constructor(e){this.deployFolder=".dd-cli";this.serviceFolder="";this.deploy=async e=>{this.serviceFolder="";for(let[r,n]of Object.entries(e.getServices())){this.serviceFolder=fu.default.join(process.cwd(),this.deployFolder,r),hu.default.mkdirSync(this.serviceFolder,{recursive:!0});let i=await this.getNextVersion(r),s=`${r}-${i}`;if(!this.processType(n.type,{name:r,version:String(i),handle:n.handler}))return console.log("error, tipo invalido");let o=await this.createImage({runtime:n.runtime,handler:n.handler,name:r,app:this.serviceFolder,version:String(i)});await this.clean(r),await this.start(String(o),s,n.spec||{})}};this.ps=async e=>{try{let r=await this.docker.listContainers({all:e.all});if(r.length===0){console.log(Nr.default.yellow("No se encontraron contenedores."));return}let n=new UP.default({head:[Nr.default.cyan("ID"),Nr.default.cyan("Nombre"),Nr.default.cyan("Imagen"),Nr.default.cyan("Estado"),Nr.default.cyan("Status")]});r.forEach(i=>{n.push([i.Id.substring(0,12),i.Names.map(s=>s.replace("/","")).join(", "),i.Image,i.State,i.Status])}),console.log(n[1].toString())}catch(r){V1(r)}};this.start=async(e,r,n)=>{try{console.log(Nr.default.blue(`Iniciando contenedor '${r}' con la image '${e}'...`));let i=Array.isArray(n.network)?n.network:[n.network];if(i.at(0))for(let a of i)await this.ensureNetworkExists(a);let s={Image:e,name:r,Hostname:n.hostname||r,ExposedPorts:n.port?{[`${n.port}/tcp`]:{}}:{},Labels:{...n.label,"dd-cli":"0.0.0"},HostConfig:{PortBindings:n.port?{[`${n.port}/tcp`]:[{HostPort:`${n.port}`}]}:{},RestartPolicy:{Name:n.restart},CpuPeriod:1e5,CpuQuota:1e5*parseFloat(n.cpus),Memory:parseInt(n.memory)*1024*1024,ExtraHosts:n["add-host"],NetworkMode:i?.[0]||null}},o=await this.docker.createContainer(s);for(let a=1;a<i.length;a++){let l=i[a];await this.docker.getNetwork(l).connect({Container:o.id}),ur.succeed(`Contenedor '${o.id.substring(0,12)}' conectado a la red '${l}'.`)}await o.start(),console.log(Nr.default.green(`Contenedor '${e}' iniciado exitosamente.`))}catch(i){V1(i)}};this.getNextVersion=async e=>{console.log("\u2139\uFE0F  Obteniendo siguiente version para el despliegue"),ur.start(`Buscando ultima versiones de '${e}'`);let r=0,n=await this.docker.listContainers({all:!0,filters:{name:[`^/${e}.*`]}});if(!n.at(0))return ur.succeed(" -> No se encontraron otras versiones."),r;for(let i of n){let s=i.Names.at(0),o=Number(s?.split("-").at(1));o>r&&(r=o)}return ur.succeed(`Ultima version encontrada ${r}`),r+1};this.processType=(e,r)=>{let n={node:()=>{let i="package.json",s=fu.default.join(process.cwd(),i),o={name:r.name,version:r.version,main:r.handle,dependencies:{}};if(hu.default.existsSync(s)){let a=hu.default.readFileSync(s,"utf-8");o=JSON.parse(a)}return o.description||=`Despliegue de ${r.name}`,hu.default.writeFileSync(fu.default.join(this.serviceFolder,i),JSON.stringify(o,null,2)),!0}};return n[e]&&n[e]()};this.createImage=async e=>{console.log("\u2139\uFE0F  Creando nueva imagen para el despliegue");let r=hP[e.runtime];if(!r)return console.log("error al obtener template");for(let o of["handler"])r.includes(`{${o}}`)&&(r=r.replaceAll(`{${o}}`,e[o]));hu.default.writeFileSync(fu.default.join(this.serviceFolder,"Dockerfile"),r);let n=`${e.name}:${e.version}`.toLowerCase(),i={t:n,dockerfile:"Dockerfile",labels:{"dd-cli":"0.0.0"},forcerm:!0},s=qP.pack(this.serviceFolder,{map:o=>(o.name==="Dockerfile"||(o.name=fu.default.join("app",o.name)),o)});ur.start("Compilando imagen de Docker");try{let o=await this.docker.buildImage(s,i);return await new Promise((a,l)=>{this.docker.modem.followProgress(o,(u,c)=>{if(u)return l(u);a(c)})}),ur.succeed(`Imagen '${n}' compilada exitosamente.`),n}catch(o){let a=o;return ur.fail(`Error al compilar la imagen: ${a.message}`),""}};this.clean=async(e,r=5)=>{console.log("\u2139\uFE0F  Obteniendo contenedores para limpieza "),ur.succeed(`Buscando contenedores con prefijo '${e}' para limpiar...`);let n={name:[`^/${e}.*`]};try{let i=await this.docker.listContainers({all:!0,filters:n});if(!i.at(0)){ur.info(`No se encontraron contenedores que coincidan con el nombre '${e}'.`);return}console.log("\u2139\uFE0F  Deteniendo contenedores en ejecuci\xF3n");for(let o of i){let a=o.Id,l=o.Names[0].substring(1),u=this.docker.getContainer(a);o.State==="running"&&(ur.succeed(`Deteniendo contenedor: ${l} (${a.substring(0,12)})`),await u.stop())}i.sort((o,a)=>a.Created-o.Created);let s=i.slice(4);if(!s.at(0)){ur.succeed(Nr.default.green(`No hay suficientes contenedores para eliminar. Se conservan los ${r} m\xE1s recientes.`));return}ur.succeed(`Se encontraron ${i.length} contenedores. Eliminando ${s.length} m\xE1s antiguos...`);for(let o of s){let a=o.Id,l=o.Names[0].substring(1),u=this.docker.getContainer(a);ur.change(`Eliminando contenedor: ${l} (${a.substring(0,12)})`),await u.remove({force:!0}),await this.docker.getImage(o.Image).remove({force:!0})}ur.succeed(Nr.default.green(`Proceso completado. Se eliminaron ${s.length} contenedores.`))}catch(i){ur.fail(Nr.default.red(`Ocurri\xF3 un error al limpiar los contenedores: ${i}`)),console.error(i)}return!0};this.ensureNetworkExists=async e=>{try{(await this.docker.listNetworks({filters:{name:[e]}})).length===0?(ur.fail(`Red '${Nr.default.cyan(e)}' no encontrada. Cre\xE1ndola...`),await this.docker.createNetwork({Name:e,CheckDuplicate:!0}),ur.succeed(Nr.default.green(`Red '${Nr.default.cyan(e)}' creada.`))):ur.info(`Red '${Nr.default.cyan(e)}' ya existe.`)}catch(r){throw ur.fail(Nr.default.red(`Error al verificar/crear la red '${e}': ${r.message}`)),r}};this.docker=new MP.default(e)}};var HP={docker:xg};var Es=new gC;Es.version("1.0.0").description("Un CLI simple para gestionar Docker local");Es.option("-f, --file <path>","Ruta del archivo para leer los datos","stack.yaml").option("-p, --profile <str>","profileprofile","default");Es.parse(process.argv);var WP=new oh(Es.opts()),Dg=WP.getProfile();Dg||(console.error(`Error al obtener profile: ${Es.opts().profile}`),process.exit(1));var QP=HP[Dg.mode];QP||(console.error(`Error al obtener profile: ${Es.opts().profile}`),process.exit(1));var GP=new QP(Dg.protocol=="local"?void 0:Dg);Es.command("ps").description("Listar contenedores").option("-a, --all","Mostrar todos los contenedores (incluidos detenidos)",!1).option("-o","oooo",!1).action(GP.ps);Es.command("deploy").description("deploy").option("-f, --file <path>","Ruta del archivo para leer el nombre").action(()=>GP.deploy(WP));Es.parse(process.argv);
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@balena/dockerignore/ignore.js:
  (**
   * @license
   * Copyright 2020 Balena Ltd.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *    http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * ------------------------------------------------------------------------
   *
   * Copyright 2018 Zeit, Inc.
   * Licensed under the MIT License. See file LICENSE.md for a full copy.
   *
   * ------------------------------------------------------------------------
   *)

@grpc/proto-loader/build/src/util.js:
@grpc/proto-loader/build/src/index.js:
@grpc/proto-loader/build/src/util.js:
@grpc/proto-loader/build/src/index.js:
  (**
   * @license
   * Copyright 2018 gRPC authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   *)

long/umd/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
